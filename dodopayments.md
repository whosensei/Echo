# Create Addon
Source: https://docs.dodopayments.com/api-reference/addons/create-addon

post /addons
Create a new addon product that can be attached to your main subscription products



# Get Addon
Source: https://docs.dodopayments.com/api-reference/addons/get-addon

get /addons/{id}
Retrieve detailed information about a specific addon using its unique identifier



# List Addons
Source: https://docs.dodopayments.com/api-reference/addons/list-addons

get /addons
Retrieve a comprehensive list of all available addons



# Update Addon
Source: https://docs.dodopayments.com/api-reference/addons/update-addon

patch /addons/{id}
Modify the details of an existing addon using its unique identifier



# Update Addon Images
Source: https://docs.dodopayments.com/api-reference/addons/update-addon-images

put /addons/{id}/images
Update images for an existing addon



# Create Brand
Source: https://docs.dodopayments.com/api-reference/brands/create-brand

post /brands
Create a new brand.



# Get Brand
Source: https://docs.dodopayments.com/api-reference/brands/get-brand

get /brands/{id}
Retrieve a specific brand by ID.



# List Brands
Source: https://docs.dodopayments.com/api-reference/brands/list-brands

get /brands
List all brands.



# Update Brand
Source: https://docs.dodopayments.com/api-reference/brands/update-brand

patch /brands/{id}
Update an existing brand's details.



# Update Brand Images
Source: https://docs.dodopayments.com/api-reference/brands/update-brand-images

put /brands/{id}/images
Update the images associated with a brand.



# Create Checkout Session
Source: https://docs.dodopayments.com/api-reference/checkout-sessions/create

post /checkouts
Unified endpoint for creating checkout sessions for all types of billing requirements.



# Get Checkout Session
Source: https://docs.dodopayments.com/api-reference/checkout-sessions/get-checkouts

get /checkouts/{id}
Retrieve details of a specific checkout session by its ID.



# Create Customer
Source: https://docs.dodopayments.com/api-reference/customers/create-customer

post /customers
Create a new customer in your Dodo Payments account.



# Create Customer Portal Session
Source: https://docs.dodopayments.com/api-reference/customers/create-customer-portal-session

post /customers/{customer_id}/customer-portal/session
Create a session of the Customer Portal for a specific customer.



# Get Customer Wallets
Source: https://docs.dodopayments.com/api-reference/customers/get-customer-wallets

get /customers/{customer_id}/wallets
Retrieve wallets associated with a specific customer.



# List Customer Wallet Ledger Entries
Source: https://docs.dodopayments.com/api-reference/customers/get-customer-wallets-ledger-entries

get /customers/{customer_id}/wallets/ledger-entries
List wallet ledger entries for a specific customer. Supports pagination and currency filter.



# List Customers
Source: https://docs.dodopayments.com/api-reference/customers/get-customers

get /customers
Get a list of all customers associated with your account.



# Get Customer Detail
Source: https://docs.dodopayments.com/api-reference/customers/get-customers-1

get /customers/{customer_id}
Get detailed information about a specific customer.



# Patch Customer
Source: https://docs.dodopayments.com/api-reference/customers/patch-customer

patch /customers/{customer_id}
Update a customer's information.



# Create Customer Wallet Ledger Entry
Source: https://docs.dodopayments.com/api-reference/customers/post-customer-wallets-ledger-entries

post /customers/{customer_id}/wallets/ledger-entries
Create a credit or debit ledger entry in a customer's wallet.



# Create Discount
Source: https://docs.dodopayments.com/api-reference/discounts/create-discount

post /discounts
Create a discount for your account.



# Delete Discount
Source: https://docs.dodopayments.com/api-reference/discounts/delete-discount

delete /discounts/{discount_id}
Delete a discount from your account.



# List Discounts
Source: https://docs.dodopayments.com/api-reference/discounts/list-discounts

get /discounts
Retrieve a list of all discounts associated with your account.



# Update Discount
Source: https://docs.dodopayments.com/api-reference/discounts/update-discount

patch /discounts/{discount_id}
Update a discount in your account.



# Validate Discount
Source: https://docs.dodopayments.com/api-reference/discounts/validate-discount

get /discounts/{discount_id}
Validate a discount code to check if it is valid and can be applied to the current cart.



# List Disputes
Source: https://docs.dodopayments.com/api-reference/disputes/get-disputes

get /disputes
Get a list of all disputes associated with your account.



# Get Dispute Detail
Source: https://docs.dodopayments.com/api-reference/disputes/get-disputes-1

get /disputes/{dispute_id}
Get detailed information about a specific dispute.



# Error Codes
Source: https://docs.dodopayments.com/api-reference/error-codes

Learn more about error codes and how to resolve them in Dodo Payments API.

## Overview

Dodo Payments API uses standard HTTP status codes and custom error codes to indicate the success or failure of API requests. When an error occurs, the API returns an appropriate HTTP status code and a JSON response containing detailed information about the error.

Each error response includes:

* An HTTP status code indicating the general category of the error
* A specific error code that identifies the exact nature of the error
* A human-readable error message explaining what went wrong
* Additional details about the error when applicable

Understanding these error codes and their meanings is crucial for:

* Debugging integration issues
* Implementing proper error handling in your application
* Providing meaningful feedback to end users
* Maintaining a robust payment processing system

The following sections provide detailed information about standard HTTP status codes and specific error codes you may encounter when using the Dodo Payments API.

## Standard API Error Codes

| Error code | HTTP Status           | Description                                                          |
| ---------- | --------------------- | -------------------------------------------------------------------- |
| **400**    | Bad Request           | The request was malformed or contained invalid parameters            |
| **401**    | Unauthorized          | Authentication failed or API key is invalid                          |
| **403**    | Forbidden             | The API key doesn't have permission to access the requested resource |
| **404**    | Not Found             | The requested resource doesn't exist                                 |
| **405**    | Method Not Allowed    | The HTTP method is not supported for this endpoint                   |
| **409**    | Conflict              | The request conflicts with the current state of the resource         |
| **422**    | Unprocessable Entity  | The request was well-formed but contained semantic errors            |
| **429**    | Too Many Requests     | Rate limit exceeded                                                  |
| **500**    | Internal Server Error | An unexpected error occurred on our servers                          |
| **502**    | Bad Gateway           | The server received an invalid response from an upstream server      |
| **503**    | Service Unavailable   | The service is temporarily unavailable                               |
| **504**    | Gateway Timeout       | The server timed out while waiting for an upstream response          |

## Error Response Format

When an error occurs, the API returns a JSON response with the following structure:

```json  theme={null}
{
  "code": "UNSUPPORTED_COUNTRY",
  "message": "Country AI currently not supported"
}
```

## Error Codes Reference

* `ACTIVATION_LIMIT_LESS_THAN_CURRENT_AMOUNT`
  * **Trigger:** License-key activations: new limit \< existing instance count
  * **Message:** New activation limit cannot be less than current instances count

* `ADDONS_IN_USAGE_BASED_BILLING_NOT_SUPPORTED`
  * **Trigger:** Attempt to add addons to usage-based billing subscriptions
  * **Message:** Addons in Subscriptions are not supported for Usage Based Billing

* `ADDONS_NOT_ALLOWED_FOR_ON_DEMAND`
  * **Trigger:** Attempt to add addons to on-demand subscriptions
  * **Message:** Addons are not allowed for on demand subscriptions

* `BRAND_MISMATCH`
  * **Trigger:** Cart items belong to different brands
  * **Message:** All items in the product cart should belong to the same brand

* `BRAND_NOT_ENABLED`
  * **Trigger:** Brand is disabled or not active
  * **Message:** Brand provided is not enabled

* `BRAND_SUBMISSION_NOT_ENABLED`
  * **Trigger:** Brand verification resubmission feature not enabled
  * **Message:** Brand verificatin resubmission is not enabled

* `CHARGE_NOT_ALLOWED_FOR_SCHEDULED_CANCELLATION`
  * **Trigger:** Attempt to charge subscription scheduled for cancellation
  * **Message:** Subscription scheduled for cancellation

* `CHECKOUT_SESSION_CONSUMED`
  * **Trigger:** Checkout session has already generated a payment
  * **Message:** Checkout session has already been consumed

* `DISCOUNT_CODE_ALREADY_EXISTS`
  * **Trigger:** Duplicate discount code creation
  * **Message:** Discount Code already exists

* `DISCOUNT_CODE_EXPIRED`
  * **Trigger:** Discount code past its `expires_at` date
  * **Message:** Discount code expired

* `DISCOUNT_CODE_USAGE_LIMIT_EXCEEDED`
  * **Trigger:** Discount reused after `usage_limit` reached
  * **Message:** Usage limit cannot be less than times\_used / Discount code hit usage limit

* `DISCOUNT_NOT_AVAILABLE_FOR_ON_DEMAND`
  * **Trigger:** Code applied to on-demand subscription
  * **Message:** Discount coupon not available for on demand subscriptions

* `DISCOUNT_NOT_AVAILABLE_FOR_PRODUCT`
  * **Trigger:** Code applied to unrelated product(s)
  * **Message:** Discount coupon not available for this product

* `DUPLICATE_LINE_ITEMS_IN_REQUEST`
  * **Trigger:** Same `item_id` appears twice in `items[]`
  * **Message:** Duplicate item\_ids specified in items array

* `DUPLICATE_METER_IDS_IN_REQUEST`
  * **Trigger:** Same meter ID appears multiple times in request
  * **Message:** Duplicate Meter Ids are not allowed

* `EXCHANGE_RATE_NOT_FOUND`
  * **Trigger:** No FX rate for `from → to` currency pair
  * **Message:** Exchange rate not found to convert from Currency to Currency

* `EXISTING_REFUND_REQUEST_PROCESSING`
  * **Trigger:** Previous refund request still being processed
  * **Message:** A refund request with status "Pending" is still being processed

* `INACTIVE_LICENSE_KEY`
  * **Trigger:** Key status ≠ `ACTIVE`
  * **Message:** License key is not active

* `INACTIVE_SUBSCRIPTION_PLAN_CHANGE_NOT_SUPPORTED`
  * **Trigger:** Plan change on inactive subscription
  * **Message:** Changing plans is not supported for inactive subscriptions

* `INSUFFICIENT_WALLET_FUNDS`
  * **Trigger:** Wallet balance \< debit amount
  * **Message:** Insufficient funds in wallet

* `INTEGER_CONVERSION_FAILURE`
  * **Trigger:** Any integer ↔ string/decimal conversion that fails server-side
  * **Message:** Integer Conversion Failure

* `INTERNAL_SERVER_ERROR`
  * **Trigger:** Uncaught exceptions; you should log details server-side
  * **Message:** *No public message (generic 500)*

* `INVALID_DISCOUNT_CODE`
  * **Trigger:** Code does not exist / not applicable
  * **Message:** Invalid Discount Code / Discount Code cannot be applied to any product in the cart

* `INVALID_PERCENTAGE`
  * **Trigger:** Percent amount > 100% (or 10,000 basis points)
  * **Message:** Percentage amount cannot be more than 10000 / Discount code amount cannot be more than 100%

* `INVALID_QUANTITY`
  * **Trigger:** Invalid quantity specified for usage-based pricing
  * **Message:** Only 1 quantity allowed in usage based price products

* `INVALID_QUERY_PARAMS`
  * **Trigger:** Mutually exclusive / malformed query parameters
  * **Message:** Query params should only contain either time\_frame or (start, end)

* `INVALID_REQUEST_BODY`
  * **Trigger:** Malformed JSON or schema violation
  * **Message:** Your request body is invalid. Please check your request headers and object.

* `INVALID_REQUEST_PARAMETERS`
  * **Trigger:** Semantics wrong (e.g. date in past)
  * **Message:** Cannot change next\_billing\_date to past time

* `INVALID_SUGGESTED_PRICE`
  * **Trigger:** PWYW price \< minimum allowed price
  * **Message:** Suggested Price cannot be lower than minimum price. In case of pay what you want, price is considered as minimum accepted amount

* `INVALID_TAX_ID`
  * **Trigger:** VAT/GST/TIN failed validation
  * **Message:** Tax Id is invalid

* `LICENSE_KEY_LIMIT_REACHED`
  * **Trigger:** Activations = limit
  * **Message:** License key activation limit reached

* `LICENSE_KEY_NOT_FOUND`
  * **Trigger:** Instance ID or key ID invalid
  * **Message:** License key instance not found or does not belong to this license key

* `LINE_ITEM_FULLY_REFUNDED`
  * **Trigger:** Attempt to refund already fully refunded line item
  * **Message:** Line item {id} has been fully refunded cannot be refunded further.

* `LINE_ITEM_NOT_FOUND`
  * **Trigger:** Item ID not part of the referenced payment
  * **Message:** Line item {id} not found in payment

* `LINE_ITEM_PRORATED`
  * **Trigger:** Refund or update attempted on a prorated line
  * **Message:** Line item {id} cannot be refunded because its prorated

* `LINE_ITEM_REFUND_AMOUNT_TOO_HIGH`
  * **Trigger:** Refund amount > paid amount (tax incl.)
  * **Message:** Line item {id} requested refund amount including tax is {amount} which is above the paid amount {amount}

* `LINE_ITEM_REFUND_AMOUNT_TOO_LOW`
  * **Trigger:** Refund amount below minimum threshold
  * **Message:** Line item {id} requested refund amount is {amount} which is too low

* `MAXIMUM_KEYS_REACHED`
  * **Trigger:** Metadata / custom-fields exceeded 50 pairs
  * **Message:** Exceeds 50 key-value pairs

* `MERCHANT_NOT_LIVE`
  * **Trigger:** Business still in test/sandbox mode
  * **Message:** Merchant is not live

* `METER_IS_DELETED`
  * **Trigger:** Attempt to use deleted meter
  * **Message:** The Meter is already been deleted

* `MISSING_ADDON_IDS`
  * **Trigger:** `addon_id` list empty or unknown IDs
  * **Message:** One or more product IDs do not exist: {id}

* `MISSING_METER_IDS`
  * **Trigger:** Meter ID list empty or contains invalid IDs
  * **Message:** One or more meter IDs do not exist: {id}

* `MISSING_PRODUCT_INFORMATION`
  * **Trigger:** Product exists but mandatory info missing
  * **Message:** Product {id} exists but other mandatory information is missing or invalid

* `NEGATIVE_BALANCE_ADJUSTMENT`
  * **Trigger:** Attempt to make wallet balance negative
  * **Message:** Wallet balance is not allowed to be made negative

* `NO_ELIGIBLE_PAYMENT_METHODS`
  * **Trigger:** After filtering, nothing left
  * **Message:** No eligible payment methods found

* `NO_EXPIRY_ON_SUBSCRIPTION_LICENSE_KEYS`
  * **Trigger:** Attempt to set expiry on sub-based key
  * **Message:** Cannot set expiry date for subscription-based license key

* `NOT_FOUND`
  * **Trigger:** Generic 404 for any missing resource
  * **Message:** Item not found *(or more specific)*

* `ON_DEMAND_PLAN_CHANGE_NOT_SUPPORTED`
  * **Trigger:** Plan swap not allowed for on-demand
  * **Message:** Changing plans is not supported for on demand subscriptions

* `ON_DEMAND_SUBSCRIPTIONS_NOT_ENABLED`
  * **Trigger:** Business has feature flag off
  * **Message:** On demand subscriptions not enabled for this business

* `ON_DEMAND_USAGE_BASED_BILLING_NOT_SUPPORTED`
  * **Trigger:** Attempt to use on-demand with usage-based billing
  * **Message:** On Demand Subscriptions are not supported for Usage Based Billing

* `PAY_AS_YOU_WANT_AMOUNT_REQUIRED`
  * **Trigger:** Price missing for PWYW product
  * **Message:** Amount is mandatory for pay as you want product

* `PAYMENT_ALREADY_REFUNDED`
  * **Trigger:** Duplicate refund
  * **Message:** This payment has already been refunded

* `PAYMENT_HAS_BEEN_REFUNDED`
  * **Trigger:** Payment has been fully refunded
  * **Message:** The Payment ID has been fully refunded.

* `PAYMENT_NOT_SUCCEEDED`
  * **Trigger:** Attempt to refund/process unsuccessful payment
  * **Message:** The provided payment has not succeeded

* `PLAN_CHANGE_NOT_ALLOWED_FOR_SCHEDULED_CANCELLATION`
  * **Trigger:** Plan change attempted on subscription scheduled for cancellation
  * **Message:** Subscription scheduled for cancellation

* `PREVIOUS_PAYMENT_PENDING`
  * **Trigger:** Attempt to create charge while previous is in non-terminal state
  * **Message:** Cannot create new charge as previous payment is not successful yet

* `PRODUCT_CART_EMPTY`
  * **Trigger:** Empty product cart submitted
  * **Message:** product\_cart is empty

* `PRODUCT_IS_DELETED`
  * **Trigger:** Product soft-deleted
  * **Message:** *No messages*

* `REFUND_AMOUNT_EXCEEDS_PAID_AMOUNT`
  * **Trigger:** Aggregate refund amount > paid amount
  * **Message:** The calculated refund amount is larger than the paid amount

* `REFUND_WINDOW_EXPIRED`
  * **Trigger:** Outside allowable refund window
  * **Message:** Refunds cannot be initiated {days} days after payment creation. Contact [support@dodopayments.com](mailto:support@dodopayments.com).

* `REQUEST_AMOUNT_BELOW_MINIMUM`
  * **Trigger:** Amount \< product minimum
  * **Message:** Amount cannot be less than minimum amount specified for the product

* `SUBSCRIPTION_EXPIRED`
  * **Trigger:** Billing past `ends_at`
  * **Message:** Subscription expired cannot create new charges

* `SUBSCRIPTION_INACTIVE`
  * **Trigger:** Status ≠ `ACTIVE`
  * **Message:** Subscription is not active

* `SUBSCRIPTION_NOT_ON_DEMAND`
  * **Trigger:** Expected on-demand but got fixed interval
  * **Message:** Subscription is already not on demand

* `SUBSCRIPTION_PAYMENT_RETRY_LIMIT_EXCEEDED`
  * **Trigger:** Subscription payment retries exceeded maximum attempts
  * **Message:** Maximum retry limit of 10 attempts exceeded for this subscription

* `TOO_MANY_REQUESTS`
  * **Trigger:** 429 rate-limit
  * **Message:** *No messages*

* `TOTAL_PAYMENT_AMOUNT_BELOW_MINIMUM_AMOUNT`
  * **Trigger:** Combined cart total \< gateway minimum
  * **Message:** Minimum amount of {display_str} is required to process payment

* `UNABLE_TO_EDIT_PRIMARY_BRAND`
  * **Trigger:** Attempt to update primary brand via regular API
  * **Message:** Primary brand cannot be updated via this API endpoint.

* `UNAUTHORIZED`
  * **Trigger:** No API key or invalid token / scope
  * **Message:** You are not authorised to perform this action

* `UNSUPPORTED_ACTION`
  * **Trigger:** Unsupported action for resource type
  * **Message:** Changing plans for usage based subscriptions is not supported

* `UNSUPPORTED_BILLING_CURRENCY`
  * **Trigger:** Subscriptions restricted to USD
  * **Message:** Non USD billing currency is not supported for subscriptions

* `UNSUPPORTED_COUNTRY`
  * **Trigger:** Geo not yet supported
  * **Message:** Country {country_name} currently not supported

* `UNSUPPORTED_CURRENCY`
  * **Trigger:** Product or addon currency invalid
  * **Message:** Currency is not currently supported / Only USD and INR products supported currently / Only USD and INR supported for addon price / Can only request USD or INR for billing\_currency / Currency Not Supported / Unexpected currency for Indian card subscripitons

* `UNSUPPORTED_DISCOUNT_TYPE`
  * **Trigger:** Flat-amount discounts, etc., not yet live
  * **Message:** Only percentage discount codes are supported for now

* `UNSUPPORTED_PAYMENT_CURRENCY`
  * **Trigger:** Payment currency blocked for connector
  * **Message:** INR transaction is not supported for this transaction

* `UNSUPPORTED_TAX_CATEGORY`
  * **Trigger:** Tax category string not in enum
  * **Message:** Category {category} currently not supported

* `UNSUCCESSFUL_PAYMENT_ID`
  * **Trigger:** Payment ID references unsuccessful payment
  * **Message:** The Payment ID has an unsuccessful status.

* `ZERO_AMOUNT_PAYMENT_REFUND_NOT_ALLOWED`
  * **Trigger:** Attempt to refund zero-amount payment
  * **Message:** Cannot refund a payment with zero currency amount

## Best Practices

1. Always handle errors gracefully in your application
2. Implement proper error logging
3. Use appropriate error messages for end users
4. Implement retry logic for transient errors
5. Contact support for unresolved issues

## Support

For additional help with error codes or integration issues, please contact our support team at [support@dodopayments.com](mailto:support@dodopayments.com).


# Introduction
Source: https://docs.dodopayments.com/api-reference/introduction

The Dodo Payments API provides comprehensive endpoints for payment processing, subscription management, and digital product delivery. Our RESTful API follows industry standards with detailed responses for all operations.

<Card title="SDKs & Libraries" icon="code" href="/developer-resources/dodo-payments-sdks">
  Accelerate your integration by using official SDKs for <strong>TypeScript</strong>, <strong>Python</strong>, <strong>Go</strong>, <strong>PHP</strong>, <strong>Java</strong>, <strong>Kotlin</strong>, <strong>C#</strong>, <strong>Ruby</strong>, and <strong>React Native</strong>. These libraries simplify API requests, authentication, and error handling, letting you focus on building great payment experiences.
</Card>

## Environment URLs

* **Test Mode**: [`https://test.dodopayments.com`](https://test.dodopayments.com)
* **Live Mode**: [`https://live.dodopayments.com`](https://live.dodopayments.com)

<Note>
  Learn more about [Test Mode vs Live Mode](/miscellaneous/test-mode-vs-live-mode).
</Note>

## API Key Management and Authentication

<Steps>
  <Step title="Access API Keys">
    Navigate to **Developer → API Keys** in your dashboard to manage your keys.
  </Step>

  <Step title="Generate a New Key">
    Select **Add API Key**, provide a descriptive name, and generate your key.
  </Step>

  <Step title="Store Your Key Securely">
    Copy the generated key immediately and ensure it is stored securely.
  </Step>

  <Step title="Authenticate Your API Requests">
    Use your API keys to authenticate all requests. Apply the following authorization format:

    ```bash  theme={null}
    Authorization: Bearer YOUR_API_KEY
    ```

    <Warning>
      Never expose your secret API keys in client-side code or public repositories.
    </Warning>
  </Step>
</Steps>

## Response Format

<CodeGroup>
  ```json Success Response theme={null}
  {
    "id": "pay_1234567890",
    "status": "completed",
    "amount": 2999,
    "currency": "USD",
    "created_at": "2024-01-15T10:30:00Z"
  }
  ```

  ```json Error Response theme={null}
  {
    "code": "INVALID_REQUEST",
    "message": "The request contains invalid parameters"
  }
  ```
</CodeGroup>

## Rate Limits

* **Standard**: 1000 requests per minute per business
* **Burst**: Up to 100 requests per second

<Note>
  Monitor `X-RateLimit-Remaining` header to track usage.
</Note>

## Error Handling

To effectively manage errors, consult the *Error Codes* and *Transaction Failures* sections for detailed guidance.

<CardGroup cols={2}>
  <Card title="Error Codes" icon="triangle-exclamation" href="/api-reference/error-codes">
    Delve into comprehensive error details and their resolutions.
  </Card>

  <Card title="Transaction Failures" icon="circle-exclamation" href="/api-reference/transaction-failures">
    Gain insights into common transaction issues and their solutions.
  </Card>
</CardGroup>

## Webhooks

Receive real-time notifications about payment events. See our [Webhook Guide](/developer-resources/webhooks) for setup instructions.

<Card title="Webhook Guide" icon="webhook" href="/developer-resources/webhooks">
  Set up webhooks for real-time notifications and event handling.
</Card>


# Activate License
Source: https://docs.dodopayments.com/api-reference/licenses/activate-license

post /licenses/activate
This endpoint allows you to activate a license for the user.

<Info>
  **No API Key Required**: This is a public endpoint that does not require authentication. You can call it directly from client applications, desktop software, or CLIs to activate license keys without exposing your API credentials.
</Info>


# Deactivate License
Source: https://docs.dodopayments.com/api-reference/licenses/deactivate-license

post /licenses/deactivate
This endpoint allows you to deactivate a license for the user.

<Info>
  **No API Key Required**: This is a public endpoint that does not require authentication. You can call it directly from client applications, desktop software, or CLIs to deactivate license keys without exposing your API credentials.
</Info>


# Get License Key
Source: https://docs.dodopayments.com/api-reference/licenses/get-license-key

get /license_keys/{id}
Retrieve the details of a specific license key by its ID.



# Get License Key Instance
Source: https://docs.dodopayments.com/api-reference/licenses/get-license-key-instance

get /license_key_instances/{id}
Retrieve details of a specific license key instance by its ID.



# Get License Key Instances
Source: https://docs.dodopayments.com/api-reference/licenses/get-license-key-instances

get /license_key_instances
Retrieve a list of instances for a specific license key.



# Get License Keys
Source: https://docs.dodopayments.com/api-reference/licenses/get-license-keys

get /license_keys
Retrieve a list of license keys associated with your account.



# Update License Key
Source: https://docs.dodopayments.com/api-reference/licenses/update-license-key

patch /license_keys/{id}
This endpoint allows you to update a license key by its ID.



# Update License Key Instance
Source: https://docs.dodopayments.com/api-reference/licenses/update-license-key-instance

patch /license_key_instances/{id}
This endpoint allows you to update a specific license key instance by its ID.



# Validate License
Source: https://docs.dodopayments.com/api-reference/licenses/validate-license

post /licenses/validate
This endpoint allows you to validate a license for the user.

<Info>
  **No API Key Required**: This is a public endpoint that does not require authentication. You can call it directly from client applications, desktop software, or CLIs to validate license keys without exposing your API credentials.
</Info>


# Metadata Guide
Source: https://docs.dodopayments.com/api-reference/metadata

Learn how to use metadata to store additional information about your Dodo Payments objects

## Introduction

Metadata allows you to store additional, structured information about your objects in Dodo Payments. You can attach metadata to most Dodo Payments objects, including payments, subscriptions, and more.

## Overview

* Metadata keys can be up to 40 characters long
* Metadata values can be up to 500 characters long
* You can have up to 50 metadata key-value pairs per object
* Keys should only contain alphanumeric characters, dashes, and underscores
* Metadata is not searchable using our API but is returned in API responses and webhooks

## Use Cases

Metadata is useful for:

* Storing external IDs or references
* Adding internal annotations
* Linking Dodo Payments objects to your system
* Categorizing transactions
* Adding custom attributes for reporting

## Adding Metadata

You can add metadata when creating or updating objects through the API. For products, you also have the option to add metadata directly from the dashboard UI.

### Via API

```javascript  theme={null}
// Adding metadata when creating a customer
const customer = await client.customers.create({
    name: 'John Doe',
    email: 'john@example.com',
    metadata: {
        account_tier: 'premium',
        signup_source: 'website',
        referral_code: 'REF123'
    }
});

// Adding metadata when creating a payment
const payment = await client.payments.create({
    billing: { city: 'city', country: 'AF', state: 'state', street: 'street', zipcode: 0 },
    customer: { customer_id: 'customer_id' },
    product_cart: [{ product_id: 'product_id', quantity: 0 }],
    metadata:{order_id: 'ORD-123', customer_notes: 'Customer notes'}
  });

// Adding metadata when creating a product
const product = await client.products.create({
    name: 'Premium Software License',
    price: 9900,
    currency: 'USD',
    metadata: {
        category: 'software',
        license_type: 'premium',
        support_tier: 'priority'
    }
});
```

### Via Dashboard UI (Products Only)

For products, you can also add metadata directly from the Dodo Payments dashboard when creating or editing a product. The metadata section allows you to easily add custom key-value pairs without writing code.

<Frame>
  <img src="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/product-catalog/product-metadata-ui.png?fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=9e4fee91d8922325d8c1c72b27ccb0a2" alt="Product metadata interface in Dodo Payments dashboard" data-og-width="2156" width="2156" data-og-height="420" height="420" data-path="images/product-catalog/product-metadata-ui.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/product-catalog/product-metadata-ui.png?w=280&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=ed1822dc9af2f67472536b290bffab55 280w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/product-catalog/product-metadata-ui.png?w=560&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=f5b681d6db7794636879c623aaead812 560w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/product-catalog/product-metadata-ui.png?w=840&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=e101ac3b792f02d59af5671c0a8ea1ef 840w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/product-catalog/product-metadata-ui.png?w=1100&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=77b2fb567eb4595af0742b626d8468ba 1100w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/product-catalog/product-metadata-ui.png?w=1650&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=ff6fa51d4f6b3fed73d86ea5dcbe9173 1650w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/product-catalog/product-metadata-ui.png?w=2500&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=e921586b2f537024362462910953cbce 2500w" />
</Frame>

<Tip>
  Using the dashboard UI for product metadata is particularly useful for non-technical team members who need to manage product information and categories.
</Tip>

## Retrieving Metadata

Metadata is included in API responses when retrieving objects:

```javascript  theme={null}
// Retrieving customer metadata
const customer = await client.customers.retrieve('cus_123');
console.log(customer.metadata.account_tier); // 'premium'

// Retrieving payment metadata
const payment = await client.payments.retrieve('pay_123');
console.log(payment.metadata.order_id); // '6735'
```

## Searching and Filtering

While metadata is not directly searchable via our API, you can:

1. Store important identifiers in metadata
2. Retrieve objects using their primary IDs
3. Filter the results in your application code

```javascript  theme={null}
// Example: Find a customer using metadata
const customers = await client.customers.list({
  limit: 100
});

const matchingCustomer = customers.data.find(
  customer => customer.metadata?.account_tier === 'premium'
);

// Example: Find a payment using your order ID
const payments = await client.payments.list({
  limit: 100
});

const matchingPayment = payments.data.find(
  payment => payment.metadata.order_id === '6735'
);
```

## Best Practices

### Do:

* Use consistent naming conventions for metadata keys
* Document your metadata schema internally
* Keep values short and meaningful
* Use metadata for static data only
* Consider using prefixes for different systems (e.g., `crm_id`, `inventory_sku`)

### Don't:

* Store sensitive data in metadata
* Use metadata for frequently changing values
* Rely on metadata for critical business logic
* Store duplicate information that's available elsewhere in the object
* Use special characters in metadata keys

## Supported Objects

Metadata is supported on the following objects:

| Object Type   | Support |
| ------------- | ------- |
| Customers     | ✓       |
| Payments      | ✓       |
| Subscriptions | ✓       |
| Products      | ✓       |

## Webhooks and Metadata

Metadata is included in webhook events, making it easy to handle notifications with your custom data:

```javascript  theme={null}
// Example webhook handler
app.post('/webhook', (req, res) => {
  const event = req.body;

  if (event.type === 'payment.succeeded') {
    const orderId = event.data.object.metadata.order_id;
    // Process order using your internal order ID
  }
  
  if (event.type === 'customer.created') {
    const accountTier = event.data.object.metadata.account_tier;
    // Handle customer creation with custom metadata
  }
});
```


# Archive Meter
Source: https://docs.dodopayments.com/api-reference/meters/archive-meter

delete /meters/{id}
Archive a meter by its ID.



# Create Meter
Source: https://docs.dodopayments.com/api-reference/meters/create-meter

post /meters
Create a new meter.



# List Meters
Source: https://docs.dodopayments.com/api-reference/meters/get-meters

get /meters
Get a list of all meters.



# Get Meter
Source: https://docs.dodopayments.com/api-reference/meters/retrieve-meter

get /meters/{id}
Retrieve a meter by its ID.



# Unarchive Meter
Source: https://docs.dodopayments.com/api-reference/meters/unarchive-meter

post /meters/{id}/unarchive
Unarchive a meter by its ID.



# Charge Subscription
Source: https://docs.dodopayments.com/api-reference/misc/charge-subscriptions

post /subscriptions/{subscription_id}/charge
Charge a customer for an on-demand subscription.



# Supported Countries
Source: https://docs.dodopayments.com/api-reference/misc/supported-countries

get /checkout/supported_countries
Retrieve a list of countries that are supported by the Dodo Payments for your customers.

<Tip> You will receive a list of [ISO Alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2) country codes representing the countries we **currently support for payments**. You can view the full list of supported countries [here](/miscellaneous/list-of-countries-we-accept-payments-from). This list is updated regularly as we expand our coverage. </Tip>

<Tip> Note: The available options include ISO Alpha-2 codes for **all countries**, not just the ones we currently support. Please refer to the supported countries list to confirm availability. </Tip>


# Get Invoice
Source: https://docs.dodopayments.com/api-reference/payments/get-invoice

get /invoices/payments/{payment_id}
Get an invoice by Payment ID.



# List Payments
Source: https://docs.dodopayments.com/api-reference/payments/get-payments

get /payments
Get a list of all payments associated with your account.



# Get Payment Detail
Source: https://docs.dodopayments.com/api-reference/payments/get-payments-1

get /payments/{payment_id}
Get detailed information about a specific payment.



# Create One Time Payment
Source: https://docs.dodopayments.com/api-reference/payments/post-payments

post /payments
Create a one-time payment for a customer.



# Retrieve Line Items
Source: https://docs.dodopayments.com/api-reference/payments/retrieve-line-items

get /payments/{payment_id}/line-items
Retrieve line items for a specific payment.



# List Payouts
Source: https://docs.dodopayments.com/api-reference/payouts/get-payouts

get /payouts
Get a list of all payouts associated with your account.



# Archive Products
Source: https://docs.dodopayments.com/api-reference/products/archive-product

delete /products/{id}
Archive a product associated with your account.



# List Products
Source: https://docs.dodopayments.com/api-reference/products/get-products

get /products
Get a list of all products associated with your account.



# Get Product Detail
Source: https://docs.dodopayments.com/api-reference/products/get-products-1

get /products/{id}
Get detailed information about a specific product.



# Update Product
Source: https://docs.dodopayments.com/api-reference/products/patch-products

patch /products/{id}
Update a product's details.



# Create Product
Source: https://docs.dodopayments.com/api-reference/products/post-products

post /products
Create a new product.



# Update Product Images
Source: https://docs.dodopayments.com/api-reference/products/put-products-images

put /products/{id}/images
Update a product's images.



# Unarchive Products
Source: https://docs.dodopayments.com/api-reference/products/unarchive-product

post /products/{id}/unarchive
Unarchive a product associated with your account.



# Update Files
Source: https://docs.dodopayments.com/api-reference/products/update-files

put /products/{id}/files
Update the files associated with a product.



# Get Refund Receipt
Source: https://docs.dodopayments.com/api-reference/refunds/get-refund-receipt

get /invoices/refunds/{refund_id}
Get a refund receipt for a refund.



# List Refunds
Source: https://docs.dodopayments.com/api-reference/refunds/get-refunds

get /refunds
Get a list of all refunds associated with your account.



# Get Refund Detail
Source: https://docs.dodopayments.com/api-reference/refunds/get-refunds-1

get /refunds/{refund_id}
Get detailed information about a specific refund.



# Create Refund
Source: https://docs.dodopayments.com/api-reference/refunds/post-refunds

post /refunds
Create a refund for a payment.



# Change Plan
Source: https://docs.dodopayments.com/api-reference/subscriptions/change-plan

post /subscriptions/{subscription_id}/change-plan
Modify an existing subscription's plan, enabling both upgrades and downgrades to different pricing tiers.<br/><br/>Note&colon; This will use the existing payment information of the customer to upgrade/downgrade the plan.



# Create Charge (On-Demand)
Source: https://docs.dodopayments.com/api-reference/subscriptions/create-charge

post /subscriptions/{subscription_id}/charge
Create a charge for a subscription. This is useful for on-demand billing.



# Get Subscription Detail
Source: https://docs.dodopayments.com/api-reference/subscriptions/get-subscriptions

get /subscriptions/{subscription_id}
Get detailed information about a specific subscription.



# List subscriptions
Source: https://docs.dodopayments.com/api-reference/subscriptions/get-subscriptions-1

get /subscriptions
Get a list of all subscriptions associated with your account.



# Get Subscription Usage History
Source: https://docs.dodopayments.com/api-reference/subscriptions/get-usage-history

get /subscriptions/{subscription_id}/usage-history
Retrieve the complete usage history for a subscription with usage-based billing.



# Update Subscription
Source: https://docs.dodopayments.com/api-reference/subscriptions/patch-subscriptions

patch /subscriptions/{subscription_id}
Update a subscription's details.



# Create Subscription
Source: https://docs.dodopayments.com/api-reference/subscriptions/post-subscriptions

post /subscriptions
Create a subscription for a customer.



# Transaction Failures
Source: https://docs.dodopayments.com/api-reference/transaction-failures

Learn about different transaction failure reasons and how to handle them in Dodo Payments API.

## Overview

Dodo Payments API provides detailed transaction failure reasons to help you understand why a payment attempt was unsuccessful. These failure reasons are standardized across different payment methods and providers, making it easier to implement consistent error handling in your application.

Each transaction failure response includes:

* A specific failure reason code
* A human-readable error message
* Additional context about the failure when available
* Whether the error is user-correctable or requires system intervention

Understanding these failure reasons is crucial for:

* Providing clear feedback to your customers
* Implementing appropriate retry logic
* Handling different failure scenarios gracefully
* Maintaining a reliable payment processing system

## Transaction Failure Reasons

The following table lists all possible transaction failure reasons, their meanings, and whether they are user-correctable errors.

| Failure Code                       | User Error | Description                                                     |
| ---------------------------------- | ---------- | --------------------------------------------------------------- |
| `AUTHENTICATION_FAILURE`           | Yes        | The authentication process failed during the transaction        |
| `AUTHENTICATION_REQUIRED`          | Yes        | Additional authentication is needed to complete the transaction |
| `AUTHENTICATION_TIMEOUT`           | Yes        | The authentication process timed out                            |
| `CARD_DECLINED`                    | No         | The card was declined by the issuing bank                       |
| `CARD_NOT_ACTIVATED`               | Yes        | The card has not been activated by the cardholder               |
| `CARD_VELOCITY_EXCEEDED`           | Yes        | Too many transactions attempted in a short period               |
| `CUSTOMER_CANCELLED`               | Yes        | The customer cancelled the transaction                          |
| `DO_NOT_HONOR`                     | No         | The issuing bank declined the transaction                       |
| `EXPIRED_CARD`                     | Yes        | The card has expired                                            |
| `FRAUDULENT`                       | Yes        | The transaction was flagged as potentially fraudulent           |
| `GENERIC_DECLINE`                  | No         | The transaction was declined for an unspecified reason          |
| `INCORRECT_CVC`                    | Yes        | The provided CVC code was incorrect                             |
| `INCORRECT_NUMBER`                 | Yes        | The card number was entered incorrectly                         |
| `INSUFFICIENT_FUNDS`               | Yes        | The account has insufficient funds to complete the transaction  |
| `INVALID_ACCOUNT`                  | Yes        | The account details provided are invalid                        |
| `INVALID_AMOUNT`                   | Yes        | The transaction amount is invalid                               |
| `INVALID_CARD_NUMBER`              | Yes        | The card number format is invalid                               |
| `INVALID_CARD_OWNER`               | Yes        | The card owner information is invalid                           |
| `INVALID_CVC`                      | Yes        | The CVC format is invalid                                       |
| `INVALID_EXPIRY_YEAR`              | Yes        | The card expiry year is invalid                                 |
| `INVALID_PIN`                      | Yes        | The provided PIN is incorrect                                   |
| `INVALID_REQUEST`                  | Yes        | The transaction request contains invalid data                   |
| `INVALID_UPI_ID`                   | Yes        | The UPI ID provided is invalid                                  |
| `LIMIT_EXCEEDED`                   | Yes        | The transaction exceeds the card or account limit               |
| `LIVE_MODE_TEST_CARD`              | Yes        | A test card was used in live mode                               |
| `LOST_CARD`                        | Yes        | The card has been reported as lost                              |
| `MANDATE_INVALID`                  | Yes        | The payment mandate is invalid                                  |
| `MANDATE_REQUIRED`                 | Yes        | A mandate is required for this transaction                      |
| `MANDATE_REQUIRED_SYSTEM`          | No         | System requires a mandate for this transaction type             |
| `NETWORK_ERROR`                    | No         | A network error occurred during the transaction                 |
| `NETWORK_TIMEOUT`                  | No         | The network request timed out                                   |
| `ORDER_CREATION_FAILED`            | No         | Failed to create the order for the transaction                  |
| `PAYMENT_METHOD_PROVIDER_DECLINED` | Yes        | The payment method provider declined the transaction            |
| `PAYMENT_METHOD_UNSUPPORTED`       | Yes        | The payment method is not supported for this transaction        |
| `PICKUP_CARD`                      | Yes        | The card has been reported as stolen and should be picked up    |
| `PROCESSING_ERROR`                 | No         | An error occurred while processing the transaction              |
| `PROVIDER_UNSUPPORTED`             | No         | The payment provider does not support this transaction type     |
| `REENTER_TRANSACTION`              | Yes        | The transaction needs to be re-entered                          |
| `REVOCATION_OF_AUTHORIZATION`      | Yes        | The authorization for the transaction was revoked               |
| `STOLEN_CARD`                      | Yes        | The card has been reported as stolen                            |
| `TRANSACTION_NOT_ALLOWED`          | Yes        | The transaction is not allowed for this card or account         |
| `TRANSACTION_NOT_APPROVED`         | Yes        | The transaction was not approved                                |
| `TRY_AGAIN_LATER`                  | No         | The transaction should be retried later                         |
| `UNKNOWN_ERROR`                    | No         | An unknown error occurred                                       |

<Note>
  **User Error** indicates whether the payment decline can be resolved by the customer. When `true`, the customer can take action to fix the issue (e.g., entering correct card details). When `false`, the decline is due to system-level issues or bank restrictions that cannot be resolved by the customer.
</Note>

## Support

For additional help with transaction failures or integration issues, please contact our support team at [support@dodopayments.com](mailto:support@dodopayments.com).


# Get Event
Source: https://docs.dodopayments.com/api-reference/usage-events/get-event

get /events/{event_id}
Get an event by its ID.



# Ingest Events
Source: https://docs.dodopayments.com/api-reference/usage-events/ingest-events

post /events/ingest
Ingest events for usage-based billing.



# List Events
Source: https://docs.dodopayments.com/api-reference/usage-events/list-events

get /events
Get a list of all events.



# Create Webhook
Source: https://docs.dodopayments.com/api-reference/webhooks/create-webhook

post /webhooks
Create a new webhook for a business.



# Delete Webhook
Source: https://docs.dodopayments.com/api-reference/webhooks/delete-webhook

delete /webhooks/{webhook_id}
Delete a specific webhook.



# Get Webhook Details
Source: https://docs.dodopayments.com/api-reference/webhooks/get-details

get /webhooks/{webhook_id}
Get detailed information about a specific webhook.



# Get Webhook Headers
Source: https://docs.dodopayments.com/api-reference/webhooks/get-webhook-headers

get /webhooks/{webhook_id}/headers
Get the headers for a specific webhook.



# Get Webhook Signing Key
Source: https://docs.dodopayments.com/api-reference/webhooks/get-webhook-signing-key

get /webhooks/{webhook_id}/secret
Get the signing key for a specific webhook.



# List Webhooks
Source: https://docs.dodopayments.com/api-reference/webhooks/list-webhooks

get /webhooks
List all webhooks for a business.



# Update Webhook
Source: https://docs.dodopayments.com/api-reference/webhooks/update-webhook

patch /webhooks/{webhook_id}
Update a specific webhook.



# Update Webhook Headers
Source: https://docs.dodopayments.com/api-reference/webhooks/update-webhook-headers

patch /webhooks/{webhook_id}/headers
Update the headers for a specific webhook.



# Changelog
Source: https://docs.dodopayments.com/changelog/introduction

Track all Dodo Payments releases, new features, improvements, and platform updates. Complete version history with detailed changelogs for each release.

## Version Logs

| Version                       | Release Date       | Highlights                                                                                                                                                   |
| ----------------------------- | ------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| [v1.56.0](/changelog/v1.56.0) | October 27, 2025   | Streamlined onboarding, C# SDK launch, webhook verification, Two-Factor Authentication, overlay checkout sessions, and usage-based subscription plan changes |
| [v1.53.2](/changelog/v1.53.2) | September 13, 2025 | Customer credits, enhanced refund details, higher meter limits, license activation context, and \$0 downgrades                                               |
| [v1.52.4](/changelog/v1.52.4) | September 3, 2025  | Usage-Based Billing, public Refund Receipt API, 100% subscription discounts, and checkout session ID in payments                                             |
| [v1.51.0](/changelog/v1.51.0) | August 23, 2025    | Powerful Checkout Sessions API, Metadata in Payments Export, and Subscription Next Billing Date Update                                                       |
| [v1.47.0](/changelog/v1.47.0) | August 11, 2025    | Dashboard UI overhaul, discount codes for subscriptions, expanded Adaptive Currency, webhook management API, and product metadata support                    |
| [v1.44.0](/changelog/v1.44.0) | August 3, 2025     | Adaptive Currency, Turkish Language Support, and New Proration Mode                                                                                          |
| [v1.43.0](/changelog/v1.43.0) | July 24, 2025      | Comprehensive Webhooks Upgrade: endpoint management, security, delivery logs, debugging, and monitoring—now fully self-serve in the dashboard                |
| [v1.38.0](/changelog/v1.38.0) | July 9, 2025       | Analytics Chart Sharing, Multiple Partial Refunds, Cumulative Revenue Analytics, Context7 Integration, Next.js Adapter                                       |
| [v1.37.0](/changelog/v1.37.0) | July 2, 2025       | Enhanced Analytics Dashboard with comprehensive revenue and retention insights, Reports 2.0 with detailed business reporting capabilities                    |
| [v1.34.4](/changelog/v1.34.4) | June 26, 2025      | Enhanced Dashboard Analytics with comprehensive new metrics across Revenue Analytics, Customer Analytics, and Payment Success Rate Analytics                 |
| [v1.34.0](/changelog/v1.34.0) | June 18, 2025      | Digital Product Delivery, React Native SDK beta release, new proration modes, adaptive currency for subscriptions, and enhanced verification form management |
| [v1.32.0](/changelog/v1.32.0) | June 9, 2025       | Affiliates with Affonso, multiple webhook support, enhanced fraud prevention, subscription schedule cancellation, and static payment links                   |
| [v1.30.0](/changelog/v1.30.0) | June 2, 2025       | Support for \$0 payments and 100% discount codes for one-time products, enabled payout threshold for USD wallet, and standardized API error codes            |
| [v1.27.0](/changelog/v1.27.0) | May 26, 2025       | Partial Refunds and Multi-Brand Support, enabling merchants to manage multiple brands and websites under a single verified business account                  |
| [v1.25.0](/changelog/v1.25.0) | May 20, 2025       | Overlay Checkout Beta, a modern TypeScript library for embedded payments, and subscription.plan\_changed webhook event                                       |
| [v1.22.0](/changelog/v1.22.0) | May 9, 2025        | Unified search to the dashboard, support for upgrading and downgrading subscriptions with addons, and comprehensive card information in payment responses    |
| [v1.21.0](/changelog/v1.21.0) | May 3, 2025        | Support for addons to subscriptions, enhanced dispute handling, and customer billing details in payment responses                                            |
| [v1.18.3](/changelog/v1.18.3) | April 26, 2025     | Subscription Plan Change API, enhanced onboarding guidance, notification preferences center, and improved adaptive currency information                      |
| [v1.16.1](/changelog/v1.16.1) | April 18, 2025     | Modern verification forms, new Java and Kotlin SDKs, Afterpay/Clearpay integration, and Google Sign-In                                                       |
| [v1.14.0](/changelog/v1.14.0) | April 12, 2025     | New European payment methods, subscription billing address updates, and various improvements                                                                 |
| [v1.13.0](/changelog/v1.13.0) | April 9, 2025      | Adaptive Currency Support, MCP Server for AI integration, mobile apps, Custom GPT, and Dodo Dash game                                                        |
| [v1.11.0](/changelog/v1.11.0) | March 28, 2025     | Address autofill for checkout page, notifications center, payment link query builder, saved payment methods, and billing currency control                    |
| [v1.10.1](/changelog/v1.10.1) | March 21, 2025     | Checkout 2.0, configurable payment methods, dynamic tax calculation, and on-demand subscriptions                                                             |
| [v1.7.0](/changelog/v1.7.0)   | March 14, 2025     | Dedicated subscriptions page, enhanced customer details, detailed payout information, official Ruby SDK, and enhanced API filters                            |
| [v1.5.0](/changelog/v1.5.0)   | March 7, 2025      | Custom date filter for analytics, new tax category, and various improvements                                                                                 |
| [v1.4.0](/changelog/v1.4.0)   | March 6, 2025      | Storefront Feature and Amazon Pay Integration                                                                                                                |
| [v1.3.2](/changelog/v1.3.2)   | February 28, 2025  | Teams Feature, enhanced success/failure screens, and minor improvements                                                                                      |
| [v1.0.0](/changelog/v1.0.0)   | February 23, 2025  | Public release of Dodo Payments with Customer Portal and Customer Portal Session API                                                                         |
| [v0.24.0](/changelog/v0.24.0) | February 15, 2025  | Discount coupons, support for over 25 local payment methods, customizable statement descriptors, and complete UI makeover of the login page                  |
| [v0.22.0](/changelog/v0.22.0) | February 6, 2025   | Subscription's first payment, UPI QR payment method, tax ID on checkout, dashboard restructure, self-serve onboarding guides, multi-language support         |
| [v0.20.1](/changelog/v0.20.1) | January 31, 2025   | Pay What You Want (PWYW) pricing and expanded global payment coverage                                                                                        |
| [v0.19.0](/changelog/v0.19.0) | January 24, 2025   | Support for UPI and Indian Rupay cards, PHP SDK release, and product archiving                                                                               |
| [v0.18.0](/changelog/v0.18.0) | January 20, 2025   | AI chat support, enhanced APIs, inclusive tax pricing, automated country selection, and more                                                                 |
| [v0.16.1](/changelog/v0.16.1) | January 11, 2025   | Account Summary feature, enhanced API documentation, and improved postal code validation                                                                     |
| [v0.15.1](/changelog/v0.15.1) | January 3, 2025    | Invoice API, subscription webhooks, comprehensive guides, Dodo Wall of Love, and social sharing features                                                     |
| [v0.14.0](/changelog/v0.14.0) | December 26, 2024  | License Key Management feature, enhancing security and control for merchants distributing digital products and services                                      |
| [v0.13.2](/changelog/v0.13.2) | December 21, 2024  | Updated Atlas codebase, SDK updates, and minor improvements                                                                                                  |
| [v0.12.0](/changelog/v0.12.0) | December 17, 2024  | Official SDKs, metadata field, and expanded customer APIs with minor improvements and bug fixes                                                              |
| [v0.11.0](/changelog/v0.11.0) | December 13, 2024  | Automated emails, webhook event logs, license key generation guide, and various minor improvements and bug fixes                                             |
| [v0.10.0](/changelog/v0.10.0) | December 8, 2024   | Open-sourced Atlas demo, feature-request section, webhook request logs API, subscription list API, and various improvements                                  |
| [v0.1.0](/changelog/v0.1.0)   | November 25, 2024  | Initial release of the Dodo Payments documentation, marking the Beta launch of our product                                                                   |


# v0.1.0 (25 Nov 2024)
Source: https://docs.dodopayments.com/changelog/v0.1.0

This is the initial release of the Dodo Payments documentation, marking the Beta launch of our product. Explore the features and improvements designed to enhance your payment processing experience.

## Smooth Onboarding

* Comprehensive onboarding tracker to monitor merchant progress.
* Support for document resubmission and live-mode activation upon verification.

## Product Catalogue Management

* Easy creation, editing, and deletion of one-time and subscription products.

## Payment Link

* Generate payment links for one-time and subscription products.
* Includes configurable quantities and redirection options for post-payment customer journeys.

## Customizable Checkout Page

* Branded checkout experiences with localized payment options available.
* Real-time tax and total amount calculation displayed on checkout.

## Automated Invoice Generation

* Automatic invoice generation for payments, refunds, and payouts.

## Refund Management

* Seamless partial and full refund management from the dashboard.
* Introduced dispute tracking for effective resolutions.

## Transparent Payouts

* Flexible payout mechanisms with transparent policies and fees.

## Analytics and Reporting

* Advanced analytics dashboard to showcase total revenue, transaction breakdown, customer insights, and top-performing product types.

## API and Webhook Generation

* Easy-to-generate API keys to integrate Dodo Payments into your website or application.
* Webhook setup for real-time notifications about transactions, refunds, and disputes.


# v0.10.0 (8 Dec 2024)
Source: https://docs.dodopayments.com/changelog/v0.10.0

Open-sourced Atlas demo, feature-request section, webhook request logs API, subscription list API, and various improvements and bug fixes.

## New Features

* **Open Sourced Atlas**: A demo application written in Next.js to showcase the integration of Dodo Payments. Explore the [GitHub Repository](https://github.com/dodopayments/dodo-checkout-demo) and documentation [here](/developer-resources/integration-guide).
* **Feature-Request Section**: Introduced a feature-request section on the Dodo Payments dashboard to prioritize the product roadmap based on user feedback.
* **Webhook Request Logs API**: Added APIs for listing and detailing webhook request logs.
* **Static Payment Links**: Added more query parameters to the static payment links to provide more flexibility in the checkout process. For more details, click [here](/developer-resources/integration-guide#1-static-payment-links).
* **Subscription List API**: Added an API to fetch all subscriptions. Refer to the [API Reference](/api-reference/subscriptions/get-subscriptions-1) for details.

## Minor Improvements and Bug Fixes

* Enhanced the Product and Subscription API responses with additional parameters.
* Implemented rate limiting for API requests, currently set to 20 requests per second.
* Improved the documentation to be more user-friendly and easier to navigate.
* Various minor bug fixes and improvements.


# v0.11.0 (13 Dec 2024)
Source: https://docs.dodopayments.com/changelog/v0.11.0

Introduced automated emails, webhook event logs, a license key generation guide, and various minor improvements and bug fixes.

## New Features

* **Automated Emails**: Added automated emails for payments, subscriptions, refunds, and disputes to keep merchants and customers informed.
* **Webhook Event Log**: Added webhook event log on Dodo Payments Dashboard to track webhook events and troubleshoot issues. Navigate to `Settings > Webhooks > Webhook Logs` to access the logs.
* **License Key Generation Guide**: Added a new guide to implement license key generation for digital products. Refer to the [guide](/features/license-keys) for more information.

## Minor Improvements and Bug Fixes

* Various minor fixes and improvements.


# v0.12.0 (17 Dec 2024)
Source: https://docs.dodopayments.com/changelog/v0.12.0

Added official SDKs, metadata field, and expanded customer APIs with minor improvements and bug fixes.

## New Features

* **Official SDKs**: Introduced official Dodo Payments SDKs for **Node.js**, **Python**, and **Go**. Refer to the [SDKs](/developer-resources/dodo-payments-sdks) page for more information.
* **Metadata Field**: Added a `Metadata` field for payments and subscriptions to store additional information. Refer to the [Metadata](/api-reference/metadata) page for more details.
* **Customer APIs**: Expanded customer APIs to include the following endpoints. You can now pass `customer_id` in payments and subscriptions to prevent customer duplication:
  * **Create Customer**: [/api-reference/customers/create-customer](/api-reference/customers/create-customer)
  * **Patch Customer**: [/api-reference/customers/patch-customer](/api-reference/customers/patch-customer)

## Minor Improvements and Bug Fixes

* Various minor fixes and improvements.


# v0.13.2 (21 Dec 2024)
Source: https://docs.dodopayments.com/changelog/v0.13.2

Updated Atlas codebase, SDK updates, and minor improvements.

## New Features

* **Atlas**: The [GitHub Repository](https://github.com/dodopayments/dodo-checkout-demo) codebase has been updated to use the [Dodo Payments Node SDK](https://github.com/dodopayments/dodopayments-node).
* **SDK Update**: Bumped our SDK versions to `0.13.2` with fixes and updates.

## Minor Improvements and Bug Fixes

* **Dashboard Toggle**: Improved the Test Mode and Live Mode toggle on the dashboard to enhance UX.
* Various minor fixes and improvements.


# v0.14.0 (26 Dec 2024)
Source: https://docs.dodopayments.com/changelog/v0.14.0

Introduced the License Key Management feature, enhancing security and control for merchants distributing digital products and services.

### New Feature: License Key Management

We are excited to introduce the **License Key Management** feature, designed to help merchants secure their digital products and services by generating, managing, and tracking unique license keys. This feature ensures only authorized users access your products and provides merchants with full control over their license key usage and distribution. Ideal for SaaS businesses and digital product vendors, the tool also includes advanced tracking and revocation capabilities for enhanced security.

For more details, please visit the [License Keys Documentation](/features/license-keys).


# v0.15.1 (4 Jan 2025)
Source: https://docs.dodopayments.com/changelog/v0.15.1

Introducing Invoice API, subscription webhooks, comprehensive guides, Dodo Wall of Love, and social sharing features. Plus, enhanced subscription trial periods and customer identification.

## New Features 🚀

### API Enhancements

* Launched Invoice API, enabling merchants and customers to download invoices using `payment_id`. Visit the [Invoice API](/api-reference/payments/get-invoice) documentation for more details.
* Implemented new `subscription.renewed` webhook event for subscription renewal notifications.

### Platform Updates

* Introduced Dodo Payments [Wall of Love](https://dodopayments.com/wall-of-love), showcasing customer testimonials.
* Added social sharing functionality for successful transactions.
  <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/share-transaction.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=f72078fc9783afb6a306e50e14393579" alt="Share Transaction Feature" data-og-width="2284" width="2284" data-og-height="1322" height="1322" data-path="images/changelog/share-transaction.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/share-transaction.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=5fbdff9f746974d68da71fe6b49974fb 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/share-transaction.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=ae158a1bfa25b72de17e8dc19687c7e2 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/share-transaction.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=da3c34e1a156dbc721790366744b2974 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/share-transaction.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=360fa7bfda9de4202957ef8eba31332f 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/share-transaction.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=23da2d9562ed6943ef6ec6941fe72b3c 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/share-transaction.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=2e7f7b6b24c9814db46ef536cf9d4436 2500w" />
* Released Policy Generator tool for automatic generation of privacy policy, terms of service, and refund policy documents. [Try Policy Generator](https://dodopayments.com/tools/policy-generator).

### Documentation Improvements

* Published comprehensive guides:
  * [Subscription Integration Guide](/developer-resources/subscription-integration-guide)
  * [Webhook Events Guide](/developer-resources/webhooks/intents/webhook-events-guide)

## Improvements and Bug Fixes 🔧

### API Updates

* Added `trial_period_days` parameter to [Create Subscription API](/api-reference/subscriptions/post-subscriptions) to override product-level trial periods.
* Enhanced customer identification logic: now using consistent `customer_id` across payments and subscriptions for the same email.
* Implemented various performance optimizations and fixed minor bugs.


# v0.16.1 (11 Jan 2025)
Source: https://docs.dodopayments.com/changelog/v0.16.1

Added Account Summary feature, enhanced API documentation, and improved postal code validation.

## New Features 🚀

* **Account Summary Feature**: Provides detailed visibility into transaction and payout ledgers.
  <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/account_summary.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=17b730778959120a8656f8b2bbdd562d" alt="Account Summary" data-og-width="1920" width="1920" data-og-height="1280" height="1280" data-path="images/changelog/account_summary.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/account_summary.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=2ce870c2668e24064b14a2fb26862e0b 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/account_summary.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=34e92d0896646d76cf70efc0d602d4c4 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/account_summary.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=7b9813bb235922e8e44ebc3f427807f5 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/account_summary.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=de3e8dd234cb8a51a1c2b4f9cab457ed 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/account_summary.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=29f1d0d1d61bb5b19aa011b5ef557789 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/account_summary.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=1d34f0b47ba666639887417d20a4149e 2500w" />
* **Enhanced API Documentation**: Includes comprehensive parameter descriptions and usage examples.

## Improvements and Bug Fixes 🔧

* **Postal Code Validation**: Updated `Zipcode` field validation to support alphanumeric postal codes.
* **System Optimizations**: Implemented various bug fixes and optimizations to improve overall performance.


# v0.18.0 (20 Jan 2025)
Source: https://docs.dodopayments.com/changelog/v0.18.0

Added AI chat support, enhanced APIs, inclusive tax pricing, automated country selection, and more.

## New Features 🚀

* **AI Chat Support**: Now you can chat with our AI assistant to get help with your technical queries or check the documentation more effectively.
  <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/ai_chat.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=69ecf8812ef30cbf84fe9c283096ca63" alt="Dodo Payments AI Chat Support" data-og-width="960" width="960" data-og-height="540" height="540" data-path="images/changelog/ai_chat.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/ai_chat.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=fd115e7c8c25ee65010d9d99de89681a 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/ai_chat.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=ccd98921166b815cd3f856af325f1e42 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/ai_chat.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=068bab977b2e39f8b18269cc029634e3 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/ai_chat.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=760806298aaf2a55c28675616a71b52b 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/ai_chat.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=359596a4d072089131dc35aac984a517 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/ai_chat.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=2361a876803e35bc7e21f4673b631c8d 2500w" />

* **Enhanced APIs**: Added APIs to filter payments, refunds, subscriptions, and disputes based on `customer_id`, time period, and status, providing more flexibility in data retrieval.

* **Inclusive Tax Pricing**: Added support to make the product price inclusive of tax while creating/updating the product. The tax amount will be calculated automatically based on the tax rate.

* **Automated Country Selection**: Implemented IP-based country auto-selection in static payment links. The country will be auto-selected based on the user's IP address when they open the static payment links.

* **Query Parameter Removal**: Query parameters are now removed as soon as the static payment link loads, preventing end customers from changing URL parameters and tampering with the static payment link.

## Improvements and Bug Fixes 🔧

* **Minor Enhancements and Fixes**: Various minor enhancements and fixes to improve overall performance and user experience.


# v0.19.0 (24 Jan 2025)
Source: https://docs.dodopayments.com/changelog/v0.19.0

Added support for UPI and Indian Rupay cards, released PHP SDK, and introduced product archiving.

## New Features 🚀

* **UPI and Indian Rupay Card Support**: Added support for UPI and Indian Rupay cards for processing payments in India, currently limited to one-time purchases only. You can now accept payments from customers using UPI and Rupay cards. Additionally, enabled the creation of products with INR pricing on the Dodo Payments Dashboard.

  <Frame>
    <iframe className="w-full aspect-video rounded-md" src="https://www.youtube.com/embed/PXQOv4k1Mk8" title="UPI Announcement | Dodo Payments" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen />
  </Frame>

* **PHP SDK Release**: Launched a new PHP SDK for Dodo Payments, simplifying the integration of Dodo Payments into PHP applications.
  <Card title="View PHP SDK on GitHub →" icon="github" horizontal="true" href="https://github.com/dodopayments/dodopayments-php"> Explore the PHP SDK for Dodo Payments on GitHub. </Card>

* **Product Archiving**: Introduced the ability to archive and unarchive products on the Dodo Payments Dashboard, helping manage clutter and maintain a clean interface.

## Improvements and Bug Fixes 🔧

* **Minor Enhancements and Fixes**: Various minor enhancements and fixes to improve overall performance and user experience.


# v0.20.1 (31 Jan 2025)
Source: https://docs.dodopayments.com/changelog/v0.20.1

Introduced Pay What You Want (PWYW) pricing and expands global payment coverage.

## New Features 🚀

* **Pay What You Want (PWYW) Pricing**: Introduced support for PWYW pricing, allowing users to choose any amount they wish to pay. This feature can be found while creating the product. For more details, please refer to the [documentation](/features/pricing#pay-what-you-want-pricing).

* **Expanded Global Coverage**: Dodo Payments now supports seamless payments from over 150 countries, enhancing global accessibility and convenience for users.
  <Frame>
    <iframe className="w-full aspect-video rounded-md" src="https://www.youtube.com/embed/JQJbSM_vz4g" title="Global Coverage Announcement | Dodo Payments" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen />
  </Frame>

## Improvements and Bug Fixes 🔧

* **Minor Enhancements and Fixes**: Various minor enhancements and fixes to improve overall performance and user experience.


# v0.22.0 (6 Feb 2025)
Source: https://docs.dodopayments.com/changelog/v0.22.0

Introduced subscription's first payment, UPI QR payment method, tax ID on checkout, dashboard restructure, self-serve onboarding guides, multi-language support, invoice PDF makeover, and a centralized help widget.

## New Features 🚀

* **Subscription's First Payment**: The most requested feature is here! Now, there will be a single transaction for the first payment, combining the mandate and the actual subscription amount.

* **UPI QR Payment Method**: Added UPI QR as a payment method for the Indian market, allowing customers to pay using UPI QR codes.

  <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/upi-qr.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=29958e92eb4a42e3d62cfa2f48b7d4af" alt="UPI QR Feature" data-og-width="2880" width="2880" data-og-height="1512" height="1512" data-path="images/changelog/upi-qr.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/upi-qr.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=b36ffba995a84e9abea6a02022ff8bf2 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/upi-qr.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=96be7b9933f33858398531ed6018f322 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/upi-qr.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=11b2f0e00d432067711e469880d62c3e 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/upi-qr.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=37534a2a8b011b3e48d920b6a7a73ce1 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/upi-qr.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=28415f48f3806a495edd9fd6e5c871c6 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/upi-qr.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=d2f31cb4b372b93ffd6afc26a7f37e7b 2500w" />

* **Tax ID on Checkout**: Customers can now add their Tax ID on the checkout page for invoicing and tax purposes.

* **Dashboard Restructure**: The entire Dodo Payments Dashboard has been restructured to be more intuitive and user-friendly.

* **Self-Serve Onboarding Guides**: New users can now get started with Dodo Payments using self-serve onboarding guides.

* **Multi-Language Support**: Added support for 14+ languages on the checkout page, allowing customers to pay in their preferred language. Supported languages include:
  * English (en)
  * العربية (ar) // Arabic
  * Català (ca) // Catalan
  * 中文 (cn) // Chinese
  * Deutsch (de) // German
  * Español (es) // Spanish
  * Français (fr) // French
  * עברית (he) // Hebrew
  * Italiano (it) // Italian
  * 日本語 (ja) // Japanese
  * Nederlands (nl) // Dutch
  * Polski (pl) // Polish
  * Português (pt) // Portuguese
  * Svenska (sv) // Swedish
  <Frame>
    <iframe className="w-full aspect-video rounded-md" src="https://www.youtube.com/embed/tR4yUwRKCxs" title="Language Announcement | Dodo Payments" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen />
  </Frame>

* **Invoice PDF Makeover**: The invoice PDFs have been given a new, clearer, and more effective design.

* **Centralized Help Widget**: Added a centralized Help widget to streamline and improve support.

  <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/help-widget.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=d56a36343ee4a78c30138bd5f7eee140" alt="Help Widget" data-og-width="824" width="824" data-og-height="918" height="918" data-path="images/changelog/help-widget.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/help-widget.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=f3c13257dc733b16e7d008783822c174 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/help-widget.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=42f0c6fc3aceec31256299e6b4e82243 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/help-widget.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=83fa22758f51ea3c6d2018d2ca669420 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/help-widget.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=bea4e6caaf4876f1bcb3f9145f5f2111 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/help-widget.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=16d1c93ed624431505125a34e9a78f7e 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/help-widget.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=7ec9bc9a042bf280112d607296300dfa 2500w" />

## Improvements and Bug Fixes 🔧

* **Rate Limiting**: Added rate limiting in the invoice API to prevent abuse and ensure system stability.

* **Metadata in Static Payment Links**: Added support for metadata in static payment links. For more details, refer to the [documentation](/developer-resources/integration-guide#1-static-payment-links).

* **Minor Enhancements and Fixes**: Various minor enhancements and fixes to improve overall performance and user experience.


# v0.24.0 (15 Feb 2025)
Source: https://docs.dodopayments.com/changelog/v0.24.0

Introduced discount coupons, support for over 25 local payment methods, customizable statement descriptors, and a complete UI makeover of the login page.

## New Features 🚀

* Introduced the functionality to create and add Discount Coupons to your products and services. You can create coupons with percentage discounts, set expiry dates, and more. Go to `Dashboard > Sales > Discounts` to create and manage discount coupons.

* Dodo Payments now supports over 25 local payment methods, including Apple Pay, Google Pay, Klarna, Affirm, Cash App, UPI, and all major credit/debit cards. This helps boost conversions and reduce checkout drop-offs.

  <Frame>
    <iframe className="w-full aspect-video rounded-md" src="https://www.youtube.com/embed/bf9_2iXWZOA" title="Local Payment Methods Announcement | Dodo Payments" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen />
  </Frame>

* Added functionality to customize the statement descriptor that appears on your customers' bank statements when they make a payment. You can find the option to customize the statement descriptor under `Dashboard > Business > Business Profile`.

* Complete UI makeover of the Dodo Payments login page.

## Improvements and Bug Fixes 🔧

* Security enhancements, performance improvements, and minor fixes.


# v1.0.0 (23 Feb 2025)
Source: https://docs.dodopayments.com/changelog/v1.0.0

Public release of Dodo Payments with Customer Portal and Customer Portal Session API.

This marks the first changelog since Dodo Payments exited Beta and is now publicly available. 🎉

<Frame>
  <iframe className="w-full aspect-video rounded-md" src="https://www.youtube.com/embed/qa9mLcQqPIA" title="Public Announcement | Dodo Payments" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen />
</Frame>

## New Features 🚀

* **Customer Portal**: Introduced the `Customer Portal` feature, allowing customers to manage their subscriptions, invoices, and payment methods. You can create static or dynamic Customer Portal links for your customers via the Dodo Payments Dashboard or through APIs. On the dashboard, navigate to `Sales > Customers > Share Invite`.

* **Customer Portal Session API**: Added the `Customer Portal Session` API to create a session of the Customer Portal for a specific customer. Note that the session is valid for only 24 hours. Check the [API Reference](/api-reference/customers/create-customer-portal-session) for more details.

* **Others**: Minor improvements and bug fixes.


# v1.10.1 (21 March 2025)
Source: https://docs.dodopayments.com/changelog/v1.10.1

Introduced Checkout 2.0, configurable payment methods, dynamic tax calculation, and on-demand subscriptions.

## New Features 🚀

* **Checkout 2.0**: Introducing a completely redesigned checkout experience featuring:
  * Streamlined, modern interface for improved user experience
  * New Query Collector System that stores parameters in session storage with unique IDs (e.g., `sess_1a2b3c4d`)
  * Persistent data availability throughout the entire checkout flow
  * More enhancements planned for future releases!
  <Frame>
    <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/checkout_2.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=4063a3a28fd5927bf8f0745a79e0041f" alt="Checkout 2.0" data-og-width="2880" width="2880" data-og-height="1526" height="1526" data-path="images/changelog/checkout_2.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/checkout_2.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=30ce5613aee183143fcacc03c3c4a69a 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/checkout_2.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=d9723b6b43b795ae5c16cfbbb430e4c0 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/checkout_2.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=975c7709458b878931346abe110f4469 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/checkout_2.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=322c01181c23e3ec073d57c5bf3065c0 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/checkout_2.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=c44e347309019c566a2e06f1058a233d 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/checkout_2.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=582fdac1e7133b3ee657b610e88c860a 2500w" />
  </Frame>

* **Configurable Payment Methods**: New `allowed_payment_methods` configuration enables merchants to customize available payment options during checkout. See the [Allowed Payment Methods](/features/payment-methods#configuring-payment-methods) documentation for implementation details.

* **Dynamic Tax Calculation**: Real-time calculation of tax rates based on customer billing addresses for more accurate pricing on the static payment links.

* **On-Demand Subscriptions**: New API endpoints for flexible subscription billing (available for select merchants).  Learn more in the [On-Demand Subscriptions](/features/subscription#enabling-on-demand-subscriptions) guide.

* **Additional Updates**:
  * Performance optimizations
  * Bug fixes
  * General system improvements


# v1.11.0 (28 March 2025)
Source: https://docs.dodopayments.com/changelog/v1.11.0

Introduced address autofill for checkout page, notifications center, payment link query builder, saved payment methods, and billing currency control.

## New Features 🚀

* **Address Autofill**: Streamlined checkout process with smart address field auto-completion based on user input.

  <Frame>
    <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/address_autofill.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=38c88e7b2cd0be2bf036185971aa89db" alt="Address Autofill" data-og-width="520" width="520" data-og-height="420" height="420" data-path="images/changelog/address_autofill.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/address_autofill.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=c730879635ce51ca551fb24965c9f62c 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/address_autofill.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=03f23f5c7cfcec6019c6345f6077a69a 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/address_autofill.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=7c661f884f2873f11db1b4885680b73a 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/address_autofill.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=568635be6148e40d3ba565a9bbdc4478 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/address_autofill.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=e2b1ee818ef8b05028baa3347b6c8477 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/address_autofill.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=3819dd22e176acccd4c4cd116486de5c 2500w" />
  </Frame>

* **Notifications Center**: Stay informed with a new dedicated notifications tab for important system events and updates.

  <Frame>
    <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/notifications.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=30899563de5b544ef033b9d11291eef7" alt="Notifications" data-og-width="499" width="499" data-og-height="377" height="377" data-path="images/changelog/notifications.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/notifications.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=2a35e21be292c0b06c3c0df0675da0ec 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/notifications.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=1474aab8c78e3c6fd8aa5494422becf7 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/notifications.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=9fac167ee05060b5121b42935d2ab295 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/notifications.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=b0d947e93542785c50413cb34d11d3d3 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/notifications.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=7971913c2f93600ce9594d36cfb69c76 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/notifications.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=70fd8ac196f0cfbb4dc9642805d62c81 2500w" />
  </Frame>

* **Payment Link Query Builder**: Create and customize payment links more efficiently with our new visual query builder.

  <Frame>
    <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/query_selector.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=30a264a5c968c6daccd219b8ce7889da" alt="Query Builder" data-og-width="559" width="559" data-og-height="715" height="715" data-path="images/changelog/query_selector.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/query_selector.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=83f986b67db035cbefd5048c1d5b5565 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/query_selector.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=ac136b6779d9de4319785a0bf499b0e0 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/query_selector.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=df28a6d3a3141dcd2bc1d90a6db70482 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/query_selector.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=4fb88d2f1e68022d78b6da60e3f5d5f1 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/query_selector.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=2e18d07055718c850653955bfca777f9 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/query_selector.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=b4d40b2a0edfdfdf68a57c6c85346288 2500w" />
  </Frame>

* **Saved Payment Methods**: Enable display of previously used payment methods during checkout by setting `show_saved_payment_methods: true` in payment link configuration.

* **Billing Currency Control**: Enforce specific billing currencies for payment links by setting the `billing_currency` parameter.

* **Improvements**: Various improvements and bug fixes.


# v1.13.0 (9th April 2025)
Source: https://docs.dodopayments.com/changelog/v1.13.0

New features including Adaptive Currency Support, MCP Server for AI integration, mobile apps, Custom GPT, and Dodo Dash game

## New Features 🚀

* **[Adaptive Currency Support](/features/adaptive-currency)** 💱
  * Automatically display prices in customers' local currencies based on their location.
  * Merchants receive payments in their preferred currency, while customers pay in their local currency.
  * Transparent conversion fee structure ranging from 2% to 4%, depending on the order value.
  * Support for over 25 new currencies has been added:
    * **Middle East**: AED (UAE Dirham), SAR (Saudi Riyal)
    * **Asia Pacific**: AUD (Australian Dollar), CNY (Chinese Yuan), HKD (Hong Kong Dollar), IDR (Indonesian Rupiah), KRW (South Korean Won), SGD (Singapore Dollar), TWD (New Taiwan Dollar)
    * **Europe**: ALL (Albanian Lek), CHF (Swiss Franc), CZK (Czech Koruna), DKK (Danish Krone), EUR (Euro), GBP (British Pound), HUF (Hungarian Forint), NOK (Norwegian Krone), PLN (Polish Zloty), RON (Romanian Leu), RSD (Serbian Dinar), SEK (Swedish Krona), TRY (Turkish Lira)
    * **Americas**: BRL (Brazilian Real), CAD (Canadian Dollar), MXN (Mexican Peso)
    <Frame>
      <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/adaptive_currency.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=f4b508425a8b53676acb0f649128f67c" alt="Adaptive Currency" data-og-width="1299" width="1299" data-og-height="755" height="755" data-path="images/changelog/adaptive_currency.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/adaptive_currency.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=e0d2c51618942499a4080cc9aed93a42 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/adaptive_currency.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=97d53bbe84c59b058658c5f4590f3121 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/adaptive_currency.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=c826b542a84312db6a0eb184ee9e8836 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/adaptive_currency.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=67aad92fa4c774c857f37a25d61fdc3e 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/adaptive_currency.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=d1eb9dd2cc34a2da24fee64a057fc89c 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/adaptive_currency.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=77204e67d03e4253de1e72f1b638c239 2500w" />
    </Frame>

* **[Dodo Payments MCP Server](/developer-resources/mcp-server)** 🤖
  * Introducing the new Model Context Protocol (MCP) Server for seamless AI model integration.
  * Provides a standardized interface for interacting with the DodoPayments API.
  * Simple installation via `npx` or through MCP client integration.
  * Offers a comprehensive tool suite for managing payments, subscriptions, and more.
  * Includes advanced features such as tool filtering and enhanced security controls.

* [Mobile App](/features/mobile-app): Now available for iOS and Android, bringing the complete dashboard experience to your mobile device. Key features include:
  * Real-time notifications for transactions, payouts, and subscription renewals
  * Full dashboard access with revenue tracking and performance graphs
  * Complete subscription and product management capabilities
  * Business operations including test/live mode switching and verification management
  * Developer tools with API key management and webhook monitoring
    Download now on the [App Store](https://apps.apple.com/in/app/dodo-payments/id6743651329) or [Google Play](https://play.google.com/store/apps/details?id=com.dodopayments.app).

* **Custom GPT for Dodo Payments**: Available on the ChatGPT Marketplace, trained on our documentation to assist with technical questions or issues. Access it here, [https://dodo.pe/custom-gpt](https://dodo.pe/custom-gpt)

* **Dodo Dash**: Experience the thrill of our endless runner game, Dodo Dash! Guide a daring dodo bird as it sprints, jumps, and dodges obstacles to survive. Give it a try here, [https://dash.dodopayments.com](https://dash.dodopayments.com).

* Various other bug fixes and improvements have been implemented.


# v1.14.0 (12th April 2025)
Source: https://docs.dodopayments.com/changelog/v1.14.0

Introduced new European payment methods, subscription billing address updates, and various improvements.

## New Features 🚀

* **New European Payment Methods**: We've expanded our payment options with four new European payment methods:

  * **iDEAL** - Netherlands
  * **Bancontact** - Belgium
  * **Przelewy24 (P24)** - Poland
  * **EPS** - Austria

  <Frame>
    <img alt="Supported European Payment Methods" src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/transactions/payments/european.png?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=92fbac3f89e32e1d6f600c3693994853" data-og-width="812" width="812" data-og-height="637" height="637" data-path="images/transactions/payments/european.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/transactions/payments/european.png?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=d20c57aed2953f030f56bfe2568427be 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/transactions/payments/european.png?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=99433a364e8f9eba8166151c94d218fd 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/transactions/payments/european.png?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=19e9b8d66d98f07391a64066f6400baa 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/transactions/payments/european.png?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=6dc1e50824a043003efc9c0b8e7dcaa2 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/transactions/payments/european.png?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=90c20dd20d4f20f1e48ebc4727f88fb1 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/transactions/payments/european.png?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=ee7bc82953c50e1c59471276dd3bd065 2500w" />
  </Frame>

  <Note>
    These payment methods are currently limited to:

    * Euro (EUR) currency only
    * One-time payments only (not available for subscriptions)

    For detailed information about these payment methods, visit our [Payment Methods](/features/payment-methods) documentation.
  </Note>

* **Subscription Billing Address Updates**: Added the ability to update billing addresses for subscriptions through:
  * Customer portal interface
  * Patch subscription API endpoint


# v1.16.1 (18th April 2025)
Source: https://docs.dodopayments.com/changelog/v1.16.1

Introduced modern verification forms, new Java and Kotlin SDKs, Afterpay/Clearpay integration, and Google Sign-In.

## New Features 🚀

* **Modern Verification Forms**: Redesigned the verification forms with a modern, user-friendly interface featuring clearer instructions, improved visual hierarchy, and intuitive form fields for a smoother verification process.

  <Frame>
    <img alt="Verification Forms" src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/verification_forms.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=c6f12cdaefe75871904f727720e281ed" data-og-width="2876" width="2876" data-og-height="1526" height="1526" data-path="images/changelog/verification_forms.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/verification_forms.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=55c145585aa86edf0c9602cb510d434b 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/verification_forms.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=a17140d8bb4ed0e2549a1ebd8f83ae4a 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/verification_forms.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=4795e0bf8d08950ddd047a061c5c45a3 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/verification_forms.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=4668e150fa656ce7db9500e6c498c09e 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/verification_forms.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=e7772fb300c902e617953e7b4f69b902 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/verification_forms.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=ba1584c0a305bd433083e61c4da8a8a4 2500w" />
  </Frame>

* **New Java and Kotlin SDKs**: Released native SDKs for Java and Kotlin to support Android development and enterprise Java applications. The SDKs include comprehensive documentation, sample code, and full support for Dodo Payments features including payments, subscriptions, and refunds. Available on GitHub: [Java SDK](https://github.com/dodopayments/dodopayments-java) and [Kotlin SDK](https://github.com/dodopayments/dodopayments-kotlin).

* **Afterpay/Clearpay Integration**: Added support for Afterpay/Clearpay as a Buy Now, Pay Later (BNPL) payment method, enabling customers to split payments into 4 interest-free installments.

* **Google Sign-In**: Implemented Google Sign-In as a new authentication option, allowing users to log in using their Google accounts. This OAuth 2.0-compliant integration supports both personal and workspace Google accounts for enhanced security and convenience.


# v1.18.3 (26th April 2025)
Source: https://docs.dodopayments.com/changelog/v1.18.3

Introduced Subscription Plan Change API, enhanced onboarding guidance, notification preferences center, and improved adaptive currency information.

## New Features 🚀

* **Subscription Plan Change API**: Launched a new API that enables seamless upgrades or downgrades of subscriptions between different product plans. For implementation details, see the [API reference](/api-reference/subscriptions/change-plan).

* **Enhanced Onboarding Guidance**: Improved sidebar nudges to provide clearer direction on next steps in your Dodo Payments onboarding journey.

  <Frame>
    <img alt="Sidebar Nudges" src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/sidebar-nudges.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=00139da5a94b552d9bc3a3a541f7e0ae" data-og-width="258" width="258" data-og-height="404" height="404" data-path="images/changelog/sidebar-nudges.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/sidebar-nudges.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=dddd1f231a48fb9ac05f415fed4169e9 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/sidebar-nudges.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=d208fbafa594e6284ed446b58b814b22 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/sidebar-nudges.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=c2b1b5cec120d1a0142f8edbcc4be743 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/sidebar-nudges.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=801dd38f9dbd840b4af1623af02fe826 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/sidebar-nudges.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=8771a28e627d36f23ad9dc61a29ee80d 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/sidebar-nudges.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=0fc72102b4f3599a16b4061c2c821494 2500w" />
  </Frame>

* **Notification Preferences Center**: Added a dedicated section for managing your notification settings. Access it by clicking the bell icon in the top right corner and then selecting the settings icon.

  <Frame>
    <img alt="Notification Preferences" src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/notif-pref.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=4e2ee3e8191240b3d85c16f085da305a" data-og-width="429" width="429" data-og-height="630" height="630" data-path="images/changelog/notif-pref.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/notif-pref.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=c6f8da94b3f1685c5327e8342ddff317 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/notif-pref.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=d2e08437440ce082c9cfc6665656c01c 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/notif-pref.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=485db222aaae01c56330334f13be6c50 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/notif-pref.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=870651fbb89c08532e744fd73cb2b9da 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/notif-pref.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=e089baf40492a484694d20f4b9f853e9 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/notif-pref.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=cc864a4af9afbe72d283f6265b8e29ab 2500w" />
  </Frame>

* **Enhanced Adaptive Currency Information**: Added new fields to the payment response including `settlement_amount`, `settlement_currency`, and `settlement_tax` to provide greater transparency on settlement details.

* **General Improvements**: Various minor enhancements and bug fixes to improve overall platform performance.


# v1.21.0 (3rd May 2025)
Source: https://docs.dodopayments.com/changelog/v1.21.0

Added support for addons to subscriptions, made dispute handling more robust, and added customer billing details to payment responses.

## New Features 🚀

* **Subscription Addons**: Introduced support for addons to subscription products. In the Products section, you'll find a new Addons tab where you can create addons such as "Seats". Once created, you can edit your subscription products to include these addons. This feature is available both on the dashboard and via API.

  * [Create Addon](/api-reference/addons/create-addon)
  * [List Addons](/api-reference/addons/list-addons)
  * [Get Addon](/api-reference/addons/get-addon)
  * [Update Addon](/api-reference/addons/update-addon)
  * [Update Addon Images](/api-reference/addons/update-addon-images)

  With addons, you unlock new billing options such as seat-based billing or variable billing per customer. Get creative with addons to design flexible billing models for your business.

  <Frame>
    <img alt="Addons" src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/addons.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=3fcedea1815e098defa21fb530880b29" data-og-width="2670" width="2670" data-og-height="1466" height="1466" data-path="images/changelog/addons.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/addons.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=3c7d1978c3fb83095f3a042e977160c7 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/addons.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=a63175db4b390a0a2d8d4d49bf07ba61 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/addons.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=3f7b0caf291d9eaceb87a8ec02456e31 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/addons.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=0218bc11251f4ec8ebaf512e8c3c0200 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/addons.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=4d6a73a21e2074f6af9b43a5cefa760a 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/addons.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=2a07d7f5beda3090a4907882ec66734b 2500w" />
  </Frame>

* **Enhanced Dispute Management**: Improved dispute handling to be more robust and easier to manage through your Dodo Payments dashboard.

* **Expanded Response Data**: Added customer billing details to payment responses, subscription responses, and webhooks.

* **General Improvements**: Various minor enhancements and bug fixes to improve overall platform performance.


# v1.22.0 (9th May 2025)
Source: https://docs.dodopayments.com/changelog/v1.22.0

Added unified search to the dashboard, added support for upgrading and downgrading subscriptions with addons, and added comprehensive card information to payment responses.

## New Features 🚀

* **Unified Dashboard Search**: We've implemented a powerful search functionality across the entire dashboard. You can now quickly find:

  * **Identifiers**: Payment, Refund, Dispute, Customer, Discount, Product, and Addon IDs
  * **Names**: Products, Addons, and Customers
  * **Contact Information**: Customer Email addresses
  * **Metadata**: Payment and Subscription metadata
  * **Navigation**: All pages within the Dodo Payments dashboard

  <Frame>
    <img alt="Unified Dashboard Search" src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/search.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=b15b7695b4bbb43ae03f88c10e2e4ec2" data-og-width="1820" width="1820" data-og-height="1024" height="1024" data-path="images/changelog/search.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/search.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=ee914e8b67888f2a4f20cf4095f92119 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/search.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=aab3c83bb31a7147490e14d789707a19 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/search.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=0019c28a8cca55a04873fc0ec0460663 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/search.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=d79f6f3232e7b2af0c9f7507eb24b01e 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/search.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=f59fbf569588ed04c08c47e785a8e365 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/search.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=2de18f183b2b0be90da4717cb0e58935 2500w" />
  </Frame>

* **Addons Plan Changes**: Added support for upgrading and downgrading subscriptions that include addons.

* **Expanded Payment Card Details**: Payment responses now include comprehensive card information:
  * `card_issuing_country`: Country where the card was issued
  * `card_last_four`: Last 4 digits of the card number
  * `card_brand`: Card brand (Visa, Mastercard, etc.)
  * `card_type`: Card type (credit, debit, prepaid)

* **Platform Enhancements**: Various performance optimizations, bug fixes, and minor improvements across the platform.


# v1.25.0 (20th May 2025)
Source: https://docs.dodopayments.com/changelog/v1.25.0

Introduced Overlay Checkout Beta, a modern TypeScript library for embedded payments, and a new subscription.plan_changed webhook event for better subscription lifecycle management.

## New Features 🚀

* **Overlay Checkout Beta**: We're excited to announce the beta release of our new overlay checkout experience. This modern TypeScript library provides a seamless way to integrate our payment overlay into your web application with real-time event handling and customizable themes. Key features include:

  * **Real-time Event Handling**: Listen to checkout events like payment creation, success, and failure
  * **TypeScript Support**: Fully typed APIs for better developer experience
  * **Customizable Themes**: Support for light and dark themes
  * **Browser Compatibility**: Works across all modern browsers including Chrome, Firefox, Safari, Edge, and IE11+
  * **PCI Compliance**: Maintains security standards while providing an embedded experience

  <Frame>
    <img src="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/overlay-checkout.png?fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=15d90c695e92914a9d54b10509d6fe47" alt="Overlay Checkout Cover Image" data-og-width="3826" width="3826" data-og-height="2160" height="2160" data-path="images/cover-images/overlay-checkout.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/overlay-checkout.png?w=280&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=67930ac9b97b42692611ffaa063b0338 280w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/overlay-checkout.png?w=560&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=5bc275c0c82994faf7507699f3443cda 560w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/overlay-checkout.png?w=840&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=d85ff73e834510f856f521d74e8d9ecd 840w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/overlay-checkout.png?w=1100&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=2fadc48d6b3d40665366b1922e458ca3 1100w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/overlay-checkout.png?w=1650&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=0f552d1695faa8239eec542a0b1eeefe 1650w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/overlay-checkout.png?w=2500&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=3e25457d894290ee38da2f9319edb999 2500w" />
  </Frame>

  Try it out:

  * Live Demo: [https://atlas.dodopayments.com](https://atlas.dodopayments.com#overlay-checkout)
  * Example Code: [https://github.com/dodopayments/dodo-checkout-demo](https://github.com/dodopayments/dodo-checkout-demo)
  * Integration Guide: [Overlay Checkout Guide](/developer-resources/overlay-checkout)

* **New Subscription Event**: Added support for the `subscription.plan_changed` webhook event that fires whenever a subscription is upgraded, downgraded, or modified. This event provides:

  * Complete subscription details after the change
  * Previous and new plan information
  * Prorated billing adjustments
  * Updated next billing date

  This event complements our existing subscription events (`subscription.active`, `subscription.on_hold`, etc.) to provide comprehensive visibility into the subscription lifecycle.

* **Platform Enhancements**: Various performance optimizations, bug fixes, and minor improvements across the platform.


# v1.27.0 (26th May 2025)
Source: https://docs.dodopayments.com/changelog/v1.27.0

Introduced Partial Refunds and Multi-Brand Support, enabling merchants to manage multiple brands and websites under a single verified business account.

## New Features 🚀

* **Partial Refunds**: We're excited to introduce our new Partial Refunds feature, now available through both our API and Dashboard. This powerful capability allows merchants to process precise refunds for specific components of a payment, whether it's a seat add-on or a portion of a subscription. The feature includes built-in validation to prevent errors and automatically generates refund receipts for your records.
  <Frame>
    <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/partial_refunds.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=a531ee98c106bbaffd6887eef3be5043" alt="Partial Refunds Cover Image" data-og-width="2160" width="2160" data-og-height="2700" height="2700" data-path="images/changelog/partial_refunds.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/partial_refunds.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=acd1cf48cd7ecdda6b8c6a42d0998b16 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/partial_refunds.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=9ea5d867ae2e6ae0e79f90133b461de1 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/partial_refunds.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=b1d56181c8b582e8e2636cc463d57a61 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/partial_refunds.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=eaa640d1bea7451689447a045225cba7 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/partial_refunds.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=4e0824711e086d0100bb0badc74087ac 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/partial_refunds.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=5e63d8d8bf40a32a662e3d32e261a30d 2500w" />
  </Frame>

* **Multi-Brand Support**: We're launching Multi-Brand Support, enabling you to manage multiple brands and websites under a single verified business account. This feature is ideal for launching new product lines, creating regional microsites, or separating different offerings while maintaining a streamlined operation.

  Key features include:

  * **Rapid Verification**: Most brands are approved within 24 working hours through our streamlined website review process
  * **Branded Checkout Experience**: Customers see the specific brand's logo, name, and descriptor during checkout
  * **Seamless Brand Creation**: Create additional brands through Business Settings ▸ Brands ▸ Add Brand
  * **Detailed Transaction Analytics**: Each transaction clearly indicates its associated brand for better business insights
  * **Simplified Payouts**: All revenue consolidates into your existing account without additional verification requirements

  <Frame>
    <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/brands.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=952b5573270b13ce7741c06b402d917c" alt="Multi-Brand Cover Image" data-og-width="1658" width="1658" data-og-height="286" height="286" data-path="images/changelog/brands.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/brands.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=37f97656b313ded99936c7a99d375d94 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/brands.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=c6ce066c1b1dbdbdc1c78c9a54e50a1d 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/brands.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=4765ffcae05e34c3ac5aed568e83984d 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/brands.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=98360fd5174549a080e3b8561a829742 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/brands.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=fa245d74c4e3c0d8562e1aa2ec149e6b 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/brands.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=fb10778dca430def542188d56b44c9c2 2500w" />
  </Frame>

  To create additional brands, navigate to Business `Settings ▸ Brands ▸ Add Brand` and complete the required details.

* **Platform Enhancements**: Various performance optimizations, bug fixes, and minor improvements across the platform.


# v1.3.2 (28 Feb 2025)
Source: https://docs.dodopayments.com/changelog/v1.3.2

Introduced the Teams Feature, enhanced success/failure screens, and minor improvements.

## New Features 🚀

* **Teams Feature**: We have introduced the highly requested Teams Feature. Now, you can invite `Editors` and `Viewers` to your Business and collaborate with them seamlessly. To try it out, navigate to the `Business > Teams` section in the Dashboard.

  <Frame>
    <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/teams.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=03367b197b04ed402c7f8c095a504d96" alt="Teams Feature" data-og-width="2880" width="2880" data-og-height="2160" height="2160" data-path="images/changelog/teams.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/teams.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=7f957d91da32277f0f845cd353596b71 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/teams.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=e62ce562620ed1580826f55f03c4fddb 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/teams.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=9f203047e0d89b4f09ea35809fc9a27e 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/teams.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=ccfd93b2c65feed143901bcadf41bf3d 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/teams.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=5236715a0a59ec6993df90389eeb77b5 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/teams.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=08adb54e4737d258ffd672fa63775e82 2500w" />
  </Frame>

* **Enhanced Success/Failure Screens**: The default success and failure screens have been updated for cases where no `redirect_url` is provided. These screens now offer greater visibility to your customers and include an option to download the invoice.

  <Frame>
    <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/new_success.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=14204862819a41e8022889bc2979b6c3" alt="Success Screens" data-og-width="2880" width="2880" data-og-height="2160" height="2160" data-path="images/changelog/new_success.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/new_success.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=0490dcd926955cff7f8486fb870db900 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/new_success.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=12f531e5b71ef2e083da58e22ee91548 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/new_success.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=875381eebe516ff9005d1a033328bff5 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/new_success.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=7a2f793ce18c5c955fdcb9c3a5d5f140 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/new_success.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=890fb442aa9421db6405cd623ca50913 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/new_success.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=35784d0d64d7d9cc8f9682ec63c80cfd 2500w" />
  </Frame>

* **Others**: Minor improvements and bug fixes.


# v1.30.0 (2nd June 2025)
Source: https://docs.dodopayments.com/changelog/v1.30.0

Added support for $0 payments and 100% discount codes for one-time products, enabling free product offerings, payout threshold for USD wallet, and standardized API error codes and messages.

## New Features 🚀

* **Zero-Dollar Payments**: Added support for \$0 payments and 100% discount codes for one-time products, enabling free product offerings and promotional campaigns.

* **Custom Payout Threshold**: Added the ability to set minimum payout amounts for USD wallets, helping merchants optimize payout processing and reduce fees for small transactions. Access this feature at `Payouts ▸ USD Wallet ▸ Edit Payout Threshold`.

  <Frame>
    <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/payout-threshold.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=ccb6067a9ea18460ef86fc07dfd6e025" alt="Payout Threshold Cover Image" data-og-width="576" width="576" data-og-height="392" height="392" data-path="images/changelog/payout-threshold.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/payout-threshold.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=4ca70468aa3dcb2d42d6ec3e6c06b9aa 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/payout-threshold.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=b67b5144b31cab80874f4e7d20c14ab4 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/payout-threshold.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=937e590ec065d6d943bd0a87edcba602 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/payout-threshold.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=e73337d5a0621875b04290ea0639189d 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/payout-threshold.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=00b3c4c9d3d1e6fdbde658d07e855d49 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/payout-threshold.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=5ccef2965b7c8489c5d7ef1634144326 2500w" />
  </Frame>

* **API Standardization**: Implemented standardized API error codes and messages as part of our ongoing API improvement initiative. This enhancement makes the API more consistent and developer-friendly. For detailed information, visit our [Error Codes Documentation](/api-reference/error-codes).

* **Transaction Decline Standardization**: Introduced unified transaction decline codes and messages, providing clearer insights into failure reasons and distinguishing between user errors and system issues. Learn more in our [Transaction Failures Documentation](/api-reference/transaction-failures).


# v1.32.0 (9th June 2025)
Source: https://docs.dodopayments.com/changelog/v1.32.0

Added support for Affiliates with Affonso, multiple webhook support, enhanced fraud prevention, subscription schedule cancellation, and static payment links.

## New Features 🚀

* **Affiliate Program Integration**: Launched integration with Affonso, enabling you to create and manage affiliate programs directly through Dodo Payments. Track referrals, handle commissions, and grow your revenue with trusted affiliate partnerships. Learn more in our [Affiliates](/features/affiliates) documentation.
  <Frame>
    <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/affiliates/cover.jpeg?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=2e4e00b705db69e247d30dbff15dcb3d" alt="Affiliates Cover Image" data-og-width="2160" width="2160" data-og-height="2160" height="2160" data-path="images/affiliates/cover.jpeg" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/affiliates/cover.jpeg?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=d97a1dc534abf059751d7027cc6a314f 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/affiliates/cover.jpeg?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=b6ed22417b457dede9700e0fea38ab43 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/affiliates/cover.jpeg?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=fb4de4297ad1a762107767cc8a360537 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/affiliates/cover.jpeg?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=3f70e5848e754fb1ff5a7b142ac74959 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/affiliates/cover.jpeg?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=779595cc8791889d2fede05721e8847a 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/affiliates/cover.jpeg?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=c7266e21d65a556be3a2d8d68935f40d 2500w" />
  </Frame>

* **Multiple Webhook Support**: Enhanced webhook capabilities to support multiple endpoints, allowing you to send event notifications to different systems simultaneously.

* **Enhanced Fraud Prevention**: Added a new business setting to force 3D Secure authentication for all transactions, helping reduce fraud and chargebacks.

* **Subscription Schedule Cancellation**: Introduced the ability to schedule subscription cancellations to take effect at the end of the billing period, available through our API.

* **Static Payment Links**: Added two more query params for static payment links:
  * `paymentCurrency`: Specifies the payment currency. Default is set as per the billing country.
  * `showCurrencySelector`: Shows the currency selector. Default is true.


# v1.34.0 (18th June 2025)
Source: https://docs.dodopayments.com/changelog/v1.34.0

Added Digital Product Delivery, React Native SDK beta release, new proration modes, adaptive currency for subscriptions, and enhanced verification form management.

## New Features 🚀

* **Digital Product Delivery**: Streamlined digital product delivery system with automated fulfillment, ensuring customers receive their digital goods immediately after successful payment. Learn more in our [Digital Product Delivery](/features/digital-product-delivery) documentation.

  <Frame>
    <img src="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/1.png?fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=cef4c6587998b8b7ee00bfb314002571" alt="Digital product delivery configuration interface showing file upload and external link options" data-og-width="1920" width="1920" data-og-height="1080" height="1080" data-path="images/digital-product-delivery/1.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/1.png?w=280&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=9d7e8424e5ac1a17955e949d87b57d12 280w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/1.png?w=560&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=f03ce39ea2bd6dac97eae3e52e6ac8e1 560w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/1.png?w=840&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=b4dc8e83004c799bf8020a14b883cc23 840w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/1.png?w=1100&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=d53bb0617e0f7ce4b860281d56bd6753 1100w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/1.png?w=1650&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=e4c5131d3b8504c5e7c4a547daf64db9 1650w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/1.png?w=2500&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=1847ee99a10d2936cfcbfbc772d5f3b8 2500w" />
  </Frame>

* **React Native SDK (Beta)**: Released our React Native SDK in beta, enabling secure payment processing in native Android and iOS apps with customizable UI components and screens. Learn more in our [React Native SDK](/developer-resources/react-native-integration) documentation.

  <Frame>
    <iframe className="w-full aspect-video rounded-md" src="https://www.youtube.com/embed/uy4vikrKMPI" title="React Native SDK Demo | Dodo Payments" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen />
  </Frame>

* **New Proration Mode**: Introduced `full_immediately` proration mode, allowing immediate full charges when subscription changes occur, providing more flexible billing options for your business needs.

* **Adaptive Currency for Subscriptions**: Enhanced subscription management with adaptive currency support, automatically adjusting pricing based on customer location and local currency preferences.

* **Instantaneous On-Demand Processing**: Improved processing speed for on-demand charges making it almost instant, reducing transaction times and providing faster payment confirmations.

* **Verification Form Management**: Added comprehensive verification form data viewing capabilities in the Dodo Payments Dashboard verification section, allowing you to review and manage all submitted verification documents in one centralized location.

* **Subscription Cancellation Enhancement**: Implemented subscription cancellation at the end of billing period functionality, now available in both the dashboard and customer portal for improved user experience and billing transparency.

* **General Improvements**: Various minor fixes and performance improvements to enhance overall platform stability and user experience.


# v1.34.4 (26th June 2025)
Source: https://docs.dodopayments.com/changelog/v1.34.4

Enhanced Dashboard Analytics with comprehensive new metrics across three key dashboard sections: Revenue Analytics, Customer Analytics, and Payment Success Rate Analytics.

## New Features 🚀

* **Enhanced Dashboard Analytics**: Completely redesigned the home page analytics with comprehensive new metrics across three key dashboard sections:

  * **Revenue Analytics**

    * Total Revenue overview
    * Daily Revenue tracking
    * Payment count metrics
    * Refund count tracking
    * Payout Received status
    * Top 5 revenue-generating countries
    * Revenue growth rate analysis

    <Frame>
      <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=f1e965377d8809d7e834fe81ebe43cb2" alt="Revenue Analytics dashboard showing comprehensive revenue metrics and country breakdown" data-og-width="2864" width="2864" data-og-height="1524" height="1524" data-path="images/analytics/revenue.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=cf27459d910bc62a4693cebf0bb2564b 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=323fd92817805702c8ad92e9be715067 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=14dcc78df5931fb3bd507a9ef44d232e 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=9ace32e3162076e6d2a386a956f543c8 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=03f55a9c3098c26966b8df60ec53f6b5 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=5089ad40a89005510d0a4a3d1063b77a 2500w" />
    </Frame>

  * **Customer Analytics**

    * Average Revenue Per User (ARPU)
    * Active Customers count
    * Customer segmentation (new vs existing)
    * Top 6 customers for current month

    <Frame>
      <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/customer.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=311b8a18deb3967aeaf0eac17c5376c9" alt="Customer Analytics dashboard displaying ARPU, customer counts, and top customer rankings" data-og-width="2876" width="2876" data-og-height="1514" height="1514" data-path="images/analytics/customer.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/customer.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=1e162441cf113bf93d8ca78a39433171 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/customer.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=ae4e587045ba252ef6ea519fa296bb09 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/customer.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=5d8cb7aa46f1b8856e41e058ebb7d58c 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/customer.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=40acce18418619d9c360ab4b3c2c815b 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/customer.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=037ea83cb0bc623402c42d3a2bb073e5 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/customer.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=9c29003f21e6033c9aafb0da8a2d1953 2500w" />
    </Frame>

  * **Payment Success Rate Analytics**

    * Payment Success Rate metrics
    * Refund Success Rate tracking
    * Failure Reasons breakdown
    * Payments status distribution
    * Monthly Success Rate trends

    <Frame>
      <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/success-rate.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=c266504fe6db71cd0641f4b26b527ec5" alt="Payment Success Rate Analytics showing success rates, failure reasons, and monthly trends" data-og-width="2878" width="2878" data-og-height="1514" height="1514" data-path="images/analytics/success-rate.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/success-rate.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=f3f834e7ef8a44c1ed319c1451dc11cf 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/success-rate.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=073f1cbc78ff696da7225dcd00806303 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/success-rate.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=b4e79ad7f5013431c365782ea4825e1f 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/success-rate.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=e261e0b34601958b877365be9d19987a 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/success-rate.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=fc2c6d93b1a7a87d7d028d55e17f1f8c 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/success-rate.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=e7728c47881384aec4ae5ca83896bc92 2500w" />
    </Frame>


# v1.37.0 (2nd July 2025)
Source: https://docs.dodopayments.com/changelog/v1.37.0

Enhanced Analytics Dashboard with comprehensive revenue and retention insights, Reports 2.0 with detailed business reporting capabilities, and improved subscription management features for better business intelligence and operational efficiency.

## New Features 🚀

### Enhanced Analytics Dashboard

We've expanded the analytics dashboard with comprehensive revenue and retention insights to help you better understand your business performance.

#### Revenue Breakdown Analytics

Track your recurring revenue metrics with detailed breakdowns:

* **Projected ARR**: Annual Recurring Revenue projections with trend analysis
* **MRR Breakdown and Growth Rate**: Monthly Recurring Revenue analysis with month-over-month growth metrics
* **New MRR Chart**: Visual representation of new customer revenue acquisition
* **Expansion MRR Chart**: Tracking revenue growth from existing customer upgrades and expansions
* **Churn MRR Chart**: Monitoring revenue lost from customer cancellations and downgrades
* **Net New MRR Chart**: Net revenue impact combining new, expansion, and churn MRR

<Frame>
  <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue-breakdown.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=66d1c0d64e6a69e6e7f22ac26c89bed7" alt="Revenue Breakdown dashboard showing projected ARR, MRR breakdown, and growth rates" data-og-width="1267" width="1267" data-og-height="867" height="867" data-path="images/analytics/revenue-breakdown.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue-breakdown.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=657e48bcc7a359b18d62254d285881db 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue-breakdown.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=398191fbd09fa41d6db2ae7eacf265e6 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue-breakdown.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=130b488adf15fc23a3a4aa7b8ea00a4a 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue-breakdown.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=4a933e5fb3358463cba962d493d1914b 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue-breakdown.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=c4715fce0f87f42445a95bdb99fc43e3 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue-breakdown.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=cffeec7feb2d1d72fc59a8c30b580560 2500w" />
</Frame>

#### Retention Analytics

Monitor customer retention and churn patterns:

* **Customer Churn Rate**: Percentage of customers who cancel their subscriptions
* **Revenue Churn Rate**: Percentage of revenue lost from cancellations and downgrades
* **Churn Rate Trends**: Historical tracking of both customer and revenue churn patterns over time
* **User Retention Matrix**: Cohort analysis showing customer retention rates across different time periods

<Frame>
  <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/retention.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=daf77496683051cfd59db89c679fadea" alt="Retention Analytics dashboard showing customer churn rate, revenue churn rate, and churn rate trends" data-og-width="1299" width="1299" data-og-height="870" height="870" data-path="images/analytics/retention.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/retention.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=342744274649b984cf7ab8a352654c1e 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/retention.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=fcfd28314568d29759c87ac317252e6b 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/retention.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=ec74eb579b916e30cc80cf8537d0f052 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/retention.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=17fcb7d02c5d24cf2826f6e19b9e1169 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/retention.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=b4d0ec16eb37e244d0da006244ab43ca 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/retention.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=83251fbee51fb373d71c4c6d5d5a7fc7 2500w" />
</Frame>

### Reports 2.0

We've completely revamped the reports section with more comprehensive and detailed reporting capabilities. Navigate to **Business > Reports** to access the new reporting suite.

Available reports include:

* **Payment Report**: Detailed record of all processed payments with transaction status tracking
* **Refund Report**: Comprehensive log of all refund activities with detailed refund information
* **Payout Report**: Summary of payouts made to your account
* **Product-wise Sales Report**: Sales performance insights with revenue and business growth metrics
* **Payment Failure Report**: Summary of failed payment attempts with failure reasons
* **Customer Report**: Payment summary organized by customer
* **Disputes Report**: Payment disputes summary with resolution status
* **Account Summary Report**: Complete account overview and summary

<Frame>
  <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/reports.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=b2f16ff3401205461e70bb672c2e0dd1" alt="Reports 2.0 dashboard showing various report types" data-og-width="1481" width="1481" data-og-height="783" height="783" data-path="images/analytics/reports.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/reports.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=65e53ee9f7e464ba4296594cafbbbc23 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/reports.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=3f023812276906ef4b61e0ba2e52789f 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/reports.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=35eec5370bd7a2bc080a814c63a56077 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/reports.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=d0663e86dbd90c064df91d4b8ea792de 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/reports.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=1c7707cd6f5f9152bce3ef4e2a7b4941 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/reports.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=668935b4b6a7166c985987455c7f066f 2500w" />
</Frame>

### Enhanced Payout Reporting

We've added detailed payout reports that provide clear visibility into fees and transaction details for each payout you receive from Dodo Payments. Access these enhanced reports in **Business > Payouts**.

<Frame>
  <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/payout.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=e387ce347733bec1d1b57acdfbd1a6f2" alt="Payout Report dashboard showing detailed payout information" data-og-width="1058" width="1058" data-og-height="887" height="887" data-path="images/analytics/payout.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/payout.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=851c36ae8dea33bac1fd2a28a277023b 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/payout.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=76147da0d45b73f0b1c4a95ce603111a 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/payout.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=c130960bfcb92db470250ba11aa30311 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/payout.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=6ee89bcdd13626568dc336eff7030992 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/payout.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=b048480e9da98d644f1f6c691e74dda5 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/payout.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=59dc534307e199d8303dc07866d86cee 2500w" />
</Frame>

### Dodo Payments Remote MCP Server

You can now use the hosted Remote MCP Server at [https://mcp.dodopayments.com](https://mcp.dodopayments.com) for instant MCP integration—no local setup required.

<Frame>
  <iframe className="w-full aspect-video rounded-md" src="https://www.youtube.com/embed/TxGgYxNmkT4" title="Using Dodo Payment's Remote MCP Server" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen />
</Frame>

<Note>
  This is the fastest way to get started with Dodo Payments' MCP integration. No server installation or maintenance needed.
</Note>

<Steps>
  <Step title="Open the Remote MCP Server">
    Visit <a href="https://mcp.dodopayments.com" target="_blank">[https://mcp.dodopayments.com](https://mcp.dodopayments.com)</a> in your browser.
  </Step>

  <Step title="Copy the MCP JSON configuration">
    On the site, copy the MCP JSON configuration provided for your client.
  </Step>

  <Step title="Configure your AI application">
    Paste the configuration into your application's MCP settings (for example, Cursor or Claude).

    <Tip>
      For Cursor, your configuration should look like this:
    </Tip>

    ```json  theme={null}
    {
      "mcpServers": {
        "dodopayments_api": {
          "command": "npx",
          "args": ["-y", "mcp-remote@latest", "https://mcp.dodopayments.com/sse"]
        }
      }
    }
    ```
  </Step>

  <Step title="Complete authentication and environment setup">
    After adding the JSON configuration, a pop-up will prompt you to:

    * Enter your Dodo Payments API key
    * Select the environment (test or live)
    * Select your MCP Client under Configuration Options
  </Step>

  <Step title="Login and Approve">
    * Click the Login and Approve button
  </Step>

  <Step title="Verify successful connection">
    Once setup is complete, you'll see a success screen.

    <Check>
      You're now ready to use the Dodo Payments MCP server!
    </Check>
  </Step>
</Steps>

### Additional Improvements

* Various minor improvements and bug fixes for enhanced stability and performance


# v1.38.0 (9th July 2025)
Source: https://docs.dodopayments.com/changelog/v1.38.0

Analytics Chart Sharing, Multiple Partial Refunds, Cumulative Revenue Analytics, Context7 Integration, Next.js Adapter

## New Features 🚀

### Analytics Chart Sharing

Share your analytics charts as images with customizable branding options. Click the share button on any chart to generate an image with multiple color variants that match your brand identity.

<Frame>
  <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/share-chart.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=f5784b40e204e5b97fc078409fda55e4" alt="Analytics chart sharing interface showing share button and color variant options" data-og-width="2014" width="2014" data-og-height="1502" height="1502" data-path="images/changelog/share-chart.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/share-chart.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=a8acf71eeb1f7adb2860b673f1a63555 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/share-chart.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=448f74c545f6204255ab550446522357 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/share-chart.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=a28476ddadfe09c6edca655499bbdce9 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/share-chart.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=5bf4415604fe81d2ed14b751171be51d 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/share-chart.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=edb81368989be6a8d5fc39f52b832e56 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/share-chart.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=2801a90c1ded48948e65587d67b5fc76 2500w" />
</Frame>

### Multiple Partial Refunds

Process multiple partial refunds for a single payment through both the API and Dodo Payments Dashboard, providing greater flexibility in handling customer refund requests.

### Cumulative Revenue Analytics

Track your business growth with new cumulative revenue charts in the analytics dashboard, offering comprehensive insights into your revenue trends over time.

<Frame>
  <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/revenue-chart.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=06e2bf426a2d8967ee975c02b75494b1" alt="Cumulative revenue charts displaying revenue growth trends" data-og-width="2358" width="2358" data-og-height="844" height="844" data-path="images/changelog/revenue-chart.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/revenue-chart.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=983ab203a7edcef2680d7f1aed8f767c 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/revenue-chart.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=f8d3fd8ad097a791bb5c0535b4e44b88 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/revenue-chart.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=10c1c75de884810890b54be5f0886985 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/revenue-chart.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=362defcc790c493384acc209aa96879c 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/revenue-chart.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=b75bb8a5c2fb2aeef5981a884c28b28c 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/revenue-chart.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=c59e25e2141a3b1aa5dba1393c2c6bd0 2500w" />
</Frame>

### Next.js Adapter

Easily integrate Dodo Payments into your Next.js application with our official adapter. Set up payment processing in just a few lines of code. You can also use our ready-made LLM prompt with AI coding agents (such as Cursor, Windsurf, Lovable, and others) to automate the integration process.

[View the @dodopayments/nextjs package on npm](https://www.npmjs.com/package/@dodopayments/nextjs)

### Context7 Integration

Access Dodo Payments documentation through Context7 MCP, enabling AI coding agents to leverage comprehensive payment processing context. For detailed information, visit the [Context7 documentation](https://context7.com/llmstxt/dodopayments-llms-full.txt).


# v1.4.0 (6 Mar 2025)
Source: https://docs.dodopayments.com/changelog/v1.4.0

Introduced the Storefront Feature and Amazon Pay Integration.

## New Features 🚀

* **Storefront Feature**: Create a simple, branded, and mobile-friendly online store to showcase both One-Time Payment products and Subscription products. This feature eliminates the complexity of building an entire website, enabling you to quickly offer your products or services online without additional web development efforts.

  <Frame>
    <img src="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-1.png?fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=085dab26f05d5f0ea48cb31fd6e8e0f9" data-og-width="1920" width="1920" data-og-height="1440" height="1440" data-path="images/store-front/sf-1.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-1.png?w=280&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=d11f6cfa8610c22bcc97e8ec400a637f 280w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-1.png?w=560&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=6ed970489b81e2bbff794bc911ce2271 560w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-1.png?w=840&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=98ff19e1d971ccd426c5e65ca3aba007 840w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-1.png?w=1100&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=958339f3a23d725df0911db75c84d630 1100w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-1.png?w=1650&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=9e178086e696e0363ea07829cd042d86 1650w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-1.png?w=2500&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=e33702a6f59ab155f083fd4902d58403 2500w" />
  </Frame>

* **Amazon Pay Integration**: Added Amazon Pay as a payment method for One-Time Payments.

* **Improvements and Fixes**: Minor improvements and bug fixes.


# v1.43.0 (24th July 2025)
Source: https://docs.dodopayments.com/changelog/v1.43.0

Comprehensive Webhooks Upgrade: endpoint management, security, delivery logs, debugging, and monitoring—now fully self-serve in the dashboard.

## New Features 🚀

### Major Webhooks Upgrade

Gain complete control, visibility, and security with our fully reimagined webhooks system. Explore the new capabilities below.

<Steps>
  <Step title="Endpoint & Subscription Management">
    * Create, edit, pause/resume, and delete webhook endpoints (URLs)
    * Select event types for each endpoint
    * Configure custom headers per endpoint
    * Set rate limits for each endpoint
  </Step>

  <Step title="Secrets & Security">
    * View and rotate signing secrets (HMAC keys) per endpoint
    * Regenerate secrets and view last rotation timestamps
    * Copy code snippets or documentation for signature verification
  </Step>

  <Step title="Delivery History & Debugging">
    * View message logs for each endpoint (status, timestamps)
    * Inspect individual message attempts with request/response bodies and headers
    * Replay (re-send) failed or past messages
    * Filter logs by event type, status code, or time range
  </Step>

  <Step title="Testing & Troubleshooting">
    * Send test events from the portal using mock payloads
    * Inspect payload schemas and view expected fields
  </Step>

  <Step title="Monitoring & Metrics">
    * Track delivery stats: success/failure counts, latency, and recent error trends
    * Monitor endpoint health status (e.g., failing, healthy)
  </Step>
</Steps>

<Check>
  You can now manage, debug, and secure your webhooks with greater flexibility—all from the dashboard.
</Check>


# v1.44.0 (3rd August 2025)
Source: https://docs.dodopayments.com/changelog/v1.44.0

Adaptive Currency, Turkish Language Support, and New Proration Mode

## New Features 🚀

* The Adaptive Currency feature now supports additional currencies, further enhancing localized payment experiences across more regions. Newly supported currencies include:
  * MVR (Maldivian Rufiyaa)
  * MUR (Mauritian Rupee)
  * ZAR (South African Rand)
  * PHP (Philippine Peso)
  * FJD (Fijian Dollar)
  * QAR (Qatari Riyal)
  * MYR (Malaysian Ringgit)

For comprehensive details on Adaptive Currency functionality and its benefits, please visit the [Adaptive Currency documentation](/features/adaptive-currency).

* Turkish language support has been added to the Dodo Payments Checkout Page.

* A new proration mode, `difference_immediately`, has been introduced. This mode charges the difference immediately, irrespective of the remaining time in the billing cycle when changing plans via the API. [Documentation](/developer-resources/subscription-integration-guide).


# v1.47.0 (11th August 2025)
Source: https://docs.dodopayments.com/changelog/v1.47.0

Dashboard UI overhaul, discount codes for subscriptions, expanded Adaptive Currency, webhook management API, and product metadata support.

## New Features 🚀

* **Major Dashboard Enhancements**

  * **Sidebar Navigation:** Now collapsible, allowing you to minimize distractions and focus on your workflow.
  * **Dashboard Search:** Completely redesigned for faster, more relevant results with full keyboard navigation support.
  * **Tables:** Gain more control with the ability to hide or rearrange columns, pin columns left or right, and adjust rows per page for a personalized view.
  * **Transaction Details Page:** Improved layout displays more payment information, including a detailed payment breakdown for full transparency.
  * **UI & Style Updates:** Refined colors, typography, and spacing deliver a cleaner, more consistent user experience.

  <Frame>
    <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/dashboard_enh.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=f3fbd7ff94e5fa2b5a5b4490ca10f228" alt="Dashboard enhancements including new sidebar, search, and table controls" data-og-width="2876" width="2876" data-og-height="1570" height="1570" data-path="images/changelog/dashboard_enh.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/dashboard_enh.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=a594f975347588eb1f41521089ed51e4 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/dashboard_enh.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=3789a5e57c5438c328a0c9613fa8cccc 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/dashboard_enh.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=377937e7fc20fcb48a385628b698ec7b 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/dashboard_enh.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=c1409b03c937ad2065f1aa40b43d6ea5 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/dashboard_enh.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=1dc948369d64f97409a31e795e7e283f 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/dashboard_enh.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=8d07bce81f68ba26ac759cf60574d736 2500w" />
  </Frame>

* **Discount Codes for Subscriptions**\
  You can now apply discount codes to subscriptions, specifying the number of billing cycles the discount should apply. This gives you greater flexibility and control over your pricing strategies.

  <Frame>
    <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/subs_discount.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=de087298f496ec45449b43aab9ff4f2d" alt="Applying discount codes to subscriptions in the dashboard" data-og-width="2632" width="2632" data-og-height="326" height="326" data-path="images/changelog/subs_discount.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/subs_discount.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=6948b7c1653e8bca81b2f3c6a873ae92 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/subs_discount.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=239c8a5f5f51ecc07f3a9c3c7bf75ebc 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/subs_discount.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=b8c47860cfc59a90b53322b360bae4e6 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/subs_discount.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=21079781b4b649daa6dc632bcc3e7800 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/subs_discount.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=0afdaa0da550c71156538ad73ac845ce 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/subs_discount.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=332c46e64054f67af87a2068fc392b1e 2500w" />
  </Frame>

* **Adaptive Currency Expansion**\
  The Adaptive Currency feature now supports 50+ additional currencies, enabling even more localized payment experiences. See the [Adaptive Currency documentation](/features/adaptive-currency) for the complete list of supported currencies.

* **Webhook Management API**\
  Introduced webhook CRUD APIs, allowing you to programmatically create, update, and manage your webhooks.

* **Product Metadata Support**\
  You can now add metadata to your products, making it easy to store and retrieve additional information for each product.


# v1.5.0 (7 March 2025)
Source: https://docs.dodopayments.com/changelog/v1.5.0

Introduced a custom date filter for analytics, a new tax category, and various improvements.

## Minor Features 🚀

* Added a custom date filter on the home page analytics to view data for a specific date range.

* Introduced `EdTech` as a tax category for products.

* Various minor improvements and bug fixes.


# v1.51.0 (23rd August 2025)
Source: https://docs.dodopayments.com/changelog/v1.51.0

Powerful Checkout Sessions API, Metadata in Payments Export, and Subscription Next Billing Date Update

## New Features 🚀

### Checkout Sessions API

Introducing our new **Checkout Sessions API** - a powerful, hosted checkout solution that provides a complete payment flow for both one-time purchases and subscriptions. This new API replaces the previous Dynamic Links approach with enhanced flexibility and improved user experience.

**Key Benefits:**

* **Simplified Integration**: No need to provide complete billing addresses upfront - we handle missing details automatically
* **Enhanced Customization**: Full control over payment methods, currencies, themes, and feature flags
* **Better UX**: Pre-fill customer information to reduce checkout friction and improve conversion rates
* **Flexible Configuration**: Support for multi-product carts, subscription trials, discount codes, and more

**What's Changed:**

* **Before**: Required complete billing address information when creating payment links
* **Now**: Pass whatever customer information you have available - we'll collect the rest during checkout
* **Migration**: Simple API endpoint change with no additional handling required

<CardGroup cols={2}>
  <Card title="Get Started with Checkout Sessions" icon="rocket" href="/developer-resources/checkout-session">
    Complete guide with code examples in Node.js, Python, and REST API
  </Card>

  <Card title="API Reference" icon="code" href="/api-reference/checkout-sessions/create">
    Full API documentation with live testing
  </Card>
</CardGroup>

### Minor Improvements

* Payments export reports now include metadata for enhanced data analysis.
* You can now update the next billing date for subscriptions directly via the API.


# v1.52.4 (3rd September 2025)
Source: https://docs.dodopayments.com/changelog/v1.52.4

Usage-Based Billing, public Refund Receipt API, 100% subscription discounts, and checkout session ID in payments

## New Features 🚀

### Usage-Based Billing

Bill customers precisely based on actual consumption. Define meters, ingest events, and convert usage into charges automatically.

* **Flexible aggregation**: count, sum (over property), unique, max, last
* **Event filtering**: AND/OR logic with rich comparators to include only relevant events
* **Product linkage**: attach meters to products with price-per-unit and optional free thresholds
* **Analytics**: track trends, event streams, and per-customer consumption

<CardGroup cols={2}>
  <Card title="Feature Overview" icon="rocket" href="/features/usage-based-billing">
    Learn the concepts, components, and the end-to-end data flow.
  </Card>

  <Card title="Integration Guide" icon="code" href="/developer-resources/usage-based-billing-guide">
    Step-by-step setup for meters, products, and event ingestion.
  </Card>
</CardGroup>

<Warning>
  Usage-Based Billing is currently in beta.
</Warning>

### 100% Discounts for Subscriptions

Apply a 100% discount for any number of billing cycles to support complimentary periods, sponsorships, or promotional campaigns. Invoices reflect the full discount and proration follows your plan settings.

### Minor Improvements

* Refund Receipt API is now publicly accessible. See the docs: [/api-reference/refunds/get-refund-receipt](/api-reference/refunds/get-refund-receipt).
* Added `checkout session ID` to the Get Payment API response and payment webhooks to help correlate payments with their originating checkout session.


# v1.53.2 (13th September 2025)
Source: https://docs.dodopayments.com/changelog/v1.53.2

Customer credits, enhanced refund details, higher meter limits, license activation context, and $0 downgrades

## New Features 🚀

### Customer Credits

Credits are now **automatically applied to recurring subscription invoices**, making it easy to:

* Reward loyal customers
* Issue service credits
* Handle manual adjustments without disrupting billing cycles

<Tip>
  Use customer credits for:

  * Promotional incentives
  * Compensation for service interruptions
  * Pre-paid account balances
</Tip>

You can **add or remove credits from a customer's wallet using the API**, enabling automated workflows for customer support, retention, or loyalty programs.

**Example use cases:**

* Credit a customer's wallet after a successful referral
* Debit credits as part of a custom upgrade path

Explore the new and updated customer wallet APIs:

* [Get Customer Wallets](/api-reference/customers/get-customer-wallets)
* [List Customer Wallet Ledger Entries](/api-reference/customers/get-customer-wallets-ledger-entries)
* [Create Customer Wallet Ledger Entry for Adding and Removing Credits](/api-reference/customers/post-customer-wallets-ledger-entries)

<Info>
  Credit application during Checkout will be available in the next release, allowing customers to redeem their wallet balance directly at the point of purchase.
</Info>

## Improvements & Updates ✨

* **Customer details in Get Refund API**\
  The refund retrieval endpoint now returns associated customer information, streamlining reconciliation and support workflows.\
  Learn more: [Get Refund API](/api-reference/refunds/get-refunds-1)

* **Increased meter limit to 50**\
  You can now create up to 50 meters per account, enabling more granular usage tracking across your products and features.\
  Learn more: [Get Meters API](/api-reference/meters/get-meters)

* **Product and customer context in Activate License Key API**\
  License activation responses now include detailed product and customer context, improving entitlement checks and downstream integrations.\
  Learn more: [Activate License Key API](/api-reference/licenses/activate-license)

* **Subscriptions can be downgraded to \$0**\
  You can now downgrade subscriptions to free or \$0 plans, making it easier to support trials, community tiers, and sponsorships.\
  Manage subscriptions: [Update Subscription API](/api-reference/subscriptions/patch-subscriptions)


# v1.56.0 (27 October 2025)
Source: https://docs.dodopayments.com/changelog/v1.56.0

Streamlined onboarding, C# SDK launch, webhook verification, Two-Factor Authentication, overlay checkout sessions, and usage-based subscription plan changes

## New Features 🚀

1. **New Onboarding Experience**\
   Onboarding is now streamlined so you can get started faster and begin accepting payments without unnecessary delays.
   * Faster account activation
   * Simplified verification process

2. **Two-Factor Authentication (2FA)**\
   Enhanced account security with two-factor authentication support. Protect your merchant account and team members with an additional layer of security beyond passwords.
   * Secure your account against unauthorized access
   * Support for authenticator apps
   * Required for sensitive operations

3. **Session Links in Overlay Checkout**\
   Checkout sessions now integrate seamlessly with overlay checkout, providing a smoother embedded payment experience. Create checkout sessions and display them in an overlay without redirecting customers away from your application.

4. **C# SDK**\
   The official Dodo Payments C# SDK is now available, bringing native .NET support for integrating payment functionality into your C# and .NET applications.

   * Full type safety with C# interfaces
   * Async/await support for all API operations
   * Available on NuGet for easy installation

   Learn more: [Dodo Payments SDKs](/developer-resources/dodo-payments-sdks)

5. **Webhook Verification in All SDKs**\
   All SDKs now include built-in webhook verification functions to securely validate incoming webhook events. Powered by the industry-standard [webhooks library](https://github.com/standard-webhooks), these functions make it simple to verify and process webhook payloads.

   Two methods are available:

   * `unwrap()`: Verifies webhook signatures using your webhook secret key for production use
   * `unsafe_unwrap()`: Parses webhook payloads without verification for local testing and development

   To use webhook verification, provide your `DODO_PAYMENTS_WEBHOOK_KEY` when initializing the Dodo Payments client. Both functions automatically parse the webhook payload and extract the event type, making webhook handling more secure and convenient.

***

## Improvements & Updates ✨

* **Update customer name in subscription billing details**\
  Customer names can now be modified directly in subscription billing details, making it easier to correct information or update records.

* **Get Checkout Session API**\
  Retrieve checkout session details programmatically to check status, validate sessions, or integrate with your analytics workflows.

* **Changing plan support for usage-based subscriptions**\
  Subscription plan changes are now fully supported for usage-based billing models, enabling seamless upgrades and downgrades while preserving usage tracking.

* **Tax ID in subscription responses**\
  Tax identification numbers are now included in subscription API responses, improving compliance reporting and invoice generation.

* **Force 3DS flags in APIs**\
  Enhanced 3D Secure control with force 3DS flags now available in checkout session, payment, and subscription APIs for stronger authentication requirements.

* **Filter balance ledger by currency**\
  Dashboard now supports filtering balance ledger entries by currency, simplifying reconciliation for multi-currency operations.

* **Reduced payout threshold to \$50**\
  Merchants can now set payout thresholds as low as \$50, providing more flexibility for smaller businesses and faster access to funds.

* **Minor improvements and bug fixes**\
  General enhancements and stability improvements across the platform.


# v1.7.0 (14 March 2025)
Source: https://docs.dodopayments.com/changelog/v1.7.0

Introduced a dedicated subscriptions page, enhanced customer details, detailed payout information, an official Ruby SDK, enhanced API filters, and various minor improvements.

## New Features 🚀

* **Dedicated Subscriptions Page**: Manage customer subscriptions easily with the new dedicated page. Navigate to `Sales > Subscriptions` on the dashboard.

  <Frame>
    <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/subscriptions.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=bb22b69d22c541760cc870ff31ae150b" alt="Subscriptions Page" data-og-width="1440" width="1440" data-og-height="1080" height="1080" data-path="images/changelog/subscriptions.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/subscriptions.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=aa58a81a70a228b9090d2fe28912576a 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/subscriptions.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=6a2e4e91be541822029ef6ed7bfb6eda 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/subscriptions.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=fe5206bfa5ec409fba55ed6495bb0dd0 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/subscriptions.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=155f8073fecf139d40f1f194fdac9ced 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/subscriptions.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=8cc8004065935cf5ed32cbd0b3f89e98 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/subscriptions.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=b219b619d1b4e5cf60c4e262852ee895 2500w" />
  </Frame>

* **Enhanced Customer Details**: View subscriptions, payments, and refunds for each customer in one place. Go to `Sales > Customers > arrow icon` on the dashboard.

  <Frame>
    <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/customer_info.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=437fa8a0af8f5ca09596c23bcf1e74ed" alt="Customer Details" data-og-width="1440" width="1440" data-og-height="1080" height="1080" data-path="images/changelog/customer_info.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/customer_info.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=f3af6680e09eb9d9bb15b7458a53b018 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/customer_info.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=e313a21aceaf7e8382ecfa5a8089bec9 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/customer_info.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=76f5b33844fdade160a9c1646c1fae14 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/customer_info.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=d31048c44cfa3ecbb3a3edd1bdbb52f4 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/customer_info.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=da3c608295cbe1e980531721e4dc68a1 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/customer_info.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=72b882c8df168ba0738372b7fac7a606 2500w" />
  </Frame>

* **Detailed Payout Information**: Get more insights on payout amounts, cycles, and dates. Visit `Business > Payouts` on the dashboard.

  <Frame>
    <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/payouts_update.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=893c057abe031445eb69f16c62b83624" alt="Payout Information" data-og-width="1440" width="1440" data-og-height="1080" height="1080" data-path="images/changelog/payouts_update.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/payouts_update.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=834f0162eb1d0f0c2f6ec10c9238ae4d 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/payouts_update.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=8d704f21fa0899c259fc48d15b95f971 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/payouts_update.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=bbc325f148b53b1f0a4abbaf735b2e2e 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/payouts_update.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=3c1d52be987ff89766c91f034f8c6dc3 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/payouts_update.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=01dd412de70635cf0992f4332881b36e 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/changelog/payouts_update.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=c819464d071bca09351ba85ae41abda9 2500w" />
  </Frame>

* **Official Ruby SDK**: Integrate Dodo Payments into your Ruby applications effortlessly. Check out the [Ruby SDK](https://github.com/dodopayments/dodopayments-ruby) for more details.

* **Enhanced API Filters**: Added filters like `customer_id`, `status`, etc., to relevant list APIs. Refer to the API documentation for more information.

* **Minor Improvements and Bug Fixes**: Various other minor improvements and bug fixes have been implemented.


# Community projects
Source: https://docs.dodopayments.com/community/overview

Discover community-built SDKs, plugins, and boilerplates for Dodo Payments.

<Info>
  This is a curated list of open-source projects created by the community. These projects are not affiliated with or endorsed by Dodo Payments unless explicitly stated.
</Info>

* **What you'll find**: SDKs, webhook handlers, plugins, and starters across languages
* **How to use**: Evaluate licensing, maintenance status, and security for your use case
* **How to contribute**: Submit your project via our template on the "Submit your project" page

<Warning>
  Use at your own risk. Review code, licenses, and security posture before production use.
</Warning>

<CardGroup cols={2}>
  <Card title="Projects directory" icon="grid" href="/community/projects">
    Browse by type and language with links to code and docs.
  </Card>

  <Card title="Submit your project" icon="plus" href="/community/submit">
    Add your project with a short PR using our template.
  </Card>
</CardGroup>


# Projects directory
Source: https://docs.dodopayments.com/community/projects

Community-maintained libraries, plugins, and boilerplates for Dodo Payments.

Browse community projects by category. Each card links directly to the repository.

<Tabs>
  <Tab title="Libraries & SDKs">
    <CardGroup cols={1}>
      <Card title="dodopayments-webhooks (TypeScript)" href="https://github.com/sancho1952007/dodopayments-webhooks" icon="node-js">
        Universal webhook verification and handlers for multiple frameworks.
        <br />Includes signature verification and typed event handling for Express, Hono, Elysia, and more.
        <br /><br />By <a href="https://github.com/sancho1952007">@sancho1952007</a> (Sancho Godinho)
        <br /><br />`TypeScript` `Webhooks` `Node`
      </Card>

      <Card title="dodpayments_rust_sdk (Rust)" href="https://github.com/Muhammad-Owais-Warsi/dodpayments_rust_sdk" icon="rust">
        Rust SDK for interacting with Dodo Payments APIs.
        <br />Provides typed models and helpers to call core endpoints from Rust services.
        <br /><br />By <a href="https://github.com/Muhammad-Owais-Warsi">@Muhammad-Owais-Warsi</a>
        <br /><br />`Rust` `SDK`
      </Card>

      <Card title="Dodo Payments Laravel SDK (PHP)" href="https://github.com/codeplugtech/dodo-payments" icon="php">
        Laravel SDK for Dodo Payments.
        <br />Easily integrate Dodo Payments APIs into your Laravel applications with ready-made service classes and helpers.
        <br /><br />By <a href="https://github.com/codeplugtech">@codeplugtech</a>
        <br /><br />`PHP` `Laravel` `SDK`
      </Card>

      <Card title="dodo-payments-rs (Rust)" href="https://github.com/PiyushXCoder/dodo-payments-rs" icon="rust">
        Easy-to-use SDK for interacting with Dodo Payments APIs.
        <br />It comes with predefined structures for requests and responses and uses a builder pattern to simplify constructing and sending payment-related API calls.
        <br /><br />By <a href="https://github.com/PiyushXCoder">@PiyushXCoder</a>
        <br /><br />`Rust` `SDK`
      </Card>

      <Card title="multi-app-dodo-payments (Python)" href="https://github.com/aniketkarne/multi-app-dodo-payments" icon="python">
        Handle Dodo Payments for multiple applications using single microservice application:
        <br />Production-ready payment microservice built with FastAPI that handles payments for multiple applications using Dodo Payments.
        <br />Features include <br /> `credit management`, `subscription support`, `webhook processing with idempotency`, `complete audit trails`, `MixPanel Analytics`, `Backend-to-backend architecture with API key authentication`.
        <br /><br />By <a href="https://github.com/aniketkarne">@aniketkarne</a> (Aniket Karne)
        <br /><br />`Python` `Fast-API` `Library`
      </Card>
    </CardGroup>
  </Tab>

  <Tab title="Plugins & Extensions">
    <CardGroup cols={1}>
      <Card title="Dodo WHMCS (PHP)" href="https://github.com/Akash123a5/dodo-whmcs" icon="php">
        WHMCS payment gateway module integration.
        <br />Drop-in provider to accept payments in WHMCS using Dodo Payments.
        <br /><br />By <a href="https://github.com/Akash123a5">@Akash123a5</a>
        <br /><br />`PHP` `WHMCS` `Plugin`
      </Card>
    </CardGroup>
  </Tab>

  <Tab title="Boilerplates & Starters">
    <CardGroup cols={1}>
      <Card title="DodoPayments Boilerplate" href="https://github.com/snehalsaurabh/DodoPayments-Boilerplate" icon="rocket">
        Starter boilerplate for integrating Dodo Payments quickly.
        <br />Includes example checkout flow, API wiring, and environment configuration.
        <br /><br />By <a href="https://github.com/snehalsaurabh">@snehalsaurabh</a>
        <br /><br />`Boilerplate`
      </Card>

      <Card title="Dodo Payments Boilerplate" href="https://github.com/vanshcodeworks/dodo_payments_boilerplate" icon="rocket">
        Lightweight starter for common flows.
        <br />Minimal setup to create and confirm payments with example pages.
        <br /><br />By <a href="https://github.com/vanshcodeworks">@vanshcodeworks</a>
        <br /><br />`Boilerplate`
      </Card>

      <Card title="PaymentService" href="https://github.com/rasadov/PaymentService" icon="rocket">
        Service template with payment flows.
        <br />Demonstrates clean architecture around payment intents and webhooks.
        <br /><br />By <a href="https://github.com/rasadov">@rasadov</a>
        <br /><br />`Template`
      </Card>

      <Card title="DodoStarter Boilerplate" href="https://github.com/AINotSoSmart/dodostarter" icon="rocket">
        Next.js SaaS starter with Supabase authentication and Dodo Payments integration.
        <br />You can go from an empty folder to a working app in an afternoon.
        <br /><br />By <a href="https://github.com/KissuChaudhary">@KissuChaudhary</a>
        <br /><br />`TypeScript` `Next.js` `Boilerplate`
      </Card>
    </CardGroup>
  </Tab>
</Tabs>

<Note>
  Want your project listed? See <a href="/community/submit">Submit your project</a>.
</Note>


# Submit your project
Source: https://docs.dodopayments.com/community/submit

How to add your open-source project to the Dodo Payments community directory.

<Steps>
  <Step title="Check eligibility">
    * The project is open-source with a permissive license.
    * It’s relevant to Dodo Payments (SDK, plugin, integration, template).
    * Has a README with install, usage, and maintenance status.
  </Step>

  <Step title="Add entry via PR">
    Edit `community/projects.mdx` and add a new `<Card>` under the most relevant tab.

    ```mdx  theme={null}
    <Card title="PROJECT_NAME (LANG)" href="REPO_URL" icon="code">
      One-sentence description of your project.
      <br/>By <a href="GITHUB_PROFILE_URL">@github_username</a>
      <br/><br/>`LANGUAGE` `FRAMEWORK` `CATEGORY`
    </Card>
    ```
  </Step>

  <Step title="Open submission issue (optional)">
    If you prefer, open an issue using the "Community Project Submission" template with:

    * Repo URL, description, category (SDK/Plugin/Boilerplate)
    * Primary language/framework
    * Install/usage snippet link
    * Maintenance status and last update
  </Step>

  <Step title="Review & publish">
    We review for relevance, clarity, and safety. Approved entries are merged and published.
  </Step>
</Steps>

<Warning>
  We may remove entries that are unmaintained, insecure, misleading, or violate policy.
</Warning>


# Astro Adaptor
Source: https://docs.dodopayments.com/developer-resources/astro-adaptor

Learn how to integrate Dodo Payments with your Astro App Router project using our Astro Adaptor. Covers checkout, customer portal, webhooks, and secure environment setup.

<CardGroup cols={2}>
  <Card title="Checkout Handler" icon="cart-shopping" href="#checkout-route-handler">
    Integrate Dodo Payments checkout into your Astro app.
  </Card>

  <Card title="Customer Portal" icon="user" href="#customer-portal-route-handler">
    Allow customers to manage subscriptions and details.
  </Card>

  <Card title="Webhooks" icon="bell" href="#webhook-route-handler">
    Receive and process Dodo Payments webhook events.
  </Card>
</CardGroup>

## Installation

<Steps>
  <Step title="Install the package">
    Run the following command in your project root:

    ```bash  theme={null}
    npm install @dodopayments/astro
    ```
  </Step>

  <Step title="Set up environment variables">
    Create a <code>.env</code> file in your project root:

    ```env expandable theme={null}
    DODO_PAYMENTS_API_KEY=your-api-key
    DODO_PAYMENTS_WEBHOOK_KEY=your-webhook-secret
    DODO_PAYMENTS_ENVIRONMENT="test_mode" or "live_mode"
    DODO_PAYMENTS_RETURN_URL=https://yourdomain.com/checkout/success
    ```

    <Warning>
      Never commit your <code>.env</code> file or secrets to version control.
    </Warning>
  </Step>
</Steps>

## Route Handler Examples

<Info>
  All examples assume you are using the Astro App Router.
</Info>

<Tabs>
  <Tab title="Checkout Handler">
    <Info>
      Use this handler to integrate Dodo Payments checkout into your Astro app. Supports static (GET), dynamic (POST), and session (POST) payment flows.
    </Info>

    <CodeGroup>
      ```typescript Astro Route Handler expandable theme={null}
      // src/pages/api/checkout.ts
      import { Checkout } from "@dodopayments/astro";
      export const prerender = false;

      export const GET = Checkout({
          bearerToken: import.meta.env.DODO_PAYMENTS_API_KEY,
          returnUrl: import.meta.env.DODO_PAYMENTS_RETURN_URL,
          environment: import.meta.env.DODO_PAYMENTS_ENVIRONMENT,
          type: "static", // optional, defaults to 'static'
      });


      export const POST = Checkout({
          bearerToken: import.meta.env.DODO_PAYMENTS_API_KEY,
          returnUrl: import.meta.env.DODO_PAYMENTS_RETURN_URL,
          environment: import.meta.env.DODO_PAYMENTS_ENVIRONMENT,
          type: "dynamic", // for dynamic checkout
      });

      export const POST = Checkout({
          bearerToken: import.meta.env.DODO_PAYMENTS_API_KEY,
          returnUrl: import.meta.env.DODO_PAYMENTS_RETURN_URL,
          environment: import.meta.env.DODO_PAYMENTS_ENVIRONMENT,
          type: "session", // for checkout sessions
      });
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Static Checkout Curl example expandable theme={null}
      curl --request GET \
      --url 'https://example.com/api/checkout?productId=pdt_fqJhl7pxKWiLhwQR042rh' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Dynamic Checkout Curl example expandable theme={null}
      curl --request POST \
      --url https://example.com/api/checkout \
      --header 'Content-Type: application/json' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test \
      --data '{
      "billing": {
        "city": "Texas",
        "country": "US",
        "state": "Texas",
        "street": "56, hhh",
        "zipcode": "560000"
      },
      "customer": {
        "email": "test@example.com",
        	"name": "test"
      },
      "metadata": {},
      "payment_link": true,
        "product_id": "pdt_QMDuvLkbVzCRWRQjLNcs",
        "quantity": 1,
        "billing_currency": "USD",
        "discount_code": "IKHZ23M9GQ",
        "return_url": "https://example.com",
        "trial_period_days": 10
      }'
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Checkout Session Curl example expandable theme={null}
      curl --request POST \
      --url https://example.com/api/checkout \
      --header 'Content-Type: application/json' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test \
      --data '{
      "product_cart": [
        {
          "product_id": "pdt_QMDuvLkbVzCRWRQjLNcs",
          "quantity": 1
        }
      ],
      "customer": {
        "email": "test@example.com",
        "name": "test"
      },
      "return_url": "https://example.com/success"
      }'
      ```
    </CodeGroup>
  </Tab>

  <Tab title="Customer Portal Handler">
    <Info>
      Use this handler to allow customers to manage their subscriptions and details via the Dodo Payments customer portal.
    </Info>

    <CodeGroup>
      ```typescript Astro Route Handler expandable theme={null}
      // src/pages/api/customer-portal.ts
      import { CustomerPortal } from "@dodopayments/astro";
      export const GET = CustomerPortal({
          bearerToken: import.meta.env.DODO_PAYMENTS_API_KEY,
          environment: import.meta.env.DODO_PAYMENTS_ENVIRONMENT,
      });
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Customer Portal Curl example expandable theme={null}
      curl --request GET \
      --url 'https://example.com/api/customer-portal?customer_id=cus_9VuW4K7O3GHwasENg31m&send_email=true' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test
      ```
    </CodeGroup>
  </Tab>

  <Tab title="Webhook Handler">
    <Info>
      Use this handler to receive and process Dodo Payments webhook events securely in your Astro app.
    </Info>

    <CodeGroup>
      ```typescript expandable theme={null}
      // src/pages/api/webhook.ts
      import { Webhooks } from "@dodopayments/astro";

      export const POST = Webhooks({
          webhookKey: import.meta.env.DODO_PAYMENTS_WEBHOOK_KEY,
          onPayload: async (payload) => {
              // handle the payload
          },
          // ... other event handlers for granular control
      });
      ```
    </CodeGroup>
  </Tab>
</Tabs>

## Checkout Route Handler

<Info>
  Dodo Payments supports three types of payment flows for integrating payments into your website, this adaptor supports all types of payment flows.
</Info>

* **Static Payment Links:** Instantly shareable URLs for quick, no-code payment collection.
* **Dynamic Payment Links:** Programmatically generate payment links with custom details using the API or SDKs.
* **Checkout Sessions:** Create secure, customizable checkout experiences with pre-configured product carts and customer details.

<AccordionGroup>
  <Accordion title="Static Checkout (GET)">
    ### Supported Query Parameters

    <ParamField query="productId" type="string" required>
      Product identifier (e.g., <code>?productId=pdt\_nZuwz45WAs64n3l07zpQR</code>).
    </ParamField>

    <ParamField query="quantity" type="integer">
      Quantity of the product.
    </ParamField>

    <ParamField query="fullName" type="string">
      Customer's full name.
    </ParamField>

    <ParamField query="firstName" type="string">
      Customer's first name.
    </ParamField>

    <ParamField query="lastName" type="string">
      Customer's last name.
    </ParamField>

    <ParamField query="email" type="string">
      Customer's email address.
    </ParamField>

    <ParamField query="country" type="string">
      Customer's country.
    </ParamField>

    <ParamField query="addressLine" type="string">
      Customer's address line.
    </ParamField>

    <ParamField query="city" type="string">
      Customer's city.
    </ParamField>

    <ParamField query="state" type="string">
      Customer's state/province.
    </ParamField>

    <ParamField query="zipCode" type="string">
      Customer's zip/postal code.
    </ParamField>

    <ParamField query="disableFullName" type="boolean">
      Disable full name field.
    </ParamField>

    <ParamField query="disableFirstName" type="boolean">
      Disable first name field.
    </ParamField>

    <ParamField query="disableLastName" type="boolean">
      Disable last name field.
    </ParamField>

    <ParamField query="disableEmail" type="boolean">
      Disable email field.
    </ParamField>

    <ParamField query="disableCountry" type="boolean">
      Disable country field.
    </ParamField>

    <ParamField query="disableAddressLine" type="boolean">
      Disable address line field.
    </ParamField>

    <ParamField query="disableCity" type="boolean">
      Disable city field.
    </ParamField>

    <ParamField query="disableState" type="boolean">
      Disable state field.
    </ParamField>

    <ParamField query="disableZipCode" type="boolean">
      Disable zip code field.
    </ParamField>

    <ParamField query="paymentCurrency" type="string">
      Specify the payment currency (e.g., <code>USD</code>).
    </ParamField>

    <ParamField query="showCurrencySelector" type="boolean">
      Show currency selector.
    </ParamField>

    <ParamField query="paymentAmount" type="integer">
      Specify the payment amount (e.g., <code>1000</code> for \$10.00).
    </ParamField>

    <ParamField query="showDiscounts" type="boolean">
      Show discount fields.
    </ParamField>

    <ParamField query="metadata_*" type="string">
      Any query parameter starting with <code>metadata\_</code> will be passed as metadata.
    </ParamField>

    <Warning>
      If <code>productId</code> is missing, the handler returns a 400 response. Invalid query parameters also result in a 400 response.
    </Warning>

    ### Response Format

    Static checkout returns a JSON response with the checkout URL:

    ```json  theme={null}
    {
      "checkout_url": "https://checkout.dodopayments.com/..."
    }
    ```
  </Accordion>

  <Accordion title="Dynamic Checkout (POST)">
    * Send parameters as a JSON body in a POST request.
    * Supports both one-time and recurring payments.
    * For a complete list of supported POST body fields, refer to:
      * [Request body for a One Time Payment Product](https://docs.dodopayments.com/api-reference/payments/post-payments)
      * [Request body for a Subscription Product](https://docs.dodopayments.com/api-reference/subscriptions/post-subscriptions)

    ### Response Format

    Dynamic checkout returns a JSON response with the checkout URL:

    ```json  theme={null}
    {
      "checkout_url": "https://checkout.dodopayments.com/..."
    }
    ```
  </Accordion>

  <Accordion title="Checkout Sessions (POST)">
    Checkout sessions provide a more secure, hosted checkout experience that handles the complete payment flow for both one-time purchases and subscriptions with full customization control.

    Refer to [Checkout Sessions Integration Guide](https://docs.dodopayments.com/developer-resources/checkout-session) for more details and a complete list of supported fields.

    ### Response Format

    Checkout sessions return a JSON response with the checkout URL:

    ```json  theme={null}
    {
      "checkout_url": "https://checkout.dodopayments.com/session/..."
    }
    ```
  </Accordion>
</AccordionGroup>

## Customer Portal Route Handler

The Customer Portal Route Handler enables you to seamlessly integrate the Dodo Payments customer portal into your Astro application.

### Query Parameters

<ParamField query="customer_id" type="string" required>
  The customer ID for the portal session (e.g., <code>?customer\_id=cus\_123</code>).
</ParamField>

<ParamField query="send_email" type="boolean">
  If set to <code>true</code>, sends an email to the customer with the portal link.
</ParamField>

<Warning>
  Returns 400 if <code>customer\_id</code> is missing.
</Warning>

## Webhook Route Handler

* **Method:** Only POST requests are supported. Other methods return 405.
* **Signature Verification:** Verifies the webhook signature using <code>webhookKey</code>. Returns 401 if verification fails.
* **Payload Validation:** Validated with Zod. Returns 400 for invalid payloads.
* **Error Handling:**
  * 401: Invalid signature
  * 400: Invalid payload
  * 500: Internal error during verification
* **Event Routing:** Calls the appropriate event handler based on the payload type.

### Supported Webhook Event Handlers

<CodeGroup>
  ```typescript Typescript expandable theme={null}
  onPayload?: (payload: WebhookPayload) => Promise<void>;
  onPaymentSucceeded?: (payload: WebhookPayload) => Promise<void>;
  onPaymentFailed?: (payload: WebhookPayload) => Promise<void>;
  onPaymentProcessing?: (payload: WebhookPayload) => Promise<void>;
  onPaymentCancelled?: (payload: WebhookPayload) => Promise<void>;
  onRefundSucceeded?: (payload: WebhookPayload) => Promise<void>;
  onRefundFailed?: (payload: WebhookPayload) => Promise<void>;
  onDisputeOpened?: (payload: WebhookPayload) => Promise<void>;
  onDisputeExpired?: (payload: WebhookPayload) => Promise<void>;
  onDisputeAccepted?: (payload: WebhookPayload) => Promise<void>;
  onDisputeCancelled?: (payload: WebhookPayload) => Promise<void>;
  onDisputeChallenged?: (payload: WebhookPayload) => Promise<void>;
  onDisputeWon?: (payload: WebhookPayload) => Promise<void>;
  onDisputeLost?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionActive?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionOnHold?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionRenewed?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionPlanChanged?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionCancelled?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionFailed?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionExpired?: (payload: WebhookPayload) => Promise<void>;
  onLicenseKeyCreated?: (payload: WebhookPayload) => Promise<void>;
  ```
</CodeGroup>

***

## Prompt for LLM

```

You are an expert Astro developer assistant. Your task is to guide a user through integrating the @dodopayments/astro adapter into their existing Astro project.

The @dodopayments/astro adapter provides route handlers for Dodo Payments' Checkout, Customer Portal, and Webhook functionalities, designed for the Astro App Router.

First, install the necessary packages. Use the package manager appropriate for your project (npm, yarn, or bun) based on the presence of lock files (e.g., package-lock.json for npm, yarn.lock for yarn, bun.lockb for bun):

npm install @dodopayments/astro

Here's how you should structure your response:

    Ask the user which functionalities they want to integrate.

"Which parts of the @dodopayments/astro adapter would you like to integrate into your project? You can choose one or more of the following:

    Checkout Route Handler (for handling product checkouts)

    Customer Portal Route Handler (for managing customer subscriptions/details)

    Webhook Route Handler (for receiving Dodo Payments webhook events)

    All (integrate all three)"

    Based on the user's selection, provide detailed integration steps for each chosen functionality.

If Checkout Route Handler is selected:

Purpose: This handler redirects users to the Dodo Payments checkout page.
File Creation: Create a new file at app/checkout/route.ts in your Astro project.

Code Snippet:

// src/pages/api/checkout.ts
import { Checkout } from "@dodopayments/astro";

export const prerender = false;

export const GET = Checkout({
  bearerToken: import.meta.env.DODO_PAYMENTS_API_KEY,
  returnUrl: import.meta.env.DODO_PAYMENTS_RETURN_URL,
  environment: import.meta.env.DODO_PAYMENTS_ENVIRONMENT,
  type: "static", // optional, defaults to 'static'
});


export const POST = Checkout({
  bearerToken: import.meta.env.DODO_PAYMENTS_API_KEY,
  returnUrl: import.meta.env.DODO_PAYMENTS_RETURN_URL,
  environment: import.meta.env.DODO_PAYMENTS_ENVIRONMENT,
  type: "dynamic", // for dynamic checkout
});

export const POST = Checkout({
  bearerToken: import.meta.env.DODO_PAYMENTS_API_KEY,
  returnUrl: import.meta.env.DODO_PAYMENTS_RETURN_URL,
  environment: import.meta.env.DODO_PAYMENTS_ENVIRONMENT,
  type: "session", // for checkout sessions
});

Configuration & Usage:

    bearerToken: Your Dodo Payments API key. It's recommended to set this via the DODO_PAYMENTS_API_KEY environment variable.

    returnUrl: (Optional) The URL to redirect the user to after a successful checkout.

    environment: (Optional) Set to "test_mode" for testing, or omit/set to "live_mode" for production.

    type: (Optional) Set to "static" for GET/static checkout, "dynamic" for POST/dynamic checkout, or "session" for POST/checkout sessions.

Static Checkout (GET) Query Parameters:

    productId (required): Product identifier (e.g., ?productId=pdt_nZuwz45WAs64n3l07zpQR)

    quantity (optional): Quantity of the product

    Customer Fields (optional): fullName, firstName, lastName, email, country, addressLine, city, state, zipCode

    Disable Flags (optional, set to true to disable): disableFullName, disableFirstName, disableLastName, disableEmail, disableCountry, disableAddressLine, disableCity, disableState, disableZipCode

    Advanced Controls (optional): paymentCurrency, showCurrencySelector, paymentAmount, showDiscounts

    Metadata (optional): Any query parameter starting with metadata_ (e.g., ?metadata_userId=abc123)

    Returns: {"checkout_url": "https://checkout.dodopayments.com/..."}

Dynamic Checkout (POST) - Returns JSON with checkout_url: Parameters are sent as a JSON body. Supports both one-time and recurring payments. Returns: {"checkout_url": "https://checkout.dodopayments.com/..."}. For a complete list of supported POST body fields, refer to:

    Docs - One Time Payment Product: https://docs.dodopayments.com/api-reference/payments/post-payments

    Docs - Subscription Product: https://docs.dodopayments.com/api-reference/subscriptions/post-subscriptions


Checkout Sessions (POST) - (Recommended) A more customizable checkout experience. Returns JSON with checkout_url: Parameters are sent as a JSON body. Supports both one-time and recurring payments. Returns: {"checkout_url": "https://checkout.dodopayments.com/session/..."}. For a complete list of supported fields, refer to:

  Checkout Sessions Integration Guide: https://docs.dodopayments.com/developer-resources/checkout-session

Error Handling: If productId is missing or other query parameters are invalid, the handler will return a 400 response.

If Customer Portal Route Handler is selected:

Purpose: This handler redirects authenticated users to their Dodo Payments customer portal.
File Creation: Create a new file at app/customer-portal/route.ts in your Astro project.

Code Snippet:

// src/pages/api/customer-portal.ts
import { CustomerPortal } from "@dodopayments/astro";

export const GET = CustomerPortal({
  bearerToken: import.meta.env.DODO_PAYMENTS_API_KEY,
  environment: import.meta.env.DODO_PAYMENTS_ENVIRONMENT,
});

Query Parameters:

    customer_id (required): The customer ID for the portal session (e.g., ?customer_id=cus_123)

    send_email (optional, boolean): If set to true, sends an email to the customer with the portal link.

    Returns 400 if customer_id is missing.

If Webhook Route Handler is selected:

Purpose: This handler processes incoming webhook events from Dodo Payments, allowing your application to react to events like successful payments, refunds, or subscription changes.
File Creation: Create a new file at app/api/webhook/dodo-payments/route.ts in your Astro project.

Code Snippet:

// src/pages/api/webhook.ts
import { Webhooks } from "@dodopayments/astro";

export const POST = Webhooks({
  webhookKey: import.meta.env.DODO_PAYMENTS_WEBHOOK_KEY,
  onPayload: async (payload) => {
    // handle the payload
  },
  // ... other event handlers for granular control
});

Handler Details:

    Method: Only POST requests are supported. Other methods return 405.

    Signature Verification: The handler verifies the webhook signature using the webhookKey and returns 401 if verification fails.

    Payload Validation: The payload is validated with Zod. Returns 400 for invalid payloads.

Error Handling:

    401: Invalid signature

    400: Invalid payload

    500: Internal error during verification

Event Routing: Calls the appropriate event handler based on the payload type.

Supported Webhook Event Handlers:

    onPayload?: (payload: WebhookPayload) => Promise<void>

    onPaymentSucceeded?: (payload: WebhookPayload) => Promise<void>

    onPaymentFailed?: (payload: WebhookPayload) => Promise<void>

    onPaymentProcessing?: (payload: WebhookPayload) => Promise<void>

    onPaymentCancelled?: (payload: WebhookPayload) => Promise<void>

    onRefundSucceeded?: (payload: WebhookPayload) => Promise<void>

    onRefundFailed?: (payload: WebhookPayload) => Promise<void>

    onDisputeOpened?: (payload: WebhookPayload) => Promise<void>

    onDisputeExpired?: (payload: WebhookPayload) => Promise<void>

    onDisputeAccepted?: (payload: WebhookPayload) => Promise<void>

    onDisputeCancelled?: (payload: WebhookPayload) => Promise<void>

    onDisputeChallenged?: (payload: WebhookPayload) => Promise<void>

    onDisputeWon?: (payload: WebhookPayload) => Promise<void>

    onDisputeLost?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionActive?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionOnHold?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionRenewed?: (payload: WebhookPayload) => Promise<void>



    onSubscriptionPlanChanged?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionCancelled?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionFailed?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionExpired?: (payload: WebhookPayload) => Promise<void>

    onLicenseKeyCreated?: (payload: WebhookPayload) => Promise<void>

    Environment Variable Setup:

To ensure the adapter functions correctly, you will need to manually set up the following environment variables in your Astro project's deployment environment (e.g., Vercel, Netlify, AWS, etc.):

    DODO_PAYMENTS_API_KEY: Your Dodo Payments API Key (required for Checkout and Customer Portal).

    RETURN_URL: (Optional) The URL to redirect to after a successful checkout (for Checkout handler).

    DODO_PAYMENTS_WEBHOOK_SECRET: Your Dodo Payments Webhook Secret (required for Webhook handler).

Example .env file:

DODO_PAYMENTS_API_KEY=your-api-key
DODO_PAYMENTS_WEBHOOK_KEY=your-webhook-secret
DODO_PAYMENTS_ENVIRONMENT="test_mode" or "live_mode"
DODO_PAYMENTS_RETURN_URL=your-return-url

Usage in your code:

bearerToken: import.meta.env.DODO_PAYMENTS_API_KEY
webhookKey: import.meta.env.DODO_PAYMENTS_WEBHOOK_KEY

Important: Never commit sensitive environment variables directly into your version control. Use environment variables for all sensitive information.

If the user needs assistance setting up environment variables for their specific deployment environment, ask them what platform they are using (e.g., Vercel, Netlify, AWS, etc.), and provide guidance. You can also add comments to their PR or chat depending on the context

```


# Astro Minimal Boilerplate
Source: https://docs.dodopayments.com/developer-resources/astro-boilerplate

Get started quickly with our minimal Astro boilerplate for integrating Dodo Payments into your Astro application

## Overview

The Astro minimal boilerplate provides a ready-to-use starting point for integrating Dodo Payments with your Astro application. This template includes authentication, webhook handling, and basic payment setup to help you start accepting payments quickly.

<Info>
  This boilerplate uses Astro with TypeScript and includes example implementations for checkout sessions and webhook verification.
</Info>

## Quick Start

<Steps>
  <Step title="Clone the Repository">
    Clone the boilerplate repository and navigate to the project directory:

    ```bash  theme={null}
    git clone https://github.com/dodopayments/dodo-astro-minimal-boilerplate.git
    cd dodo-astro-minimal-boilerplate
    ```
  </Step>

  <Step title="Get Your API Credentials">
    Obtain your credentials from the Dodo Payments dashboard in Test Mode:

    * **API Key**: Navigate to **Developer → API Keys** in your [dashboard](https://app.dodopayments.com)
    * **Webhook Signing Key**: Navigate to **Developer → Webhooks** in your [dashboard](https://app.dodopayments.com)

    <Tip>
      Start with Test Mode to safely test your integration without processing real payments.
    </Tip>
  </Step>

  <Step title="Configure Environment Variables">
    Create a `.env` file in the root directory:

    ```bash  theme={null}
    touch .env
    ```

    Add your Dodo Payments credentials:

    ```bash .env theme={null}
    DODO_API_KEY_TEST=your_test_api_key_here
    DODO_PAYMENTS_WEBHOOK_KEY=your_webhook_signing_key_here
    ```

    <Warning>
      Never commit your `.env` file to version control. It's already included in `.gitignore`.
    </Warning>
  </Step>

  <Step title="Configure Webhook Localhost">
    When testing webhooks locally, expose your localhost using tools like [ngrok](https://ngrok.com):

    ```bash  theme={null}
    ngrok http 4321
    ```

    Add the ngrok URL to the `allowed_hosts` list in `astro.config.mjs` for webhook delivery:

    ```javascript astro.config.mjs theme={null}
    export default defineConfig({
      server: {
        host: true,
        allowedHosts: ['your-ngrok-url.ngrok.io']
      }
    });
    ```

    <Note>
      This step is required for webhooks to be delivered to your local development environment.
    </Note>
  </Step>

  <Step title="Install Dependencies">
    Install the required npm packages:

    ```bash  theme={null}
    npm install
    ```
  </Step>

  <Step title="Run the Development Server">
    Start the Astro development server:

    ```bash  theme={null}
    npm run dev
    ```

    Your application will be available at `http://localhost:4321`.

    <Check>
      You're ready to start building! The boilerplate includes example routes and components to help you understand the integration.
    </Check>
  </Step>
</Steps>

## What's Included

The boilerplate comes with pre-configured essentials:

<CardGroup cols={2}>
  <Card title="Checkout Integration" icon="shopping-cart">
    Example implementation for creating and handling checkout sessions
  </Card>

  <Card title="Webhook Handler" icon="webhook">
    Secure webhook endpoint with signature verification
  </Card>

  <Card title="TypeScript Support" icon="code">
    Full TypeScript configuration with proper type definitions
  </Card>

  <Card title="Tailwind CSS" icon="paintbrush">
    Pre-configured styling with Tailwind CSS
  </Card>
</CardGroup>

## Project Structure

```
dodo-astro-minimal-boilerplate/
├── src/
│   ├── pages/
│   │   ├── api/
│   │   │   └── webhooks.ts     # Webhook handler
│   │   └── index.astro         # Home page with examples
│   └── lib/
│       └── dodo.ts             # Dodo Payments client setup
├── .env.example                # Environment variables template
├── astro.config.mjs            # Astro configuration
└── package.json
```

## Next Steps

Once you have the boilerplate running:

<Steps>
  <Step title="Create Your Products">
    Add products in your [Dodo Payments dashboard](https://app.dodopayments.com) to enable checkout functionality.
  </Step>

  <Step title="Test Webhooks Locally">
    Use [ngrok](https://ngrok.com) to expose your local webhook endpoint and update the `allowed_hosts` in `astro.config.mjs`:

    ```bash  theme={null}
    ngrok http 4321
    ```

    Add the ngrok URL to your webhook settings in the dashboard.
  </Step>

  <Step title="Customize the Integration">
    Adapt the example code to match your application's needs and design.
  </Step>

  <Step title="Go Live">
    When ready, switch to Live Mode API keys and deploy your application.
  </Step>
</Steps>

## Additional Resources

<CardGroup cols={2}>
  <Card title="Astro Adapter" icon="frame" href="/developer-resources/astro-adaptor">
    Learn about our comprehensive Astro adapter for advanced integrations
  </Card>

  <Card title="Integration Guide" icon="book" href="/developer-resources/integration-guide">
    Detailed guide for implementing one-time payments
  </Card>

  <Card title="Webhook Events" icon="webhook" href="/developer-resources/webhooks/intents/webhook-events-guide">
    Complete reference for all webhook event types
  </Card>

  <Card title="API Reference" icon="brackets-curly" href="/api-reference/introduction">
    Explore the full Dodo Payments API documentation
  </Card>
</CardGroup>

## Support

Need help with the boilerplate?

* Join our [Discord community](https://discord.gg/bYqAp4ayYh) for questions and discussions
* Check the [GitHub repository](https://github.com/dodopayments/dodo-astro-minimal-boilerplate) for issues and updates
* Contact our [support team](mailto:support@dodopayments.com) for assistance


# Better-Auth Adapter
Source: https://docs.dodopayments.com/developer-resources/better-auth-adaptor

This guide shows you how to integrate Dodo Payments into your authentication flow using the Better-Auth adaptor.

# Overview

The <b>Better Auth Adapter</b> for Dodo Payments provides:

* Automatic customer creation on sign-up
* Checkout Sessions (preferred) with product slug mapping
* Self-service customer portal
* Real-time webhook event processing with signature verification
* Full TypeScript support

<Note>
  You need a Dodo Payments account and API keys to use this integration.
</Note>

# Prerequisites

* Node.js 20+
* Access to your Dodo Payments Dashboard
* Existing project using [better-auth](https://www.npmjs.com/package/better-auth)

# Installation

<Steps>
  <Step title="Install dependencies">
    Run the following command in your project root:

    ```bash  theme={null}
    npm install @dodopayments/better-auth dodopayments better-auth zod
    ```

    <Check>
      All required packages are now installed.
    </Check>
  </Step>
</Steps>

# Setup

<Steps>
  <Step title="Configure environment variables">
    Add these to your <code>.env</code> file:

    ```env expandable theme={null}
    DODO_PAYMENTS_API_KEY=your_api_key_here
    DODO_PAYMENTS_WEBHOOK_SECRET=your_webhook_secret_here
    BETTER_AUTH_URL=http://localhost:3000
    BETTER_AUTH_SECRET=your_better_auth_secret_here
    ```

    <Warning>
      Never commit API keys or secrets to version control.
    </Warning>
  </Step>

  <Step title="Set up server-side integration">
    Create or update <code>src/lib/auth.ts</code>:

    ```typescript expandable theme={null}
    import { betterAuth } from "better-auth";
    import {
      dodopayments,
      checkout,
      portal,
      webhooks,
    } from "@dodopayments/better-auth";
    import DodoPayments from "dodopayments";

    export const dodoPayments = new DodoPayments({
      bearerToken: process.env.DODO_PAYMENTS_API_KEY!,
      environment: "test_mode", // or "live_mode" for production
    });

    export const { auth, endpoints, client } = BetterAuth({
      plugins: [
        dodopayments({
          client: dodoPayments,
          createCustomerOnSignUp: true,
          use: [
            checkout({
              products: [
                {
                  productId: "pdt_xxxxxxxxxxxxxxxxxxxxx",
                  slug: "premium-plan",
                },
              ],
              successUrl: "/dashboard/success",
              authenticatedUsersOnly: true,
            }),
            portal(),
            webhooks({
              webhookKey: process.env.DODO_PAYMENTS_WEBHOOK_SECRET!,
              onPayload: async (payload) => {
                console.log("Received webhook:", payload.event_type);
              },
            }),
          ],
        }),
      ],
    });
    ```

    <Tip>
      Set <code>environment</code> to <code>live\_mode</code> for production.
    </Tip>
  </Step>

  <Step title="Set up client-side integration">
    Create or update <code>src/lib/auth-client.ts</code>:

    ```typescript expandable theme={null}
    import { createAuthClient } from "better-auth/react";
    import { dodopaymentsClient } from "@dodopayments/better-auth";

    export const authClient = createAuthClient({
      baseURL: process.env.BETTER_AUTH_URL || "http://localhost:3000",
      plugins: [dodopaymentsClient()],
    });
    ```
  </Step>
</Steps>

# Usage Examples

<Info>
  Prefer <code>authClient.dodopayments.checkoutSession</code> for new
  integrations. The legacy <code>checkout</code> method is deprecated and kept
  only for backward compatibility.
</Info>

## Creating a Checkout Session (Preferred)

<CodeGroup>
  ```typescript Using a slug theme={null}
  const { data: session, error } = await authClient.dodopayments.checkoutSession({
    // Option A: use a configured slug
    slug: "premium-plan",

  // Your internal id for reference
  referenceId: "order_123",
  });

  if (session) {
  window.location.href = session.url;
  }

  ```

  ```typescript Using product cart theme={null}
  const { data: session, error } = await authClient.dodopayments.checkoutSession({
    // Option B: pass a product cart/product id directly
    product_cart: [
      {
        product_id: "pdt_xxxxxxxxxxxxxxxxxxxxx",
        quantity: 1,
      }
    ],

    // Your internal id for reference
    referenceId: "order_123",
  });

  if (session) {
    window.location.href = session.url;
  }
  ```
</CodeGroup>

<Info>
  Unlike the legacy <code>checkout</code> method, <code>checkoutSession</code>
  does not require billing information upfront as it will be taken from the user
  at the checkout page. You can still override it by passing the
  <code>billing</code> key in the argument.
</Info>

<Info>
  Similar to the legacy <code>checkout</code> method,
  <code>checkoutSession</code> takes customer's email and name from their
  better-auth session, however, you can override it by passing the{" "}
  <code>customer</code> object with email and name.
</Info>

<Info>
  You can pass the same options in the argument as the request body for [Create
  Checkout
  Session](https://docs.dodopayments.com/api-reference/checkout-sessions/create)
  endpoint.
</Info>

<Note>
  The return URL is taken from the <code>successUrl</code> configured in the
  server plugin. You do not need to include <code>return\_url</code> in the
  client payload.
</Note>

## Legacy Checkout (Deprecated)

<Warning>
  The <code>authClient.dodopayments.checkout</code> method is deprecated. Use
  <code>checkoutSession</code> instead for new implementations.
</Warning>

```typescript expandable theme={null}
const { data: checkout, error } = await authClient.dodopayments.checkout({
  slug: "premium-plan",
  customer: {
    email: "customer@example.com",
    name: "John Doe",
  },
  billing: {
    city: "San Francisco",
    country: "US",
    state: "CA",
    street: "123 Market St",
    zipcode: "94103",
  },
  referenceId: "order_123",
});

if (checkout) {
  window.location.href = checkout.url;
}
```

## Accessing the Customer Portal

```typescript expandable theme={null}
const { data: customerPortal, error } =
  await authClient.dodopayments.customer.portal();
if (customerPortal && customerPortal.redirect) {
  window.location.href = customerPortal.url;
}
```

## Listing Customer Data

```typescript expandable theme={null}
// Get subscriptions
const { data: subscriptions, error } =
  await authClient.dodopayments.customer.subscriptions.list({
    query: {
      limit: 10,
      page: 1,
      status: "active",
    },
  });

// Get payment history
const { data: payments, error } =
  await authClient.dodopayments.customer.payments.list({
    query: {
      limit: 10,
      page: 1,
      status: "succeeded",
    },
  });
```

# Webhooks

<Info>
  The webhooks plugin processes real-time payment events from Dodo Payments with
  secure signature verification. The default endpoint is{" "}
  <code>/api/auth/dodopayments/webhooks</code>.
</Info>

<Steps>
  <Step title="Generate and set webhook secret">
    Generate a webhook secret for your endpoint URL (e.g., <code>https\://\<your-domain>/api/auth/dodopayments/webhooks</code>) in the Dodo Payments Dashboard and set it in your <code>.env</code> file:

    ```env  theme={null}
    DODO_PAYMENTS_WEBHOOK_SECRET=your_webhook_secret_here
    ```
  </Step>

  <Step title="Handle webhook events">
    Example handler:

    ```typescript expandable theme={null}
    webhooks({
      webhookKey: process.env.DODO_PAYMENTS_WEBHOOK_SECRET!,
      onPayload: async (payload) => {
        console.log("Received webhook:", payload.event_type);
      },
    });
    ```
  </Step>
</Steps>

### Supported Webhook Event Handlers

<CodeGroup>
  ```typescript Typescript expandable theme={null}
  onPayload?: (payload: WebhookPayload) => Promise<void>;
  onPaymentSucceeded?: (payload: WebhookPayload) => Promise<void>;
  onPaymentFailed?: (payload: WebhookPayload) => Promise<void>;
  onPaymentProcessing?: (payload: WebhookPayload) => Promise<void>;
  onPaymentCancelled?: (payload: WebhookPayload) => Promise<void>;
  onRefundSucceeded?: (payload: WebhookPayload) => Promise<void>;
  onRefundFailed?: (payload: WebhookPayload) => Promise<void>;
  onDisputeOpened?: (payload: WebhookPayload) => Promise<void>;
  onDisputeExpired?: (payload: WebhookPayload) => Promise<void>;
  onDisputeAccepted?: (payload: WebhookPayload) => Promise<void>;
  onDisputeCancelled?: (payload: WebhookPayload) => Promise<void>;
  onDisputeChallenged?: (payload: WebhookPayload) => Promise<void>;
  onDisputeWon?: (payload: WebhookPayload) => Promise<void>;
  onDisputeLost?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionActive?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionOnHold?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionRenewed?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionPlanChanged?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionCancelled?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionFailed?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionExpired?: (payload: WebhookPayload) => Promise<void>;
  onLicenseKeyCreated?: (payload: WebhookPayload) => Promise<void>;
  ```
</CodeGroup>

# Configuration Reference

<AccordionGroup>
  <Accordion title="Plugin Options">
    * <b>client</b> (required): DodoPayments client instance -{" "}
      <b>createCustomerOnSignUp</b> (optional): Auto-create customers on user
      signup - <b>use</b> (required): Array of plugins to enable (checkout,
      portal, webhooks)
  </Accordion>

  <Accordion title="Checkout Plugin Options">
    * <b>products</b>: Array of products or async function returning products -{" "}
      <b>successUrl</b>: URL to redirect after successful payment -{" "}
      <b>authenticatedUsersOnly</b>: Require user authentication (default: false)
  </Accordion>
</AccordionGroup>

# Troubleshooting & Tips

<AccordionGroup>
  <Accordion title="Common Issues">
    * <b>Invalid API key</b>: Double-check your{" "}
      <code>DODO\_PAYMENTS\_API\_KEY</code> in <code>.env</code>. -{" "}
      <b>Webhook signature mismatch</b>: Ensure the webhook secret matches the one
      set in the Dodo Payments Dashboard. - <b>Customer not created</b>: Confirm{" "}
      <code>createCustomerOnSignUp</code> is set to <code>true</code>.
  </Accordion>

  <Accordion title="Best Practices">
    * Use environment variables for all secrets and keys. - Test in{" "}
      <code>test\_mode</code> before switching to <code>live\_mode</code>. - Log
      webhook events for debugging and auditing.
  </Accordion>
</AccordionGroup>

# Prompt for LLM

```
You are a skilled developer helping to integrate the @dodopayments/better-auth adapter into a typescript web application with better-auth. This adapter enables seamless payment processing through Dodo Payments with automatic customer management, checkout flows, and webhook handling.
STAGE 1: BASIC SETUP
This stage covers the foundational setup needed before implementing any plugins. Complete this stage first.
STEP 1: Installation
Install the required dependencies:
npm install @dodopayments/better-auth dodopayments better-auth zod
STEP 2: Environment Variables Setup
You will need to complete these external setup tasks. I will provide you with a TODO list for the actions you need to take outside of the code:
TODO LIST FOR USER:
1. Generate Dodo Payments API Key:
   - Go to your Dodo Payments Dashboard > Developer > API Keys
   - Create a new API key (or use existing)
   - Copy the API key value
   - Set environment variable: DODO_PAYMENTS_API_KEY=your_api_key_here
2. Generate Better Auth Secret:
   - Generate a random secret key (32+ characters)
   - Set environment variable: BETTER_AUTH_SECRET=your_better_auth_secret_here
3. Set Application URL:
   - For development: BETTER_AUTH_URL=http://localhost:3000
   - For production: BETTER_AUTH_URL=https://your-domain.com
4. Webhook Secret (only if implementing webhooks plugin):
   - This will be provided after you specify your domain name in Stage 2
   - Set environment variable: DODO_PAYMENTS_WEBHOOK_SECRET=your_webhook_secret_here
Add these environment variables to your .env file:
DODO_PAYMENTS_API_KEY=your_api_key_here
DODO_PAYMENTS_WEBHOOK_SECRET=your_webhook_secret_here
BETTER_AUTH_URL=http://localhost:3000
BETTER_AUTH_SECRET=your_better_auth_secret_here
STEP 3: Server Configuration
Create or update your better-auth setup file (src/lib/auth.ts):
import { BetterAuth } from "better-auth";
import { dodopayments } from "@dodopayments/better-auth";
import DodoPayments from "dodopayments";
// Create DodoPayments client
export const dodoPayments = new DodoPayments({
  bearerToken: process.env.DODO_PAYMENTS_API_KEY!,
  environment: "test_mode", // Change to "live_mode" for production
});
// Configure better-auth with dodopayments adapter
export const { auth, endpoints, client } = BetterAuth({
  plugins: [
    dodopayments({
      client: dodoPayments,
      createCustomerOnSignUp: true, // Auto-create customers on signup
      use: [], // We'll add plugins here in Stage 2
    }),
  ],
});
STEP 4: Client Configuration
Create or update your auth client file (src/lib/auth-client.ts):
import { createAuthClient } from "better-auth/react";
import { dodopaymentsClient } from "@dodopayments/better-auth";
export const authClient = createAuthClient({
  baseURL: process.env.BETTER_AUTH_URL || "http://localhost:3000",
  plugins: [dodopaymentsClient()],
});
STAGE 2: PLUGIN IMPLEMENTATION
After completing Stage 1, you can selectively implement any of these plugins based on your needs. Each plugin is independent and can be added or removed as needed.
PLUGIN SELECTION:
Before implementing any plugins, ask the user which plugins they want to implement:
"Which plugins would you like to implement? You can choose any combination of:
1. CHECKOUT - Enables secure payment processing and checkout flows
2. PORTAL - Provides customer self-service portal for subscriptions and payments
3. WEBHOOKS - Handles real-time payment events from Dodo Payments
Please specify which plugins you want (e.g., 'checkout and webhooks', 'all three', 'just portal', etc.)"
If the user doesn't respond or you cannot prompt the user, implement all three plugins by default.
Based on the user's selection, implement only the requested plugins from the sections below:
CHECKOUT PLUGIN
Purpose: Enables secure payment processing using Checkout Sessions (preferred) with product slug mapping. A legacy checkout endpoint is also exposed for backward compatibility but is deprecated.
SETUP TODO LIST FOR USER:
1. Create products in Dodo Payments Dashboard:
   - Go to Dodo Payments Dashboard > Products
   - Create your products (e.g., subscription plans, one-time purchases)
   - Copy each product ID (starts with "pdt_")
   - Note down the product names for creating friendly slugs
2. Plan your checkout URLs:
   - Decide on your success URL (e.g., "/dashboard/success", "/thank-you")
   - Ensure this URL exists in your application
Configuration:
Add checkout to your imports in src/lib/auth.ts:
import { dodopayments, checkout } from "@dodopayments/better-auth";
Add checkout plugin to the use array in your dodopayments configuration:
use: [
  checkout({
    products: [
      {
        productId: "pdt_xxxxxxxxxxxxxxxxxxxxx", // Your actual product ID from Dodo Payments
        slug: "premium-plan", // Friendly slug for checkout
      },
      // Add more products as needed
    ],
    successUrl: "/dashboard/success", // Your success page URL
    authenticatedUsersOnly: true, // Require login for checkout
  }),
],
Usage Example (Preferred - Checkout Sessions):
const { data: session, error } = await authClient.dodopayments.checkoutSession({
  // Use the slug from your configuration OR provide product_cart directly
  slug: "premium-plan",
  // product_cart: [{ product_id: "pdt_xxxxxxxxxxxxxxxxxxxxx", quantity: 1 }],
  referenceId: "order_123", // Optional reference
});
if (session) {
  window.location.href = session.url;
}

Deprecated (Legacy Checkout):
const { data: checkout, error } = await authClient.dodopayments.checkout({
  slug: "premium-plan",
  customer: {
    email: "customer@example.com",
    name: "John Doe",
  },
  billing: {
    city: "San Francisco",
    country: "US",
    state: "CA",
    street: "123 Market St",
    zipcode: "94103",
  },
});
if (checkout) {
  window.location.href = checkout.url;
}
Options:
- products: Array of products or async function returning products
- successUrl: URL to redirect after successful payment
- authenticatedUsersOnly: Require user authentication (default: false)
PORTAL PLUGIN
Purpose: Provides customer self-service capabilities for managing subscriptions and viewing payment history.
Configuration:
Add portal to your imports in src/lib/auth.ts:
import { dodopayments, portal } from "@dodopayments/better-auth";
Add portal plugin to the use array in your dodopayments configuration:
use: [
  portal(),
],
Usage Examples:
// Access customer portal
const { data: customerPortal, error } = await authClient.dodopayments.customer.portal();
if (customerPortal && customerPortal.redirect) {
  window.location.href = customerPortal.url;
}
// List customer subscriptions
const { data: subscriptions, error } = await authClient.dodopayments.customer.subscriptions.list({
  query: {
    limit: 10,
    page: 1,
    active: true,
  },
});
// List customer payments
const { data: payments, error } = await authClient.dodopayments.customer.payments.list({
  query: {
    limit: 10,
    page: 1,
    status: "succeeded",
  },
});
Note: All portal methods require user authentication.
WEBHOOKS PLUGIN
Purpose: Handles real-time payment events from Dodo Payments with secure signature verification.
BEFORE CONFIGURATION - Setup Webhook URL:
First, I need your domain name to generate the webhook URL and provide you with setup instructions.
STEP 1: Domain Name Input
What is your domain name? Please provide:
- For production: your domain name (e.g., "myapp.com", "api.mycompany.com")
- For staging: your staging domain (e.g., "staging.myapp.com")
- For development: use "localhost:3000" (or your local port)
STEP 2: After receiving your domain name, I will:
- Generate your webhook URL: https://[YOUR-DOMAIN]/api/auth/dodopayments/webhooks
- Provide you with a TODO list for webhook setup in Dodo Payments dashboard
- Give you the exact environment variable setup instructions
WEBHOOK SETUP TODO LIST (will be provided after domain input):
1. Configure webhook in Dodo Payments Dashboard:
   - Go to Dodo Payments Dashboard > Developer > Webhooks
   - Click "Add Webhook" or "Create Webhook"
   - Enter webhook URL: https://[YOUR-DOMAIN]/api/auth/dodopayments/webhooks
   - Select events you want to receive (or select all)
   - Copy the generated webhook secret
2. Set webhook secret in your environment:
   - For production: Set DODO_PAYMENTS_WEBHOOK_SECRET in your hosting provider environment
   - For staging: Set DODO_PAYMENTS_WEBHOOK_SECRET in your staging environment
   - For development: Add DODO_PAYMENTS_WEBHOOK_SECRET=your_webhook_secret_here to your .env file
3. Deploy your application with the webhook secret configured
STEP 3: Add webhooks to your imports in src/lib/auth.ts:
import { dodopayments, webhooks } from "@dodopayments/better-auth";
STEP 4: Add webhooks plugin to the use array in your dodopayments configuration:
use: [
  webhooks({
    webhookKey: process.env.DODO_PAYMENTS_WEBHOOK_SECRET!,
    // Generic handler for all webhook events
    onPayload: async (payload) => {
      console.log("Received webhook:", payload.event_type);
    },
    // Payment event handlers
    onPaymentSucceeded: async (payload) => {
      console.log("Payment succeeded:", payload);
    },
    onPaymentFailed: async (payload) => {
      console.log("Payment failed:", payload);
    },
    onPaymentProcessing: async (payload) => {
      console.log("Payment processing:", payload);
    },
    onPaymentCancelled: async (payload) => {
      console.log("Payment cancelled:", payload);
    },
    // Refund event handlers
    onRefundSucceeded: async (payload) => {
      console.log("Refund succeeded:", payload);
    },
    onRefundFailed: async (payload) => {
      console.log("Refund failed:", payload);
    },
    // Dispute event handlers
    onDisputeOpened: async (payload) => {
      console.log("Dispute opened:", payload);
    },
    onDisputeExpired: async (payload) => {
      console.log("Dispute expired:", payload);
    },
    onDisputeAccepted: async (payload) => {
      console.log("Dispute accepted:", payload);
    },
    onDisputeCancelled: async (payload) => {
      console.log("Dispute cancelled:", payload);
    },
    onDisputeChallenged: async (payload) => {
      console.log("Dispute challenged:", payload);
    },
    onDisputeWon: async (payload) => {
      console.log("Dispute won:", payload);
    },
    onDisputeLost: async (payload) => {
      console.log("Dispute lost:", payload);
    },
    // Subscription event handlers
    onSubscriptionActive: async (payload) => {
      console.log("Subscription active:", payload);
    },
    onSubscriptionOnHold: async (payload) => {
      console.log("Subscription on hold:", payload);
    },
    onSubscriptionRenewed: async (payload) => {
      console.log("Subscription renewed:", payload);
    },
    onSubscriptionPlanChanged: async (payload) => {
      console.log("Subscription plan changed:", payload);
    },
    onSubscriptionCancelled: async (payload) => {
      console.log("Subscription cancelled:", payload);
    },
    onSubscriptionFailed: async (payload) => {
      console.log("Subscription failed:", payload);
    },
    onSubscriptionExpired: async (payload) => {
      console.log("Subscription expired:", payload);
    },
    // License key event handlers
    onLicenseKeyCreated: async (payload) => {
      console.log("License key created:", payload);
    },
  }),
],
Supported Webhook Event Handlers:
- onPayload: Generic handler for all webhook events
- onPaymentSucceeded: Payment completed successfully
- onPaymentFailed: Payment failed
- onPaymentProcessing: Payment is being processed
- onPaymentCancelled: Payment was cancelled
- onRefundSucceeded: Refund completed successfully
- onRefundFailed: Refund failed
- onDisputeOpened: Dispute was opened
- onDisputeExpired: Dispute expired
- onDisputeAccepted: Dispute was accepted
- onDisputeCancelled: Dispute was cancelled
- onDisputeChallenged: Dispute was challenged
- onDisputeWon: Dispute was won
- onDisputeLost: Dispute was lost
- onSubscriptionActive: Subscription became active
- onSubscriptionOnHold: Subscription was put on hold
- onSubscriptionRenewed: Subscription was renewed
- onSubscriptionPlanChanged: Subscription plan was changed
- onSubscriptionCancelled: Subscription was cancelled
- onSubscriptionFailed: Subscription failed
- onSubscriptionExpired: Subscription expired
- onLicenseKeyCreated: License key was created
COMBINING SELECTED PLUGINS:
After implementing the user's selected plugins, update your src/lib/auth.ts file to include all chosen plugins in the imports and use array:
Example for all three plugins:
import { dodopayments, checkout, portal, webhooks } from "@dodopayments/better-auth";
use: [
  checkout({
    // checkout configuration
  }),
  portal(),
  webhooks({
    // webhook configuration
  }),
],
Example for just checkout and portal:
import { dodopayments, checkout, portal } from "@dodopayments/better-auth";
use: [
  checkout({
    // checkout configuration
  }),
  portal(),
],
Example for just webhooks:
import { dodopayments, webhooks } from "@dodopayments/better-auth";
use: [
  webhooks({
    // webhook configuration
  }),
],
IMPORTANT NOTES:
1. Complete Stage 1 before implementing any plugins
2. Ask the user which plugins they want to implement, or implement all three if no response
3. Only implement the plugins the user specifically requested
4. ALWAYS provide TODO lists for external actions the user needs to complete:
   - API key generation and environment variable setup
   - Product creation in Dodo Payments dashboard (for checkout plugin)
   - Webhook setup in Dodo Payments dashboard (for webhooks plugin)
   - Domain name collection for webhook URL generation
5. For webhook plugin: Ask for the user's domain name and generate the exact webhook URL: https://[domain]/api/auth/webhooks/dodopayments
6. All client methods return { data, error } objects for proper error handling
7. Use test_mode for development and live_mode for production
8. The webhook endpoint is automatically created and secured with signature verification (if webhooks plugin is selected)
9. Customer portal and subscription listing require user authentication (if portal plugin is selected)
10. Handle errors appropriately and test webhook functionality in development before going live
11. Present all external setup tasks as clear TODO lists with specific environment variable names

```


# Billing SDK
Source: https://docs.dodopayments.com/developer-resources/billingsdk

Complete billing infrastructure for modern web applications with React components, CLI tooling, and full-stack integration

<Frame>
  <iframe className="w-full aspect-video rounded-md" src="https://www.youtube.com/embed/32RVbEllEi0" title="Billing SDK | Dodo Payments" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen />
</Frame>

Billing SDK is a comprehensive open-source solution that provides complete billing infrastructure for modern web applications. It includes React components, CLI tooling, and full-stack integration support for multiple frameworks with Dodo Payments.

## Overview

Billing SDK offers:

* **React Components**: Pre-built, customizable billing components for React applications
* **CLI Tooling**: Command-line interface for project initialization and component management
* **Framework Support**: Integration with Next.js, Express.js, Hono, Fastify, and React
* **Payment Provider**: Full integration with Dodo Payments

## Quick Start

Get started with Billing SDK in minutes:

<Steps>
  <Step title="Install the CLI">
    Use npx to run the CLI without installation:

    ```bash  theme={null}
    npx @billingsdk/cli --help
    ```

    Or install it globally for frequent use:

    ```bash  theme={null}
    npm install -g @billingsdk/cli
    ```
  </Step>

  <Step title="Initialize a Project">
    Run the interactive setup to create a new billing project:

    ```bash  theme={null}
    npx @billingsdk/cli init
    ```

    You'll be prompted to select:

    * Your preferred framework (Next.js, Express.js, Hono, Fastify, React)
    * Your payment provider (Dodo Payments)
  </Step>

  <Step title="Add Components">
    Add individual billing components to your project:

    ```bash  theme={null}
    npx @billingsdk/cli add pricing-table-one
    npx @billingsdk/cli add subscription-management
    ```
  </Step>
</Steps>

## Supported Frameworks

Billing SDK supports multiple frameworks with comprehensive Dodo Payments integration:

| Framework  | Dodo Payments |
| ---------- | ------------- |
| Next.js    | ✅ Yes         |
| Express.js | ✅ Yes         |
| Hono       | ✅ Yes         |
| React      | ✅ Yes         |
| Fastify    | ✅ Yes         |

## CLI Commands

### `@billingsdk/cli init`

Initialize a new billing project with complete setup including framework configuration, Dodo Payments integration, and essential dependencies.

**What it does:**

1. **Framework Selection**: Choose your preferred framework
2. **Template Installation**: Downloads and installs framework-specific templates with Dodo Payments integration
3. **Dependency Management**: Automatically installs required dependencies
4. **File Generation**: Creates necessary configuration files and boilerplate code

**Example:**

```bash  theme={null}
npx @billingsdk/cli init
```

### `@billingsdk/cli add`

Add individual billing components to your existing project using the shadcn/ui registry system.

**Examples:**

```bash  theme={null}
# Add a pricing table
npx @billingsdk/cli add pricing-table-one

# Add subscription management
npx @billingsdk/cli add subscription-management

# Add usage monitoring
npx @billingsdk/cli add usage-meter-circle
```

**What happens:**

1. Downloads the component configuration from the registry
2. Installs the component files in your `components/billingsdk/` directory
3. Updates your project configuration if needed
4. Installs any additional dependencies

## Generated Files Structure

After running `init`, you'll get a complete project structure with:

* **API Routes**: Comprehensive endpoints for checkout, customers, products, subscriptions, and webhooks
* **Hooks**: React hooks for billing operations (if using React/Next.js)
* **Library Files**: Payment provider client initialization and utilities
* **Environment Configuration**: Example environment variable files

### Next.js Example Structure

```
your-project/
├── app/api/
│   └── (dodopayments)/
│       ├── checkout/route.ts
│       ├── customer/route.ts
│       ├── customer/payments/route.ts
│       ├── customer/subscriptions/route.ts
│       ├── product/route.ts
│       ├── products/route.ts
│       └── webhook/route.ts
├── hooks/
│   └── useBilling.ts
├── lib/
│   └── dodopayments.ts
└── .env.example
```

## Environment Configuration

Configure your environment variables after initialization:

```bash  theme={null}
# DodoPayments
DODO_PAYMENTS_API_KEY=your_api_key_here
DODO_PAYMENTS_ENVIRONMENT=test_mode
DODO_PAYMENTS_WEBHOOK_KEY=your_webhook_key_here

# App URL
NEXT_PUBLIC_APP_URL=http://localhost:3000
```

<Warning>
  Always store your API keys securely using environment variables. Never commit them to version control.
</Warning>

## Available Components

Billing SDK provides a comprehensive collection of React components:

* **Pricing Tables**: Multiple variants for displaying product pricing
* **Subscription Management**: Components for managing customer subscriptions
* **Usage Monitoring**: Visual components for tracking usage-based billing
* **Checkout Components**: Pre-built checkout flows
* **Customer Portal**: Components for customer self-service

## Open Source

Billing SDK is built on open-source principles:

* 🔍 **Transparency**: Full visibility into how components work
* 🤝 **Community**: Built by developers, for developers
* 🔒 **Security**: Open code means better security through peer review
* 📈 **Innovation**: Faster iteration through community contributions

<Info>
  Billing SDK is released under the GNU General Public License (GPL), ensuring the project remains open and free.
</Info>

## Getting Help

Need assistance with Billing SDK?

* **GitHub Issues**: [Open an issue](https://github.com/dodopayments/billingsdk/issues)
* **Documentation**: Visit [billingsdk.com/docs](https://billingsdk.com/docs)
* **LLMs Full Documentation**: [billingsdk.com/llms-full.txt](https://billingsdk.com/llms-full.txt)

## Contributing

We welcome contributions! See our [contribution guide](https://billingsdk.com/docs/contribution-open-source) for details on:

* Reporting bugs
* Requesting features
* Submitting pull requests
* Adding new components
* Improving documentation

## Learn More

<CardGroup cols={3}>
  <Card title="Full Documentation" icon="book" href="https://billingsdk.com/docs">
    Complete guide to Billing SDK with examples and best practices
  </Card>

  <Card title="CLI Reference" icon="terminal" href="https://billingsdk.com/docs/cli">
    Detailed CLI documentation for all commands and options
  </Card>

  <Card title="Component Library" icon="boxes-stacked" href="https://billingsdk.com/docs/components">
    Browse all available components with live examples
  </Card>
</CardGroup>


# Build an AI Chat App with AI SDK & LLM Blueprint
Source: https://docs.dodopayments.com/developer-resources/build-an-ai-chat-app-with-usage-based-billing

Follow along as we build an AI chat app with automatic token tracking and usage-based billing

<Tip>
  <strong>Let Sentra write your integration code for you.</strong><br />
  Use our AI assistant in VS Code, Cursor, or Windsurf to generate SDK/API code, LLM Blueprint integration code, webhooks, and more - just by describing what you want.

  <a href="https://dodopayments.com/sentra" target="_blank" rel="noopener noreferrer">
    Try Sentra: AI-Powered Integration →
  </a>
</Tip>

In this tutorial, you'll build an **AI chat application** with automatic usage-based billing. We'll create everything from scratch: the billing meter, product configuration, and application code that powers conversations and tracks token usage in real-time.

<Note>
  This tutorial provides a complete working application with both backend and frontend. The chat app uses Google's Gemini AI and automatically tracks token usage without any manual counting required.
</Note>

By the end of this tutorial, you'll have a working chat application that:

* Powers AI conversations using Google Gemini (AI SDK)
* Automatically tracks token usage (no manual code)
* Charges customers based on actual token consumption
* Includes a beautiful chat interface

<Frame>
  <img src="https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/ai-chat-demo.png?fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=9d9932fb528b64632cfbedaad98c09f3" alt="AI Chat Demo" data-og-width="1488" width="1488" data-og-height="853" height="853" data-path="images/cookbooks/ai-chat-app/ai-chat-demo.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/ai-chat-demo.png?w=280&fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=cdd663dc0371946affeb119069bdf624 280w, https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/ai-chat-demo.png?w=560&fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=a3495c058f3e5ab1b9acf8fb49f4d913 560w, https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/ai-chat-demo.png?w=840&fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=76e0a2dfa7beb6c2a48850c8e1e74a97 840w, https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/ai-chat-demo.png?w=1100&fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=ecbb1b673e18ac3726c8f6cf7e3b267c 1100w, https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/ai-chat-demo.png?w=1650&fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=0cded37ec3fdeceda387a62de58f0c3d 1650w, https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/ai-chat-demo.png?w=2500&fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=8399724469b4d5655b9b9a020705a302 2500w" />
</Frame>

## What We're Building

Let's start by understanding our AI chat service:

* **Service**: AI-powered chat using Google Gemini (AI SDK)
* **Pricing Model**: Pay-per-token (\$0.01 per 1,000 tokens)
* **Free Tier**: 10,000 free tokens per customer per month
* **Features**: Conversation history, automatic token tracking

<Info>
  Before we start, make sure you have:

  * A Dodo Payments account
  * A Google AI API key ([Get one from aistudio](https://aistudio.google.com/api-keys))
  * Node.js v16+ installed
</Info>

***

## Step 1: Create Your Usage Meter

We'll start by creating a meter in your Dodo Payments dashboard that will track AI token usage.

<Tip>
  **What we're building**: A meter named "AI Token Usage Meter" that sums up all tokens consumed in chat conversations.
</Tip>

<Steps>
  <Step title="Open the Meters section">
    1. Log into your Dodo Payments dashboard
    2. Click on Products in the left sidebar
    3. Click on **Meters**
    4. Click the **Create Meter** button

    <Frame>
      <img src="https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/create-meter.png?fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=e5aa342d55a4a9c7323cf68015f737e4" alt="Create Meter" data-og-width="1668" width="1668" data-og-height="950" height="950" data-path="images/cookbooks/ai-chat-app/create-meter.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/create-meter.png?w=280&fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=56a930a2c5501e242a0e5dc80d39de67 280w, https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/create-meter.png?w=560&fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=2351426e43da3c8559403140337bbf8c 560w, https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/create-meter.png?w=840&fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=3e87f9d5eef77572a30f03c155806909 840w, https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/create-meter.png?w=1100&fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=5ab314b7a45baa4d9deac83320eb6e75 1100w, https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/create-meter.png?w=1650&fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=c316a57a74a656c36eea8acd72b27ab0 1650w, https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/create-meter.png?w=2500&fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=da58b36f892e3f0a1540247aae036c03 2500w" />
    </Frame>

    You should see a form where we'll configure our token tracking.
  </Step>

  <Step title="Fill in the basic meter information">
    Now we'll enter the specific details for our AI chat service:

    **Meter Name** → `AI Token Usage Meter`

    **Description** → `Tracks token consumption from AI chat conversations using AI SDK`

    **Event Name** → `ai_chat_usage`

    <Warning>
      The event name `ai_chat_usage` must match exactly what we'll send from our application code later. Event names are case-sensitive!
    </Warning>
  </Step>

  <Step title="Configure how we count tokens">
    Set up the aggregation (how the meter counts our events):

    **Aggregation Type**: Select **Sum** from the dropdown

    **Aggregate Over**: Type → `totalTokens`

    **Measurement Unit**: Type → `tokens`

    <Info>
      We're using "Sum" because we want to add up all tokens consumed across multiple chat messages. The SDK automatically sends `totalTokens` in each event.
    </Info>
  </Step>

  <Step title="Create your meter">
    1. Double-check all your settings match the values above
    2. Click **Create Meter**

    <Frame>
      <img src="https://mintcdn.com/dodopayments/4L3_sb2jJa5trJWD/images/cookbooks/ai-chat-app/meter-configuration.png?fit=max&auto=format&n=4L3_sb2jJa5trJWD&q=85&s=c5b4f56326b6825847c9fc7666056102" alt="Meter Configuration" data-og-width="1661" width="1661" data-og-height="951" height="951" data-path="images/cookbooks/ai-chat-app/meter-configuration.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/4L3_sb2jJa5trJWD/images/cookbooks/ai-chat-app/meter-configuration.png?w=280&fit=max&auto=format&n=4L3_sb2jJa5trJWD&q=85&s=91a254647389bb1e446b49a3996d6e47 280w, https://mintcdn.com/dodopayments/4L3_sb2jJa5trJWD/images/cookbooks/ai-chat-app/meter-configuration.png?w=560&fit=max&auto=format&n=4L3_sb2jJa5trJWD&q=85&s=72a01a82e3f07058894dcdd9e95f28a7 560w, https://mintcdn.com/dodopayments/4L3_sb2jJa5trJWD/images/cookbooks/ai-chat-app/meter-configuration.png?w=840&fit=max&auto=format&n=4L3_sb2jJa5trJWD&q=85&s=4cbd61b7c72810ec18dce789afa43f07 840w, https://mintcdn.com/dodopayments/4L3_sb2jJa5trJWD/images/cookbooks/ai-chat-app/meter-configuration.png?w=1100&fit=max&auto=format&n=4L3_sb2jJa5trJWD&q=85&s=8b9e3e3ae88b3ab7733a1aef0b04e293 1100w, https://mintcdn.com/dodopayments/4L3_sb2jJa5trJWD/images/cookbooks/ai-chat-app/meter-configuration.png?w=1650&fit=max&auto=format&n=4L3_sb2jJa5trJWD&q=85&s=e837ce0a738e8d896581fc20f3720aa7 1650w, https://mintcdn.com/dodopayments/4L3_sb2jJa5trJWD/images/cookbooks/ai-chat-app/meter-configuration.png?w=2500&fit=max&auto=format&n=4L3_sb2jJa5trJWD&q=85&s=fa35700642a36cc062075e0942f43ede 2500w" />
    </Frame>

    <Check>
      **Meter created!** Your "AI Token Usage Meter" is now ready to start counting tokens. Next, we'll connect it to a billing product.
    </Check>
  </Step>
</Steps>

## Step 2: Get Your API Keys

Before we build the app, let's gather the API keys we'll need.

<Steps>
  <Step title="Get Dodo Payments API Key">
    1. In your Dodo Payments dashboard, go to **Developers** → **API Keys**
    2. Click **Create API Key**
    3. Copy the API key - it will look like `test_abc123...`

    <Note>
      Save this API key - we'll add it to our `.env` file later.
    </Note>
  </Step>

  <Step title="Get Google AI API Key">
    1. Visit [aistudio.google.com](https://aistudio.google.com/api-keys)
    2. Click **Get API Key**
    3. Create a new API key or use an existing one
    4. Copy the key

    <Note>
      Keep this key safe - we'll also add it to our `.env` file.
    </Note>
  </Step>
</Steps>

***

## Step 3: Create Your Billing Product

Now we need to create a product that defines our pricing (\$0.01 per 1,000 tokens with 10,000 free tokens). This connects our meter to actual billing.

<Tip>
  **What we're building**: A product called "AI Chat Service" that charges based on token consumption with a generous free tier.
</Tip>

<Steps>
  <Step title="Navigate to Products">
    1. In your Dodo Payments dashboard, click **Products** in the left sidebar
    2. Click **Create Product**
    3. Select **Usage-Based** as the product type

    This tells Dodo Payments that billing will be based on meter usage, not a fixed subscription.
  </Step>

  <Step title="Enter product details">
    Fill in the required details:

    **Product Name**: → `AI Chat Service`

    **Description**: → `AI-powered chat service with automatic token-based billing`

    **Product Image**: Upload a relevant image

    <Info>
      These will appear on customer invoices, so make them clear and professional.
    </Info>
  </Step>

  <Step title="Connect your meter">
    Before connecting your meter, make sure you have selected **Usage Based Billing** as the price type for your product.

    Additionally, set the **Fixed Price** to `0` to ensure customers are only charged based on their usage, with no base fee.

    Now, link the meter you just created:

    1. Scroll down to the **Associated Meter** section
    2. Click **Add Meters**
    3. From the dropdown, select **"AI Token Usage Meter"** (the one you created earlier)
    4. Confirm that it appears in your product configuration

    <Check>
      Your meter is now successfully connected to this product.
    </Check>
  </Step>

  <Step title="Set your pricing">
    Here's where we define our business model:

    **Price Per Unit**: Enter → `0.00001` (this is $0.01 per 1,000 tokens or $0.00001 per token)

    **Free Threshold**: Enter → `10000` (customers get 10,000 free tokens per month)

    <Frame>
      <img src="https://mintcdn.com/dodopayments/4L3_sb2jJa5trJWD/images/cookbooks/ai-chat-app/product-pricing.png?fit=max&auto=format&n=4L3_sb2jJa5trJWD&q=85&s=e92dcb98316e970c1b921e0572f10b43" alt="Product Pricing" data-og-width="1607" width="1607" data-og-height="773" height="773" data-path="images/cookbooks/ai-chat-app/product-pricing.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/4L3_sb2jJa5trJWD/images/cookbooks/ai-chat-app/product-pricing.png?w=280&fit=max&auto=format&n=4L3_sb2jJa5trJWD&q=85&s=1901c7e7282431244214df5d612d6a3f 280w, https://mintcdn.com/dodopayments/4L3_sb2jJa5trJWD/images/cookbooks/ai-chat-app/product-pricing.png?w=560&fit=max&auto=format&n=4L3_sb2jJa5trJWD&q=85&s=ac217b6ea77149158a4c504e14152a56 560w, https://mintcdn.com/dodopayments/4L3_sb2jJa5trJWD/images/cookbooks/ai-chat-app/product-pricing.png?w=840&fit=max&auto=format&n=4L3_sb2jJa5trJWD&q=85&s=09909b520fbac68c7da1bf896d687288 840w, https://mintcdn.com/dodopayments/4L3_sb2jJa5trJWD/images/cookbooks/ai-chat-app/product-pricing.png?w=1100&fit=max&auto=format&n=4L3_sb2jJa5trJWD&q=85&s=24d9e8518738221b48612b7b530f2e41 1100w, https://mintcdn.com/dodopayments/4L3_sb2jJa5trJWD/images/cookbooks/ai-chat-app/product-pricing.png?w=1650&fit=max&auto=format&n=4L3_sb2jJa5trJWD&q=85&s=1fa051874931b28b711adc5152345743 1650w, https://mintcdn.com/dodopayments/4L3_sb2jJa5trJWD/images/cookbooks/ai-chat-app/product-pricing.png?w=2500&fit=max&auto=format&n=4L3_sb2jJa5trJWD&q=85&s=4cb63609adad57e16b4aa7ff10ec1737 2500w" />
    </Frame>

    <Tip>
      **How billing works**: If a customer uses 25,000 tokens in a month, they'll be charged for 15,000 tokens (25,000 - 10,000 free) = 15,000 × $0.00001 = $0.15
    </Tip>
  </Step>

  <Step title="Save your product">
    1. Review all your settings:
       * Name: AI Chat Service
       * Meter: AI Token Usage Meter
       * Price: \$0.01 per 1,000 tokens
       * Free tier: 10,000 tokens
    2. Click **Save Changes**

    <Check>
      **Product created!** Your billing is now configured. Customers will automatically be charged based on their token usage.
    </Check>
  </Step>
</Steps>

## Step 4: Make a Test Purchase

Before we start building the app, let's create a test customer by making a purchase.

<Steps>
  <Step title="Get your payment link">
    1. In your Dodo Payments dashboard, go to **Products**
    2. Find your "AI Chat Service" product
    3. Click the **Share** button next to your product
    4. Copy the payment link that appears
  </Step>

  <Step title="Complete a test purchase">
    1. Open the payment link in a new browser tab
    2. Enter test payment details and complete purchase

    <Check>
      After successful payment, you'll have a customer ID that we'll use in our application code.
    </Check>
  </Step>

  <Step title="Find your customer ID">
    1. Go back to your Dodo Payments dashboard
    2. Navigate to **Sales** -> **Customers** in the left sidebar
    3. Find the customer you just created (with the test email)
    4. Copy the customer ID - it will look like `cus_123`

    <Note>
      Save this customer ID - we'll use it when testing our chat application.
    </Note>
  </Step>
</Steps>

## Step 5: Build the Chat Application

Now we have our billing setup complete and a test customer created. Let's build the AI chat application with automatic token tracking.

<Steps>
  <Step title="Set up your project">
    Create a new directory and initialize the project:

    ```bash  theme={null}
    mkdir ai-chat-app
    cd ai-chat-app
    npm init -y
    ```
  </Step>

  <Step title="Install dependencies">
    Install the packages we need:

    ```bash  theme={null}
    npm install express ai @ai-sdk/google @dodopayments/ingestion-blueprints dotenv
    npm install --save-dev typescript @types/express @types/node tsx
    ```
  </Step>

  <Step title="Configure TypeScript">
    Create `tsconfig.json`:

    ```json tsconfig.json theme={null}
    {
      "compilerOptions": {
        "target": "ES2020",
        "module": "ESNext",
        "moduleResolution": "node",
        "esModuleInterop": true,
        "strict": true,
        "skipLibCheck": true,
        "outDir": "./dist",
        "rootDir": "./src"
      },
      "include": ["src/**/*"],
      "exclude": ["node_modules"]
    }
    ```

    Update `package.json` to add the module type and scripts:

    ```json package.json theme={null}
    {
      "type": "module",
      "scripts": {
        "dev": "tsx src/server.ts",
        "build": "tsc",
        "start": "node dist/server.js"
      }
    }
    ```
  </Step>

  <Step title="Create project structure">
    Create the folders and files:

    ```bash  theme={null}
    mkdir src public
    ```
  </Step>

  <Step title="Set up environment variables">
    Create a `.env` file in your project root:

    ```bash .env theme={null}
    DODO_PAYMENTS_API_KEY=your_dodo_api_key_here
    DODO_ENVIRONMENT=test_mode
    GOOGLE_GENERATIVE_AI_API_KEY=your_google_api_key_here
    PORT=3000
    ```

    Replace the placeholder values with your actual API keys from Step 2.
  </Step>

  <Step title="Create the backend server">
    Create `src/server.ts` and copy this complete server code:
  </Step>
</Steps>

Here's the complete AI chat server with integrated billing:

<CodeGroup>
  ```typescript src/server.ts expandable theme={null}
  import express, { Request, Response } from 'express';
  import { generateText } from 'ai';
  import { google } from '@ai-sdk/google';
  import { createLLMTracker } from '@dodopayments/ingestion-blueprints';
  import 'dotenv/config';

  const app = express();
  app.use(express.json());
  app.use(express.static('public'));

  // Replace with your test customer ID
  const CUSTOMER_ID = 'cus_123';

  // Create tracker once with your meter event name
  const llmTracker = createLLMTracker({
    apiKey: process.env.DODO_PAYMENTS_API_KEY!,
    environment: process.env.DODO_ENVIRONMENT as 'test_mode' | 'live_mode',
    eventName: 'ai_chat_usage', // Must match your meter configuration
  });

  // Chat endpoint with conversation support
  app.post('/chat', async (req: Request, res: Response) => {
    try {
      const { messages } = req.body;

      if (!messages || !Array.isArray(messages)) {
        return res.status(400).json({ 
          error: 'Missing required field: messages (array)' 
        });
      }

      // Wrap AI SDK with automatic token tracking
      const trackedClient = llmTracker.wrap({
        client: { generateText },
        customerId: CUSTOMER_ID
      });

      // Generate AI response - tokens are automatically tracked!
      const response = await trackedClient.generateText({
        model: google('gemini-2.5-flash'),
        messages: messages
      });

      res.json({
        message: response.text,
        usage: {
          totalTokens: response.usage.totalTokens
        }
      });

    } catch (error: any) {
      console.error('Chat error:', error);
      res.status(500).json({ 
        error: 'Failed to process chat',
        details: error.message 
      });
    }
  });

  const PORT = process.env.PORT || 3000;
  app.listen(PORT, () => {
    console.log(`🚀 Server running at http://localhost:${PORT}`);
    console.log(`📊 Tracking event: ai_chat_usage`);
    console.log(`👤 Customer ID: ${CUSTOMER_ID}`);
    console.log(`🔧 Environment: ${process.env.DODO_ENVIRONMENT}`);
  });
  ```

  ```bash .env theme={null}
  # Add your API keys here
  DODO_PAYMENTS_API_KEY=your_dodo_api_key_here
  DODO_ENVIRONMENT=test_mode
  GOOGLE_GENERATIVE_AI_API_KEY=your_google_api_key_here
  PORT=3000
  ```

  ```json package.json expandable theme={null}
  {
    "name": "ai-chat-app",
    "version": "1.0.0",
    "type": "module",
    "scripts": {
      "dev": "tsx src/server.ts",
      "build": "tsc",
      "start": "node dist/server.js"
    },
    "dependencies": {
      "express": "^4.18.2",
      "ai": "^3.0.0",
      "@ai-sdk/google": "^0.0.15",
      "@dodopayments/ingestion-blueprints": "latest",
      "dotenv": "^16.0.3"
    },
    "devDependencies": {
      "typescript": "^5.0.0",
      "@types/express": "^4.17.17",
      "@types/node": "^20.0.0",
      "tsx": "^3.12.7"
    }
  }
  ```
</CodeGroup>

***

## Step 6: Add the Chat Interface

Now let's add a beautiful chat interface with full conversation history! Create `public/index.html`:

```html public/index.html expandable theme={null}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Chat with Usage Billing</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
          Roboto, sans-serif;
        background: #0f0f1e;
        background-image: radial-gradient(
            at 0% 0%,
            rgba(102, 126, 234, 0.15) 0px,
            transparent 50%
          ),
          radial-gradient(
            at 100% 100%,
            rgba(118, 75, 162, 0.15) 0px,
            transparent 50%
          ),
          radial-gradient(
            at 50% 50%,
            rgba(102, 126, 234, 0.05) 0px,
            transparent 50%
          );
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 0;
        position: relative;
        overflow: hidden;
        margin: 0;
      }

      .chat-container {
        background: rgba(22, 22, 35, 0.95);
        border: 1px solid rgba(102, 126, 234, 0.2);
        border-radius: 0;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        width: 100%;
        max-width: 100%;
        height: 100vh;
        display: flex;
        flex-direction: column;
        overflow: hidden;
        position: relative;
        z-index: 1;
      }

      .chat-header {
        background: linear-gradient(
          135deg,
          rgba(102, 126, 234, 0.15) 0%,
          rgba(118, 75, 162, 0.15) 100%
        );
        border-bottom: 1px solid rgba(102, 126, 234, 0.2);
        color: white;
        padding: 24px 28px;
        position: relative;
        overflow: hidden;
      }

      .chat-header h1 {
        font-size: 26px;
        margin-bottom: 6px;
        font-weight: 700;
        letter-spacing: -0.5px;
        color: #fff;
      }

      .chat-header p {
        font-size: 13px;
        opacity: 0.6;
        font-weight: 500;
        letter-spacing: 0.3px;
      }

      .chat-messages {
        flex: 1;
        overflow-y: auto;
        padding: 32px 10%;
        background: transparent;
        will-change: scroll-position;
        scroll-behavior: smooth;
      }

      .chat-messages::-webkit-scrollbar {
        width: 6px;
      }

      .chat-messages::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.05);
      }

      .chat-messages::-webkit-scrollbar-thumb {
        background: rgba(102, 126, 234, 0.3);
        border-radius: 3px;
      }

      .chat-messages::-webkit-scrollbar-thumb:hover {
        background: rgba(102, 126, 234, 0.5);
      }

      .message {
        margin-bottom: 20px;
        display: flex;
        gap: 12px;
        animation: slideIn 0.2s ease-out;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }

        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .message.user {
        flex-direction: row-reverse;
      }

      .message-avatar {
        width: 40px;
        height: 40px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        flex-shrink: 0;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      }

      .message.user .message-avatar {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }

      .message.assistant .message-avatar {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      }

      .message-content {
        max-width: 65%;
      }

      .message-bubble {
        padding: 14px 18px;
        border-radius: 18px;
        line-height: 1.6;
        word-wrap: break-word;
        font-size: 15px;
        position: relative;
      }

      .message.user .message-bubble {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-bottom-right-radius: 6px;
        box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
      }

      .message.assistant .message-bubble {
        background: rgba(255, 255, 255, 0.05);
        color: rgba(255, 255, 255, 0.95);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-bottom-left-radius: 6px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      }

      .message-meta {
        display: flex;
        gap: 10px;
        margin-top: 8px;
        font-size: 11px;
        color: rgba(255, 255, 255, 0.4);
        font-weight: 500;
      }

      .message.user .message-meta {
        justify-content: flex-end;
      }

      .token-badge {
        background: rgba(102, 126, 234, 0.2);
        color: #a8b9ff;
        padding: 4px 10px;
        border-radius: 12px;
        font-weight: 600;
        border: 1px solid rgba(102, 126, 234, 0.3);
      }

      .chat-input-area {
        padding: 24px 10% 32px;
        background: rgba(22, 22, 35, 0.95);
        border-top: 1px solid rgba(102, 126, 234, 0.2);
      }

      .input-wrapper {
        display: flex;
        gap: 12px;
        align-items: flex-end;
      }

      #messageInput {
        flex: 1;
        background: rgba(255, 255, 255, 0.05);
        border: 2px solid rgba(102, 126, 234, 0.2);
        border-radius: 16px;
        padding: 14px 20px;
        font-size: 15px;
        font-family: inherit;
        resize: none;
        max-height: 120px;
        transition: border-color 0.2s ease, background 0.2s ease;
        color: white;
        will-change: border-color;
        overflow: hidden;
        scrollbar-width: none;
        /* Firefox */
      }

      #messageInput::-webkit-scrollbar {
        display: none;
      }

      #messageInput::placeholder {
        color: rgba(255, 255, 255, 0.3);
      }

      #messageInput:focus {
        outline: none;
        border-color: #667eea;
        background: rgba(255, 255, 255, 0.08);
      }

      #sendBtn {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        width: 52px;
        height: 52px;
        border-radius: 16px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 22px;
        transition: transform 0.1s ease, box-shadow 0.1s ease;
        flex-shrink: 0;
        box-shadow: 0 2px 8px rgba(102, 126, 234, 0.4);
        position: relative;
      }

      #sendBtn:hover:not(:disabled) {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.5);
      }

      #sendBtn:active:not(:disabled) {
        transform: translateY(0);
      }

      #sendBtn:disabled {
        opacity: 0.4;
        cursor: not-allowed;
        box-shadow: none;
      }

      .typing-indicator {
        display: none;
        padding: 14px 18px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 18px;
        border-bottom-left-radius: 6px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        width: fit-content;
      }

      .typing-indicator.show {
        display: block;
      }

      .typing-dots {
        display: flex;
        gap: 6px;
      }

      .typing-dots span {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: #667eea;
        animation: typing 1.4s infinite ease-in-out;
        will-change: transform, opacity;
      }

      .typing-dots span:nth-child(2) {
        animation-delay: 0.2s;
      }

      .typing-dots span:nth-child(3) {
        animation-delay: 0.4s;
      }

      @keyframes typing {
        0%,
        60%,
        100% {
          transform: translateY(0) scale(1);
          opacity: 0.6;
        }

        30% {
          transform: translateY(-12px) scale(1.1);
          opacity: 1;
        }
      }

      .error-message {
        background: rgba(239, 68, 68, 0.15);
        color: #fca5a5;
        padding: 14px 18px;
        border-radius: 12px;
        margin-bottom: 12px;
        display: none;
        border: 1px solid rgba(239, 68, 68, 0.3);
        font-size: 14px;
        font-weight: 500;
      }

      .error-message.show {
        display: block;
        animation: slideIn 0.3s ease;
      }

      .empty-state {
        text-align: center;
        padding: 80px 20px;
        color: rgba(255, 255, 255, 0.5);
      }

      .empty-state-icon {
        font-size: 72px;
        margin-bottom: 20px;
        animation: float 3s ease-in-out infinite;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px);
        }

        50% {
          transform: translateY(-10px);
        }
      }

      .empty-state h2 {
        font-size: 24px;
        margin-bottom: 10px;
        color: rgba(255, 255, 255, 0.9);
        font-weight: 700;
        letter-spacing: -0.5px;
      }

      .empty-state p {
        font-size: 15px;
        color: rgba(255, 255, 255, 0.4);
        font-weight: 500;
      }
    </style>
  </head>

  <body>
    <div class="chat-container">
      <div class="chat-header">
        <h1>🤖 AI Chat Assistant</h1>
        <p>Powered by AI-SDK & Dodo Payments</p>
      </div>

      <div class="chat-messages" id="chatMessages">
        <div class="empty-state" id="emptyState">
          <div class="empty-state-icon">💬</div>
          <h2>Start a Conversation</h2>
          <p>Ask me anything! Your token usage is automatically tracked.</p>
        </div>
      </div>

      <div class="chat-input-area">
        <div class="error-message" id="errorMessage"></div>
        <div class="input-wrapper">
          <textarea
            id="messageInput"
            placeholder="Type your message here..."
            rows="1"
          ></textarea>
          <button id="sendBtn" onclick="sendMessage()">➤</button>
        </div>
      </div>
    </div>

    <script>
      let conversationHistory = [];

      const messageInput = document.getElementById("messageInput");
      let resizeTimeout;
      messageInput.addEventListener("input", function () {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(() => {
          this.style.height = "auto";
          this.style.height = Math.min(this.scrollHeight, 120) + "px";
        }, 10);
      });

      // Send message on Enter (Shift+Enter for new line)
      messageInput.addEventListener("keydown", function (e) {
        if (e.key === "Enter" && !e.shiftKey) {
          e.preventDefault();
          sendMessage();
        }
      });

      async function sendMessage() {
        const input = document.getElementById("messageInput");
        const message = input.value.trim();

        if (!message) return;

        // Hide empty state
        document.getElementById("emptyState").style.display = "none";

        // Hide error
        document.getElementById("errorMessage").classList.remove("show");

        // Add user message to UI
        addMessage("user", message);

        // Add to conversation history
        conversationHistory.push({
          role: "user",
          content: message,
        });

        // Clear input
        input.value = "";
        input.style.height = "auto";

        // Show typing indicator
        showTypingIndicator();

        // Disable send button
        const sendBtn = document.getElementById("sendBtn");
        sendBtn.disabled = true;

        try {
          const response = await fetch("/chat", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              messages: conversationHistory,
            }),
          });

          const data = await response.json();

          if (!response.ok) {
            throw new Error(data.error || "Failed to get response");
          }

          // Hide typing indicator
          hideTypingIndicator();

          // Add assistant response to UI
          addMessage("assistant", data.message, data.usage);

          // Add to conversation history
          conversationHistory.push({
            role: "assistant",
            content: data.message,
          });
        } catch (error) {
          hideTypingIndicator();
          showError(error.message);
          // Remove the last user message from history since it failed
          conversationHistory.pop();
        } finally {
          sendBtn.disabled = false;
        }
      }

      function addMessage(role, content, usage = null) {
        const messagesDiv = document.getElementById("chatMessages");

        const messageDiv = document.createElement("div");
        messageDiv.className = `message ${role}`;

        const avatar = role === "user" ? "👤" : "🤖";

        let metaHTML = "";
        if (usage) {
          metaHTML = `
                    <div class="message-meta">
                        <span class="token-badge">📊 ${usage.totalTokens} tokens</span>
                    </div>
                `;
        }

        messageDiv.innerHTML = `
                <div class="message-avatar">${avatar}</div>
                <div class="message-content">
                    <div class="message-bubble">${escapeHtml(content)}</div>
                    ${metaHTML}
                </div>
            `;

        messagesDiv.appendChild(messageDiv);
        requestAnimationFrame(() => {
          messagesDiv.scrollTop = messagesDiv.scrollHeight;
        });
      }

      function showTypingIndicator() {
        const messagesDiv = document.getElementById("chatMessages");

        const typingDiv = document.createElement("div");
        typingDiv.className = "message assistant";
        typingDiv.id = "typingIndicator";
        typingDiv.innerHTML = `
                <div class="message-avatar">🤖</div>
                <div class="typing-indicator show">
                    <div class="typing-dots">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
            `;

        messagesDiv.appendChild(typingDiv);
        requestAnimationFrame(() => {
          messagesDiv.scrollTop = messagesDiv.scrollHeight;
        });
      }

      function hideTypingIndicator() {
        const typingIndicator = document.getElementById("typingIndicator");
        if (typingIndicator) {
          typingIndicator.remove();
        }
      }

      function showError(message) {
        const errorDiv = document.getElementById("errorMessage");
        errorDiv.textContent = "❌ " + message;
        errorDiv.classList.add("show");
      }

      function escapeHtml(text) {
        const div = document.createElement("div");
        div.textContent = text;
        return div.innerHTML.replace(/\n/g, "<br>");
      }
    </script>
  </body>
</html>
```

***

## Step 7: Test Your Chat Application

Time to test our AI chat app and see the billing in action! Let's make sure everything works end-to-end.

<Tip>
  **What we're testing**: We'll have some conversations with the AI, verify the token events reach Dodo Payments, and confirm billing calculations are correct.
</Tip>

<Steps>
  <Step title="Start the server">
    First, make sure everything is set up:

    1. Verify your `.env` file has all the API keys from Step 2
    2. Start the development server:

    ```bash  theme={null}
    npm run dev
    ```

    You should see:

    ```
    🚀 Server running at http://localhost:3000
    📊 Tracking event: ai_chat_usage
    👤 Customer ID: {YOUR CUSTOMER_ID}
    🔧 Environment: test_mode
    ```

    <Check>
      Server is running! Time to chat.
    </Check>
  </Step>

  <Step title="Open the chat interface">
    1. Open your browser
    2. Navigate to `http://localhost:3000`
    3. You should see the beautiful chat interface

    <Note>
      Make sure you update the `CUSTOMER_ID` in `server.ts` with your actual test customer ID from Step 4.
    </Note>
  </Step>

  <Step title="Have your first conversation">
    Let's test it out! Try these messages:

    1. **"What is artificial intelligence?"**
    2. **"How does machine learning work?"**
    3. **"Can you explain neural networks?"**

    Watch the token usage display update after each response!

    <Check>
      If you see the AI responding and token counts appearing, your app is working!
    </Check>
  </Step>

  <Step title="Check your Dodo Payments dashboard">
    Now let's verify the events are being received:

    1. Open your Dodo Payments dashboard
    2. Go to **Usage Billing** → **AI Token Usage Meter**
    3. Click on the **Events** tab
    4. You should see your chat events listed

    **What to look for:**

    * Event names: `ai_chat_usage`
    * Customer ID: Your test customer id

    <Frame>
      <img src="https://mintcdn.com/dodopayments/4L3_sb2jJa5trJWD/images/cookbooks/ai-chat-app/meter-event.png?fit=max&auto=format&n=4L3_sb2jJa5trJWD&q=85&s=041f2bd60ce174a0e67f051e206d25b0" alt="Meter Events" data-og-width="1250" width="1250" data-og-height="321" height="321" data-path="images/cookbooks/ai-chat-app/meter-event.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/4L3_sb2jJa5trJWD/images/cookbooks/ai-chat-app/meter-event.png?w=280&fit=max&auto=format&n=4L3_sb2jJa5trJWD&q=85&s=a825f4c03f05a1fa96f2fa5867c5231c 280w, https://mintcdn.com/dodopayments/4L3_sb2jJa5trJWD/images/cookbooks/ai-chat-app/meter-event.png?w=560&fit=max&auto=format&n=4L3_sb2jJa5trJWD&q=85&s=025892e96e4d4e89cad823a0d6a1cfcf 560w, https://mintcdn.com/dodopayments/4L3_sb2jJa5trJWD/images/cookbooks/ai-chat-app/meter-event.png?w=840&fit=max&auto=format&n=4L3_sb2jJa5trJWD&q=85&s=80fe144d5817bfbd19d6f5b1edaef2a6 840w, https://mintcdn.com/dodopayments/4L3_sb2jJa5trJWD/images/cookbooks/ai-chat-app/meter-event.png?w=1100&fit=max&auto=format&n=4L3_sb2jJa5trJWD&q=85&s=0944a7d287c2771a3e848e97c0c24bc6 1100w, https://mintcdn.com/dodopayments/4L3_sb2jJa5trJWD/images/cookbooks/ai-chat-app/meter-event.png?w=1650&fit=max&auto=format&n=4L3_sb2jJa5trJWD&q=85&s=43c6f375ac5a83a36104757c9cf67b1e 1650w, https://mintcdn.com/dodopayments/4L3_sb2jJa5trJWD/images/cookbooks/ai-chat-app/meter-event.png?w=2500&fit=max&auto=format&n=4L3_sb2jJa5trJWD&q=85&s=2fda9bccb7e9e3164868e0a891f9e088 2500w" />
    </Frame>

    <Check>
      You should see one event for each message you sent!
    </Check>
  </Step>

  <Step title="Verify token counting">
    Let's send some more messages and check if the token aggregation is working:

    1. In your meter, go to the **Customers** tab
    2. Find your test customer
    3. Check the "Consumed Units" column - it should show the total tokens used

    <Frame>
      <img src="https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/aggregation.png?fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=58fa883c91fae2d4e7d59e266ca8913b" alt="Meter Customer Tokens" data-og-width="871" width="871" data-og-height="352" height="352" data-path="images/cookbooks/ai-chat-app/aggregation.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/aggregation.png?w=280&fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=e33655b35467bf9f7618271302c3119c 280w, https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/aggregation.png?w=560&fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=68e689fcfcb75a53bec5100628a133d7 560w, https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/aggregation.png?w=840&fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=67c5bd2f17e0102d25488644ce615550 840w, https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/aggregation.png?w=1100&fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=1b0999a8424eb14ab5a6e65a0c366548 1100w, https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/aggregation.png?w=1650&fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=2660b278d311b8738d60f148f496304f 1650w, https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/aggregation.png?w=2500&fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=85ebb229e27e7740e7d6714c5088da6d 2500w" />
    </Frame>

    <Info>
      The meter is summing up all `totalTokens` values automatically!
    </Info>
  </Step>

  <Step title="Test the free tier">
    Let's use enough tokens to exceed the free tier:

    1. Have several more conversations (aim for \~15,000+ total tokens)
    2. Check your **Customers** tab in meter dashboard again
    3. You should now see:
       * Consumed Units: 15,000+ tokens
       * Chargeable Units: 5,000 (10,000 free tokens applied)
       * Total Price: \~\$0.05

    <Frame>
      <img src="https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/free-tier-test.png?fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=5ffc1f234acfbaaa2ab0c34805812785" alt="Free Tier Test" data-og-width="846" width="846" data-og-height="352" height="352" data-path="images/cookbooks/ai-chat-app/free-tier-test.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/free-tier-test.png?w=280&fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=7271b28ef1a0e85da40bda6d4f55bdf9 280w, https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/free-tier-test.png?w=560&fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=aec8261e6234ddb4bd92f6ca14a1c757 560w, https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/free-tier-test.png?w=840&fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=1ae06fb6e96de1335f4305288e10ec28 840w, https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/free-tier-test.png?w=1100&fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=45cdf0f1cf084f8febc25124346d9b74 1100w, https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/free-tier-test.png?w=1650&fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=c0709871e76ba329f21e7a458acac705 1650w, https://mintcdn.com/dodopayments/oig3NPG69DDpua_S/images/cookbooks/ai-chat-app/free-tier-test.png?w=2500&fit=max&auto=format&n=oig3NPG69DDpua_S&q=85&s=d68d18f08beeb82b1dd073324e5dec88 2500w" />
    </Frame>

    <Check>
      **Success!** Your usage-based billing is working perfectly. Customers will be automatically charged based on their actual token consumption.
    </Check>
  </Step>
</Steps>

***

## Troubleshooting

Common issues and their solutions:

<AccordionGroup>
  <Accordion title="Events not appearing in dashboard">
    **Possible causes:**

    * Event name doesn't match meter configuration exactly
    * Customer ID doesn't exist in your account
    * API key is invalid or expired
    * Network connectivity issues

    **Solutions:**

    1. Verify event name matches meter configuration exactly (case-sensitive: `ai_chat_usage`)
    2. Check that customer ID exists in Dodo Payments dashboard
    3. Test API key with a simple API call
    4. Check server logs for error messages
  </Accordion>

  <Accordion title="Token counts showing zero">
    **Possible causes:**

    * Model not returning usage information
    * Incorrect SDK version

    **Solutions:**

    1. Test if model returns usage:

    ```typescript  theme={null}
    const response = await generateText({...});
    console.log('Usage:', response.usage);
    ```

    2. Update to latest Blueprints SDK: `npm install @dodopayments/ingestion-blueprints@latest`
  </Accordion>

  <Accordion title="API key invalid error">
    **Possible causes:**

    * Wrong API key for environment
    * Extra spaces or quotes in `.env` file

    **Solutions:**

    * Ensure test key starts with `test_`, live key starts with `live_`
    * Remove any quotes around keys in `.env` file
    * Generate a new key if needed
  </Accordion>
</AccordionGroup>

Need help?

* [Discord Community](https://discord.gg/bYqAp4ayYh)
* [support@dodopayments.com](mailto:support@dodopayments.com)

***

## Congratulations! You Built an AI Chat App

You now have a fully functional AI chat application with automatic token usage tracking and billing powered by Dodo Payments. 🎉

### Learn More

<CardGroup cols={2}>
  <Card title="LLM Blueprint" icon="robot" href="/developer-resources/ingestion-blueprints/llm">
    Learn more about LLM Ingestion Blueprint
  </Card>

  <Card title="Ingestion Blueprints SDK" icon="github" href="https://github.com/dodopayments/ingestion-blueprints">
    Check out the GitHub repository for more examples
  </Card>

  <Card title="Join Community" icon="discord" href="https://discord.gg/bYqAp4ayYh">
    Get help and share your projects on Discord
  </Card>
</CardGroup>


# Checkout Sessions
Source: https://docs.dodopayments.com/developer-resources/checkout-session

Create secure, hosted checkout experiences that handle the complete payment flow for both one-time purchases and subscriptions with full customization control.

<CardGroup cols={2}>
  <Card title="Quick Start Guide" icon="rocket" href="#creating-your-first-checkout-session">
    Get your first checkout session running in under 5 minutes
  </Card>

  <Card title="API Reference & Live Testing" icon="code" href="/api-reference/checkout-sessions/create">
    Explore the full API documentation and interactively test Checkout Session requests and responses.
  </Card>
</CardGroup>

<Info>
  **Session Validity**: Checkout sessions are valid for 24 hours by default. If you pass `confirm=true` in your request, the session will only be valid for 15 minutes.
</Info>

## Prerequisites

<Steps>
  <Step title="Dodo Payments Account">
    You'll need an active Dodo Payments merchant account with API access.
  </Step>

  <Step title="API Credentials">
    Generate your API credentials from the Dodo Payments dashboard:
  </Step>

  <Step title="Products Setup">
    Create your products in the Dodo Payments dashboard before implementing checkout sessions.
  </Step>
</Steps>

## Creating Your First Checkout Session

<Tabs>
  <Tab title="Node.js SDK">
    ```javascript expandable theme={null}
    import DodoPayments from 'dodopayments';

    // Initialize the Dodo Payments client
    const client = new DodoPayments({
      bearerToken: process.env.DODO_PAYMENTS_API_KEY,
    });

    async function createCheckoutSession() {
      try {
        const session = await client.checkoutSessions.create({
          // Products to sell - use IDs from your Dodo Payments dashboard
          product_cart: [
            {
              product_id: 'prod_123', // Replace with your actual product ID
              quantity: 1
            }
          ],
          
          // Pre-fill customer information to reduce friction
          customer: {
            email: 'customer@example.com',
            name: 'John Doe',
            phone_number: '+1234567890'
          },
          
          // Billing address for tax calculation and compliance
          billing_address: {
            street: '123 Main St',
            city: 'San Francisco',
            state: 'CA',
            country: 'US', // Required: ISO 3166-1 alpha-2 country code
            zipcode: '94102'
          },
          
          // Where to redirect after successful payment
          return_url: 'https://yoursite.com/checkout/success',
          
          // Custom data for your internal tracking
          metadata: {
            order_id: 'order_123',
            source: 'web_app'
          }
        });

        // Redirect your customer to this URL to complete payment
        console.log('Checkout URL:', session.checkout_url);
        console.log('Session ID:', session.session_id);
        
        return session;
        
      } catch (error) {
        console.error('Failed to create checkout session:', error);
        throw error;
      }
    }

    // Example usage in an Express.js route
    app.post('/create-checkout', async (req, res) => {
      try {
        const session = await createCheckoutSession();
        res.json({ checkout_url: session.checkout_url });
      } catch (error) {
        res.status(500).json({ error: 'Failed to create checkout session' });
      }
    });
    ```
  </Tab>

  <Tab title="Python SDK">
    ```python expandable theme={null}
    import os
    from dodopayments import DodoPayments

    # Initialize the Dodo Payments client
    client = DodoPayments(
        bearer_token=os.environ.get("DODO_PAYMENTS_API_KEY"),
    )

    def create_checkout_session():
        """
        Create a checkout session for a single product with customer data pre-filled.
        Returns the session object containing checkout_url for customer redirection.
        """
        try:
            session = client.checkout_sessions.create(
                # Products to sell - use IDs from your Dodo Payments dashboard
                product_cart=[
                    {
                        "product_id": "prod_123",  # Replace with your actual product ID
                        "quantity": 1
                    }
                ],
                
                # Pre-fill customer information to reduce checkout friction
                customer={
                    "email": "customer@example.com",
                    "name": "John Doe",
                    "phone_number": "+1234567890"
                },
                
                # Billing address for tax calculation and compliance
                billing_address={
                    "street": "123 Main St",
                    "city": "San Francisco", 
                    "state": "CA",
                    "country": "US",  # Required: ISO 3166-1 alpha-2 country code
                    "zipcode": "94102"
                },
                
                # Where to redirect after successful payment
                return_url="https://yoursite.com/checkout/success",
                
                # Custom data for your internal tracking
                metadata={
                    "order_id": "order_123",
                    "source": "web_app"
                }
            )
            
            # Redirect your customer to this URL to complete payment
            print(f"Checkout URL: {session.checkout_url}")
            print(f"Session ID: {session.session_id}")
            
            return session
            
        except Exception as error:
            print(f"Failed to create checkout session: {error}")
            raise error

    # Example usage in a Flask route
    from flask import Flask, jsonify, request

    app = Flask(__name__)

    @app.route('/create-checkout', methods=['POST'])
    def create_checkout():
        try:
            session = create_checkout_session()
            return jsonify({"checkout_url": session.checkout_url})
        except Exception as error:
            return jsonify({"error": "Failed to create checkout session"}), 500
    ```
  </Tab>

  <Tab title="REST API">
    ```javascript expandable theme={null}
    // Direct API call using fetch - useful for any JavaScript environment
    async function createCheckoutSession() {
      try {
        const response = await fetch('https://test.dodopayments.com/checkouts', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${process.env.DODO_PAYMENTS_API_KEY}`
          },
          body: JSON.stringify({
            // Products to sell - use IDs from your Dodo Payments dashboard
            product_cart: [
              {
                product_id: 'prod_123', // Replace with your actual product ID
                quantity: 1
              }
            ],
            
            // Pre-fill customer information to reduce checkout friction
            customer: {
              email: 'customer@example.com',
              name: 'John Doe',
              phone_number: '+1234567890'
            },
            
            // Billing address for tax calculation and compliance
            billing_address: {
              street: '123 Main St',
              city: 'San Francisco',
              state: 'CA', 
              country: 'US', // Required: ISO 3166-1 alpha-2 country code
              zipcode: '94102'
            },
            
            // Where to redirect after successful payment
            return_url: 'https://yoursite.com/checkout/success',
            
            // Custom data for your internal tracking
            metadata: {
              order_id: 'order_123',
              source: 'web_app'
            }
          })
        });

        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }

        const session = await response.json();
        
        // Redirect your customer to this URL to complete payment
        console.log('Checkout URL:', session.checkout_url);
        console.log('Session ID:', session.session_id);
        
        return session;
        
      } catch (error) {
        console.error('Failed to create checkout session:', error);
        throw error;
      }
    }

    // Example: Redirect user to checkout
    createCheckoutSession().then(session => {
      window.location.href = session.checkout_url;
    });
    ```
  </Tab>
</Tabs>

### API Response

All methods above return the same response structure:

```json  theme={null}
{
  "session_id": "cks_Gi6KGJ2zFJo9rq9Ukifwa",
  "checkout_url": "https://test.checkout.dodopayments.com/session/cks_Gi6KGJ2zFJo9rq9Ukifwa"
}
```

<Steps>
  <Step title="Get the checkout URL">
    Extract the `checkout_url` from the API response.
  </Step>

  <Step title="Redirect your customer">
    Direct your customer to the checkout URL to complete their purchase.

    ```javascript  theme={null}
    // Redirect immediately
    window.location.href = session.checkout_url;

    // Or open in new window
    window.open(session.checkout_url, '_blank');
    ```
  </Step>

  <Step title="Handle the return">
    After payment, customers are redirected to your `return_url` with additional query parameters for payment status.
  </Step>
</Steps>

## Request Body

<CardGroup cols={2}>
  <Card title="Required Fields" icon="asterisk">
    Essential fields needed for every checkout session
  </Card>

  <Card title="Optional Fields" icon="gear">
    Additional configuration to customize your checkout experience
  </Card>
</CardGroup>

### Required Fields

<ParamField body="product_cart" type="array" required>
  Array of products to include in the checkout session. Each product must have a valid `product_id` from your Dodo Payments dashboard.

  <Warning>
    **Important**: Multiple product carts can only contain one-time payment products. You cannot mix subscription products with one-time products in the same checkout session.
  </Warning>

  <Expandable title="Product Cart Item Properties">
    <ParamField body="product_id" type="string" required>
      The unique identifier of the product from your Dodo Payments dashboard.

      **Example:** `"prod_123abc456def"`
    </ParamField>

    <ParamField body="quantity" type="integer" required>
      Quantity of the product. Must be greater than 0.

      **Example:** `1` for single item, `3` for multiple quantities
    </ParamField>
  </Expandable>
</ParamField>

<Tip>
  **Find Your Product IDs**: You can find product IDs in your Dodo Payments dashboard under Products → View Details, or by using the [List Products API](/api-reference/products/get-products).
</Tip>

### Optional Fields

Configure these fields to customize the checkout experience and add business logic to your payment flow.

<AccordionGroup>
  <Accordion title="Customer Information">
    <ParamField body="customer" type="object">
      Pre-fill customer details to reduce checkout friction and improve conversion rates.

      <Expandable title="Customer object properties">
        <ParamField body="email" type="string">
          Customer's email address. Used for receipts, order confirmations, and customer identification.

          **Best Practice**: Always include email when available to ensure customers receive payment confirmations.
        </ParamField>

        <ParamField body="name" type="string">
          Customer's full name as it should appear on receipts and invoices.

          **Example**: `"John Doe"` or `"Jane Smith"`
        </ParamField>

        <ParamField body="phone_number" type="string">
          Customer's phone number in international format. Required for some payment methods and fraud prevention.

          **Format**: Include country code, e.g., `"+1234567890"` for US numbers
        </ParamField>
      </Expandable>
    </ParamField>

    <ParamField body="billing_address" type="object">
      Billing address information for accurate tax calculation, fraud prevention, and regulatory compliance.

      <Info>
        When `confirm` is set to `true`, all billing address fields become required for successful session creation.
      </Info>

      <Expandable title="Billing address object properties">
        <ParamField body="street" type="string">
          Complete street address including house number, street name, and apartment/unit number if applicable.

          **Example**: `"123 Main St, Apt 4B"` or `"456 Oak Avenue"`
        </ParamField>

        <ParamField body="city" type="string">
          City or municipality name.

          **Example**: `"San Francisco"`, `"New York"`, `"London"`
        </ParamField>

        <ParamField body="state" type="string">
          State, province, or region name. Use full names or standard abbreviations.

          **Example**: `"California"` or `"CA"`, `"Ontario"` or `"ON"`
        </ParamField>

        <ParamField body="country" type="string" required>
          Two-letter ISO country code (ISO 3166-1 alpha-2). This field is always required when billing\_address is provided.

          **Examples**: `"US"` (United States), `"CA"` (Canada), `"GB"` (United Kingdom), `"DE"` (Germany)

          <Card title="Country Code Reference" icon="globe" href="/api-reference/misc/supported-countries">
            View complete list of supported countries and their ISO codes
          </Card>
        </ParamField>

        <ParamField body="zipcode" type="string">
          Postal code, ZIP code, or equivalent based on country requirements.

          **Examples**: `"94102"` (US), `"M5V 3A8"` (Canada), `"SW1A 1AA"` (UK)
        </ParamField>
      </Expandable>
    </ParamField>
  </Accordion>

  <Accordion title="Payment Configuration">
    <ParamField body="allowed_payment_method_types" type="array">
      Control which payment methods are available to customers during checkout. This helps optimize for specific markets or business requirements.

      **Available Options**: `credit`, `debit`, `upi_collect`, `upi_intent`, `apple_pay`, `google_pay`, `amazon_pay`, `klarna`, `affirm`, `afterpay_clearpay`, `sepa`, `ach`

      <Warning>
        **Critical**: Always include `credit` and `debit` as fallback options to prevent checkout failures when preferred payment methods are unavailable.
      </Warning>

      **Example**:

      ```json expandable theme={null}
      ["apple_pay", "google_pay", "credit", "debit"]
      ```
    </ParamField>

    <ParamField body="billing_currency" type="string">
      Override the default currency selection with a fixed billing currency. Uses ISO 4217 currency codes.

      **Supported Currencies**: `USD`, `EUR`, `GBP`, `CAD`, `AUD`, `INR`, and more

      **Example**: `"USD"` for US Dollars, `"EUR"` for Euros

      <Note>
        This field is only effective when adaptive pricing is enabled. If adaptive pricing is disabled, the product's default currency will be used.
      </Note>
    </ParamField>

    <ParamField body="show_saved_payment_methods" type="boolean" default="false">
      Display previously saved payment methods for returning customers, improving checkout speed and user experience.
    </ParamField>
  </Accordion>

  <Accordion title="Session Management">
    <ParamField body="return_url" type="string">
      URL to redirect customers after successful payment or cancellation.
    </ParamField>

    <ParamField body="confirm" type="boolean" default="false">
      If true, finalizes all session details immediately. API will throw an error if required data is missing.
    </ParamField>

    <ParamField body="discount_code" type="string">
      Apply a discount code to the checkout session.
    </ParamField>

    <ParamField body="metadata" type="object">
      Custom key-value pairs to store additional information about the session.
    </ParamField>
  </Accordion>

  <Accordion title="UI Customization & Features">
    <ParamField body="customization" type="object">
      Customize the appearance and behavior of the checkout interface.

      <Expandable title="Customization object properties">
        <ParamField body="theme" type="string" default="system">
          Theme for the checkout interface. Options: `light`, `dark`, or `system`.
        </ParamField>

        <ParamField body="show_order_details" type="boolean" default="true">
          Display order details section in the checkout interface.
        </ParamField>

        <ParamField body="show_on_demand_tag" type="boolean" default="true">
          Show the "on-demand" tag for applicable products.
        </ParamField>
      </Expandable>
    </ParamField>

    <ParamField body="feature_flags" type="object">
      Configure specific features and behaviors for the checkout session.

      <Expandable title="Feature flags object properties">
        <ParamField body="allow_currency_selection" type="boolean" default="false">
          Allow customers to select their preferred currency during checkout.
        </ParamField>

        <ParamField body="allow_discount_code" type="boolean" default="true">
          Show discount code input field in the checkout interface.
        </ParamField>

        <ParamField body="allow_phone_number_collection" type="boolean" default="true">
          Collect customer phone numbers during checkout.
        </ParamField>

        <ParamField body="allow_tax_id" type="boolean" default="false">
          Allow customers to enter tax identification numbers.
        </ParamField>

        <ParamField body="always_create_new_customer" type="boolean" default="false">
          Force creation of a new customer record instead of updating existing ones.
        </ParamField>
      </Expandable>
    </ParamField>
  </Accordion>

  <Accordion title="Subscription Configuration">
    <ParamField body="subscription_data" type="object">
      Additional configuration for checkout sessions containing subscription products.

      <Expandable title="Subscription data object properties">
        <ParamField body="trial_period_days" type="integer">
          Number of days for the trial period before the first charge.
        </ParamField>
      </Expandable>
    </ParamField>
  </Accordion>
</AccordionGroup>

## Usage Examples

Here are 10 comprehensive examples showcasing different checkout session configurations for various business scenarios:

### 1. Simple Single Product Checkout

```javascript expandable theme={null}
const session = await client.checkoutSessions.create({
  product_cart: [
    {
      product_id: 'prod_ebook_guide',
      quantity: 1
    }
  ],
  customer: {
    email: 'customer@example.com',
    name: 'John Doe'
  },
  return_url: 'https://yoursite.com/success'
});
```

### 2. Multi-Product Cart

```javascript expandable theme={null}
const session = await client.checkoutSessions.create({
  product_cart: [
    {
      product_id: 'prod_laptop',
      quantity: 1
    },
    {
      product_id: 'prod_mouse',
      quantity: 2
    },
    {
      product_id: 'prod_warranty',
      quantity: 1
    }
  ],
  customer: {
    email: 'customer@example.com',
    name: 'John Doe',
    phone_number: '+1234567890'
  },
  billing_address: {
    street: '123 Tech Street',
    city: 'San Francisco',
    state: 'CA',
    country: 'US',
    zipcode: '94102'
  },
  return_url: 'https://electronics-store.com/order-confirmation'
});
```

### 3. Subscription with Trial Period

```javascript expandable theme={null}
const session = await client.checkoutSessions.create({
  product_cart: [
    {
      product_id: 'prod_monthly_plan',
      quantity: 1
    }
  ],
  subscription_data: {
    trial_period_days: 14
  },
  customer: {
    email: 'user@startup.com',
    name: 'Jane Smith'
  },
  return_url: 'https://saas-app.com/onboarding',
  metadata: {
    plan_type: 'professional',
    referral_source: 'google_ads'
  }
});
```

### 4. Pre-confirmed Checkout

<Note>
  When `confirm` is set to `true`, the customer will be taken directly to the checkout page, bypassing any confirmation steps.
</Note>

```javascript expandable theme={null}
const session = await client.checkoutSessions.create({
  product_cart: [
    {
      product_id: 'prod_premium_course',
      quantity: 1
    }
  ],
  customer: {
    email: 'student@university.edu',
    name: 'Alex Johnson',
    phone_number: '+1555123456'
  },
  billing_address: {
    street: '456 University Ave',
    city: 'Boston',
    state: 'MA',
    country: 'US',
    zipcode: '02134'
  },
  confirm: true,
  return_url: 'https://learning-platform.com/course-access',
  metadata: {
    course_category: 'programming',
    enrollment_date: '2024-01-15'
  }
});
```

### 5. Checkout with Currency Override

<Note>
  The `billing_currency` override only takes effect when adaptive currency is enabled in your account settings. If adaptive currency is disabled, this parameter will have no effect.
</Note>

```javascript expandable theme={null}
const session = await client.checkoutSessions.create({
  product_cart: [
    {
      product_id: 'prod_consulting_service',
      quantity: 1
    }
  ],
  customer: {
    email: 'client@company.co.uk',
    name: 'Oliver Williams'
  },
  billing_address: {
    street: '789 Business Park',
    city: 'London',
    state: 'England',
    country: 'GB',
    zipcode: 'SW1A 1AA'
  },
  billing_currency: 'GBP',
  feature_flags: {
    allow_currency_selection: true,
    allow_tax_id: true
  },
  return_url: 'https://consulting-firm.com/service-confirmation'
});
```

### 6. Saved Payment Methods for Returning Customers

```javascript expandable theme={null}
const session = await client.checkoutSessions.create({
  product_cart: [
    {
      product_id: 'prod_monthly_subscription',
      quantity: 1
    }
  ],
  customer: {
    email: 'returning.customer@example.com',
    name: 'Robert Johnson',
    phone_number: '+1555987654'
  },
  show_saved_payment_methods: true,
  feature_flags: {
    allow_phone_number_collection: true,
    always_create_new_customer: false
  },
  return_url: 'https://subscription-service.com/welcome-back',
  metadata: {
    customer_tier: 'premium',
    account_age: 'returning'
  }
});
```

### 7. B2B Checkout with Tax ID Collection

```javascript expandable theme={null}
const session = await client.checkoutSessions.create({
  product_cart: [
    {
      product_id: 'prod_enterprise_license',
      quantity: 5
    }
  ],
  customer: {
    email: 'procurement@enterprise.com',
    name: 'Sarah Davis',
    phone_number: '+1800555000'
  },
  billing_address: {
    street: '1000 Corporate Blvd',
    city: 'New York',
    state: 'NY',
    country: 'US',
    zipcode: '10001'
  },
  feature_flags: {
    allow_tax_id: true,
    allow_phone_number_collection: true,
    always_create_new_customer: false
  },
  return_url: 'https://enterprise-software.com/license-delivery',
  metadata: {
    customer_type: 'enterprise',
    contract_id: 'ENT-2024-001',
    sales_rep: 'john.sales@company.com'
  }
});
```

### 8. Dark Theme Checkout with Discount Code

```javascript expandable theme={null}
const session = await client.checkoutSessions.create({
  product_cart: [
    {
      product_id: 'prod_gaming_chair',
      quantity: 1
    }
  ],
  discount_code: 'BLACKFRIDAY2024',
  customization: {
    theme: 'dark',
    show_order_details: true,
    show_on_demand_tag: false
  },
  feature_flags: {
    allow_discount_code: true
  },
  customer: {
    email: 'gamer@example.com',
    name: 'Mike Chen'
  },
  return_url: 'https://gaming-store.com/order-complete'
});
```

### 9. Regional Payment Methods (UPI for India)

```javascript expandable theme={null}
const session = await client.checkoutSessions.create({
  product_cart: [
    {
      product_id: 'prod_online_course_hindi',
      quantity: 1
    }
  ],
  allowed_payment_method_types: [
    'upi_collect',
    'upi_intent',
    'credit',
    'debit'
  ],
  customer: {
    email: 'student@example.in',
    name: 'Priya Sharma',
    phone_number: '+919876543210'
  },
  billing_address: {
    street: 'MG Road',
    city: 'Bangalore',
    state: 'Karnataka',
    country: 'IN',
    zipcode: '560001'
  },
  billing_currency: 'INR',
  return_url: 'https://education-platform.in/course-access',
  metadata: {
    region: 'south_india',
    language: 'hindi'
  }
});
```

### 10. BNPL (Buy Now Pay Later) Checkout

```javascript expandable theme={null}
const session = await client.checkoutSessions.create({
  product_cart: [
    {
      product_id: 'prod_luxury_watch',
      quantity: 1
    }
  ],
  allowed_payment_method_types: [
    'klarna',
    'affirm',
    'afterpay_clearpay',
    'credit',
    'debit'
  ],
  customer: {
    email: 'fashion.lover@example.com',
    name: 'Emma Thompson',
    phone_number: '+1234567890'
  },
  billing_address: {
    street: '555 Fashion Ave',
    city: 'Los Angeles',
    state: 'CA',
    country: 'US',
    zipcode: '90210'
  },
  feature_flags: {
    allow_phone_number_collection: true
  },
  return_url: 'https://luxury-store.com/purchase-confirmation',
  metadata: {
    product_category: 'luxury',
    price_range: 'high_value'
  }
});
```

## Moving from Dynamic Links to Checkout Sessions

### Key Differences

Previously, when creating a payment link with Dynamic Links, you were required to provide the customer's complete billing address.

With Checkout Sessions, this is no longer necessary. You can simply pass along whatever information you have, and we'll handle the rest. For example:

* If you only know the customer's billing country, just provide that.
* The checkout flow will automatically collect the missing details before moving the customer to the payment page.
* On the other hand, if you already have all the required information and want to skip directly to the payment page, you can pass the full data set and include `confirm=true` in your request body.

### Migration Process

Migrating from Dynamic Links to Checkout Sessions is straightforward:

<Steps>
  <Step title="Update your integration">
    Update your integration to use the new API or SDK method.
  </Step>

  <Step title="Adjust request payload">
    Adjust the request payload according to the Checkout Sessions format.
  </Step>

  <Step title="That's it!">
    Yes. No additional handling or special migration steps are needed on your side.
  </Step>
</Steps>


# Convex Component
Source: https://docs.dodopayments.com/developer-resources/convex-component

Learn how to integrate Dodo Payments with your Convex backend using our Convex Component. Covers checkout functions, customer portal, webhooks, and secure environment setup.

<CardGroup cols={2}>
  <Card title="Checkout Function" icon="cart-shopping" href="#checkout-function">
    Integrate Dodo Payments checkout with session-based flow.
  </Card>

  <Card title="Customer Portal" icon="user" href="#customer-portal-function">
    Allow customers to manage subscriptions and details.
  </Card>

  <Card title="Webhooks" icon="bell" href="#webhook-handler">
    Receive and process Dodo Payments webhook events.
  </Card>
</CardGroup>

## Installation

<Steps>
  <Step title="Install the package">
    Run the following command in your project root:

    ```bash  theme={null}
    npm install @dodopayments/convex
    ```
  </Step>

  <Step title="Add Component to Convex Config">
    Add the Dodo Payments component to your Convex configuration:

    ```typescript  theme={null}
    // convex/convex.config.ts
    import { defineApp } from "convex/server";
    import dodopayments from "@dodopayments/convex/convex.config";

    const app = defineApp();
    app.use(dodopayments);
    export default app;
    ```

    After editing `convex.config.ts`, run `npx convex dev` once to generate the necessary types.
  </Step>

  <Step title="Set up environment variables">
    Set up environment variables in your Convex dashboard (**Settings** → **Environment Variables**). You can access the dashboard by running:

    ```bash  theme={null}
    npx convex dashboard
    ```

    Add the following environment variables:

    * `DODO_PAYMENTS_API_KEY` - Your Dodo Payments API key
    * `DODO_PAYMENTS_ENVIRONMENT` - Set to `test_mode` or `live_mode`
    * `DODO_PAYMENTS_WEBHOOK_SECRET` - Your webhook secret (required for webhook handling)

    <Warning>
      Always use Convex environment variables for sensitive information. Never commit secrets to version control.
    </Warning>
  </Step>
</Steps>

## Component Setup Examples

<Steps>
  <Step title="Create Internal Query">
    First, create an internal query to fetch users from your database. This will be used in the payment functions to identify customers.

    <Warning>
      Before using this query, make sure to define the appropriate schema in your `convex/schema.ts` file.
    </Warning>

    ```typescript  theme={null}
    // convex/users.ts
    import { internalQuery } from "./_generated/server";
    import { v } from "convex/values";

    // Internal query to fetch user by auth ID
    export const getByAuthId = internalQuery({
      args: { authId: v.string() },
      handler: async (ctx, { authId }) => {
        return await ctx.db
          .query("users")
          .withIndex("by_auth_id", (q) => q.eq("authId", authId))
          .first();
      },
    });
    ```
  </Step>

  <Step title="Configure DodoPayments Component">
    <CodeGroup>
      ```typescript Convex Component Setup expandable theme={null}
      // convex/dodo.ts
      import { DodoPayments } from "@dodopayments/convex";
      import { components } from "./_generated/api";
      import { internal } from "./_generated/api";

      export const dodo = new DodoPayments(components.dodopayments, {
      // This function maps your Convex user to a Dodo Payments customer
      // Customize it based on your authentication provider and user database
      identify: async (ctx) => {
        const identity = await ctx.auth.getUserIdentity();
        if (!identity) {
          return null; // User is not logged in
        }
        
        // Use ctx.runQuery() to lookup user from your database
        const user = await ctx.runQuery(internal.users.getByAuthId, {
          authId: identity.subject,
        });
        
        if (!user) {
          return null; // User not found in database
        }
        
        return {
          dodoCustomerId: user.dodoCustomerId, // Replace user.dodoCustomerId with your field storing Dodo Payments customer ID
        };
      },
      apiKey: process.env.DODO_PAYMENTS_API_KEY!,
      environment: process.env.DODO_PAYMENTS_ENVIRONMENT as "test_mode" | "live_mode",
      });

      // Export the API methods for use in your app
      export const { checkout, customerPortal } = dodo.api();
      ```
    </CodeGroup>
  </Step>
</Steps>

<Tabs>
  <Tab title="Checkout Function Setup">
    <Info>
      Use this function to integrate Dodo Payments checkout into your Convex app. Uses session-based checkout with full feature support.
    </Info>

    <CodeGroup>
      ```typescript Checkout Action expandable theme={null}
      // convex/payments.ts
      import { action } from "./_generated/server";
      import { v } from "convex/values";
      import { checkout } from "./dodo";

      export const createCheckout = action({
        args: { 
          product_cart: v.array(v.object({
            product_id: v.string(),
            quantity: v.number(),
          })),
          returnUrl: v.optional(v.string()),
        },
        handler: async (ctx, args) => {
          try {
            const session = await checkout(ctx, {
              payload: {
                product_cart: args.product_cart,
                return_url: args.returnUrl,
                billing_currency: "USD",
                feature_flags: {
                  allow_discount_code: true,
                },
              },
            });
            if (!session?.checkout_url) {
              throw new Error("Checkout session did not return a checkout_url");
            }
            return session;
          } catch (error) {
            console.error("Failed to create checkout session", error);
            throw new Error("Unable to create checkout session. Please try again.");
          }
        },
      });
      ```
    </CodeGroup>
  </Tab>

  <Tab title="Customer Portal Setup">
    <Info>
      Use this function to allow customers to manage their subscriptions and details via the Dodo Payments customer portal. The customer is automatically identified via the `identify` function.
    </Info>

    <CodeGroup>
      ```typescript Customer Portal Action expandable theme={null}
      // convex/payments.ts (add to existing file)
      import { action } from "./_generated/server";
      import { v } from "convex/values";
      import { customerPortal } from "./dodo";

      export const getCustomerPortal = action({
        args: {
          send_email: v.optional(v.boolean()),
        },
          handler: async (ctx, args) => {
            try {
              const portal = await customerPortal(ctx, args);
              if (!portal?.portal_url) {
                throw new Error("Customer portal did not return a portal_url");
              }
              return portal;
            } catch (error) {
              console.error("Failed to generate customer portal link", error);
              throw new Error("Unable to generate customer portal link. Please try again.");
            }
          },
      });
      ```
    </CodeGroup>
  </Tab>

  <Tab title="Webhook Handler Setup">
    <Info>
      Use this handler to receive and process Dodo Payments webhook events securely in your Convex app. All webhook handlers receive the Convex `ActionCtx` as the first parameter, allowing you to use `ctx.runQuery()` and `ctx.runMutation()` to interact with your database.
    </Info>

    <CodeGroup>
      ```typescript Convex HTTP Action expandable theme={null}
      // convex/http.ts
      import { createDodoWebhookHandler } from "@dodopayments/convex";
      import { httpRouter } from "convex/server";
      import { internal } from "./_generated/api";

      const http = httpRouter();

      http.route({
        path: "/dodopayments-webhook",
        method: "POST",
        handler: createDodoWebhookHandler({
          // Handle successful payments
          onPaymentSucceeded: async (ctx, payload) => {
            console.log("🎉 Payment Succeeded!");

            // Use Convex context to persist payment data
            await ctx.runMutation(internal.webhooks.createPayment, {
              paymentId: payload.data.payment_id,
              businessId: payload.business_id,
              customerEmail: payload.data.customer.email,
              amount: payload.data.total_amount,
              currency: payload.data.currency,
              status: payload.data.status,
              webhookPayload: JSON.stringify(payload),
            });
          },

          // Handle subscription activation
          onSubscriptionActive: async (ctx, payload) => {
            console.log("🎉 Subscription Activated!");
            // Use Convex context to persist subscription data
            await ctx.runMutation(internal.webhooks.createSubscription, {
              subscriptionId: payload.data.subscription_id,
              businessId: payload.business_id,
              customerEmail: payload.data.customer.email,
              status: payload.data.status,
              webhookPayload: JSON.stringify(payload),
            });
          },
          // Add other event handlers as needed
        }),
      });

      export default http;
      ```
    </CodeGroup>

    <Warning>
      Make sure to define the corresponding database mutations in your Convex backend for each webhook event you want to handle. For example, create a <code>createPayment</code> mutation to record successful payments or a <code>createSubscription</code> mutation to manage subscription state.
    </Warning>
  </Tab>
</Tabs>

## Checkout Function

<Info>
  The Dodo Payments Convex component uses session-based checkout, providing a secure, customizable checkout experience with pre-configured product carts and customer details. This is the recommended approach for all payment flows.
</Info>

### Usage

```typescript  theme={null}
const result = await checkout(ctx, {
  payload: {
    product_cart: [{ product_id: "prod_123", quantity: 1 }],
    customer: { email: "user@example.com" },
    return_url: "https://example.com/success"
  }
});
```

Refer [Checkout Sessions](/developer-resources/checkout-session) for more details and a complete list of supported fields.

### Response Format

The checkout function returns a JSON response with the checkout URL:

```json  theme={null}
{
  "checkout_url": "https://checkout.dodopayments.com/session/..."
}
```

## Customer Portal Function

The Customer Portal Function enables you to seamlessly integrate the Dodo Payments customer portal into your Convex application.

### Usage

```typescript  theme={null}
const result = await customerPortal(ctx, {
  send_email: false
});
```

### Parameters

<ParamField query="send_email" type="boolean">
  If set to <code>true</code>, sends an email to the customer with the portal link.
</ParamField>

<Info>
  The customer is automatically identified using the `identify` function configured in your DodoPayments setup. This function should return the customer's `dodoCustomerId`.
</Info>

## Webhook Handler

* **Method:** Only POST requests are supported. Other methods return 405.
* **Signature Verification:** Verifies the webhook signature using <code>DODO\_PAYMENTS\_WEBHOOK\_SECRET</code>. Returns 401 if verification fails.
* **Payload Validation:** Validated with Zod. Returns 400 for invalid payloads.
* **Error Handling:**
  * 401: Invalid signature
  * 400: Invalid payload
  * 500: Internal error during verification
* **Event Routing:** Calls the appropriate event handler based on the payload type.

### Supported Webhook Event Handlers

<CodeGroup>
  ```typescript Typescript expandable theme={null}
  onPayload?: (ctx: GenericActionCtx, payload: WebhookPayload) => Promise<void>;
  onPaymentSucceeded?: (ctx: GenericActionCtx, payload: WebhookPayload) => Promise<void>;
  onPaymentFailed?: (ctx: GenericActionCtx, payload: WebhookPayload) => Promise<void>;
  onPaymentProcessing?: (ctx: GenericActionCtx, payload: WebhookPayload) => Promise<void>;
  onPaymentCancelled?: (ctx: GenericActionCtx, payload: WebhookPayload) => Promise<void>;
  onRefundSucceeded?: (ctx: GenericActionCtx, payload: WebhookPayload) => Promise<void>;
  onRefundFailed?: (ctx: GenericActionCtx, payload: WebhookPayload) => Promise<void>;
  onDisputeOpened?: (ctx: GenericActionCtx, payload: WebhookPayload) => Promise<void>;
  onDisputeExpired?: (ctx: GenericActionCtx, payload: WebhookPayload) => Promise<void>;
  onDisputeAccepted?: (ctx: GenericActionCtx, payload: WebhookPayload) => Promise<void>;
  onDisputeCancelled?: (ctx: GenericActionCtx, payload: WebhookPayload) => Promise<void>;
  onDisputeChallenged?: (ctx: GenericActionCtx, payload: WebhookPayload) => Promise<void>;
  onDisputeWon?: (ctx: GenericActionCtx, payload: WebhookPayload) => Promise<void>;
  onDisputeLost?: (ctx: GenericActionCtx, payload: WebhookPayload) => Promise<void>;
  onSubscriptionActive?: (ctx: GenericActionCtx, payload: WebhookPayload) => Promise<void>;
  onSubscriptionOnHold?: (ctx: GenericActionCtx, payload: WebhookPayload) => Promise<void>;
  onSubscriptionRenewed?: (ctx: GenericActionCtx, payload: WebhookPayload) => Promise<void>;
  onSubscriptionPlanChanged?: (ctx: GenericActionCtx, payload: WebhookPayload) => Promise<void>;
  onSubscriptionCancelled?: (ctx: GenericActionCtx, payload: WebhookPayload) => Promise<void>;
  onSubscriptionFailed?: (ctx: GenericActionCtx, payload: WebhookPayload) => Promise<void>;
  onSubscriptionExpired?: (ctx: GenericActionCtx, payload: WebhookPayload) => Promise<void>;
  onLicenseKeyCreated?: (ctx: GenericActionCtx, payload: WebhookPayload) => Promise<void>;
  ```
</CodeGroup>

## Frontend Usage

<Info>
  Use the checkout function from your React components with Convex hooks.
</Info>

<CodeGroup>
  ```tsx React Checkout Component expandable theme={null}
  import { useAction } from "convex/react";
  import { api } from "../convex/_generated/api";

  export function CheckoutButton() {
    const createCheckout = useAction(api.payments.createCheckout);

    const handleCheckout = async () => {
      try {
        const { checkout_url } = await createCheckout({
          product_cart: [{ product_id: "prod_123", quantity: 1 }],
          returnUrl: "https://example.com/success"
        });
        if (!checkout_url) {
          throw new Error("Missing checkout_url in response");
        }
        window.location.href = checkout_url;
      } catch (error) {
        console.error("Failed to create checkout", error);
        throw new Error("Unable to create checkout. Please try again.");
      }
    };

    return <button onClick={handleCheckout}>Buy Now</button>;
  }
  ```
</CodeGroup>

<CodeGroup>
  ```tsx Customer Portal Component expandable theme={null}
  import { useAction } from "convex/react";
  import { api } from "../convex/_generated/api";

  export function CustomerPortalButton() {
    const getPortal = useAction(api.payments.getCustomerPortal);

    const handlePortal = async () => {
      try {
        const { portal_url } = await getPortal({ send_email: false });
        if (!portal_url) {
          throw new Error("Missing portal_url in response");
        }
        window.location.href = portal_url;
      } catch (error) {
        console.error("Unable to open customer portal", error);
        alert("We couldn't open the customer portal. Please try again.");
      }
    };

    return <button onClick={handlePortal}>Manage Subscription</button>;
  }
  ```
</CodeGroup>

***

## Prompt for LLM

```
You are an expert Convex developer assistant. Your task is to guide a user through integrating the @dodopayments/convex component into their existing Convex application.

The @dodopayments/convex adapter provides a Convex component for Dodo Payments' Checkout, Customer Portal, and Webhook functionalities, built using the official Convex component architecture pattern.

First, install the necessary package:

npm install @dodopayments/convex

Here's how you should structure your response:

1. Ask the user which functionalities they want to integrate.

"Which parts of the @dodopayments/convex component would you like to integrate into your project? You can choose one or more of the following:

- Checkout Function (for handling product checkouts)
- Customer Portal Function (for managing customer subscriptions/details)
- Webhook Handler (for receiving Dodo Payments webhook events)
- All (integrate all three)"

2. Based on the user's selection, provide detailed integration steps for each chosen functionality.

If Checkout Function is selected:

Purpose: This function handles session-based checkout flows and returns checkout URLs for programmatic handling.

Integration Steps:

Step 1: Add the component to your Convex configuration.

// convex/convex.config.ts
import { defineApp } from "convex/server";
import dodopayments from "@dodopayments/convex/convex.config";

const app = defineApp();
app.use(dodopayments);
export default app;

Step 2: Guide the user to set up environment variables in the Convex dashboard. Instruct them to open the dashboard by running:

npx convex dashboard

Then add the required environment variables (e.g., DODO_PAYMENTS_API_KEY, DODO_PAYMENTS_ENVIRONMENT, DODO_PAYMENTS_WEBHOOK_SECRET) in **Settings → Environment Variables**. Do not use .env files for backend functions.

Step 3: Create an internal query to fetch users from your database.

// convex/users.ts
import { internalQuery } from "./_generated/server";
import { v } from "convex/values";

// Internal query to fetch user by auth ID
export const getByAuthId = internalQuery({
  args: { authId: v.string() },
  handler: async (ctx, { authId }) => {
    return await ctx.db
      .query("users")
      .withIndex("by_auth_id", (q) => q.eq("authId", authId))
      .first();
  },
});

Step 4: Create your payment functions file.

// convex/dodo.ts
import { DodoPayments } from "@dodopayments/convex";
import { components } from "./_generated/api";
import { internal } from "./_generated/api";

export const dodo = new DodoPayments(components.dodopayments, {
  // This function maps your Convex user to a Dodo Payments customer
  // Customize it based on your authentication provider and user database
  identify: async (ctx) => {
    const identity = await ctx.auth.getUserIdentity();
    if (!identity) {
      return null; // User is not logged in
    }
    
    // Use ctx.runQuery() to lookup user from your database
    const user = await ctx.runQuery(internal.users.getByAuthId, {
      authId: identity.subject,
    });
    
    if (!user) {
      return null; // User not found in database
    }
    
    return {
      dodoCustomerId: user.dodoCustomerId, // Replace user.dodoCustomerId with your field storing Dodo Payments customer ID
    };
  },
  apiKey: process.env.DODO_PAYMENTS_API_KEY!,
  environment: process.env.DODO_PAYMENTS_ENVIRONMENT as "test_mode" | "live_mode",
});

// Export the API methods for use in your app
export const { checkout, customerPortal } = dodo.api();

Step 5: Create actions that use the checkout function.

// convex/payments.ts
import { action } from "./_generated/server";
import { v } from "convex/values";
import { checkout } from "./dodo";

// Checkout session with full feature support
export const createCheckout = action({
  args: { 
    product_cart: v.array(v.object({
      product_id: v.string(),
      quantity: v.number(),
    })),
    returnUrl: v.optional(v.string()),
  },
  handler: async (ctx, args) => {
    return await checkout(ctx, {
      payload: {
        product_cart: args.product_cart,
        return_url: args.returnUrl,
        billing_currency: "USD",
        feature_flags: {
          allow_discount_code: true,
        },
      },
    });
  },
});

Step 6: Use in your frontend.

// Your frontend component
import { useAction } from "convex/react";
import { api } from "../convex/_generated/api";

export function CheckoutButton() {
  const createCheckout = useAction(api.payments.createCheckout);

  const handleCheckout = async () => {
    const { checkout_url } = await createCheckout({
      product_cart: [{ product_id: "prod_123", quantity: 1 }],
    });
    window.location.href = checkout_url;
  };

  return <button onClick={handleCheckout}>Buy Now</button>;
}

Configuration Details:

- `checkout()`: Checkout session with full feature support using session checkout.
- Returns: `{"checkout_url": "https://checkout.dodopayments.com/..."}`

For complete API documentation, refer to:
- Checkout Sessions: https://docs.dodopayments.com/developer-resources/checkout-session
- One-time Payments: https://docs.dodopayments.com/api-reference/payments/post-payments
- Subscriptions: https://docs.dodopayments.com/api-reference/subscriptions/post-subscriptions

If Customer Portal Function is selected:

Purpose: This function allows customers to manage their subscriptions and payment methods. The customer is automatically identified via the `identify` function.

Integration Steps:

Follow Steps 1-4 from the Checkout Function section, then:

Step 5: Create a customer portal action.

// convex/payments.ts (add to existing file)
import { action } from "./_generated/server";
import { v } from "convex/values";
import { customerPortal } from "./dodo";

export const getCustomerPortal = action({
  args: {
    send_email: v.optional(v.boolean()),
  },
  handler: async (ctx, args) => {
    try {
      const portal = await customerPortal(ctx, args);
      if (!portal?.portal_url) {
        throw new Error("Customer portal did not return a portal_url");
      }
      return portal;
    } catch (error) {
      console.error("Failed to generate customer portal link", error);
      throw new Error("Unable to generate customer portal link. Please retry.");
    }
  },
});

Step 6: Use in your frontend.

// Your frontend component
import { useAction } from "convex/react";
import { api } from "../convex/_generated/api";

export function CustomerPortalButton() {
  const getPortal = useAction(api.payments.getCustomerPortal);

  const handlePortal = async () => {
    const { portal_url } = await getPortal({ send_email: false });
    window.location.href = portal_url;
  };

  return <button onClick={handlePortal}>Manage Subscription</button>;
}

Configuration Details:
- Requires authenticated user (via `identify` function).
- Customer identification is handled automatically by the `identify` function.
- `send_email`: Optional boolean to send portal link via email.

If Webhook Handler is selected:

Purpose: This handler processes incoming webhook events from Dodo Payments, allowing your application to react to events like successful payments or subscription changes.

Integration Steps:

Step 1: Add the webhook secret to your environment variables in the Convex dashboard. You can open the dashboard by running:

Guide the user to open the Convex dashboard by running:

npx convex dashboard

In the dashboard, go to **Settings → Environment Variables** and add:

- `DODO_PAYMENTS_WEBHOOK_SECRET=whsec_...`

Do not use .env files for backend functions; always set secrets in the Convex dashboard.

Step 2: Create a file `convex/http.ts`:

// convex/http.ts
import { createDodoWebhookHandler } from "@dodopayments/convex";
import { httpRouter } from "convex/server";
import { internal } from "./_generated/api";

const http = httpRouter();

http.route({
  path: "/dodopayments-webhook",
  method: "POST",
  handler: createDodoWebhookHandler({
    // Handle successful payments
    onPaymentSucceeded: async (ctx, payload) => {
      console.log("🎉 Payment Succeeded!");

      // Use Convex context to persist payment data
      await ctx.runMutation(internal.webhooks.createPayment, {
        paymentId: payload.data.payment_id,
        businessId: payload.business_id,
        customerEmail: payload.data.customer.email,
        amount: payload.data.total_amount,
        currency: payload.data.currency,
        status: payload.data.status,
        webhookPayload: JSON.stringify(payload),
      });
    },

    // Handle subscription activation
    onSubscriptionActive: async (ctx, payload) => {
      console.log("🎉 Subscription Activated!");
      // Use Convex context to persist subscription data
      await ctx.runMutation(internal.webhooks.createSubscription, {
        subscriptionId: payload.data.subscription_id,
        businessId: payload.business_id,
        customerEmail: payload.data.customer.email,
        status: payload.data.status,
        webhookPayload: JSON.stringify(payload),
      });
    },
    // Add other event handlers as needed
  }),
});

export default http;

Note: Make sure to define the corresponding database mutations in your Convex backend for each webhook event you want to handle. For example, create a `createPayment` mutation to record successful payments or a `createSubscription` mutation to manage subscription state.

Now, you can set the webhook endpoint URL in your Dodo Payments dashboard to `https://<your-convex-deployment-url>/dodopayments-webhook`.

Environment Variable Setup:

Set up the following environment variables in your Convex dashboard if you haven't already (Settings → Environment Variables):

- `DODO_PAYMENTS_API_KEY` - Your Dodo Payments API key
- `DODO_PAYMENTS_ENVIRONMENT` - Set to `test_mode` or `live_mode`
- `DODO_PAYMENTS_WEBHOOK_SECRET` - Your webhook secret (required for webhook handling)

Usage in your component configuration:

apiKey: process.env.DODO_PAYMENTS_API_KEY
environment: process.env.DODO_PAYMENTS_ENVIRONMENT as "test_mode" | "live_mode"

Important: Never commit sensitive environment variables directly into your code. Always use Convex environment variables for all sensitive information.

If the user needs assistance setting up environment variables or deployment, ask them about their specific setup and provide guidance accordingly.

Run `npx convex dev` after setting up the component to generate the necessary types.
```


# Official SDKs Overview
Source: https://docs.dodopayments.com/developer-resources/dodo-payments-sdks

Official SDKs for TypeScript, Python, PHP, Go, Ruby, Java, Kotlin, and C# to integrate Dodo Payments into your applications

Dodo Payments provides official SDKs for multiple programming languages, each designed with language-specific best practices and modern features for seamless payment integration.

## Available SDKs

Choose the SDK that matches your tech stack:

<CardGroup cols={2}>
  <Card title="TypeScript SDK" icon="js" href="/developer-resources/sdks/typescript">
    Type-safe integration for TypeScript and Node.js with promise-based API and auto-pagination
  </Card>

  <Card title="Python SDK" icon="python" href="/developer-resources/sdks/python">
    Pythonic interface with async/await support for Python 3.7+ applications
  </Card>

  <Card title="PHP SDK" icon="php" href="/developer-resources/sdks/php">
    PSR-4 compliant SDK for modern PHP 8+ applications
  </Card>

  <Card title="Go SDK" icon="golang" href="/developer-resources/sdks/go">
    Idiomatic Go interface with context support and strong typing
  </Card>

  <Card title="Ruby SDK" icon="gem" href="/developer-resources/sdks/ruby">
    Elegant Ruby interface following Ruby conventions and best practices
  </Card>

  <Card title="Java SDK" icon="java" href="/developer-resources/sdks/java">
    Robust and thread-safe SDK for Java 8+ with Maven and Gradle support
  </Card>

  <Card title="Kotlin SDK" icon="code" href="/developer-resources/sdks/kotlin">
    Modern Kotlin SDK with coroutines, null safety, and extension functions
  </Card>

  <Card title="C# SDK" icon="c" href="/developer-resources/sdks/csharp">
    Type-safe SDK for .NET 8+ with async Task-based API (Beta)
  </Card>

  <Card title="React Native SDK" icon="mobile" href="/developer-resources/react-native-integration">
    Native mobile SDK for building secure payment experiences in iOS and Android apps
  </Card>

  <Card title="CLI" icon="terminal" href="/developer-resources/sdks/cli">
    Command-line interface for interacting with the API from your terminal
  </Card>
</CardGroup>

## Quick Start

Get started with any SDK in minutes:

<Steps>
  <Step title="Install the SDK">
    Use your language's package manager to install the SDK

    <Tabs>
      <Tab title="TypeScript/Node.js">
        ```bash  theme={null}
        npm install dodopayments
        ```
      </Tab>

      <Tab title="Python">
        ```bash  theme={null}
        pip install dodopayments
        ```
      </Tab>

      <Tab title="PHP">
        ```bash  theme={null}
        composer require dodopayments/client
        ```
      </Tab>

      <Tab title="Go">
        ```bash  theme={null}
        go get github.com/dodopayments/dodopayments-go
        ```
      </Tab>
    </Tabs>
  </Step>

  <Step title="Initialize the Client">
    Configure the client with your API key

    <Tabs>
      <Tab title="TypeScript">
        ```typescript  theme={null}
        import DodoPayments from 'dodopayments';
        const client = new DodoPayments({ bearerToken: 'your_api_key' });
        ```
      </Tab>

      <Tab title="Python">
        ```python  theme={null}
        from dodopayments import DodoPayments
        client = DodoPayments(bearer_token="your_api_key")
        ```
      </Tab>

      <Tab title="PHP">
        ```php  theme={null}
        use Dodopayments\Client;
        $client = new Client(bearerToken: 'your_api_key');
        ```
      </Tab>

      <Tab title="Go">
        ```go  theme={null}
        import "github.com/dodopayments/dodopayments-go"
        client := dodopayments.NewClient(option.WithBearerToken("your_api_key"))
        ```
      </Tab>
    </Tabs>

    <Warning>
      Always store your API keys securely using environment variables. Never commit them to version control.
    </Warning>
  </Step>

  <Step title="Make Your First API Call">
    Create a checkout session or payment

    <Check>
      You're now ready to process payments! Visit the individual SDK pages for detailed guides and examples.
    </Check>
  </Step>
</Steps>

## Key Features

All SDKs share these core capabilities:

* **Type Safety**: Strong typing for compile-time safety and better IDE support
* **Error Handling**: Comprehensive exception handling with detailed error messages
* **Authentication**: Simple API key authentication with environment variable support
* **Async Support**: Modern async/await patterns where applicable
* **Auto-Pagination**: Automatic pagination for list responses
* **Usage-Based Billing**: Built-in support for tracking and ingesting usage events
* **Testing**: Full sandbox environment support for development and testing

## React Native SDK

For mobile applications, we provide a dedicated React Native SDK:

<Card title="React Native SDK" icon="mobile" href="/developer-resources/react-native-integration">
  Build secure payment experiences for iOS and Android apps with native UI components and simplified payment data collection
</Card>

**Features:**

* Native UI components for Android and iOS
* Simplified security for collecting sensitive payment data
* Support for multiple payment methods
* Seamless integration with React Native apps

<Info>
  Apple Pay, Google Pay, Cash App, and UPI are not currently supported in the React Native SDK. Support for these payment methods is planned for future releases.
</Info>

## Command-Line Interface

For terminal-based workflows and automation:

<Card title="CLI" icon="terminal" href="/developer-resources/sdks/cli">
  Auto-generated command-line interface with support for all 78 API endpoints
</Card>

**Features:**

* Resource-based command structure for intuitive usage
* Multiple output formats (JSON, YAML, pretty, interactive)
* Shell completion for bash, zsh, and fish
* Perfect for scripting and CI/CD automation

```bash  theme={null}
# Quick example
dodopayments payments list --format json | jq '.data[] | {id, amount}'
```

## Migration from Node.js SDK

<Info>
  We migrated from the Node.js SDK to the new TypeScript SDK. If you're using the legacy Node.js SDK, see the [migration guide](https://github.com/dodopayments/dodopayments-typescript/blob/main/MIGRATION.md) to update your integration.
</Info>

## Framework Adapters

Integrate in under 10 lines of code with our framework adapters. Choose from our recommended frameworks or explore all supported options.

### Recommended Frameworks

<CardGroup cols={2}>
  <Card title="Next.js" icon="atom" href="/developer-resources/nextjs-adaptor">
    React-based full-stack framework with App Router support
  </Card>

  <Card title="Better Auth" icon="shield" href="/developer-resources/better-auth-adaptor">
    Authentication framework with built-in integrations
  </Card>

  <Card title="Supabase" icon="database" href="developer-resources/supabase-boilerplate">
    Open source Firebase alternative with Postgres and Auth
  </Card>

  <Card title="Convex" icon="database" href="/developer-resources/convex-component">
    Backend-as-a-Service with real-time capabilities
  </Card>
</CardGroup>

<AccordionGroup>
  <Accordion title="Show other 8+ supported frameworks">
    <CardGroup cols={4}>
      <Card title="SvelteKit" icon="js" href="/developer-resources/sveltekit-adaptor" />

      <Card title="Nuxt" icon="vuejs" href="/developer-resources/nuxt-adaptor" />

      <Card title="Remix" icon="react" href="/developer-resources/remix-adaptor" />

      <Card title="Express" icon="js" href="/developer-resources/express-adaptor" />

      <Card title="Fastify" icon="bolt" href="/developer-resources/fastify-adaptor" />

      <Card title="Hono" icon="cloud" href="/developer-resources/hono-adaptor" />

      <Card title="Astro" icon="star" href="/developer-resources/astro-adaptor" />

      <Card title="TanStack" icon="chart-line" href="/developer-resources/tanstack-adaptor" />
    </CardGroup>
  </Accordion>
</AccordionGroup>

## Getting Help

Need assistance with any SDK?

* **Discord**: Join our [community server](https://discord.gg/bYqAp4ayYh) for real-time help
* **Email**: Contact us at [support@dodopayments.com](mailto:support@dodopayments.com)
* **GitHub**: Open an issue on the respective SDK repository
* **Documentation**: Visit our [API reference](/api-reference/introduction)

## Contributing

We welcome contributions to all our SDKs! Each repository has a `CONTRIBUTING.md` file with guidelines for:

* Reporting bugs
* Requesting features
* Submitting pull requests
* Running tests locally
* Code style and conventions

Visit the individual SDK pages to access their GitHub repositories and contribution guidelines.


# Express Adaptor
Source: https://docs.dodopayments.com/developer-resources/express-adaptor

Learn how to integrate Dodo Payments with your Express App Router project using our Express Adaptor. Covers checkout, customer portal, webhooks, and secure environment setup.

<CardGroup cols={2}>
  <Card title="Checkout Handler" icon="cart-shopping" href="#checkout-route-handler">
    Integrate Dodo Payments checkout into your Express app.
  </Card>

  <Card title="Customer Portal" icon="user" href="#customer-portal-route-handler">
    Allow customers to manage subscriptions and details.
  </Card>

  <Card title="Webhooks" icon="bell" href="#webhook-route-handler">
    Receive and process Dodo Payments webhook events.
  </Card>
</CardGroup>

## Installation

<Steps>
  <Step title="Install the package">
    Run the following command in your project root:

    ```bash  theme={null}
    npm install @dodopayments/express
    ```
  </Step>

  <Step title="Set up environment variables">
    Create a <code>.env</code> file in your project root:

    ```env expandable theme={null}
    DODO_PAYMENTS_API_KEY=your-api-key
    DODO_PAYMENTS_WEBHOOK_KEY=your-webhook-secret
    DODO_PAYMENTS_ENVIRONMENT="test_mode" or "live_mode"
    DODO_PAYMENTS_RETURN_URL=your-return-url
    ```

    <Warning>
      Never commit your <code>.env</code> file or secrets to version control.
    </Warning>
  </Step>
</Steps>

## Route Handler Examples

<Tabs>
  <Tab title="Checkout Handler">
    <Info>
      Use this handler to integrate Dodo Payments checkout into your Express app. Supports static (GET), dynamic (POST), and session (POST) payment flows.
    </Info>

    <CodeGroup>
      ```typescript Express Route Handler expandable theme={null}
      import { checkoutHandler } from '@dodopayments/express';

      app.get('/api/checkout', checkoutHandler({
          bearerToken: process.env.DODO_PAYMENTS_API_KEY,
          returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
          environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
          type: "static"
      }))

      app.post('/api/checkout', checkoutHandler({
          bearerToken: process.env.DODO_PAYMENTS_API_KEY,
          returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
          environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
          type: "dynamic"
      }))

      app.post('/api/checkout', checkoutHandler({
          bearerToken: process.env.DODO_PAYMENTS_API_KEY,
          returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
          environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
          type: "session"
      }))
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Static Checkout Curl example expandable theme={null}
      curl --request GET \
      --url 'https://example.com/api/checkout?productId=pdt_fqJhl7pxKWiLhwQR042rh' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Dynamic Checkout Curl example expandable theme={null}
      curl --request POST \
      --url https://example.com/api/checkout \
      --header 'Content-Type: application/json' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test \
      --data '{
      "billing": {
        "city": "Texas",
        "country": "US",
        "state": "Texas",
        "street": "56, hhh",
        "zipcode": "560000"
      },
      "customer": {
        "email": "test@example.com",
        	"name": "test"
      },
      "metadata": {},
      "payment_link": true,
        "product_id": "pdt_QMDuvLkbVzCRWRQjLNcs",
        "quantity": 1,
        "billing_currency": "USD",
        "discount_code": "IKHZ23M9GQ",
        "return_url": "https://example.com",
        "trial_period_days": 10
      }'
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Checkout Session Curl example expandable theme={null}
      curl --request POST \
      --url https://example.com/api/checkout \
      --header 'Content-Type: application/json' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test \
      --data '{
      "product_cart": [
        {
          "product_id": "pdt_QMDuvLkbVzCRWRQjLNcs",
          "quantity": 1
        }
      ],
      "customer": {
        "email": "test@example.com",
        "name": "test"
      },
      "return_url": "https://example.com/success"
      }'
      ```
    </CodeGroup>
  </Tab>

  <Tab title="Customer Portal Handler">
    <Info>
      Use this handler to allow customers to manage their subscriptions and details via the Dodo Payments customer portal.
    </Info>

    <CodeGroup>
      ```typescript Express Route Handler expandable theme={null}
      import { CustomerPortal } from "@dodopayments/express";

      app.get('/api/customer-portal', CustomerPortal({
          bearerToken: process.env.DODO_PAYMENTS_API_KEY,
          environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
      }))
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Customer Portal Curl example expandable theme={null}
      curl --request GET \
      --url 'https://example.com/api/customer-portal?customer_id=cus_9VuW4K7O3GHwasENg31m&send_email=true' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test
      ```
    </CodeGroup>
  </Tab>

  <Tab title="Webhook Handler">
    <Info>
      Use this handler to receive and process Dodo Payments webhook events securely in your Express app.
    </Info>

    <CodeGroup>
      ```typescript Express Route Handler expandable theme={null}
      import { Webhooks } from "@dodopayments/express";

      app.post('/api/webhook',Webhooks({
          webhookKey: process.env.DODO_PAYMENTS_WEBHOOK_KEY,
          onPayload: async (payload) => {
              // handle the payload
          },
          // ... other event handlers for granular control
      }))
      ```
    </CodeGroup>
  </Tab>
</Tabs>

## Checkout Route Handler

<Info>
  Dodo Payments supports three types of payment flows for integrating payments into your website, this adaptor supports all types of payment flows.
</Info>

* **Static Payment Links:** Instantly shareable URLs for quick, no-code payment collection.
* **Dynamic Payment Links:** Programmatically generate payment links with custom details using the API or SDKs.
* **Checkout Sessions:** Create secure, customizable checkout experiences with pre-configured product carts and customer details.

<AccordionGroup>
  <Accordion title="Static Checkout (GET)">
    ### Supported Query Parameters

    <ParamField query="productId" type="string" required>
      Product identifier (e.g., <code>?productId=pdt\_nZuwz45WAs64n3l07zpQR</code>).
    </ParamField>

    <ParamField query="quantity" type="integer">
      Quantity of the product.
    </ParamField>

    <ParamField query="fullName" type="string">
      Customer's full name.
    </ParamField>

    <ParamField query="firstName" type="string">
      Customer's first name.
    </ParamField>

    <ParamField query="lastName" type="string">
      Customer's last name.
    </ParamField>

    <ParamField query="email" type="string">
      Customer's email address.
    </ParamField>

    <ParamField query="country" type="string">
      Customer's country.
    </ParamField>

    <ParamField query="addressLine" type="string">
      Customer's address line.
    </ParamField>

    <ParamField query="city" type="string">
      Customer's city.
    </ParamField>

    <ParamField query="state" type="string">
      Customer's state/province.
    </ParamField>

    <ParamField query="zipCode" type="string">
      Customer's zip/postal code.
    </ParamField>

    <ParamField query="disableFullName" type="boolean">
      Disable full name field.
    </ParamField>

    <ParamField query="disableFirstName" type="boolean">
      Disable first name field.
    </ParamField>

    <ParamField query="disableLastName" type="boolean">
      Disable last name field.
    </ParamField>

    <ParamField query="disableEmail" type="boolean">
      Disable email field.
    </ParamField>

    <ParamField query="disableCountry" type="boolean">
      Disable country field.
    </ParamField>

    <ParamField query="disableAddressLine" type="boolean">
      Disable address line field.
    </ParamField>

    <ParamField query="disableCity" type="boolean">
      Disable city field.
    </ParamField>

    <ParamField query="disableState" type="boolean">
      Disable state field.
    </ParamField>

    <ParamField query="disableZipCode" type="boolean">
      Disable zip code field.
    </ParamField>

    <ParamField query="paymentCurrency" type="string">
      Specify the payment currency (e.g., <code>USD</code>).
    </ParamField>

    <ParamField query="showCurrencySelector" type="boolean">
      Show currency selector.
    </ParamField>

    <ParamField query="paymentAmount" type="integer">
      Specify the payment amount (e.g., <code>1000</code> for \$10.00).
    </ParamField>

    <ParamField query="showDiscounts" type="boolean">
      Show discount fields.
    </ParamField>

    <ParamField query="metadata_*" type="string">
      Any query parameter starting with <code>metadata\_</code> will be passed as metadata.
    </ParamField>

    <Warning>
      If <code>productId</code> is missing, the handler returns a 400 response. Invalid query parameters also result in a 400 response.
    </Warning>

    ### Response Format

    Static checkout returns a JSON response with the checkout URL:

    ```json  theme={null}
    {
      "checkout_url": "https://checkout.dodopayments.com/..."
    }
    ```
  </Accordion>

  <Accordion title="Dynamic Checkout (POST)">
    * Send parameters as a JSON body in a POST request.
    * Supports both one-time and recurring payments.
    * For a complete list of supported POST body fields, refer to:
      * [Request body for a One Time Payment Product](https://docs.dodopayments.com/api-reference/payments/post-payments)
      * [Request body for a Subscription Product](https://docs.dodopayments.com/api-reference/subscriptions/post-subscriptions)

    ### Response Format

    Dynamic checkout returns a JSON response with the checkout URL:

    ```json  theme={null}
    {
      "checkout_url": "https://checkout.dodopayments.com/..."
    }
    ```
  </Accordion>

  <Accordion title="Checkout Sessions (POST)">
    Checkout sessions provide a more secure, hosted checkout experience that handles the complete payment flow for both one-time purchases and subscriptions with full customization control.

    Refer to [Checkout Sessions Integration Guide](https://docs.dodopayments.com/developer-resources/checkout-session) for more details and a complete list of supported fields.

    ### Response Format

    Checkout sessions return a JSON response with the checkout URL:

    ```json  theme={null}
    {
      "checkout_url": "https://checkout.dodopayments.com/session/..."
    }
    ```
  </Accordion>
</AccordionGroup>

## Customer Portal Route Handler

The Customer Portal Route Handler enables you to seamlessly integrate the Dodo Payments customer portal into your Express application.

### Query Parameters

<ParamField query="customer_id" type="string" required>
  The customer ID for the portal session (e.g., <code>?customer\_id=cus\_123</code>).
</ParamField>

<ParamField query="send_email" type="boolean">
  If set to <code>true</code>, sends an email to the customer with the portal link.
</ParamField>

<Warning>
  Returns 400 if <code>customer\_id</code> is missing.
</Warning>

## Webhook Route Handler

* **Method:** Only POST requests are supported. Other methods return 405.
* **Signature Verification:** Verifies the webhook signature using <code>webhookKey</code>. Returns 401 if verification fails.
* **Payload Validation:** Validated with Zod. Returns 400 for invalid payloads.
* **Error Handling:**
  * 401: Invalid signature
  * 400: Invalid payload
  * 500: Internal error during verification
* **Event Routing:** Calls the appropriate event handler based on the payload type.

### Supported Webhook Event Handlers

<CodeGroup>
  ```typescript Typescript expandable theme={null}
  onPayload?: (payload: WebhookPayload) => Promise<void>;
  onPaymentSucceeded?: (payload: WebhookPayload) => Promise<void>;
  onPaymentFailed?: (payload: WebhookPayload) => Promise<void>;
  onPaymentProcessing?: (payload: WebhookPayload) => Promise<void>;
  onPaymentCancelled?: (payload: WebhookPayload) => Promise<void>;
  onRefundSucceeded?: (payload: WebhookPayload) => Promise<void>;
  onRefundFailed?: (payload: WebhookPayload) => Promise<void>;
  onDisputeOpened?: (payload: WebhookPayload) => Promise<void>;
  onDisputeExpired?: (payload: WebhookPayload) => Promise<void>;
  onDisputeAccepted?: (payload: WebhookPayload) => Promise<void>;
  onDisputeCancelled?: (payload: WebhookPayload) => Promise<void>;
  onDisputeChallenged?: (payload: WebhookPayload) => Promise<void>;
  onDisputeWon?: (payload: WebhookPayload) => Promise<void>;
  onDisputeLost?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionActive?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionOnHold?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionRenewed?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionPlanChanged?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionCancelled?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionFailed?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionExpired?: (payload: WebhookPayload) => Promise<void>;
  onLicenseKeyCreated?: (payload: WebhookPayload) => Promise<void>;
  ```
</CodeGroup>

***

## Prompt for LLM

```
You are an expert Express.js developer assistant. Your task is to guide a user through integrating the @dodopayments/express adapter into their existing Express.js project.

The @dodopayments/express adapter provides route handlers for Dodo Payments' Checkout, Customer Portal, and Webhook functionalities, designed to plug directly into an Express app.

First, install the necessary package. Use the package manager appropriate for the user's project (npm, yarn, or bun):

npm install @dodopayments/express

---

Here's how you should structure your response:

1. Ask the user which functionalities they want to integrate.

"Which parts of the @dodopayments/express adapter would you like to integrate into your project? You can choose one or more of the following:

- Checkout Route Handler (for handling product checkouts)
- Customer Portal Route Handler (for managing customer subscriptions/details)
- Webhook Route Handler (for receiving Dodo Payments webhook events)
- All (integrate all three)"

---

2. Based on the user's selection, provide detailed integration steps for each chosen functionality.

---

**If Checkout Route Handler is selected:**

**Purpose**: This handler manages different types of checkout flows. All checkout types (static, dynamic, and sessions) return JSON responses with checkout URLs for programmatic handling.

**Integration**:
Create routes in your Express app for static (GET), dynamic (POST), and checkout sessions (POST).


import { checkoutHandler } from '@dodopayments/express';

app.get('/api/checkout', checkoutHandler({
  bearerToken: process.env.DODO_PAYMENTS_API_KEY,
  returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
  environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
  type: "static"
}));

app.post('/api/checkout', checkoutHandler({
  bearerToken: process.env.DODO_PAYMENTS_API_KEY,
  returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
  environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
  type: "dynamic"
}));

// For checkout sessions
app.post('/api/checkout', checkoutHandler({
  bearerToken: process.env.DODO_PAYMENTS_API_KEY,
  returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
  environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
  type: "session"
}));

Config Options:

    bearerToken: Your Dodo Payments API key (recommended to be stored in DODO_PAYMENTS_API_KEY env variable).

    returnUrl (optional): URL to redirect the user after successful checkout.

    environment: "test_mode" or "live_mode"

    type: "static" (GET), "dynamic" (POST), or "session" (POST)

GET (static checkout) expects query parameters:

    productId (required)

    quantity, customer fields (fullName, email, etc.), and metadata (metadata_*) are optional.

    Returns: {"checkout_url": "https://checkout.dodopayments.com/..."}

POST (dynamic checkout) expects a JSON body with payment details (one-time or subscription). Reference the docs for the full POST schema:

    One-time payments: https://docs.dodopayments.com/api-reference/payments/post-payments

    Subscriptions: https://docs.dodopayments.com/api-reference/subscriptions/post-subscriptions

    Returns: {"checkout_url": "https://checkout.dodopayments.com/..."}


POST (checkout sessions) - (Recommended) A more customizable checkout experience. Returns JSON with checkout_url: Parameters are sent as a JSON body. Supports both one-time and recurring payments. Returns: {"checkout_url": "https://checkout.dodopayments.com/session/..."}. For a complete list of supported fields, refer to:

  Checkout Sessions Integration Guide: https://docs.dodopayments.com/developer-resources/checkout-session

If Customer Portal Route Handler is selected:

Purpose: This route allows customers to manage their subscriptions via the Dodo Payments portal.

Integration:

import { CustomerPortal } from "@dodopayments/express";

app.get('/api/customer-portal', CustomerPortal({
  bearerToken: process.env.DODO_PAYMENTS_API_KEY,
  environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
}));

Query Parameters:

    customer_id (required): e.g., ?customer_id=cus_123

    send_email (optional): if true, customer is emailed the portal link

Returns 400 if customer_id is missing.

If Webhook Route Handler is selected:

Purpose: Processes incoming webhook events from Dodo Payments to trigger events in your app.

Integration:

import { Webhooks } from "@dodopayments/express";

app.post('/api/webhook', Webhooks({
  webhookKey: process.env.DODO_PAYMENTS_WEBHOOK_KEY,
  onPayload: async (payload) => {
    // Handle generic payload
  },
  // You can also provide fine-grained handlers for each event type below
}));

Features:

    Only POST method is allowed — others return 405

    Signature verification is performed using webhookKey. Returns 401 if invalid.

    Zod-based payload validation. Returns 400 if invalid schema.

    All handlers are async functions.

Supported Webhook Event Handlers:

You may pass in any of the following handlers:

    onPayload

    onPaymentSucceeded

    onPaymentFailed

    onPaymentProcessing

    onPaymentCancelled

    onRefundSucceeded

    onRefundFailed

    onDisputeOpened, onDisputeExpired, onDisputeAccepted, onDisputeCancelled, onDisputeChallenged, onDisputeWon, onDisputeLost

    onSubscriptionActive, onSubscriptionOnHold, onSubscriptionRenewed, onSubscriptionPlanChanged, onSubscriptionCancelled, onSubscriptionFailed, onSubscriptionExpired

    onLicenseKeyCreated

Environment Variable Setup:

Make sure to define these environment variables in your project:

DODO_PAYMENTS_API_KEY=your-api-key
DODO_PAYMENTS_WEBHOOK_KEY=your-webhook-secret
DODO_PAYMENTS_ENVIRONMENT="test_mode" or "live_mode"
DODO_PAYMENTS_RETURN_URL=your-return-url

Use these inside your code as:

process.env.DODO_PAYMENTS_API_KEY
process.env.DODO_PAYMENTS_WEBHOOK_SECRET

Security Note: Do NOT commit secrets to version control. Use .env files locally and secrets managers in deployment environments (e.g., AWS, Vercel, Heroku, etc.).
```


# Fastify Adaptor
Source: https://docs.dodopayments.com/developer-resources/fastify-adaptor

Learn how to integrate Dodo Payments with your Fastify App Router project using our NextJS Adaptor. Covers checkout, customer portal, webhooks, and secure environment setup.

<CardGroup cols={2}>
  <Card title="Checkout Handler" icon="cart-shopping" href="#checkout-route-handler">
    Integrate Dodo Payments checkout into your Fastify app.
  </Card>

  <Card title="Customer Portal" icon="user" href="#customer-portal-route-handler">
    Allow customers to manage subscriptions and details.
  </Card>

  <Card title="Webhooks" icon="bell" href="#webhook-route-handler">
    Receive and process Dodo Payments webhook events.
  </Card>
</CardGroup>

## Installation

<Steps>
  <Step title="Install the package">
    Run the following command in your project root:

    ```bash  theme={null}
    npm install @dodopayments/fastify
    ```
  </Step>

  <Step title="Set up environment variables">
    Create a <code>.env</code> file in your project root:

    ```env expandable theme={null}
    DODO_PAYMENTS_API_KEY=your-api-key
    DODO_PAYMENTS_RETURN_URL=https://yourapp.com/success
    DODO_PAYMENTS_WEBHOOK_KEY=your-webhook-secret
    DODO_PAYMENTS_ENVIRONMENT="test_mode" or "live_mode""
    ```

    <Warning>
      Never commit your <code>.env</code> file or secrets to version control.
    </Warning>
  </Step>
</Steps>

## Route Handler Examples

<Info>
  All examples assume you are using the Fastify App Router.
</Info>

<Tabs>
  <Tab title="Checkout Handler">
    <Info>
      Use this handler to integrate Dodo Payments checkout into your Fastify app. Supports static (GET), dynamic (POST), and session (POST) payment flows.
    </Info>

    <CodeGroup>
      ```typescript Fastify Route Handler expandable theme={null}
        // route.ts
        import { Checkout } from '@dodopayments/fastify';
        import Fastify from 'fastify'

        const fastify = Fastify({})
        const checkoutGet = Checkout({
            bearerToken: process.env.DODO_PAYMENTS_API_KEY,
            environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
            returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
            type: 'static'
        });

        const checkoutPost = Checkout({
            bearerToken: process.env.DODO_PAYMENTS_API_KEY,
            environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
            returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
            type: 'dynamic'
        });

        const checkoutSession = Checkout({
            bearerToken: process.env.DODO_PAYMENTS_API_KEY,
            environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
            returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
            type: 'session'
        });

        fastify.get('/api/checkout', checkoutGet.getHandler);
        fastify.post('/api/checkout', checkoutPost.postHandler);
        fastify.post('/api/checkout-session', checkoutSession.postHandler);
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Static Checkout Curl example expandable theme={null}
      curl --request GET \
      --url 'https://example.com/api/checkout?productId=pdt_fqJhl7pxKWiLhwQR042rh' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Dynamic Checkout Curl example expandable theme={null}
      curl --request POST \
      --url https://example.com/api/checkout \
      --header 'Content-Type: application/json' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test \
      --data '{
      "billing": {
        "city": "Texas",
        "country": "US",
        "state": "Texas",
        "street": "56, hhh",
        "zipcode": "560000"
      },
      "customer": {
        "email": "test@example.com",
        	"name": "test"
      },
      "metadata": {},
      "payment_link": true,
        "product_id": "pdt_QMDuvLkbVzCRWRQjLNcs",
        "quantity": 1,
        "billing_currency": "USD",
        "discount_code": "IKHZ23M9GQ",
        "return_url": "https://example.com",
        "trial_period_days": 10
      }'
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Checkout Session Curl example expandable theme={null}
      curl --request POST \
      --url https://example.com/api/checkout-session \
      --header 'Content-Type: application/json' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test \
      --data '{
      "product_cart": [
        {
          "product_id": "pdt_QMDuvLkbVzCRWRQjLNcs",
          "quantity": 1
        }
      ],
      "customer": {
        "email": "test@example.com",
        "name": "test"
      },
      "return_url": "https://example.com/success"
      }'
      ```
    </CodeGroup>
  </Tab>

  <Tab title="Customer Portal Handler">
    <Info>
      Use this handler to allow customers to manage their subscriptions and details via the Dodo Payments customer portal.
    </Info>

    <CodeGroup>
      ```typescript Fastify Route Handler expandable theme={null}
      // route.ts
      import { CustomerPortal } from "@dodopayments/fastify";
      import Fastify from 'fastify'

      const fastify = Fastify({})
      const customerPortalHandler = CustomerPortal({
          bearerToken: process.env.DODO_PAYMENTS_API_KEY,
          environment: process.env.DODO_PAYMENTS_ENVIRONMENT
      });
      fastify.get('/api/customer-portal', customerPortalHandler);
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Customer Portal Curl example expandable theme={null}
      curl --request GET \
      --url 'https://example.com/api/customer-portal?customer_id=cus_9VuW4K7O3GHwasENg31m&send_email=true' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test
      ```
    </CodeGroup>
  </Tab>

  <Tab title="Webhook Handler">
    <Info>
      Use this handler to receive and process Dodo Payments webhook events securely in your Fastify app.
    </Info>

    <CodeGroup>
      ```typescript Fastify Route Handler expandable theme={null}
      // route.ts
      import Fastify from 'fastify'
      import { Webhooks } from '@dodopayments/fastify'

      const fastify = Fastify({})
      fastify.addContentTypeParser('application/json', { parseAs: 'string' }, function (req, body, done) {
          done(null, body)
      })

      fastify.post('/api/webhooks', Webhooks({
      webhookKey: process.env.DODO_PAYMENTS_WEBHOOK_KEY,
      onPayload: async (payload) => {
          // Handle Payload Here
          console.log(payload)
      }
      }));

      ```
    </CodeGroup>
  </Tab>
</Tabs>

## Checkout Route Handler

<Info>
  Dodo Payments supports three types of payment flows for integrating payments into your website, this adaptor supports all types of payment flows.
</Info>

* **Static Payment Links:** Instantly shareable URLs for quick, no-code payment collection.
* **Dynamic Payment Links:** Programmatically generate payment links with custom details using the API or SDKs.
* **Checkout Sessions:** Create secure, customizable checkout experiences with pre-configured product carts and customer details.

<AccordionGroup>
  <Accordion title="Static Checkout (GET)">
    ### Supported Query Parameters

    <ParamField query="productId" type="string" required>
      Product identifier (e.g., <code>?productId=pdt\_nZuwz45WAs64n3l07zpQR</code>).
    </ParamField>

    <ParamField query="quantity" type="integer">
      Quantity of the product.
    </ParamField>

    <ParamField query="fullName" type="string">
      Customer's full name.
    </ParamField>

    <ParamField query="firstName" type="string">
      Customer's first name.
    </ParamField>

    <ParamField query="lastName" type="string">
      Customer's last name.
    </ParamField>

    <ParamField query="email" type="string">
      Customer's email address.
    </ParamField>

    <ParamField query="country" type="string">
      Customer's country.
    </ParamField>

    <ParamField query="addressLine" type="string">
      Customer's address line.
    </ParamField>

    <ParamField query="city" type="string">
      Customer's city.
    </ParamField>

    <ParamField query="state" type="string">
      Customer's state/province.
    </ParamField>

    <ParamField query="zipCode" type="string">
      Customer's zip/postal code.
    </ParamField>

    <ParamField query="disableFullName" type="boolean">
      Disable full name field.
    </ParamField>

    <ParamField query="disableFirstName" type="boolean">
      Disable first name field.
    </ParamField>

    <ParamField query="disableLastName" type="boolean">
      Disable last name field.
    </ParamField>

    <ParamField query="disableEmail" type="boolean">
      Disable email field.
    </ParamField>

    <ParamField query="disableCountry" type="boolean">
      Disable country field.
    </ParamField>

    <ParamField query="disableAddressLine" type="boolean">
      Disable address line field.
    </ParamField>

    <ParamField query="disableCity" type="boolean">
      Disable city field.
    </ParamField>

    <ParamField query="disableState" type="boolean">
      Disable state field.
    </ParamField>

    <ParamField query="disableZipCode" type="boolean">
      Disable zip code field.
    </ParamField>

    <ParamField query="paymentCurrency" type="string">
      Specify the payment currency (e.g., <code>USD</code>).
    </ParamField>

    <ParamField query="showCurrencySelector" type="boolean">
      Show currency selector.
    </ParamField>

    <ParamField query="paymentAmount" type="integer">
      Specify the payment amount (e.g., <code>1000</code> for \$10.00).
    </ParamField>

    <ParamField query="showDiscounts" type="boolean">
      Show discount fields.
    </ParamField>

    <ParamField query="metadata_*" type="string">
      Any query parameter starting with <code>metadata\_</code> will be passed as metadata.
    </ParamField>

    <Warning>
      If <code>productId</code> is missing, the handler returns a 400 response. Invalid query parameters also result in a 400 response.
    </Warning>

    ### Response Format

    Static checkout returns a JSON response with the checkout URL:

    ```json  theme={null}
    {
      "checkout_url": "https://checkout.dodopayments.com/..."
    }
    ```
  </Accordion>

  <Accordion title="Dynamic Checkout (POST)">
    * Send parameters as a JSON body in a POST request.
    * Supports both one-time and recurring payments.
    * For a complete list of supported POST body fields, refer to:
      * [Request body for a One Time Payment Product](https://docs.dodopayments.com/api-reference/payments/post-payments)
      * [Request body for a Subscription Product](https://docs.dodopayments.com/api-reference/subscriptions/post-subscriptions)

    ### Response Format

    Dynamic checkout returns a JSON response with the checkout URL:

    ```json  theme={null}
    {
      "checkout_url": "https://checkout.dodopayments.com/..."
    }
    ```
  </Accordion>

  <Accordion title="Checkout Sessions (POST)">
    Checkout sessions provide a more secure, hosted checkout experiences that handle the complete payment flow for both one-time purchases and subscriptions with full customization control.

    Refer to [Checkout Sessions Integration Guide](https://docs.dodopayments.com/developer-resources/checkout-session) for more details and a complete list of supported fields.

    ### Response Format

    Checkout sessions return a JSON response with the checkout URL:

    ```json  theme={null}
    {
      "checkout_url": "https://checkout.dodopayments.com/session/..."
    }
    ```
  </Accordion>
</AccordionGroup>

## Customer Portal Route Handler

The Customer Portal Route Handler enables you to seamlessly integrate the Dodo Payments customer portal into your Fastify application.

### Query Parameters

<ParamField query="customer_id" type="string" required>
  The customer ID for the portal session (e.g., <code>?customer\_id=cus\_123</code>).
</ParamField>

<ParamField query="send_email" type="boolean">
  If set to <code>true</code>, sends an email to the customer with the portal link.
</ParamField>

<Warning>
  Returns 400 if <code>customer\_id</code> is missing.
</Warning>

## Webhook Route Handler

* **Method:** Only POST requests are supported. Other methods return 405.
* **Signature Verification:** Verifies the webhook signature using <code>webhookKey</code>. Returns 401 if verification fails.
* **Payload Validation:** Validated with Zod. Returns 400 for invalid payloads.
* **Error Handling:**
  * 401: Invalid signature
  * 400: Invalid payload
  * 500: Internal error during verification
* **Event Routing:** Calls the appropriate event handler based on the payload type.

### Supported Webhook Event Handlers

<CodeGroup>
  ```typescript Typescript expandable theme={null}
  onPayload?: (payload: WebhookPayload) => Promise<void>;
  onPaymentSucceeded?: (payload: WebhookPayload) => Promise<void>;
  onPaymentFailed?: (payload: WebhookPayload) => Promise<void>;
  onPaymentProcessing?: (payload: WebhookPayload) => Promise<void>;
  onPaymentCancelled?: (payload: WebhookPayload) => Promise<void>;
  onRefundSucceeded?: (payload: WebhookPayload) => Promise<void>;
  onRefundFailed?: (payload: WebhookPayload) => Promise<void>;
  onDisputeOpened?: (payload: WebhookPayload) => Promise<void>;
  onDisputeExpired?: (payload: WebhookPayload) => Promise<void>;
  onDisputeAccepted?: (payload: WebhookPayload) => Promise<void>;
  onDisputeCancelled?: (payload: WebhookPayload) => Promise<void>;
  onDisputeChallenged?: (payload: WebhookPayload) => Promise<void>;
  onDisputeWon?: (payload: WebhookPayload) => Promise<void>;
  onDisputeLost?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionActive?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionOnHold?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionRenewed?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionPlanChanged?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionCancelled?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionFailed?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionExpired?: (payload: WebhookPayload) => Promise<void>;
  onLicenseKeyCreated?: (payload: WebhookPayload) => Promise<void>;
  ```
</CodeGroup>

***

## Prompt for LLM

```
You are an expert Fastify developer assistant. Your task is to guide a user through integrating the @dodopayments/fastify adapter into their existing Fastify project.

The @dodopayments/fastify adapter provides route handlers for Dodo Payments' Checkout, Customer Portal, and Webhook functionalities, designed to plug directly into an Fastify app.

First, install the necessary package. Use the package manager appropriate for the user's project (npm, yarn, or bun):

npm install @dodopayments/fastify

---

Here's how you should structure your response:

1. Ask the user which functionalities they want to integrate.

"Which parts of the @dodopayments/fastify adapter would you like to integrate into your project? You can choose one or more of the following:

- Checkout Route Handler (for handling product checkouts)
- Customer Portal Route Handler (for managing customer subscriptions/details)
- Webhook Route Handler (for receiving Dodo Payments webhook events)
- All (integrate all three)"

---

2. Based on the user's selection, provide detailed integration steps for each chosen functionality.

---

**If Checkout Route Handler is selected:**

**Purpose**: This handler redirects users to the Dodo Payments checkout page.

**Integration**:
Create two routes in your Fastify app — one for static (GET) and one for dynamic (POST) checkout.


import { Checkout } from '@dodopayments/fastify';
import Fastify from 'fastify'

const fastify = Fastify({})
const checkoutGet = Checkout({
    bearerToken: process.env.DODO_PAYMENTS_API_KEY,
    environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
    returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
    type: 'static'
});

const checkoutPost = Checkout({
    bearerToken: process.env.DODO_PAYMENTS_API_KEY,
    environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
    returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
    type: 'dynamic'
});

const checkoutSession = Checkout({
    bearerToken: process.env.DODO_PAYMENTS_API_KEY,
    environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
    returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
    type: 'session'
});

fastify.get('/api/checkout', checkoutGet.getHandler);
fastify.post('/api/checkout', checkoutPost.postHandler);
fastify.post('/api/checkout-session', checkoutSession.postHandler);


Config Options:

    bearerToken: Your Dodo Payments API key (recommended to be stored in DODO_PAYMENTS_API_KEY env variable).

    returnUrl (optional): URL to redirect the user after successful checkout.

    environment: "test_mode" or "live_mode"

    type: "static" (GET), "dynamic" (POST), or "session" (POST)

GET (static checkout) expects query parameters:

    productId (required)

    quantity, customer fields (fullName, email, etc.), and metadata (metadata_*) are optional.

    Returns: {"checkout_url": "https://checkout.dodopayments.com/..."}

POST (dynamic checkout) expects a JSON body with payment details (one-time or subscription). Returns: {"checkout_url": "https://checkout.dodopayments.com/..."}. Reference the docs for the full POST schema:

    One-time payments: https://docs.dodopayments.com/api-reference/payments/post-payments

    Subscriptions: https://docs.dodopayments.com/api-reference/subscriptions/post-subscriptions

POST (checkout sessions) - (Recommended) A more customizable checkout experience. Returns JSON with checkout_url: Parameters are sent as a JSON body. Supports both one-time and recurring payments. Returns: {"checkout_url": "https://checkout.dodopayments.com/session/..."}. For a complete list of supported fields, refer to:

    Checkout Sessions Integration Guide: https://docs.dodopayments.com/developer-resources/checkout-session

If Customer Portal Route Handler is selected:

Purpose: This route allows customers to manage their subscriptions via the Dodo Payments portal.

Integration:

import { CustomerPortal } from "@dodopayments/fastify";
import Fastify from 'fastify'

const fastify = Fastify({})
const customerPortalHandler = CustomerPortal({
    bearerToken: process.env.DODO_PAYMENTS_API_KEY,
    environment: process.env.DODO_PAYMENTS_ENVIRONMENT
});
fastify.get('/api/customer-portal', customerPortalHandler);

Query Parameters:

    customer_id (required): e.g., ?customer_id=cus_123

    send_email (optional): if true, customer is emailed the portal link

Returns 400 if customer_id is missing.

If Webhook Route Handler is selected:

Purpose: Processes incoming webhook events from Dodo Payments to trigger events in your app.

Integration:

import Fastify from 'fastify'
import { Webhooks } from '@dodopayments/fastify'

const fastify = Fastify({})
fastify.addContentTypeParser('application/json', { parseAs: 'string' }, function (req, body, done) {
    done(null, body)
})

fastify.post('/api/webhooks', Webhooks({
  webhookKey: process.env.DODO_PAYMENTS_WEBHOOK_KEY,
  onPayload: async (payload) => {
    // Handle Payload Here
    console.log(payload)
  }
}));

Features:

    Only POST method is allowed — others return 405

    Signature verification is performed using webhookKey. Returns 401 if invalid.

    Zod-based payload validation. Returns 400 if invalid schema.

    All handlers are async functions.

Supported Webhook Event Handlers:

You may pass in any of the following handlers:

    onPayload

    onPaymentSucceeded

    onPaymentFailed

    onPaymentProcessing

    onPaymentCancelled

    onRefundSucceeded

    onRefundFailed

    onDisputeOpened, onDisputeExpired, onDisputeAccepted, onDisputeCancelled, onDisputeChallenged, onDisputeWon, onDisputeLost

    onSubscriptionActive, onSubscriptionOnHold, onSubscriptionRenewed, onSubscriptionPaused, onSubscriptionPlanChanged, onSubscriptionCancelled, onSubscriptionFailed, onSubscriptionExpired

    onLicenseKeyCreated

Environment Variable Setup:

Make sure to define these environment variables in your project:

DODO_PAYMENTS_API_KEY=your-api-key
DODO_PAYMENTS_RETURN_URL=https://yourapp.com/success
DODO_PAYMENTS_WEBHOOK_KEY=your-webhook-secret
DODO_PAYMENTS_ENVIRONMENT="test_mode" or "live_mode""

Use these inside your code as:

process.env.DODO_PAYMENTS_API_KEY
process.env.DODO_PAYMENTS_WEBHOOK_KEY

Security Note: Do NOT commit secrets to version control. Use .env files locally and secrets managers in deployment environments (e.g., AWS, Vercel, Heroku, etc.).
```


# Hono Adaptor
Source: https://docs.dodopayments.com/developer-resources/hono-adaptor

Learn how to integrate Dodo Payments with your Hono App Router project using our NextJS Adaptor. Covers checkout, customer portal, webhooks, and secure environment setup.

<CardGroup cols={2}>
  <Card title="Checkout Handler" icon="cart-shopping" href="#checkout-route-handler">
    Integrate Dodo Payments checkout into your Hono app.
  </Card>

  <Card title="Customer Portal" icon="user" href="#customer-portal-route-handler">
    Allow customers to manage subscriptions and details.
  </Card>

  <Card title="Webhooks" icon="bell" href="#webhook-route-handler">
    Receive and process Dodo Payments webhook events.
  </Card>
</CardGroup>

## Installation

<Steps>
  <Step title="Install the package">
    Run the following command in your project root:

    ```bash  theme={null}
    npm install @dodopayments/hono
    ```
  </Step>

  <Step title="Set up environment variables">
    Create a <code>.env</code> file in your project root:

    ```env expandable theme={null}
    DODO_PAYMENTS_API_KEY=your-api-key
    DODO_PAYMENTS_RETURN_URL=https://yourapp.com/success
    DODO_PAYMENTS_WEBHOOK_KEY=your-webhook-secret
    DODO_PAYMENTS_ENVIRONMENT="test_mode" or "live_mode""
    ```

    <Warning>
      Never commit your <code>.env</code> file or secrets to version control.
    </Warning>
  </Step>
</Steps>

## Route Handler Examples

<Info>
  All examples assume you are using the Hono App Router.
</Info>

<Tabs>
  <Tab title="Checkout Handler">
    <Info>
      Use this handler to integrate Dodo Payments checkout into your Hono app. Supports static (GET), dynamic (POST), and session (POST) flows.
    </Info>

    <CodeGroup>
      ```typescript Hono Route Handler expandable theme={null}
        // route.ts
        import { Checkout } from '@dodopayments/hono';
        import Hono from 'hono'

        const app = new Hono()

        app.get(
        "/api/checkout",
        Checkout({
            bearerToken: process.env.DODO_PAYMENTS_API_KEY,
            environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
            returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
            type: 'static'
        })
        );

        app.post(
        "/api/checkout",
        Checkout({
            bearerToken: process.env.DODO_PAYMENTS_API_KEY,
            environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
            returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
            type: 'dynamic'
        })
        );
        
        app.post(
        "/api/checkout",
        Checkout({
            bearerToken: process.env.DODO_PAYMENTS_API_KEY,
            environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
            returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
            type: 'session'
        })
        );
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Static Checkout Curl example expandable theme={null}
      curl --request GET \
      --url 'https://example.com/api/checkout?productId=pdt_fqJhl7pxKWiLhwQR042rh' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Dynamic Checkout Curl example expandable theme={null}
      curl --request POST \
      --url https://example.com/api/checkout \
      --header 'Content-Type: application/json' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test \
      --data '{
      "billing": {
        "city": "Texas",
        "country": "US",
        "state": "Texas",
        "street": "56, hhh",
        "zipcode": "560000"
      },
      "customer": {
        "email": "test@example.com",
        	"name": "test"
      },
      "metadata": {},
      "payment_link": true,
        "product_id": "pdt_QMDuvLkbVzCRWRQjLNcs",
        "quantity": 1,
        "billing_currency": "USD",
        "discount_code": "IKHZ23M9GQ",
        "return_url": "https://example.com",
        "trial_period_days": 10
      }'
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Checkout Session Curl example expandable theme={null}
      curl --request POST \
      --url https://example.com/api/checkout \
      --header 'Content-Type: application/json' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test \
      --data '{
      "product_cart": [
        {
          "product_id": "pdt_QMDuvLkbVzCRWRQjLNcs",
          "quantity": 1
        }
      ],
      "customer": {
        "email": "test@example.com",
        "name": "test"
      },
      "return_url": "https://example.com/success"
      }'
      ```
    </CodeGroup>
  </Tab>

  <Tab title="Customer Portal Handler">
    <Info>
      Use this handler to allow customers to manage their subscriptions and details via the Dodo Payments customer portal.
    </Info>

    <CodeGroup>
      ```typescript Hono Route Handler expandable theme={null}
      // route.ts
      import { Checkout } from '@dodopayments/hono';
      import Hono from 'hono'

      const app = new Hono()
      app.get(
          "/api/customer-portal",
          CustomerPortal({
              bearerToken: process.env.DODO_PAYMENTS_API_KEY,
              environment: process.env.DODO_PAYMENTS_ENVIRONMENT
          })
      );
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Customer Portal Curl example expandable theme={null}
      curl --request GET \
      --url 'https://example.com/api/customer-portal?customer_id=cus_9VuW4K7O3GHwasENg31m&send_email=true' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test
      ```
    </CodeGroup>
  </Tab>

  <Tab title="Webhook Handler">
    <Info>
      Use this handler to receive and process Dodo Payments webhook events securely in your Hono app.
    </Info>

    <CodeGroup>
      ```typescript Hono Route Handler expandable theme={null}
      // route.ts
      import Hono from 'hono'
      import { Webhooks } from '@dodopayments/hono'

      const app = new Hono()
      app.post(
      "/api/webhooks",
          Webhooks({
              webhookKey: process.env.DODO_PAYMENTS_WEBHOOK_KEY,
              onPayload: async (payload) => {
              // Handle Payload Here
              console.log(payload)
              }
          })
      );

      ```
    </CodeGroup>
  </Tab>
</Tabs>

## Checkout Route Handler

<Info>
  Dodo Payments supports three types of payment flows for integrating payments into your website, this adaptor supports all types of payment flows.
</Info>

* **Static Payment Links:** Instantly shareable URLs for quick, no-code payment collection.
* **Dynamic Payment Links:** Programmatically generate payment links with custom details using the API or SDKs.
* **Checkout Sessions:** Create secure, customizable checkout experiences with pre-configured product carts and customer details.

<AccordionGroup>
  <Accordion title="Static Checkout (GET)">
    ### Supported Query Parameters

    <ParamField query="productId" type="string" required>
      Product identifier (e.g., <code>?productId=pdt\_nZuwz45WAs64n3l07zpQR</code>).
    </ParamField>

    <ParamField query="quantity" type="integer">
      Quantity of the product.
    </ParamField>

    <ParamField query="fullName" type="string">
      Customer's full name.
    </ParamField>

    <ParamField query="firstName" type="string">
      Customer's first name.
    </ParamField>

    <ParamField query="lastName" type="string">
      Customer's last name.
    </ParamField>

    <ParamField query="email" type="string">
      Customer's email address.
    </ParamField>

    <ParamField query="country" type="string">
      Customer's country.
    </ParamField>

    <ParamField query="addressLine" type="string">
      Customer's address line.
    </ParamField>

    <ParamField query="city" type="string">
      Customer's city.
    </ParamField>

    <ParamField query="state" type="string">
      Customer's state/province.
    </ParamField>

    <ParamField query="zipCode" type="string">
      Customer's zip/postal code.
    </ParamField>

    <ParamField query="disableFullName" type="boolean">
      Disable full name field.
    </ParamField>

    <ParamField query="disableFirstName" type="boolean">
      Disable first name field.
    </ParamField>

    <ParamField query="disableLastName" type="boolean">
      Disable last name field.
    </ParamField>

    <ParamField query="disableEmail" type="boolean">
      Disable email field.
    </ParamField>

    <ParamField query="disableCountry" type="boolean">
      Disable country field.
    </ParamField>

    <ParamField query="disableAddressLine" type="boolean">
      Disable address line field.
    </ParamField>

    <ParamField query="disableCity" type="boolean">
      Disable city field.
    </ParamField>

    <ParamField query="disableState" type="boolean">
      Disable state field.
    </ParamField>

    <ParamField query="disableZipCode" type="boolean">
      Disable zip code field.
    </ParamField>

    <ParamField query="paymentCurrency" type="string">
      Specify the payment currency (e.g., <code>USD</code>).
    </ParamField>

    <ParamField query="showCurrencySelector" type="boolean">
      Show currency selector.
    </ParamField>

    <ParamField query="paymentAmount" type="integer">
      Specify the payment amount (e.g., <code>1000</code> for \$10.00).
    </ParamField>

    <ParamField query="showDiscounts" type="boolean">
      Show discount fields.
    </ParamField>

    <ParamField query="metadata_*" type="string">
      Any query parameter starting with <code>metadata\_</code> will be passed as metadata.
    </ParamField>

    <Warning>
      If <code>productId</code> is missing, the handler returns a 400 response. Invalid query parameters also result in a 400 response.
    </Warning>

    ### Response Format

    Static checkout returns a JSON response with the checkout URL:

    ```json  theme={null}
    {
      "checkout_url": "https://checkout.dodopayments.com/..."
    }
    ```
  </Accordion>

  <Accordion title="Dynamic Checkout (POST)">
    * Send parameters as a JSON body in a POST request.
    * Supports both one-time and recurring payments.
    * For a complete list of supported POST body fields, refer to:
      * [Request body for a One Time Payment Product](https://docs.dodopayments.com/api-reference/payments/post-payments)
      * [Request body for a Subscription Product](https://docs.dodopayments.com/api-reference/subscriptions/post-subscriptions)

    ### Response Format

    Dynamic checkout returns a JSON response with the checkout URL:

    ```json  theme={null}
    {
      "checkout_url": "https://checkout.dodopayments.com/..."
    }
    ```
  </Accordion>

  <Accordion title="Checkout Sessions (POST)">
    Checkout sessions provide a more secure, hosted checkout experience that handles the complete payment flow for both one-time purchases and subscriptions with full customization control.

    Refer to [Checkout Sessions Integration Guide](https://docs.dodopayments.com/developer-resources/checkout-session) for more details and a complete list of supported fields.

    ### Response Format

    Checkout sessions return a JSON response with the checkout URL:

    ```json  theme={null}
    {
      "checkout_url": "https://checkout.dodopayments.com/session/..."
    }
    ```
  </Accordion>
</AccordionGroup>

## Customer Portal Route Handler

The Customer Portal Route Handler enables you to seamlessly integrate the Dodo Payments customer portal into your Hono application.

### Query Parameters

<ParamField query="customer_id" type="string" required>
  The customer ID for the portal session (e.g., <code>?customer\_id=cus\_123</code>).
</ParamField>

<ParamField query="send_email" type="boolean">
  If set to <code>true</code>, sends an email to the customer with the portal link.
</ParamField>

<Warning>
  Returns 400 if <code>customer\_id</code> is missing.
</Warning>

## Webhook Route Handler

* **Method:** Only POST requests are supported. Other methods return 405.
* **Signature Verification:** Verifies the webhook signature using <code>webhookKey</code>. Returns 401 if verification fails.
* **Payload Validation:** Validated with Zod. Returns 400 for invalid payloads.
* **Error Handling:**
  * 401: Invalid signature
  * 400: Invalid payload
  * 500: Internal error during verification
* **Event Routing:** Calls the appropriate event handler based on the payload type.

### Supported Webhook Event Handlers

<CodeGroup>
  ```typescript Typescript expandable theme={null}
  onPayload?: (payload: WebhookPayload) => Promise<void>;
  onPaymentSucceeded?: (payload: WebhookPayload) => Promise<void>;
  onPaymentFailed?: (payload: WebhookPayload) => Promise<void>;
  onPaymentProcessing?: (payload: WebhookPayload) => Promise<void>;
  onPaymentCancelled?: (payload: WebhookPayload) => Promise<void>;
  onRefundSucceeded?: (payload: WebhookPayload) => Promise<void>;
  onRefundFailed?: (payload: WebhookPayload) => Promise<void>;
  onDisputeOpened?: (payload: WebhookPayload) => Promise<void>;
  onDisputeExpired?: (payload: WebhookPayload) => Promise<void>;
  onDisputeAccepted?: (payload: WebhookPayload) => Promise<void>;
  onDisputeCancelled?: (payload: WebhookPayload) => Promise<void>;
  onDisputeChallenged?: (payload: WebhookPayload) => Promise<void>;
  onDisputeWon?: (payload: WebhookPayload) => Promise<void>;
  onDisputeLost?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionActive?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionOnHold?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionRenewed?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionPlanChanged?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionCancelled?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionFailed?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionExpired?: (payload: WebhookPayload) => Promise<void>;
  onLicenseKeyCreated?: (payload: WebhookPayload) => Promise<void>;
  ```
</CodeGroup>

***

## Prompt for LLM

```
You are an expert Hono developer assistant. Your task is to guide a user through integrating the @dodopayments/hono adapter into their existing Hono project.

The @dodopayments/hono adapter provides route handlers for Dodo Payments' Checkout, Customer Portal, and Webhook functionalities, designed to plug directly into an Hono app.

First, install the necessary package. Use the package manager appropriate for the user's project (npm, yarn, or bun):

npm install @dodopayments/hono

---

Here's how you should structure your response:

1. Ask the user which functionalities they want to integrate.

"Which parts of the @dodopayments/hono adapter would you like to integrate into your project? You can choose one or more of the following:

- Checkout Route Handler (for handling product checkouts)
- Customer Portal Route Handler (for managing customer subscriptions/details)
- Webhook Route Handler (for receiving Dodo Payments webhook events)
- All (integrate all three)"

---

2. Based on the user's selection, provide detailed integration steps for each chosen functionality.

---

**If Checkout Route Handler is selected:**

**Purpose**: This handler redirects users to the Dodo Payments checkout page.

**Integration**:
Create two routes in your Hono app — one for static (GET) and one for dynamic (POST) checkout.


import { Checkout } from '@dodopayments/hono';
import Hono from 'hono'

const app = new Hono()

app.get(
  "/api/checkout",
  Checkout({
    bearerToken: process.env.DODO_PAYMENTS_API_KEY,
    environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
    returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
    type: 'static'
  })
);

app.post(
  "/api/checkout",
  Checkout({
    bearerToken: process.env.DODO_PAYMENTS_API_KEY,
    environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
    returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
    type: 'session' // or 'dynamic' for dynamic link
  })
);


Config Options:

    bearerToken: Your Dodo Payments API key (recommended to be stored in DODO_PAYMENTS_API_KEY env variable).

    returnUrl (optional): URL to redirect the user after successful checkout.

    environment: "test_mode" or "live_mode"

    type: "static" (GET) or "dynamic" (POST) or "session" (POST)

GET (static checkout) expects query parameters:

    productId (required)

    quantity, customer fields (fullName, email, etc.), and metadata (metadata_*) are optional.

POST (dynamic checkout) expects a JSON body with payment details (one-time or subscription). Reference the docs for the full POST schema:

    One-time payments: https://docs.dodopayments.com/api-reference/payments/post-payments

    Subscriptions: https://docs.dodopayments.com/api-reference/subscriptions/post-subscriptions


POST (checkout sessions) - (Recommended) A more customizable checkout experience. Returns JSON with checkout_url: Parameters are sent as a JSON body. Supports both one-time and recurring payments. Returns: {"checkout_url": "https://checkout.dodopayments.com/session/..."}. For a complete list of supported fields, refer to:

  Checkout Sessions Integration Guide: https://docs.dodopayments.com/developer-resources/checkout-session


If Customer Portal Route Handler is selected:

Purpose: This route allows customers to manage their subscriptions via the Dodo Payments portal.

Integration:

import { Checkout } from '@dodopayments/hono';
import Hono from 'hono'

const app = new Hono()
app.get(
  "/api/customer-portal",
  CustomerPortal({
    bearerToken: process.env.DODO_PAYMENTS_API_KEY,
    environment: process.env.DODO_PAYMENTS_ENVIRONMENT
  })
);

Query Parameters:

    customer_id (required): e.g., ?customer_id=cus_123

    send_email (optional): if true, customer is emailed the portal link

Returns 400 if customer_id is missing.

If Webhook Route Handler is selected:

Purpose: Processes incoming webhook events from Dodo Payments to trigger events in your app.

Integration:

import Hono from 'hono'
import { Webhooks } from '@dodopayments/hono'

const app = new Hono()
app.post(
  "/api/webhooks",
  Webhooks({
    webhookKey: process.env.DODO_PAYMENTS_WEBHOOK_KEY,
    onPayload: async (payload) => {
      // Handle Payload Here
      console.log(payload)
    }
  })
);

Features:

    Only POST method is allowed — others return 405

    Signature verification is performed using webhookKey. Returns 401 if invalid.

    Zod-based payload validation. Returns 400 if invalid schema.

    All handlers are async functions.

Supported Webhook Event Handlers:

You may pass in any of the following handlers:

    onPayload

    onPaymentSucceeded

    onPaymentFailed

    onPaymentProcessing

    onPaymentCancelled

    onRefundSucceeded

    onRefundFailed

    onDisputeOpened, onDisputeExpired, onDisputeAccepted, onDisputeCancelled, onDisputeChallenged, onDisputeWon, onDisputeLost

    onSubscriptionActive, onSubscriptionOnHold, onSubscriptionRenewed, onSubscriptionPaused, onSubscriptionPlanChanged, onSubscriptionCancelled, onSubscriptionFailed, onSubscriptionExpired

    onLicenseKeyCreated

Environment Variable Setup:

Make sure to define these environment variables in your project:

DODO_PAYMENTS_API_KEY=your-api-key
DODO_PAYMENTS_RETURN_URL=https://yourapp.com/success
DODO_PAYMENTS_WEBHOOK_KEY=your-webhook-secret
DODO_PAYMENTS_ENVIRONMENT="test_mode" or "live_mode""

Use these inside your code as:

process.env.DODO_PAYMENTS_API_KEY
process.env.DODO_PAYMENTS_WEBHOOK_KEY

Security Note: Do NOT commit secrets to version control. Use .env files locally and secrets managers in deployment environments (e.g., AWS, Vercel, Heroku, etc.).
```


# API Gateway Blueprint
Source: https://docs.dodopayments.com/developer-resources/ingestion-blueprints/api-gateway

Track API calls and gateway-level usage for billing. Perfect for API-as-a-service platforms with high-volume request tracking.

## Use Cases

Explore common scenarios supported by the API Gateway Blueprint:

<CardGroup cols={2}>
  <Card title="API-as-a-Service" icon="server">
    Track usage per customer for API platforms and charge based on number of calls.
  </Card>

  <Card title="Rate Limiting" icon="gauge">
    Monitor API usage patterns and implement usage-based rate limiting.
  </Card>

  <Card title="Performance Monitoring" icon="chart-line">
    Track response times and error rates alongside billing data.
  </Card>

  <Card title="Multi-Tenant SaaS" icon="users">
    Bill customers based on their API consumption across different endpoints.
  </Card>
</CardGroup>

<Info>
  Ideal for tracking API endpoint usage, rate limiting, and implementing usage-based API billing.
</Info>

## Quick Start

Track API calls at the gateway level with automatic batching for high-volume scenarios:

<Steps>
  <Step title="Install the SDK">
    ```bash  theme={null}
    npm install @dodopayments/ingestion-blueprints
    ```
  </Step>

  <Step title="Get Your API Keys">
    * **Dodo Payments API Key**: Get it from [Dodo Payments Dashboard](https://app.dodopayments.com/developer/api-keys)
  </Step>

  <Step title="Create a Meter">
    Create a meter in your [Dodo Payments Dashboard](https://app.dodopayments.com/):

    * **Event Name**: `api_call` (or your preferred name)
    * **Aggregation Type**: `count` for tracking number of calls
    * Configure additional properties if tracking metadata like response times, status codes, etc.
  </Step>

  <Step title="Track API Calls">
    <CodeGroup>
      ```javascript Single API Call theme={null}
      import { Ingestion, trackAPICall } from '@dodopayments/ingestion-blueprints';

      const ingestion = new Ingestion({
        apiKey: process.env.DODO_PAYMENTS_API_KEY,
        environment: 'test_mode',
        eventName: 'api_call'
      });

      // Track a single API call
      await trackAPICall(ingestion, {
        customerId: 'customer_123',
        metadata: {
          endpoint: '/api/v1/users',
          method: 'GET',
          status_code: 200,
          response_time_ms: 45
        }
      });
      ```

      ```javascript High-Volume with Batching theme={null}
      import { Ingestion, createBatch } from '@dodopayments/ingestion-blueprints';

      const ingestion = new Ingestion({
        apiKey: process.env.DODO_PAYMENTS_API_KEY,
        environment: 'live_mode',
        eventName: 'api_call'
      });

      // Create batch for high-volume tracking
      const batch = createBatch(ingestion, {
        maxSize: 100,      // Flush after 100 events
        flushInterval: 5000 // Or flush every 5 seconds
      });

      // Add API calls to batch
      batch.add({
        customerId: 'customer_123',
        metadata: {
          endpoint: '/api/v1/products',
          method: 'GET',
          status_code: 200
        }
      });

      // Clean up when done
      await batch.cleanup();
      ```

      ```javascript Express.js Middleware theme={null}
      import express from 'express';
      import { Ingestion, createBatch } from '@dodopayments/ingestion-blueprints';

      const app = express();

      const ingestion = new Ingestion({
        apiKey: process.env.DODO_PAYMENTS_API_KEY,
        environment: 'live_mode',
        eventName: 'api_call'
      });

      const batch = createBatch(ingestion, {
        maxSize: 50,
        flushInterval: 10000
      });

      // Middleware to track all API calls
      app.use((req, res, next) => {
        const startTime = Date.now();
        
        res.on('finish', () => {
          const responseTime = Date.now() - startTime;
          
          batch.add({
            customerId: req.user?.id || 'anonymous',
            metadata: {
              endpoint: req.path,
              method: req.method,
              status_code: res.statusCode,
              response_time_ms: responseTime
            }
          });
        });
        
        next();
      });

      // Cleanup on shutdown
      process.on('SIGTERM', async () => {
        await batch.cleanup();
        process.exit(0);
      });
      ```
    </CodeGroup>
  </Step>
</Steps>

## Configuration

### Ingestion Configuration

<ParamField path="apiKey" type="string" required>
  Your Dodo Payments API key from the dashboard.
</ParamField>

<ParamField path="environment" type="string" required>
  Environment mode: `test_mode` or `live_mode`.
</ParamField>

<ParamField path="eventName" type="string" required>
  Event name that matches your meter configuration.
</ParamField>

### Track API Call Options

<ParamField path="customerId" type="string" required>
  The customer ID for billing attribution.
</ParamField>

<ParamField path="metadata" type="object">
  Optional metadata about the API call like endpoint, method, status code, response time, etc.
</ParamField>

### Batch Configuration

<ParamField path="maxSize" type="number">
  Maximum number of events before auto-flush. Default: `100`.
</ParamField>

<ParamField path="flushInterval" type="number">
  Auto-flush interval in milliseconds. Default: `5000` (5 seconds).
</ParamField>

## Best Practices

<Tip>
  **Use Batching for High Volume**: For applications handling more than 10 requests per second, use `createBatch()` to reduce overhead and improve performance.
</Tip>

<Warning>
  **Always Clean Up Batches**: Call `batch.cleanup()` on application shutdown to flush pending events and prevent data loss.
</Warning>


# LLM Blueprint
Source: https://docs.dodopayments.com/developer-resources/ingestion-blueprints/llm

Effortlessly track LLM token usage for usage-based billing with automatic ingestion to Dodo Payments. Works with AI SDK, OpenAI, Anthropic, OpenRouter, Groq, and Google Gemini.

<CardGroup cols={2}>
  <Card title="Quick Start" icon="rocket" href="#quick-start">
    Get started in 2 minutes with automatic token tracking.
  </Card>

  <Card title="API Reference - Events Ingestion" icon="code" href="/api-reference/usage-events/ingest-events">
    Complete API documentation for ingesting usage events.
  </Card>

  <Card title="API Reference - Meters" icon="gauge" href="/api-reference/meters/create-meter">
    Learn how to create and configure meters for billing.
  </Card>

  <Card title="Usage-Based Billing Guide" icon="arrow-trend-up" href="/developer-resources/usage-based-billing-guide">
    Comprehensive guide to usage-based billing with meters.
  </Card>
</CardGroup>

<Info>
  Perfect for SaaS apps, AI chatbots, content generation tools, and any LLM-powered application that needs usage-based billing.
</Info>

## Quick Start

Get started with automatic LLM token tracking in just 2 minutes:

<Steps>
  <Step title="Install the SDK">
    Install the Dodo Payments Ingestion Blueprints:

    ```bash  theme={null}
    npm install @dodopayments/ingestion-blueprints
    ```
  </Step>

  <Step title="Get Your API Keys">
    You'll need two API keys:

    * **Dodo Payments API Key**: Get it from [Dodo Payments Dashboard](https://app.dodopayments.com/developer/api-keys)
    * **LLM Provider API Key**: From AI SDK, OpenAI, Anthropic, Groq, etc.

    <Tip>
      Store your API keys securely in environment variables. Never commit them to version control.
    </Tip>
  </Step>

  <Step title="Create a Meter in Dodo Payments">
    Before tracking usage, create a meter in your Dodo Payments dashboard:

    1. **Login** to [Dodo Payments Dashboard](https://app.dodopayments.com/)
    2. **Navigate to** Products → Meters
    3. **Click** "Create Meter"
    4. **Configure your meter**:
       * **Meter Name**: Choose a descriptive name (e.g., "LLM Token Usage")
       * **Event Name**: Set a unique event identifier (e.g., `llm.chat_completion`)
       * **Aggregation Type**: Select `sum` to add up token counts
       * **Over Property**: Choose what to track:
         * `inputTokens` - Track input/prompt tokens
         * `outputTokens` - Track output/completion tokens (includes reasoning tokens when applicable)
         * `totalTokens` - Track combined input + output tokens

    <Info>
      The **Event Name** you set here must match exactly what you pass to the SDK (case-sensitive).
    </Info>

    For detailed instructions, see the [Usage-Based Billing Guide](/developer-resources/usage-based-billing-guide).
  </Step>

  <Step title="Track Token Usage">
    Wrap your LLM client and start tracking automatically:

    <CodeGroup>
      ```javascript AI SDK theme={null}
      import { createLLMTracker } from '@dodopayments/ingestion-blueprints';
      import { generateText } from 'ai';
      import { google } from '@ai-sdk/google';

      const llmTracker = createLLMTracker({
        apiKey: process.env.DODO_PAYMENTS_API_KEY,
        environment: 'test_mode',
        eventName: 'aisdk.usage',
      });

      const client = llmTracker.wrap({
        client: { generateText },
        customerId: 'customer_123'
      });

      const response = await client.generateText({
        model: google('gemini-2.0-flash'),
        prompt: 'Hello!',
        maxOutputTokens: 500
      });

      console.log('Usage:', response.usage);
      ```

      ```javascript OpenRouter theme={null}
      import { createLLMTracker } from '@dodopayments/ingestion-blueprints';
      import OpenAI from 'openai';

      const openrouter = new OpenAI({
        baseURL: 'https://openrouter.ai/api/v1',
        apiKey: process.env.OPENROUTER_API_KEY
      });

      const llmTracker = createLLMTracker({
        apiKey: process.env.DODO_PAYMENTS_API_KEY,
        environment: 'test_mode',
        eventName: 'openrouter.usage'
      });

      const client = llmTracker.wrap({
        client: openrouter,
        customerId: 'customer_123'
      });

      const response = await client.chat.completions.create({
        model: 'qwen/qwen3-max',
        messages: [{ role: 'user', content: 'Hello!' }],
        max_tokens: 500
      });

      console.log('Response:', response.choices[0].message.content);
      console.log('Usage:', response.usage);
      ```

      ```javascript OpenAI theme={null}
      import { createLLMTracker } from '@dodopayments/ingestion-blueprints';
      import OpenAI from 'openai';

      // 1. Create your LLM client (normal way)
      const openai = new OpenAI({ 
        apiKey: process.env.OPENAI_API_KEY 
      });

      // 2. Create tracker ONCE at startup
      const tracker = createLLMTracker({
        apiKey: process.env.DODO_PAYMENTS_API_KEY,
        environment: 'test_mode', // Use 'live_mode' for production
        eventName: 'llm.chat_completion' // Match your meter's event name
      });

      // 3. Wrap & use - automatic tracking!
      const client = tracker.wrap({ 
        client: openai, 
        customerId: 'customer_123' 
      });

      // Every API call is now automatically tracked
      const response = await client.chat.completions.create({
        model: 'gpt-4',
        messages: [{ role: 'user', content: 'Hello!' }]
      });

      // ✨ Usage automatically sent to Dodo Payments!
      console.log('Tokens used:', response.usage);
      ```

      ```javascript Anthropic theme={null}
      import { createLLMTracker } from '@dodopayments/ingestion-blueprints';
      import Anthropic from '@anthropic-ai/sdk';

      const anthropic = new Anthropic({ 
        apiKey: process.env.ANTHROPIC_API_KEY 
      });

      const tracker = createLLMTracker({
        apiKey: process.env.DODO_PAYMENTS_API_KEY,
        environment: 'test_mode',
        eventName: 'anthropic.usage'
      });

      const client = tracker.wrap({ 
        client: anthropic, 
        customerId: 'customer_123' 
      });

      const response = await client.messages.create({
        model: 'claude-sonnet-4-0',
        max_tokens: 1024,
        messages: [{ role: 'user', content: 'Hello Claude!' }]
      });

      console.log('Tokens used:', response.usage);
      ```

      ```javascript Groq theme={null}
      import { createLLMTracker } from '@dodopayments/ingestion-blueprints';
      import Groq from 'groq-sdk';

      const groq = new Groq({ 
        apiKey: process.env.GROQ_API_KEY 
      });

      const tracker = createLLMTracker({
        apiKey: process.env.DODO_PAYMENTS_API_KEY,
        environment: 'test_mode',
        eventName: 'groq.usage'
      });

      const client = tracker.wrap({ 
        client: groq, 
        customerId: 'customer_123' 
      });

      const response = await client.chat.completions.create({
        model: 'llama-3.1-8b-instant',
        messages: [{ role: 'user', content: 'Hello!' }]
      });

      console.log('Tokens:', response.usage);
      ```

      ```javascript Google Gemini theme={null}
      import { createLLMTracker } from '@dodopayments/ingestion-blueprints';
      import { GoogleGenAI } from '@google/genai';

      const googleGenai = new GoogleGenAI({
        apiKey: process.env.GOOGLE_GENERATIVE_AI_API_KEY
      });

      const llmTracker = createLLMTracker({
        apiKey: process.env.DODO_PAYMENTS_API_KEY,
        environment: 'test_mode',
        eventName: 'gemini.usage'
      });

      const client = llmTracker.wrap({
        client: googleGenai,
        customerId: 'customer_123'
      });

      const response = await client.models.generateContent({
        model: 'gemini-2.5-flash',
        contents: 'Why is the sky blue?'
      });

      console.log('Response:', response.text);
      console.log('Usage:', response.usageMetadata);
      ```
    </CodeGroup>

    <Check>
      That's it! Every API call now automatically tracks token usage and sends events to Dodo Payments for billing.
    </Check>
  </Step>
</Steps>

***

## Configuration

### Tracker Configuration

Create a tracker once at application startup with these required parameters:

<ParamField path="apiKey" type="string" required>
  Your Dodo Payments API key. Get it from the [API Keys page](https://app.dodopayments.com/developer/api-keys).

  ```javascript  theme={null}
  apiKey: process.env.DODO_PAYMENTS_API_KEY
  ```
</ParamField>

<ParamField path="environment" type="string" required>
  The environment mode for the tracker.

  * `test_mode` - Use for development and testing
  * `live_mode` - Use for production

  ```javascript  theme={null}
  environment: 'test_mode' // or 'live_mode'
  ```

  <Warning>
    Always use `test_mode` during development to avoid affecting production metrics.
  </Warning>
</ParamField>

<ParamField path="eventName" type="string" required>
  The event name that triggers your meter. Must match exactly what you configured in your Dodo Payments meter (case-sensitive).

  ```javascript  theme={null}
  eventName: 'llm.chat_completion'
  ```

  <Info>
    This event name links your tracked usage to the correct meter for billing calculations.
  </Info>
</ParamField>

### Wrapper Configuration

When wrapping your LLM client, provide these parameters:

<ParamField path="client" type="object" required>
  Your LLM client instance (OpenAI, Anthropic, Groq, etc.).

  ```javascript  theme={null}
  client: openai
  ```
</ParamField>

<ParamField path="customerId" type="string" required>
  The unique customer identifier for billing. This should match your customer ID in Dodo Payments.

  ```javascript  theme={null}
  customerId: 'customer_123'
  ```

  <Tip>
    Use your application's user ID or customer ID to ensure accurate billing per customer.
  </Tip>
</ParamField>

<ParamField path="metadata" type="object">
  Optional additional data to attach to the tracking event. Useful for filtering and analysis.

  ```javascript  theme={null}
  metadata: {
    feature: 'chat',
    userTier: 'premium',
    sessionId: 'session_123',
    modelVersion: 'gpt-4'
  }
  ```
</ParamField>

### Complete Configuration Example

<CodeGroup>
  ```javascript Full Configuration theme={null}
  import { createLLMTracker } from "@dodopayments/ingestion-blueprints";
  import { generateText } from "ai";
  import { google } from "@ai-sdk/google";
  import "dotenv/config";

  async function aiSdkExample() {
    console.log("🤖 AI SDK Simple Usage Example\n");

    try {
      // 1. Create tracker
      const llmTracker = createLLMTracker({
        apiKey: process.env.DODO_PAYMENTS_API_KEY!,
        environment: "test_mode",
        eventName: "your_meter_event_name",
      });

      // 2. Wrap the ai-sdk methods
      const client = llmTracker.wrap({
        client: { generateText },
        customerId: "customer_123",
        metadata: {
          provider: "ai-sdk",
        },
      });

      // 3. Use the wrapped function
      const response = await client.generateText({
        model: google("gemini-2.5-flash"),
        prompt: "Hello, I am a cool guy! Tell me a fun fact.",
        maxOutputTokens: 500,
      });

      console.log(response);
      console.log(response.usage);
      console.log("✅ Automatically tracked for customer\n");
    } catch (error) {
      console.error(error);
    }
  }

  aiSdkExample().catch(console.error);
  ```
</CodeGroup>

<Info>
  **Automatic Tracking:** The SDK automatically tracks token usage in the background without modifying the response. Your code remains clean and identical to using the original provider SDKs.
</Info>

***

## Supported Providers

The LLM Blueprint works seamlessly with all major LLM providers and aggregators:

<AccordionGroup>
  <Accordion title="AI SDK (Vercel)" icon="code">
    Track usage with the Vercel AI SDK for universal LLM support.

    <CodeGroup>
      ```javascript AI SDK Integration theme={null}
      import { createLLMTracker } from '@dodopayments/ingestion-blueprints';
      import { generateText } from 'ai';
      import { google } from '@ai-sdk/google';

      const llmTracker = createLLMTracker({
        apiKey: process.env.DODO_PAYMENTS_API_KEY,
        environment: 'test_mode',
        eventName: 'aisdk.usage',
      });

      const client = llmTracker.wrap({
        client: { generateText },
        customerId: 'customer_123',
        metadata: {
          model: 'gemini-2.0-flash',
          feature: 'chat'
        }
      });

      const response = await client.generateText({
        model: google('gemini-2.0-flash'),
        prompt: 'Explain neural networks',
        maxOutputTokens: 500
      });

      console.log('Usage:', response.usage);
      ```
    </CodeGroup>

    **Tracked Metrics:**

    * `inputTokens` → `inputTokens`
    * `outputTokens` + `reasoningTokens` → `outputTokens`
    * `totalTokens` → `totalTokens`
    * Model name

    <Note>
      When using reasoning-capable models through AI SDK (like Google's Gemini 2.5 Flash with thinking mode), reasoning tokens are automatically included in the `outputTokens` count for accurate billing.
    </Note>
  </Accordion>

  <Accordion title="OpenRouter" icon="route">
    Track token usage across 200+ models via OpenRouter's unified API.

    <CodeGroup>
      ```javascript OpenRouter Integration theme={null}
      import { createLLMTracker } from '@dodopayments/ingestion-blueprints';
      import OpenAI from 'openai';

      // OpenRouter uses OpenAI-compatible API
      const openrouter = new OpenAI({
        baseURL: 'https://openrouter.ai/api/v1',
        apiKey: process.env.OPENROUTER_API_KEY
      });

      const tracker = createLLMTracker({
        apiKey: process.env.DODO_PAYMENTS_API_KEY,
        environment: 'test_mode',
        eventName: 'openrouter.usage'
      });

      const client = tracker.wrap({ 
        client: openrouter, 
        customerId: 'user_123',
        metadata: { provider: 'openrouter' }
      });

      const response = await client.chat.completions.create({
        model: 'qwen/qwen3-max',
        messages: [{ role: 'user', content: 'What is machine learning?' }],
        max_tokens: 500
      });

      console.log('Response:', response.choices[0].message.content);
      console.log('Usage:', response.usage);
      ```
    </CodeGroup>

    **Tracked Metrics:**

    * `prompt_tokens` → `inputTokens`
    * `completion_tokens` → `outputTokens`
    * `total_tokens` → `totalTokens`
    * Model name

    <Tip>
      OpenRouter provides access to models from OpenAI, Anthropic, Google, Meta, and many more providers through a single API.
    </Tip>
  </Accordion>

  <Accordion title="OpenAI" icon="robot">
    Track token usage from OpenAI's GPT models automatically.

    <CodeGroup>
      ```javascript OpenAI Integration theme={null}
      import { createLLMTracker } from '@dodopayments/ingestion-blueprints';
      import OpenAI from 'openai';

      const openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY });

      const tracker = createLLMTracker({
        apiKey: process.env.DODO_PAYMENTS_API_KEY,
        environment: 'test_mode',
        eventName: 'openai.usage'
      });

      const client = tracker.wrap({ 
        client: openai, 
        customerId: 'user_123' 
      });

      // All OpenAI methods work automatically
      const response = await client.chat.completions.create({
        model: 'gpt-4',
        messages: [{ role: 'user', content: 'Explain quantum computing' }]
      });

      console.log('Total tokens:', response.usage.total_tokens);
      ```
    </CodeGroup>

    **Tracked Metrics:**

    * `prompt_tokens` → `inputTokens`
    * `completion_tokens` → `outputTokens`
    * `total_tokens` → `totalTokens`
    * Model name
  </Accordion>

  <Accordion title="Anthropic Claude" icon="robot">
    Track token usage from Anthropic's Claude models.

    <CodeGroup>
      ```javascript Anthropic Integration theme={null}
      import { createLLMTracker } from '@dodopayments/ingestion-blueprints';
      import Anthropic from '@anthropic-ai/sdk';

      const anthropic = new Anthropic({ apiKey: process.env.ANTHROPIC_API_KEY });

      const tracker = createLLMTracker({
        apiKey: process.env.DODO_PAYMENTS_API_KEY,
        environment: 'test_mode',
        eventName: 'anthropic.usage'
      });

      const client = tracker.wrap({ 
        client: anthropic, 
        customerId: 'user_123' 
      });

      const response = await client.messages.create({
        model: 'claude-sonnet-4-0',
        max_tokens: 1024,
        messages: [{ role: 'user', content: 'Explain machine learning' }]
      });

      console.log('Input tokens:', response.usage.input_tokens);
      console.log('Output tokens:', response.usage.output_tokens);
      ```
    </CodeGroup>

    **Tracked Metrics:**

    * `input_tokens` → `inputTokens`
    * `output_tokens` → `outputTokens`
    * Calculated `totalTokens`
    * Model name
  </Accordion>

  <Accordion title="Groq" icon="gauge-high">
    Track ultra-fast LLM inference with Groq.

    <CodeGroup>
      ```javascript Groq Integration theme={null}
      import { createLLMTracker } from '@dodopayments/ingestion-blueprints';
      import Groq from 'groq-sdk';

      const groq = new Groq({ apiKey: process.env.GROQ_API_KEY });

      const tracker = createLLMTracker({
        apiKey: process.env.DODO_PAYMENTS_API_KEY,
        environment: 'test_mode',
        eventName: 'groq.usage'
      });

      const client = tracker.wrap({ 
        client: groq, 
        customerId: 'user_123' 
      });

      const response = await client.chat.completions.create({
        model: 'llama-3.1-8b-instant',
        messages: [{ role: 'user', content: 'What is AI?' }]
      });

      console.log('Tokens:', response.usage);
      ```
    </CodeGroup>

    **Tracked Metrics:**

    * `prompt_tokens` → `inputTokens`
    * `completion_tokens` → `outputTokens`
    * `total_tokens` → `totalTokens`
    * Model name
  </Accordion>

  <Accordion title="Google Gemini" icon="sparkles">
    Track token usage from Google's Gemini models via the Google GenAI SDK.

    <CodeGroup>
      ```javascript Google Gemini Integration theme={null}
      import { createLLMTracker } from '@dodopayments/ingestion-blueprints';
      import { GoogleGenAI } from '@google/genai';

      const googleGenai = new GoogleGenAI({ 
        apiKey: process.env.GOOGLE_GENERATIVE_AI_API_KEY 
      });

      const tracker = createLLMTracker({
        apiKey: process.env.DODO_PAYMENTS_API_KEY,
        environment: 'test_mode',
        eventName: 'gemini.usage'
      });

      const client = tracker.wrap({ 
        client: googleGenai, 
        customerId: 'user_123' 
      });

      const response = await client.models.generateContent({
        model: 'gemini-2.5-flash',
        contents: 'Explain quantum computing'
      });

      console.log('Response:', response.text);
      console.log('Usage:', response.usageMetadata);
      ```
    </CodeGroup>

    **Tracked Metrics:**

    * `promptTokenCount` → `inputTokens`
    * `candidatesTokenCount` + `thoughtsTokenCount` → `outputTokens`
    * `totalTokenCount` → `totalTokens`
    * Model version

    <Note>
      **Gemini Thinking Mode:** When using Gemini models with thinking/reasoning capabilities (like Gemini 2.5 Pro), the SDK automatically includes `thoughtsTokenCount` (reasoning tokens) in `outputTokens` to accurately reflect the full computational cost.
    </Note>
  </Accordion>
</AccordionGroup>

***

## Advanced Usage

### Multiple Providers

Track usage across different LLM providers with separate trackers:

<CodeGroup>
  ```javascript Multiple Provider Setup theme={null}
  import { createLLMTracker } from '@dodopayments/ingestion-blueprints';
  import OpenAI from 'openai';
  import Groq from 'groq-sdk';
  import Anthropic from '@anthropic-ai/sdk';
  import { GoogleGenAI } from '@google/genai';

  // Create separate trackers for different providers
  const openaiTracker = createLLMTracker({
    apiKey: process.env.DODO_PAYMENTS_API_KEY,
    environment: 'live_mode',
    eventName: 'openai.usage'
  });

  const groqTracker = createLLMTracker({
    apiKey: process.env.DODO_PAYMENTS_API_KEY,
    environment: 'live_mode',
    eventName: 'groq.usage'
  });

  const anthropicTracker = createLLMTracker({
    apiKey: process.env.DODO_PAYMENTS_API_KEY,
    environment: 'live_mode',
    eventName: 'anthropic.usage'
  });

  const geminiTracker = createLLMTracker({
    apiKey: process.env.DODO_PAYMENTS_API_KEY,
    environment: 'live_mode',
    eventName: 'gemini.usage'
  });

  const openrouterTracker = createLLMTracker({
    apiKey: process.env.DODO_PAYMENTS_API_KEY,
    environment: 'live_mode',
    eventName: 'openrouter.usage'
  });

  // Initialize clients
  const openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY });
  const groq = new Groq({ apiKey: process.env.GROQ_API_KEY });
  const anthropic = new Anthropic({ apiKey: process.env.ANTHROPIC_API_KEY });
  const googleGenai = new GoogleGenAI({ apiKey: process.env.GOOGLE_GENERATIVE_AI_API_KEY });
  const openrouter = new OpenAI({ 
    baseURL: 'https://openrouter.ai/api/v1',
    apiKey: process.env.OPENROUTER_API_KEY 
  });

  // Wrap clients
  const trackedOpenAI = openaiTracker.wrap({ client: openai, customerId: 'user_123' });
  const trackedGroq = groqTracker.wrap({ client: groq, customerId: 'user_123' });
  const trackedAnthropic = anthropicTracker.wrap({ client: anthropic, customerId: 'user_123' });
  const trackedGemini = geminiTracker.wrap({ client: googleGenai, customerId: 'user_123' });
  const trackedOpenRouter = openrouterTracker.wrap({ client: openrouter, customerId: 'user_123' });

  // Use whichever provider you need
  const response = await trackedOpenAI.chat.completions.create({...});
  // or
  const geminiResponse = await trackedGemini.models.generateContent({...});
  // or
  const openrouterResponse = await trackedOpenRouter.chat.completions.create({...});
  ```
</CodeGroup>

<Tip>
  Use different event names for different providers to track usage separately in your meters.
</Tip>

### Express.js API Integration

Complete example of integrating LLM tracking into an Express.js API:

<CodeGroup>
  ```javascript Express.js Server theme={null}
  import express from 'express';
  import { createLLMTracker } from '@dodopayments/ingestion-blueprints';
  import OpenAI from 'openai';

  const app = express();
  app.use(express.json());

  // Initialize OpenAI client
  const openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY });

  // Create tracker once at startup
  const tracker = createLLMTracker({
    apiKey: process.env.DODO_PAYMENTS_API_KEY,
    environment: process.env.NODE_ENV === 'production' ? 'live_mode' : 'test_mode',
    eventName: 'api.chat_completion'
  });

  // Chat endpoint with automatic tracking
  app.post('/api/chat', async (req, res) => {
    try {
      const { message, userId } = req.body;
      
      // Validate input
      if (!message || !userId) {
        return res.status(400).json({ error: 'Missing message or userId' });
      }
      
      // Wrap client for this specific user
      const trackedClient = tracker.wrap({
        client: openai,
        customerId: userId,
        metadata: { 
          endpoint: '/api/chat',
          timestamp: new Date().toISOString()
        }
      });
      
      // Make LLM request - automatically tracked
      const response = await trackedClient.chat.completions.create({
        model: 'gpt-4',
        messages: [{ role: 'user', content: message }],
        temperature: 0.7
      });
      
      const completion = response.choices[0].message.content;
      
      res.json({ 
        message: completion,
        usage: response.usage
      });
    } catch (error) {
      console.error('Chat error:', error);
      res.status(500).json({ error: 'Internal server error' });
    }
  });

  app.listen(3000, () => {
    console.log('Server running on port 3000');
  });
  ```
</CodeGroup>

***

## What Gets Tracked

Every LLM API call automatically sends a usage event to Dodo Payments with the following structure:

<CodeGroup>
  ```json Event Structure theme={null}
  {
    "event_id": "llm_1673123456_abc123",
    "customer_id": "customer_123",
    "event_name": "llm.chat_completion",
    "timestamp": "2024-01-08T10:30:00Z",
    "metadata": {
      "inputTokens": 10,
      "outputTokens": 25,
      "totalTokens": 35,
      "model": "gpt-4",
    }
  }
  ```
</CodeGroup>

### Event Fields

<ParamField path="event_id" type="string">
  Unique identifier for this specific event. Automatically generated by the SDK.

  Format: `llm_[timestamp]_[random]`
</ParamField>

<ParamField path="customer_id" type="string">
  The customer ID you provided when wrapping the client. Used for billing.
</ParamField>

<ParamField path="event_name" type="string">
  The event name that triggers your meter. Matches your tracker configuration.
</ParamField>

<ParamField path="timestamp" type="string">
  ISO 8601 timestamp when the event occurred.
</ParamField>

<ParamField path="metadata" type="object">
  Token usage and additional tracking data:

  * `inputTokens` - Number of input/prompt tokens used
  * `outputTokens` - Number of output/completion tokens used (includes reasoning tokens when applicable)
  * `totalTokens` - Total tokens (input + output)
  * `model` - The LLM model used (e.g., "gpt-4")
  * `provider` - The LLM provider (if included in wrapper metadata)
  * Any custom metadata you provided when wrapping the client

  <Note>
    **Reasoning Tokens:** For models with reasoning capabilities, `outputTokens` automatically includes both the completion tokens and reasoning tokens.
  </Note>
</ParamField>

<Info>
  Your Dodo Payments meter uses the `metadata` fields (especially `inputTokens`, `outputTokens` or `totalTokens`) to calculate usage and billing.
</Info>

***


# Object Storage Blueprint
Source: https://docs.dodopayments.com/developer-resources/ingestion-blueprints/object-storage

Track file uploads and storage usage for S3, Google Cloud Storage, Azure Blob, and other object storage services.

## Use Cases

Explore common scenarios supported by the Object Storage Blueprint:

<CardGroup cols={2}>
  <Card title="File Hosting" icon="folder">
    Bill customers based on total storage usage and upload volume.
  </Card>

  <Card title="Backup Services" icon="shield">
    Track backup data uploads and charge per GB stored.
  </Card>

  <Card title="Media CDN" icon="photo-film">
    Monitor media uploads and bill for storage and bandwidth.
  </Card>

  <Card title="Document Management" icon="file">
    Track document uploads per customer for usage-based pricing.
  </Card>
</CardGroup>

<Info>
  Perfect for billing based on storage uploads, file hosting, CDN usage, or backup services.
</Info>

## Quick Start

Track object storage uploads with bytes consumed:

<Steps>
  <Step title="Install the SDK">
    ```bash  theme={null}
    npm install @dodopayments/ingestion-blueprints
    ```
  </Step>

  <Step title="Get Your API Keys">
    * **Dodo Payments API Key**: Get it from [Dodo Payments Dashboard](https://app.dodopayments.com/developer/api-keys)
    * **Storage Provider API Key**: From AWS S3, Google Cloud Storage, Azure, etc.
  </Step>

  <Step title="Create a Meter">
    Create a meter in your [Dodo Payments Dashboard](https://app.dodopayments.com/):

    * **Event Name**: `object_storage_upload` (or your preferred name)
    * **Aggregation Type**: `sum` to track total bytes uploaded
    * **Over Property**: `bytes` to bill based on storage size
  </Step>

  <Step title="Track Storage Usage">
    <CodeGroup>
      ```javascript AWS S3 Upload theme={null}
      import { Ingestion, trackObjectStorage } from '@dodopayments/ingestion-blueprints';
      import { S3Client, PutObjectCommand } from '@aws-sdk/client-s3';
      import fs from 'fs';

      const ingestion = new Ingestion({
        apiKey: process.env.DODO_PAYMENTS_API_KEY,
        environment: 'test_mode',
        eventName: 'object_storage_upload'
      });

      const s3 = new S3Client({ region: 'us-east-1' });

      // Read the file (example: from disk or request)
      const fileBuffer = fs.readFileSync('./document.pdf');

      // Upload to S3
      const command = new PutObjectCommand({
        Bucket: 'my-bucket',
        Key: 'uploads/document.pdf',
        Body: fileBuffer
      });

      await s3.send(command);

      // Track the upload
      await trackObjectStorage(ingestion, {
        customerId: 'customer_123',
        bytes: fileBuffer.length
      });
      ```

      ```javascript Google Cloud Storage theme={null}
      import { Ingestion, trackObjectStorage } from '@dodopayments/ingestion-blueprints';
      import { Storage } from '@google-cloud/storage';
      import fs from 'fs';

      const ingestion = new Ingestion({
        apiKey: process.env.DODO_PAYMENTS_API_KEY,
        environment: 'test_mode',
        eventName: 'object_storage_upload'
      });

      const storage = new Storage();
      const bucket = storage.bucket('my-bucket');

      // Read the file
      const fileBuffer = fs.readFileSync('./image.png');

      // Upload to GCS
      await bucket.file('uploads/image.png').save(fileBuffer);

      // Track the upload
      await trackObjectStorage(ingestion, {
        customerId: 'customer_456',
        bytes: fileBuffer.length,
        metadata: {
          bucket: 'my-bucket',
          key: 'uploads/image.png'
        }
      });
      ```
    </CodeGroup>
  </Step>
</Steps>

## Configuration

### Ingestion Configuration

<ParamField path="apiKey" type="string" required>
  Your Dodo Payments API key from the dashboard.
</ParamField>

<ParamField path="environment" type="string" required>
  Environment mode: `test_mode` or `live_mode`.
</ParamField>

<ParamField path="eventName" type="string" required>
  Event name that matches your meter configuration.
</ParamField>

### Track Object Storage Options

<ParamField path="customerId" type="string" required>
  The customer ID for billing attribution.
</ParamField>

<ParamField path="bytes" type="number">
  Number of bytes uploaded. Required for byte-based billing.
</ParamField>

<ParamField path="metadata" type="object">
  Optional metadata about the upload like bucket name, content type, etc.
</ParamField>

## Best Practices

<Tip>
  **Track Before or After Upload**: You can track the event before or after the actual upload depending on your error handling strategy.
</Tip>

<Warning>
  **Handle Upload Failures**: Only track successful uploads to avoid billing for failed operations.
</Warning>


# Stream Blueprint
Source: https://docs.dodopayments.com/developer-resources/ingestion-blueprints/stream

Track streaming data consumption for video, audio, live streams, and real-time data transfer billing.

## Use Cases

Explore common scenarios supported by the Stream Blueprint:

<CardGroup cols={2}>
  <Card title="Video Platforms" icon="video">
    Bill customers based on video bandwidth consumption and streaming quality.
  </Card>

  <Card title="Music Streaming" icon="music">
    Track audio streaming usage per user for subscription tiers.
  </Card>

  <Card title="Live Events" icon="signal-stream">
    Monitor live stream consumption and charge for bandwidth usage.
  </Card>

  <Card title="Real-Time Data" icon="wave-pulse">
    Track real-time data transfer for IoT and telemetry applications.
  </Card>
</CardGroup>

<Info>
  Perfect for video/audio streaming platforms, live streaming services, and real-time data applications.
</Info>

## Quick Start

Track streaming bytes consumed by your customers:

<Steps>
  <Step title="Install the SDK">
    ```bash  theme={null}
    npm install @dodopayments/ingestion-blueprints
    ```
  </Step>

  <Step title="Get Your API Keys">
    * **Dodo Payments API Key**: Get it from [Dodo Payments Dashboard](https://app.dodopayments.com/developer/api-keys)
  </Step>

  <Step title="Create a Meter">
    Create a meter in your [Dodo Payments Dashboard](https://app.dodopayments.com/):

    * **Event Name**: `stream_consumption` (or your preferred name)
    * **Aggregation Type**: `sum` to track total bytes streamed
    * **Over Property**: `bytes` to bill based on bandwidth usage
  </Step>

  <Step title="Track Stream Usage">
    <CodeGroup>
      ```javascript Video Streaming theme={null}
      import { Ingestion, trackStreamBytes } from '@dodopayments/ingestion-blueprints';

      const ingestion = new Ingestion({
        apiKey: process.env.DODO_PAYMENTS_API_KEY,
        environment: 'test_mode',
        eventName: 'stream_consumption'
      });

      // Track video stream consumption
      await trackStreamBytes(ingestion, {
        customerId: 'customer_123',
        bytes: 10485760, // 10MB
        metadata: {
          stream_type: 'video',
        }
      });
      ```
    </CodeGroup>
  </Step>
</Steps>

## Configuration

### Ingestion Configuration

<ParamField path="apiKey" type="string" required>
  Your Dodo Payments API key from the dashboard.
</ParamField>

<ParamField path="environment" type="string" required>
  Environment mode: `test_mode` or `live_mode`.
</ParamField>

<ParamField path="eventName" type="string" required>
  Event name that matches your meter configuration.
</ParamField>

### Track Stream Bytes Options

<ParamField path="customerId" type="string" required>
  The customer ID for billing attribution.
</ParamField>

<ParamField path="bytes" type="number">
  Number of bytes consumed in the stream. Required for bandwidth-based billing.
</ParamField>

<ParamField path="metadata" type="object">
  Optional metadata about the stream like stream type, quality, sessionId, etc.
</ParamField>

## Best Practices

<Tip>
  **Track by Chunk**: For long streams, track consumption in chunks rather than waiting for the entire stream to complete.
</Tip>

<Warning>
  **Accurate Byte Counting**: Ensure byte counts include all overhead (headers, protocol overhead) if billing for total bandwidth.
</Warning>


# Time Range Blueprint
Source: https://docs.dodopayments.com/developer-resources/ingestion-blueprints/time-range

Track resource consumption based on elapsed time for compute, serverless functions, containers, and runtime billing.

## Use Cases

Explore common scenarios supported by the Time Range Blueprint:

<CardGroup cols={2}>
  <Card title="Serverless Functions" icon="function">
    Bill based on function execution time and memory usage.
  </Card>

  <Card title="Container Runtime" icon="container-storage">
    Track container running time for usage-based billing.
  </Card>

  <Card title="Compute Instances" icon="server">
    Monitor VM runtime and charge by the minute or hour.
  </Card>

  <Card title="Background Jobs" icon="briefcase">
    Track processing time for data exports, reports, and batch jobs.
  </Card>
</CardGroup>

<Info>
  Perfect for billing based on compute time, function execution duration, container runtime, or any time-based usage.
</Info>

## Quick Start

Track resource usage by time duration:

<Steps>
  <Step title="Install the SDK">
    ```bash  theme={null}
    npm install @dodopayments/ingestion-blueprints
    ```
  </Step>

  <Step title="Get Your API Keys">
    * **Dodo Payments API Key**: Get it from [Dodo Payments Dashboard](https://app.dodopayments.com/developer/api-keys)
  </Step>

  <Step title="Create a Meter">
    Create a meter in your [Dodo Payments Dashboard](https://app.dodopayments.com/):

    * **Event Name**: `time_range_usage` (or your preferred name)
    * **Aggregation Type**: `sum` to track total duration
    * **Over Property**: `durationSeconds`, `durationMinutes`, or `durationMs`
  </Step>

  <Step title="Track Time Usage">
    <CodeGroup>
      ```javascript Serverless Functions theme={null}
      import { Ingestion, trackTimeRange } from '@dodopayments/ingestion-blueprints';

      const ingestion = new Ingestion({
        apiKey: process.env.DODO_PAYMENTS_API_KEY,
        environment: 'test_mode',
        eventName: 'function_execution'
      });

      // Track function execution time
      const startTime = Date.now();

      // Execute your function (example: image processing)
      const result = await yourImageProcessingLogic();

      const durationMs = Date.now() - startTime;

      await trackTimeRange(ingestion, {
        customerId: 'customer_123',
        durationMs: durationMs
      });
      ```

      ```javascript Container Runtime theme={null}
      import { Ingestion, trackTimeRange } from '@dodopayments/ingestion-blueprints';

      const ingestion = new Ingestion({
        apiKey: process.env.DODO_PAYMENTS_API_KEY,
        environment: 'test_mode',
        eventName: 'container_runtime'
      });

      // Track container runtime in seconds
      await trackTimeRange(ingestion, {
        customerId: 'customer_456',
        durationSeconds: 120
      });
      ```

      ```javascript VM Instance Runtime theme={null}
      import { Ingestion, trackTimeRange } from '@dodopayments/ingestion-blueprints';

      const ingestion = new Ingestion({
        apiKey: process.env.DODO_PAYMENTS_API_KEY,
        environment: 'test_mode',
        eventName: 'vm_runtime'
      });

      // Track VM runtime in minutes
      await trackTimeRange(ingestion, {
        customerId: 'customer_789',
        durationMinutes: 60
      });
      ```
    </CodeGroup>
  </Step>
</Steps>

## Configuration

### Ingestion Configuration

<ParamField path="apiKey" type="string" required>
  Your Dodo Payments API key from the dashboard.
</ParamField>

<ParamField path="environment" type="string" required>
  Environment mode: `test_mode` or `live_mode`.
</ParamField>

<ParamField path="eventName" type="string" required>
  Event name that matches your meter configuration.
</ParamField>

### Track Time Range Options

<ParamField path="customerId" type="string" required>
  The customer ID for billing attribution.
</ParamField>

<ParamField path="durationMs" type="number">
  Duration in milliseconds. Use for sub-second precision.
</ParamField>

<ParamField path="durationSeconds" type="number">
  Duration in seconds. Most common for function execution and short tasks.
</ParamField>

<ParamField path="durationMinutes" type="number">
  Duration in minutes. Useful for longer-running resources like VMs.
</ParamField>

<ParamField path="metadata" type="object">
  Optional metadata about the resource like CPU, memory, region, etc.
</ParamField>

## Best Practices

<Tip>
  **Choose the Right Unit**: Use milliseconds for short operations, seconds for functions, and minutes for longer-running resources.
</Tip>

<Warning>
  **Accurate Timing**: Use `Date.now()` or `performance.now()` for accurate time tracking, especially for serverless functions.
</Warning>


# One-time Payments Integration Guide
Source: https://docs.dodopayments.com/developer-resources/integration-guide

This guide will help you integrate the Dodo Payments API into your website.

## Prerequisites

To integrate the Dodo Payments API, you'll need:

* A Dodo Payments merchant account
* API Credentials (API key and webhook secret key) from dashboard

## Dashboard Setup

1. Navigate to the [Dodo Payments Dashboard](https://app.dodopayments.com/)

2. Create a product (one-time payment or subscription)

3. Generate your API key:
   * Go to Developer > API
   * [Detailed Guide](/api-reference/introduction#api-key-generation)
   * Copy the API key the in env named DODO\_PAYMENTS\_API\_KEY

4. Configure webhooks:
   * Go to Developer > Webhooks
   * Create a webhook URL for payment notifications
   * Copy the webhook secret key in env

## Integration

### Payment Links

Choose the integration path that fits your use case:

* **Checkout Sessions (recommended)**: Best for most integrations. Create a session on your server and redirect customers to a secure, hosted checkout.
* **Overlay Checkout (embedded)**: Use when you need an in-page experience that embeds the hosted checkout on your site.
* **Static Payment Links**: No-code, instantly shareable URLs for quick payment collection.
* **Dynamic Payment Links**: Programmatically created links. However, Checkout Sessions are recommended and provide more flexibility.

#### 1. Checkout Sessions

Use Checkout Sessions to create a secure, hosted checkout experience for one-time payments or subscriptions. You create a session on your server, then redirect the customer to the returned `checkout_url`.

<Info>
  Checkout sessions are valid for 24 hours by default. If you pass <code>confirm=true</code>, sessions are valid for 15 minutes and all required fields must be provided.
</Info>

<Steps>
  <Step title="Create a checkout session">
    Choose your preferred SDK or call the REST API.

    <Tabs>
      <Tab title="Node.js SDK">
        ```javascript  theme={null}
        import DodoPayments from 'dodopayments';

        const client = new DodoPayments({
          bearerToken: process.env.DODO_PAYMENTS_API_KEY,
        });

        const session = await client.checkoutSessions.create({
          product_cart: [{ product_id: 'prod_123', quantity: 1 }],
          customer: { email: 'customer@example.com', name: 'John Doe' },
          return_url: 'https://yourapp.com/checkout/success',
        });
        ```
      </Tab>

      <Tab title="Python SDK">
        ```python  theme={null}
        import os
        from dodopayments import DodoPayments

        client = DodoPayments(bearer_token=os.environ.get("DODO_PAYMENTS_API_KEY"))

        session = client.checkout_sessions.create(
            product_cart=[{"product_id": "prod_123", "quantity": 1}],
            customer={"email": "customer@example.com", "name": "John Doe"},
            return_url="https://yourapp.com/checkout/success",
        )
        ```
      </Tab>

      <Tab title="REST API">
        ```javascript  theme={null}
        const response = await fetch('https://test.dodopayments.com/checkouts', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${process.env.DODO_PAYMENTS_API_KEY}`,
          },
          body: JSON.stringify({
            product_cart: [{ product_id: 'prod_123', quantity: 1 }],
            customer: { email: 'customer@example.com', name: 'John Doe' },
            return_url: 'https://yourapp.com/checkout/success',
          }),
        });
        const session = await response.json();
        ```
      </Tab>
    </Tabs>
  </Step>

  <Step title="Redirect customer to checkout">
    After session creation, redirect to the `checkout_url` to start the hosted flow.

    ```javascript  theme={null}
    // Example in a browser context
    window.location.href = session.checkout_url;
    ```
  </Step>
</Steps>

<Tip>
  Prefer Checkout Sessions for the fastest, most reliable way to start taking payments. For advanced customization, see the full <a href="/developer-resources/checkout-session">Checkout Sessions guide</a> and the <a href="/api-reference/checkout-sessions/create">API Reference</a>.
</Tip>

#### 2. Overlay Checkout

For a seamless in-page checkout experience, explore our [Overlay Checkout](/developer-resources/overlay-checkout) integration that allows customers to complete payments without leaving your website.

#### 3. Static Payment Links

Static payment links let you quickly accept payments by sharing a simple URL. You can customize the checkout experience by passing query parameters to pre-fill customer details, control form fields, and add custom metadata.

<Steps>
  <Step title="Construct your payment link">
    Start with the base URL and append your product ID:

    ```text  theme={null}
    https://checkout.dodopayments.com/buy/{productid}
    ```
  </Step>

  <Step title="Add core parameters">
    Include essential query parameters:

    * <ParamField query="quantity" type="integer" default="1">Number of items to purchase.</ParamField>
    * <ParamField query="redirect_url" type="string" required>URL to redirect after payment completion.</ParamField>

    <Note>
      The redirect URL will include payment details as query parameters, for example:<br />
      <code>[https://example.com/?payment\_id=pay\_ts2ySpzg07phGeBZqePbH\&status=succeeded](https://example.com/?payment_id=pay_ts2ySpzg07phGeBZqePbH\&status=succeeded)</code>
    </Note>
  </Step>

  <Step title="Pre-fill customer information (optional)">
    Add customer or billing fields as query parameters to streamline checkout.

    <AccordionGroup>
      <Accordion title="Supported Customer Fields">
        * <ParamField query="fullName" type="string">Customer's full name (ignored if firstName or lastName is provided).</ParamField>
        * <ParamField query="firstName" type="string">Customer's first name.</ParamField>
        * <ParamField query="lastName" type="string">Customer's last name.</ParamField>
        * <ParamField query="email" type="string">Customer's email address.</ParamField>
        * <ParamField query="country" type="string">Customer's country.</ParamField>
        * <ParamField query="addressLine" type="string">Street address.</ParamField>
        * <ParamField query="city" type="string">City.</ParamField>
        * <ParamField query="state" type="string">State or province.</ParamField>
        * <ParamField query="zipCode" type="string">Postal/ZIP code.</ParamField>
        * <ParamField query="showDiscounts" type="boolean">true or false</ParamField>
      </Accordion>
    </AccordionGroup>
  </Step>

  <Step title="Control form fields (optional)">
    <Info>
      You can disable specific fields to make them read-only for the customer. This is useful when you already have the customer's details (e.g., logged-in users).
    </Info>

    To disable a field, provide its value and set the corresponding <code>disable...</code> flag to <code>true</code>:

    <CodeGroup>
      ```text Example theme={null}
      &email=alice@example.com&disableEmail=true
      ```
    </CodeGroup>

    <Tabs>
      <Tab title="Disable Flags Table">
        | Field        | Disable Flag         | Required Parameter |
        | ------------ | -------------------- | ------------------ |
        | Full Name    | `disableFullName`    | `fullName`         |
        | First Name   | `disableFirstName`   | `firstName`        |
        | Last Name    | `disableLastName`    | `lastName`         |
        | Email        | `disableEmail`       | `email`            |
        | Country      | `disableCountry`     | `country`          |
        | Address Line | `disableAddressLine` | `addressLine`      |
        | City         | `disableCity`        | `city`             |
        | State        | `disableState`       | `state`            |
        | ZIP Code     | `disableZipCode`     | `zipCode`          |
      </Tab>
    </Tabs>

    <Tip>
      Disabling fields helps prevent accidental changes and ensures data consistency.
    </Tip>

    <Note>
      Setting <code>showDiscounts=false</code> will disable and hide the discounts section in the checkout form. Use this if you want to prevent customers from entering coupon or promo codes during checkout.
    </Note>
  </Step>

  <Step title="Add advanced controls (optional)">
    * <ParamField query="paymentCurrency" type="string">Specifies the payment currency. Defaults to the billing country's currency.</ParamField>
    * <ParamField query="showCurrencySelector" type="boolean" default="true">Show or hide the currency selector.</ParamField>
    * <ParamField query="paymentAmount" type="integer">Amount in cents (for Pay What You Want pricing only).</ParamField>
    * <ParamField query="metadata_*" type="string">Custom metadata fields (e.g., <code>metadata\_orderId=123</code>).</ParamField>
  </Step>

  <Step title="Share the link">
    Send the completed payment link to your customer. When they visit, all query parameters are collected and stored with a session ID. The URL is then simplified to include just the session parameter (e.g., <code>?session=sess\_1a2b3c4d</code>). The stored information persists through page refreshes and is accessible throughout the checkout process.

    <Check>
      The customer's checkout experience is now streamlined and personalized based on your parameters.
    </Check>
  </Step>
</Steps>

#### 4. Dynamic Payment Links

<Tip>
  Prefer Checkout Sessions for most use cases, they offer more flexibility and control.
</Tip>

Created via API call or our SDK with customer details. Here's an example:

There are two APIs for creating dynamic payment links:

* One-time Payment Link API [API reference](/api-reference/payments/post-payments)
* Subscription Payment Link API [API reference](/api-reference/subscriptions/post-subscriptions)

The guide below is for one-time payment link creation.

For detailed instructions on integrating subscriptions, refer to this [Subscription Integration Guide](/developer-resources/subscription-integration-guide).

<Info>Make sure you are passing `payment_link = true` to get payment link </Info>

<Tabs>
  <Tab title="Node.js SDK">
    ```javascript  theme={null}
    import DodoPayments from 'dodopayments';

    const client = new DodoPayments({
    bearerToken: process.env['DODO_PAYMENTS_API_KEY'], // This is the default and can be omitted
    });

    async function main() {
    const payment = await client.payments.create({
    payment_link: true,
    billing: { city: 'city', country: 'AF', state: 'state', street: 'street', zipcode: 0 },
    customer: { email: 'email@email.com', name: 'name' },
    product_cart: [{ product_id: 'product_id', quantity: 0 }],
    });

    console.log(payment.payment_id);
    }

    main();
    ```
  </Tab>

  <Tab title="Python SDK">
    ```python  theme={null}
    import os
    from dodopayments import DodoPayments

    client = DodoPayments(
    bearer_token=os.environ.get("DODO_PAYMENTS_API_KEY"),  # This is the default and can be omitted (if using same name `DODO_PAYMENTS_API_KEY`)
    )
    payment = client.payments.create(
    payment_link=True,
    billing={
        "city": "city",
        "country": "AF",
        "state": "state",
        "street": "street",
        "zipcode": 0,
    },
    customer={
        "email": "email@email.com",
        "name": "name",
    },
    product_cart=[{
        "product_id": "product_id",
        "quantity": 0,
    }],
    )
    print(payment.payment_link)
    ```
  </Tab>

  <Tab title="Go SDK">
    ```go  theme={null}
    package main

    import (
    "context"
    "fmt"

    "github.com/dodopayments/dodopayments-go"
    "github.com/dodopayments/dodopayments-go/option"
    )

    func main() {
    client := dodopayments.NewClient(
    option.WithBearerToken("My Bearer Token"), // defaults to os.LookupEnv("DODO_PAYMENTS_API_KEY")
    )
    payment, err := client.Payments.New(context.TODO(), dodopayments.PaymentNewParams{
    PaymentLink: dodopayments.F(true),
    Billing: dodopayments.F(dodopayments.PaymentNewParamsBilling{
      City: dodopayments.F("city"),
      Country: dodopayments.F(dodopayments.CountryCodeAf),
      State: dodopayments.F("state"),
      Street: dodopayments.F("street"),
      Zipcode: dodopayments.F(int64(0)),
    }),
    Customer: dodopayments.F(dodopayments.PaymentNewParamsCustomer{
      Email: dodopayments.F("email"),
      Name: dodopayments.F("name"),
    }),
    ProductCart: dodopayments.F([]dodopayments.PaymentNewParamsProductCart{dodopayments.PaymentNewParamsProductCart{
      ProductID: dodopayments.F("product_id"),
      Quantity: dodopayments.F(int64(0)),
    }}),
    })
    if err != nil {
    panic(err.Error())
    }
    fmt.Printf("%+v\n", payment.PaymentLink)
    }

    ```
  </Tab>

  <Tab title="Api Reference">
    ```javascript  theme={null}
    import { NextRequest, NextResponse } from "next/server";      

    export async function POST(request: NextRequest) {
    try {
    const body = await request.json();
    const { formData, cartItems } = paymentRequestSchema.parse(body);

    const response = await fetch(`${process.env.NEXT_PUBLIC_DODO_TEST_API}/payments`, {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        Authorization: `Bearer ${process.env.DODO_API_KEY}`, // Replace with your API secret key generated from the Dodo Payments Dashboard
      },
      body: JSON.stringify({
        billing: {
          city: formData.city,
          country: formData.country,
          state: formData.state,
          street: formData.addressLine,
          zipcode: parseInt(formData.zipCode),
        },
        customer: {
          email: formData.email,
          name: `${formData.firstName} ${formData.lastName}`,
          phone_number: formData.phoneNumber || undefined,
        },
        payment_link: true,
        product_cart: cartItems.map((id) => ({
          product_id: id,
          quantity: 1,
        })),
        return_url: process.env.NEXT_PUBLIC_RETURN_URL,
      }),
    });

    if (!response.ok) {
      const errorData = await response.json().catch(() => null);
      return NextResponse.json(
        { error: "Payment link creation failed", details: errorData },
        { status: response.status }
      );
    }

    const data = await response.json();
    return NextResponse.json({ paymentLink: data.payment_link });
    } catch (err) {
    console.error("Payment error:", err);
    return NextResponse.json(
      {
        error: err instanceof Error ? err.message : "An unknown error occurred",
      },
      { status: 500 }
    );
    }
    }
    ```
  </Tab>
</Tabs>

<Info>After creating the payment link, redirect your customers to complete their payment.</Info>

### Implementing Webhooks

Set up an API endpoint to receive payment notifications. Here's an example using Next.js:

```javascript  theme={null}
import { Webhook } from "standardwebhooks";
import { headers } from "next/headers";
import { WebhookPayload } from "@/types/api-types";

const webhook = new Webhook(process.env.DODO_WEBHOOK_KEY!); // Replace with your secret key generated from the Dodo Payments Dashboard

export async function POST(request: Request) {
  const headersList = headers();
  const rawBody = await request.text();

  const webhookHeaders = {
    "webhook-id": headersList.get("webhook-id") || "",
    "webhook-signature": headersList.get("webhook-signature") || "",
    "webhook-timestamp": headersList.get("webhook-timestamp") || "",
  };

  await webhook.verify(rawBody, webhookHeaders);
  const payload = JSON.parse(rawBody) as WebhookPayload;
  
  // Process the payload according to your business logic
}
```

Our webhook implementation follows the [Standard Webhooks](https://standardwebhooks.com/) specification. For webhook type definitions, refer to our [Webhook Event Guide](/developer-resources/webhooks/intents/webhook-events-guide).

You can refer to this project with demo implementation on [GitHub](https://github.com/dodopayments/dodo-checkout-demo) using Next.js and TypeScript.

You can check out the live implementation [here](https://atlas.dodopayments.com/).


# MCP Server
Source: https://docs.dodopayments.com/developer-resources/mcp-server

Enable AI assistants to interact with the Dodo Payments API through the Model Context Protocol (MCP) for seamless payment operations, subscription management, and customer interactions.

## Overview

The Model Context Protocol (MCP) is an open standard that enables AI applications to securely connect to external data sources and APIs. The Dodo Payments MCP Server provides AI assistants like Claude, Cursor, and other MCP-compatible clients with structured access to your payment infrastructure.

### Key capabilities

* **Payment Operations**: Create, retrieve, and manage payments and refunds
* **Subscription Management**: Handle recurring billing, upgrades, and cancellations
* **Customer Administration**: Manage customer data and portal access
* **Product Catalog**: Create and update products, pricing, and discounts
* **License Management**: Activate, validate, and manage software licenses
* **Usage-Based Billing**: Track and bill for metered usage

## Installation

Choose the installation method that best fits your workflow.

### Remote MCP Server (Recommended)

Access the hosted MCP server without any local setup or installation. This is the fastest way to get started.

<Frame>
  <iframe className="w-full aspect-video rounded-md" src="https://www.youtube.com/embed/TxGgYxNmkT4" title="Using Dodo Payment's Remote MCP Server" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen />
</Frame>

<Steps>
  <Step title="Access the remote server">
    Navigate to [https://mcp.dodopayments.com](https://mcp.dodopayments.com) in your browser.
  </Step>

  <Step title="Configure your MCP client">
    Copy the provided JSON configuration for your specific client. For Cursor or Claude Desktop, add this to your MCP settings:

    ```json  theme={null}
    {
      "mcpServers": {
        "dodopayments_api": {
          "command": "npx",
          "args": ["-y", "mcp-remote@latest", "https://mcp.dodopayments.com/sse"]
        }
      }
    }
    ```
  </Step>

  <Step title="Authenticate and configure">
    The OAuth flow will prompt you to:

    * Enter your Dodo Payments API key
    * Select your environment (test or live)
    * Choose your MCP client type

    <Warning>
      Keep your API key secure. Use test mode keys during development.
    </Warning>
  </Step>

  <Step title="Complete setup">
    Click **Login and Approve** to authorize the connection.

    <Check>
      Once connected, your AI assistant can interact with the Dodo Payments API on your behalf.
    </Check>
  </Step>
</Steps>

### NPM Package

Install and run the MCP server locally using NPM.

<Tabs>
  <Tab title="NPX (No Installation)">
    ```bash  theme={null}
    # Set your API key
    export DODO_PAYMENTS_API_KEY="dodo_test_..."

    # Run the latest version
    npx -y dodopayments-mcp@latest
    ```
  </Tab>

  <Tab title="MCP Client Configuration">
    ```json  theme={null}
    {
      "mcpServers": {
        "dodopayments_api": {
          "command": "npx",
          "args": ["-y", "dodopayments-mcp@latest"],
          "env": {
            "DODO_PAYMENTS_API_KEY": "dodo_test_..."
          }
        }
      }
    }
    ```
  </Tab>
</Tabs>

<Tip>
  Use `@latest` to always pull the most recent version, or pin to a specific version like `@1.0.0` for stability.
</Tip>

### Docker

Run the MCP server in a containerized environment for consistent deployment.

<CodeGroup>
  ```bash Docker theme={null}
  # Pull the latest image
  docker pull ghcr.io/dodopayments/mcp:latest

  # Run the container
  docker run -e DODO_PAYMENTS_API_KEY="dodo_test_..." \
    -p 3000:3000 \
    ghcr.io/dodopayments/mcp:latest
  ```

  ```yaml Docker Compose theme={null}
  services:
    dodopayments-mcp:
      image: ghcr.io/dodopayments/mcp:latest
      environment:
        - DODO_PAYMENTS_API_KEY=dodo_test_...
      ports:
        - "3000:3000"
      restart: unless-stopped
  ```
</CodeGroup>

<Note>
  Docker images are available on [GitHub Container Registry](https://github.com/orgs/dodopayments/packages/container/package/mcp).
</Note>

## Client Configuration

Configure the Dodo Payments MCP server in your preferred AI client.

<Tabs>
  <Tab title="Cursor">
    Set up the Dodo Payments MCP server in Cursor to enable conversational access to your payments data.

    <Steps>
      <Step title="Open Cursor settings">
        Navigate to **Cursor Settings** > **Features** > **Model Context Protocol** or press `Cmd/Ctrl + Shift + P` and search for "MCP Settings".
      </Step>

      <Step title="Edit configuration">
        Click **Edit Config** to open the `mcp_config.json` file.
      </Step>

      <Step title="Add Dodo Payments configuration">
        Choose one of the following configurations:

        **Remote Server (Recommended)**

        ```json  theme={null}
        {
          "mcpServers": {
            "dodopayments": {
              "command": "npx",
              "args": ["-y", "mcp-remote@latest", "https://mcp.dodopayments.com/sse"]
            }
          }
        }
        ```

        **Local NPX**

        ```json  theme={null}
        {
          "mcpServers": {
            "dodopayments": {
              "command": "npx",
              "args": ["-y", "dodopayments-mcp@latest"],
              "env": {
                "DODO_PAYMENTS_API_KEY": "dodo_test_..."
              }
            }
          }
        }
        ```
      </Step>

      <Step title="Save and restart">
        Save the configuration file and restart Cursor.

        <Check>
          Verify the connection by asking the AI assistant about your Dodo Payments data.
        </Check>
      </Step>
    </Steps>
  </Tab>

  <Tab title="Claude Desktop">
    Set up the Dodo Payments MCP server in Claude Desktop to enable conversational access to your payments data.

    <Steps>
      <Step title="Locate configuration file">
        Find the Claude Desktop configuration file:

        * **macOS**: `~/Library/Application Support/Claude/claude_desktop_config.json`
        * **Windows**: `%APPDATA%\Claude\claude_desktop_config.json`
        * **Linux**: `~/.config/Claude/claude_desktop_config.json`
      </Step>

      <Step title="Edit configuration">
        Open the file in a text editor and add the Dodo Payments configuration:

        **Remote Server (Recommended)**

        ```json  theme={null}
        {
          "mcpServers": {
            "dodopayments": {
              "command": "npx",
              "args": ["-y", "mcp-remote@latest", "https://mcp.dodopayments.com/sse"]
            }
          }
        }
        ```

        **Local NPX**

        ```json  theme={null}
        {
          "mcpServers": {
            "dodopayments": {
              "command": "npx",
              "args": ["-y", "dodopayments-mcp@latest"],
              "env": {
                "DODO_PAYMENTS_API_KEY": "dodo_test_..."
              }
            }
          }
        }
        ```
      </Step>

      <Step title="Restart Claude Desktop">
        Close and reopen Claude Desktop for the changes to take effect.

        <Tip>
          Look for the 🔌 icon in Claude Desktop to confirm the MCP server is connected.
        </Tip>
      </Step>
    </Steps>
  </Tab>

  <Tab title="Cline (VS Code)">
    Set up the Dodo Payments MCP server in Cline (VS Code) to enable conversational access to your payments data.

    <Steps>
      <Step title="Open Cline settings">
        Locate the Cline configuration file:

        * **macOS**: `~/Library/Application Support/Code/User/globalStorage/saoudrizwan.claude-dev/settings/cline_mcp_settings.json`
        * **Windows**: `%APPDATA%\Code\User\globalStorage\saoudrizwan.claude-dev\settings\cline_mcp_settings.json`
        * **Linux**: `~/.config/Code/User/globalStorage/saoudrizwan.claude-dev/settings/cline_mcp_settings.json`
      </Step>

      <Step title="Configure MCP server">
        Add the Dodo Payments MCP server configuration:

        ```json  theme={null}
        {
          "mcpServers": {
            "dodopayments": {
              "command": "npx",
              "args": ["-y", "dodopayments-mcp@latest"],
              "env": {
                "DODO_PAYMENTS_API_KEY": "dodo_test_..."
              }
            }
          }
        }
        ```
      </Step>

      <Step title="Reload VS Code">
        Reload the VS Code window (`Cmd/Ctrl + Shift + P` > "Reload Window") to activate the MCP server connection.
      </Step>
    </Steps>
  </Tab>

  <Tab title="Zed">
    Set up the Dodo Payments MCP server in Zed to enable conversational access to your payments data.

    <Steps>
      <Step title="Open Zed settings">
        Navigate to **Settings** > **Assistant** > **Model Context Protocol**.
      </Step>

      <Step title="Add server configuration">
        Add the following configuration:

        ```json  theme={null}
        {
          "mcpServers": {
            "dodopayments": {
              "command": "npx",
              "args": ["-y", "dodopayments-mcp@latest"],
              "env": {
                "DODO_PAYMENTS_API_KEY": "dodo_test_..."
              }
            }
          }
        }
        ```
      </Step>

      <Step title="Save and verify">
        Save the configuration. The MCP server should now be available in Zed's AI assistant.
      </Step>
    </Steps>
  </Tab>

  <Tab title="Other Clients">
    Set up the Dodo Payments MCP server in other MCP-compatible clients to enable conversational access to your payments data.

    **Remote Server (Recommended)**

    ```json  theme={null}
    {
      "mcpServers": {
        "dodopayments": {
          "command": "npx",
          "args": ["-y", "mcp-remote@latest", "https://mcp.dodopayments.com/sse"]
        }
      }
    }
    ```

    **Local NPX**

    ```json  theme={null}
    {
      "mcpServers": {
        "dodopayments": {
          "command": "npx",
          "args": ["-y", "dodopayments-mcp@latest"],
          "env": {
            "DODO_PAYMENTS_API_KEY": "dodo_test_..."
          }
        }
      }
    }
    ```

    <Info>
      Visit [modelcontextprotocol.io/clients](https://modelcontextprotocol.io/clients) for a complete list of MCP-compatible clients and their configuration methods.
    </Info>
  </Tab>
</Tabs>

## Tool Filtering

Control which API operations are exposed to your AI assistant to optimize performance and maintain security.

### Filter by operation type

Restrict access to read-only or write operations.

```bash  theme={null}
# Only expose read operations (GET requests)
npx dodopayments-mcp --operation=read

# Only expose write operations (POST, PUT, DELETE)
npx dodopayments-mcp --operation=write
```

<Tip>
  Use `--operation=read` during development to prevent accidental modifications to your data.
</Tip>

### Filter by resource

Limit tools to specific API resources.

```bash  theme={null}
# Only expose payment-related tools
npx dodopayments-mcp --resource=payments

# Expose multiple resources
npx dodopayments-mcp --resource=payments --resource=customers
```

### Include or exclude specific tools

Fine-tune which individual tools are available.

```bash  theme={null}
# Include only specific tools
npx dodopayments-mcp --tool=create_payments --tool=list_payments

# Exclude specific tools
npx dodopayments-mcp --no-tool=delete_products

# List all available tools
npx dodopayments-mcp --list
```

### Combine filters

Apply multiple filters simultaneously for precise control.

```bash  theme={null}
# Only payment and subscription read operations
npx dodopayments-mcp --operation=read --resource=payments --resource=subscriptions
```

## Advanced Usage

### Programmatic integration

Build custom MCP servers or extend the existing one programmatically.

```javascript  theme={null}
import { server, endpoints, init } from "dodopayments-mcp/server";
import { StdioServerTransport } from "@modelcontextprotocol/sdk/server/stdio.js";

// Initialize with all default endpoints
init({ server, endpoints });

// Start the server
const transport = new StdioServerTransport();
await server.connect(transport);
```

### Custom tool development

Extend the MCP server with your own tools and business logic.

```javascript  theme={null}
import { server, init } from "dodopayments-mcp/server";
import createPayments from "dodopayments-mcp/tools/payments/create-payments";
import { zodToJsonSchema } from "zod-to-json-schema";
import { z } from "zod";

// Define a custom tool
const customTool = {
  tool: {
    name: 'calculate_payment_total',
    description: 'Calculate payment total with tax and fees',
    inputSchema: zodToJsonSchema(
      z.object({
        amount: z.number().describe('Base amount in cents'),
        tax_rate: z.number().describe('Tax rate as decimal'),
      })
    ),
  },
  handler: async (client, args) => {
    const total = args.amount * (1 + args.tax_rate);
    return {
      content: [{
        type: 'text',
        text: JSON.stringify({ total, currency: 'usd' }),
      }],
    };
  },
};

// Initialize with custom tools
init({ 
  server, 
  endpoints: [createPayments, customTool] 
});
```

## Security Best Practices

Protect your API credentials and maintain secure integrations.

<AccordionGroup>
  <Accordion title="API Key Management">
    **Never commit credentials to version control**

    Store API keys in environment variables or secure secret management systems.

    ```bash  theme={null}
    # Use environment variables
    export DODO_PAYMENTS_API_KEY="dodo_test_..."

    # Use a .env file (add to .gitignore)
    echo "DODO_PAYMENTS_API_KEY=dodo_test_..." > .env
    ```

    **Rotate keys regularly**

    Generate new API keys periodically and revoke old ones through your Dodo Payments dashboard.

    **Use test keys for development**

    Always use test mode API keys during development to avoid affecting production data.
  </Accordion>

  <Accordion title="Access Control">
    **Apply tool filtering in production**

    Limit exposed operations to only what your AI assistant needs.

    ```bash  theme={null}
    # Production: read-only access
    npx dodopayments-mcp --operation=read

    # Development: full access
    npx dodopayments-mcp
    ```

    **Implement authentication for custom endpoints**

    Validate requests and enforce authorization in your custom tool handlers.

    **Monitor API usage**

    Track MCP server activity through your Dodo Payments dashboard and set up alerts for unusual patterns.
  </Accordion>

  <Accordion title="Network Security">
    **Use HTTPS for remote servers**

    Always deploy remote MCP servers behind HTTPS endpoints.

    **Implement rate limiting**

    Protect against abuse by implementing rate limits at both the MCP server and API levels.

    **Restrict network access**

    Configure firewall rules to limit which clients can connect to your MCP server.
  </Accordion>
</AccordionGroup>

## Troubleshooting

<AccordionGroup>
  <Accordion title="Connection issues">
    **Verify your API key**

    Ensure your API key is correctly set and has the necessary permissions.

    ```bash  theme={null}
    # Test your API key
    curl -H "Authorization: Bearer dodo_test_..." \
      https://api.dodopayments.com/payments
    ```

    **Check your network connection**

    Verify you can reach the Dodo Payments API endpoints.

    **Review client logs**

    Enable verbose logging in your MCP client to diagnose connection problems.
  </Accordion>

  <Accordion title="Authentication errors">
    **Confirm API key environment**

    Ensure you're using test keys with test endpoints and live keys with production endpoints.

    **Check key permissions**

    Verify your API key has permissions for the operations you're attempting.

    **Regenerate credentials**

    If issues persist, generate a new API key through your dashboard.
  </Accordion>

  <Accordion title="Tool execution failures">
    **Validate input parameters**

    Ensure the AI assistant is providing correctly formatted parameters for each tool.

    **Review error messages**

    Check the error response from the API for specific guidance on what went wrong.

    **Test with API directly**

    Verify the operation works when calling the Dodo Payments API directly via curl or Postman.
  </Accordion>
</AccordionGroup>

## Resources

<CardGroup cols={2}>
  <Card title="API Reference" icon="book" href="/api-reference/introduction">
    Explore the complete Dodo Payments API documentation
  </Card>

  <Card title="MCP Protocol" icon="link" href="https://modelcontextprotocol.io">
    Learn more about the Model Context Protocol standard
  </Card>
</CardGroup>


# Mobile Integration Guide
Source: https://docs.dodopayments.com/developer-resources/mobile-integration

Unified guide for integrating Dodo Payments into Android, iOS, React Native and Flutter mobile applications.

<CardGroup cols={2}>
  <Card title="Quick Start" icon="rocket" href="#integration-workflow">
    Get your mobile payment integration running in 4 simple steps
  </Card>

  <Card title="Platform Examples" icon="code" href="#platform-specific-integration">
    Complete code examples for Android, iOS, React Native, and Flutter
  </Card>
</CardGroup>

## Prerequisites

Before integrating Dodo Payments into your mobile app, ensure you have:

* **Dodo Payments Account**: Active merchant account with API access
* **API Credentials**: API key and webhook secret key from your dashboard
* **Mobile App Project**: Android, iOS, React Native, or Flutter application
* **Backend Server**: To securely handle checkout session creation

## Integration Workflow

The mobile integration follows a secure 4-step process where your backend handles API calls and your mobile app manages the user experience.

<Steps>
  <Step title="Backend: Create Checkout Session">
    <Card title="Checkout Session API Docs" icon="book" href="/developer-resources/checkout-session">
      Learn how to create a checkout session in your backend using Node.js, Python, and more. See complete examples and parameter references in the dedicated <strong>Checkout Sessions API</strong> documentation.
    </Card>

    <Note>
      **Security**: Checkout sessions must be created on your backend server, never in the mobile app. This protects your API keys and ensures proper validation.
    </Note>
  </Step>

  <Step title="Mobile: Get Checkout URL">
    Your mobile app calls your backend to get the checkout URL:

    <Tabs>
      <Tab title="iOS (Swift)">
        ```swift  theme={null}
        func getCheckoutURL(productId: String, customerEmail: String, customerName: String) async throws -> String {
            let url = URL(string: "https://your-backend.com/api/create-checkout-session")!
            var request = URLRequest(url: url)
            request.httpMethod = "POST"
            request.setValue("application/json", forHTTPHeaderField: "Content-Type")
            
            let requestData: [String: Any] = [
                "productId": productId,
                "customerEmail": customerEmail,
                "customerName": customerName
            ]
            request.httpBody = try JSONSerialization.data(withJSONObject: requestData)
            
            let (data, _) = try await URLSession.shared.data(for: request)
            let response = try JSONDecoder().decode(CheckoutResponse.self, from: data)
            return response.checkout_url
        }
        ```
      </Tab>

      <Tab title="Android (Kotlin)">
        ```kotlin  theme={null}
        suspend fun getCheckoutURL(productId: String, customerEmail: String, customerName: String): String {
            val client = OkHttpClient()
            val requestBody = JSONObject().apply {
                put("productId", productId)
                put("customerEmail", customerEmail)
                put("customerName", customerName)
            }.toString().toRequestBody("application/json".toMediaType())
            
            val request = Request.Builder()
                .url("https://your-backend.com/api/create-checkout-session")
                .post(requestBody)
                .build()
            
            val response = client.newCall(request).execute()
            val responseBody = response.body?.string()
            val jsonResponse = JSONObject(responseBody ?: "")
            return jsonResponse.getString("checkout_url")
        }
        ```
      </Tab>

      <Tab title="React Native (JavaScript)">
        ```javascript  theme={null}
        const getCheckoutURL = async (productId, customerEmail, customerName) => {
          try {
            const response = await fetch('https://your-backend.com/api/create-checkout-session', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({
                productId,
                customerEmail,
                customerName
              })
            });
            
            const data = await response.json();
            return data.checkout_url;
          } catch (error) {
            console.error('Failed to get checkout URL:', error);
            throw error;
          }
        };
        ```
      </Tab>
    </Tabs>

    <Note>
      **Security**: Mobile apps only communicate with your backend, never directly with Dodo Payments API.
    </Note>
  </Step>

  <Step title="Mobile: Open Checkout in Browser">
    Open the checkout URL in a secure in-app browser for payment processing.

    <Card title="See platform-specific integration examples" icon="box" href="#platform-specific-integration">
      View full code and setup instructions for Android, iOS, and Flutter mobile payments.
    </Card>
  </Step>

  <Step title="Backend: Handle Payment Completion">
    Process payment completion via webhooks and redirect URLs to confirm payment status.
  </Step>
</Steps>

## Platform-Specific Integration

Choose your mobile platform below for complete implementation examples:

<Tabs>
  <Tab title="Android">
    ### Android Integration

    #### Chrome Custom Tabs Implementation

    ```kotlin  theme={null}
    // Add Chrome Custom Tabs dependency to build.gradle
    implementation 'androidx.browser:browser:1.5.0'

    // In your Activity
    class PaymentActivity : AppCompatActivity() {
        private var customTabsSession: CustomTabsSession? = null
        private var customTabsClient: CustomTabsClient? = null
        private var customTabsServiceConnection: CustomTabsServiceConnection? = null

        override fun onCreate(savedInstanceState: Bundle?) {
            super.onCreate(savedInstanceState)
            // Initialize Custom Tabs
            customTabsServiceConnection = object : CustomTabsServiceConnection() {
                override fun onCustomTabsServiceConnected(name: ComponentName, client: CustomTabsClient) {
                    customTabsClient = client
                    customTabsClient?.warmup(0L)
                    customTabsSession = customTabsClient?.newSession(object : CustomTabsCallback() {
                        override fun onNavigationEvent(navigationEvent: Int, extras: Bundle?) {
                            // Handle navigation events
                        }
                    })
                }
                override fun onServiceDisconnected(name: ComponentName) {
                    customTabsClient = null
                }
            }
            CustomTabsClient.bindCustomTabsService(
                this,
                "com.android.chrome",
                customTabsServiceConnection!!
            )
            // Get checkout URL from backend and launch
            lifecycleScope.launch {
                try {
                    val checkoutURL = getCheckoutURL("prod_123", "customer@example.com", "Customer Name")
                    val customTabsIntent = CustomTabsIntent.Builder(customTabsSession)
                        .build()
                    customTabsIntent.launchUrl(this@PaymentActivity, Uri.parse(checkoutURL))
                } catch (e: Exception) {
                    // Handle error
                    Log.e("PaymentActivity", "Failed to get checkout URL", e)
                }
            }
        }
    }
    ```
  </Tab>

  <Tab title="iOS">
    ### iOS Integration

    #### SFSafariViewController Implementation

    ```swift  theme={null}
    import SafariServices
    class PaymentViewController: UIViewController {
        override func viewDidLoad() {
            super.viewDidLoad()
            Task {
                do {
                    let checkoutURL = try await getCheckoutURL(
                        productId: "prod_123",
                        customerEmail: "customer@example.com",
                        customerName: "Customer Name"
                    )
                    if let url = URL(string: checkoutURL) {
                        let safariVC = SFSafariViewController(url: url)
                        present(safariVC, animated: true, completion: nil)
                    }
                } catch {
                    // Handle error
                    print("Failed to get checkout URL: \(error)")
                }
            }
        }
    }
    ```

    #### Deep Link Handling

    Configure URL schemes to handle payment completion redirects:

    **1. Set up URL schemes in Info.plist:**

    ```xml  theme={null}
    <key>CFBundleURLTypes</key>
    <array>
      <dict>
        <key>CFBundleURLName</key>
        <string>myapp</string>
        <key>CFBundleURLSchemes</key>
        <array>
          <string>myapp</string>
        </array>
      </dict>
    </array>
    ```

    **2. Handle redirects in AppDelegate:**

    ```swift  theme={null}
    func application(_ app: UIApplication, open url: URL, options: [UIApplication.OpenURLOptionsKey : Any] = [:]) -> Bool {
        if url.scheme == "myapp" && url.host == "payment-status" {
            NotificationCenter.default.post(name: .paymentCompleted, object: url)
            return true
        }
        return false
    }
    ```

    **3. Listen for payment completion:**

    ```swift  theme={null}
    NotificationCenter.default.addObserver(self, selector: #selector(handlePaymentCompletion(_:)), name: .paymentCompleted, object: nil)

    @objc func handlePaymentCompletion(_ notification: Notification) {
        if let url = notification.object as? URL {
            safariVC?.dismiss(animated: true)
            // Parse payment status from URL parameters
            let components = URLComponents(url: url, resolvingAgainstBaseURL: false)
            let paymentId = components?.queryItems?.first(where: { $0.name == "payment_id" })?.value
            let status = components?.queryItems?.first(where: { $0.name == "status" })?.value
            // Handle payment completion
        }
    }
    ```
  </Tab>

  <Tab title="React Native">
    ### React Native Integration

    #### Using Checkout Links (InAppBrowser)

    Open Dodo's hosted checkout page in an in-app browser.

    ##### InAppBrowser Implementation

    ```javascript  theme={null}
    import React from 'react';
    import { View, TouchableOpacity, Text, Alert } from 'react-native';
    import { InAppBrowser } from 'react-native-inappbrowser-reborn';

    const PaymentButton = ({ productId, onPaymentComplete }) => {
      const openPaymentLink = async () => {
        try {
          // Get checkout URL from backend
          const checkoutURL = await getCheckoutURL(
            productId,
            'customer@example.com',
            'Customer Name'
          );
          
          const result = await InAppBrowser.open(checkoutURL, {
            // iOS options
            dismissButtonStyle: 'cancel',
            preferredBarTintColor: '#453AA4',
            preferredControlTintColor: 'white',
            readerMode: false,
            animated: true,
            modalPresentationStyle: 'fullScreen',
            modalTransitionStyle: 'coverVertical',
            modalEnabled: true,
            enableBarCollapsing: false,
            // Android options
            showTitle: true,
            toolbarColor: '#453AA4',
            secondaryToolbarColor: 'black',
            navigationBarColor: 'black',
            navigationBarDividerColor: 'white',
            enableUrlBarHiding: true,
            enableDefaultShare: true,
            forceCloseOnRedirection: false,
            animations: {
              startEnter: 'slide_in_right',
              startExit: 'slide_out_left',
              endEnter: 'slide_in_left',
              endExit: 'slide_out_right'
            },
            headers: {
              'my-custom-header': 'my custom header value'
            }
          });

          // Handle payment completion based on result
          if (result.type === 'dismiss') {
            // User dismissed the browser
            console.log('Payment browser dismissed');
          }
        } catch (error) {
          Alert.alert('Error', 'Failed to open payment page');
          console.error('InAppBrowser error:', error);
        }
      };

      return (
        <View style={{ padding: 20 }}>
          <TouchableOpacity
            style={{
              backgroundColor: '#007AFF',
              padding: 15,
              borderRadius: 8,
              alignItems: 'center'
            }}
            onPress={openPaymentLink}
          >
            <Text style={{ color: 'white', fontSize: 16, fontWeight: 'bold' }}>
              Pay Now
            </Text>
          </TouchableOpacity>
        </View>
      );
    };

    export default PaymentButton;
    ```

    #### Deep Link Handling for Payment Callbacks

    ```javascript  theme={null}
    // App.js or your main component
    import React, { useEffect } from 'react';
    import { Linking } from 'react-native';

    const App = () => {
      useEffect(() => {
        // Handle deep links when app is already running
        const handleDeepLink = (url) => {
          if (url.includes('payment-status')) {
            const urlParams = new URLSearchParams(url.split('?')[1]);
            const paymentId = urlParams.get('payment_id');
            const status = urlParams.get('status');
            
            // Handle payment completion
            handlePaymentCallback(paymentId, status);
          }
        };

        // Listen for deep links
        const subscription = Linking.addEventListener('url', ({ url }) => {
          handleDeepLink(url);
        });

        // Handle deep link if app was opened from a link
        Linking.getInitialURL().then((url) => {
          if (url) {
            handleDeepLink(url);
          }
        });

        return () => subscription?.remove();
      }, []);

      const handlePaymentCallback = (paymentId, status) => {
        if (status === 'succeeded') {
          // Navigate to success screen or show success message
          console.log('Payment successful:', paymentId);
        } else {
          // Handle payment failure
          console.log('Payment failed:', paymentId);
        }
      };

      // Your app components...
    };

    export default App;
    ```

    #### Package Dependencies

    Add this dependency to your `package.json`:

    ```json  theme={null}
    {
      "dependencies": {
        "react-native-inappbrowser-reborn": "^6.4.0"
      }
    }
    ```

    #### Installation Commands

    ```bash  theme={null}
    # Install InAppBrowser
    npm install react-native-inappbrowser-reborn
    cd ios && pod install
    ```

    #### Android Configuration

    Add to `android/app/src/main/AndroidManifest.xml`:

    ```xml  theme={null}
    <activity
      android:name="com.reactnativeinappbrowserreborn.InAppBrowserActivity"
      android:theme="@style/Theme.AppCompat.Dialog"
      android:exported="false" />
    ```

    #### iOS Configuration

    Add to `ios/YourApp/Info.plist`:

    ```xml  theme={null}
    <key>CFBundleURLTypes</key>
    <array>
      <dict>
        <key>CFBundleURLName</key>
        <string>myapp</string>
        <key>CFBundleURLSchemes</key>
        <array>
          <string>myapp</string>
        </array>
      </dict>
    </array>
    ```

    <Tip>
      Use InAppBrowser for native browser experience. Handle deep links for payment callbacks.
    </Tip>

    ***

    #### Alternative: Native Payment SDK

    For a more integrated payment experience with native UI and full customization, Dodo Payments offers a React Native SDK.

    <Warning>
      **Regional Compliance**: In-app payment SDKs have regional restrictions. On **iOS**, native payment SDKs are only legal in the **EU** (under DMA terms). On **Android**, they're legal in User Choice Billing (UCB) markets. For other regions, use the checkout links approach above to ensure App Store and Play Store compliance.
    </Warning>

    <Card title="React Native SDK Integration Guide" icon="mobile-screen" href="/developer-resources/react-native-integration">
      Complete guide for integrating Dodo's React Native SDK with native payment sheets, full customization options, and direct payment handling. Includes setup, implementation, and testing instructions.
    </Card>

    <Info>
      Review the [App Store Fee Bypass Guide](/features/bypassing-app-store-fees) to understand regional compliance requirements for in-app payment integrations.
    </Info>
  </Tab>

  <Tab title="Flutter">
    ### Flutter Integration

    ```dart  theme={null}
    import 'package:flutter/material.dart';
    import 'package:webview_flutter/webview_flutter.dart';
    import 'package:http/http.dart' as http;
    import 'dart:convert';

    Future<String> getCheckoutURL(String productId, String customerEmail, String customerName) async {
      final response = await http.post(
        Uri.parse('https://your-backend.com/api/create-checkout-session'),
        headers: {'Content-Type': 'application/json'},
        body: json.encode({
          'productId': productId,
          'customerEmail': customerEmail,
          'customerName': customerName,
        }),
      );
      
      if (response.statusCode == 200) {
        final data = json.decode(response.body);
        return data['checkout_url'];
      } else {
        throw Exception('Failed to get checkout URL: ${response.statusCode}');
      }
    }
    class PaymentScreen extends StatefulWidget {
      @override
      _PaymentScreenState createState() => _PaymentScreenState();
    }
    class _PaymentScreenState extends State<PaymentScreen> {
      late WebViewController _controller;
      String? checkoutURL;
      
      @override
      void initState() {
        super.initState();
        _getCheckoutURL();
      }
      
      Future<void> _getCheckoutURL() async {
        try {
          final url = await getCheckoutURL('prod_123', 'customer@example.com', 'Customer Name');
          setState(() {
            checkoutURL = url;
          });
        } catch (e) {
          // Handle error
          print('Failed to get checkout URL: $e');
        }
      }
      
      @override
      Widget build(BuildContext context) {
        return Scaffold(
          appBar: AppBar(title: Text('Payment')),
          body: checkoutURL == null 
            ? Center(child: CircularProgressIndicator())
            : WebView(
            initialUrl: checkoutURL,
            javascriptMode: JavascriptMode.unrestricted,
            onWebViewCreated: (WebViewController webViewController) {
              _controller = webViewController;
            },
            navigationDelegate: (NavigationRequest request) {
              if (request.url.contains('payment_id') && request.url.contains('status')) {
                // Handle payment completion
                final uri = Uri.parse(request.url);
                final paymentId = uri.queryParameters['payment_id'];
                final status = uri.queryParameters['status'];
                handlePaymentCompletion(paymentId, status);
                return NavigationDecision.prevent;
              }
              return NavigationDecision.navigate;
            },
          ),
        );
      }
      void handlePaymentCompletion(String? paymentId, String? status) {
        if (status == 'succeeded') {
          // Payment successful
        } else {
          // Payment failed
        }
      }
    }
    ```

    <Tip>
      Use WebView for payment links. Handle the redirect URL to detect payment completion.
    </Tip>
  </Tab>
</Tabs>

## Best Practices

* **Security**: Never store API keys in your app code. Use secure storage and SSL pinning.
* **User Experience**: Show loading indicators, handle errors gracefully, and provide clear messages.
* **Testing**: Use test cards, simulate network errors, and test on various devices.

## Troubleshooting

### Common Issues

* **WebView not opening payment link**: Ensure the payment link is valid and uses HTTPS.
* **Callback not received**: Check your return URL and webhook configuration.
* **API key errors**: Verify that your API key is correct and has the necessary permissions.

## Additional Resources

* [Payment Integration Guide](/developer-resources/integration-guide)
* [Webhook Documentation](/developer-resources/webhooks/intents/webhook-events-guide)
* [Testing Process](/miscellaneous/testing-process)
* [Technical FAQs](/api-reference/technical-faqs)

<Check>
  For questions or support, contact <a href="mailto:support@dodopayments.com">[support@dodopayments.com](mailto:support@dodopayments.com)</a>.
</Check>


# Next.js Adaptor
Source: https://docs.dodopayments.com/developer-resources/nextjs-adaptor

Learn how to integrate Dodo Payments with your Next.js App Router project using our NextJS Adaptor. Covers checkout, customer portal, webhooks, and secure environment setup.

<CardGroup cols={2}>
  <Card title="Checkout Handler" icon="cart-shopping" href="#checkout-route-handler">
    Integrate Dodo Payments checkout with static, dynamic, and session flows.
  </Card>

  <Card title="Customer Portal" icon="user" href="#customer-portal-route-handler">
    Allow customers to manage subscriptions and details.
  </Card>

  <Card title="Webhooks" icon="bell" href="#webhook-route-handler">
    Receive and process Dodo Payments webhook events.
  </Card>
</CardGroup>

## Installation

<Steps>
  <Step title="Install the package">
    Run the following command in your project root:

    ```bash  theme={null}
    npm install @dodopayments/nextjs
    ```
  </Step>

  <Step title="Set up environment variables">
    Create a <code>.env</code> file in your project root:

    ```env  theme={null}
    DODO_PAYMENTS_API_KEY=your-api-key
    DODO_PAYMENTS_WEBHOOK_KEY=your-webhook-secret
    DODO_PAYMENTS_RETURN_URL=https://yourdomain.com/checkout/success
    DODO_PAYMENTS_ENVIRONMENT="test_mode"or"live_mode"
    ```

    <Warning>
      Never commit your <code>.env</code> file or secrets to version control.
    </Warning>
  </Step>
</Steps>

## Route Handler Examples

<Info>
  All examples assume you are using the Next.js App Router.
</Info>

<Tabs>
  <Tab title="Checkout Handler">
    <Info>
      Use this handler to integrate Dodo Payments checkout into your Next.js app. Supports static (GET), dynamic (POST), and checkout session (POST) payment flows.
    </Info>

    <CodeGroup>
      ```typescript Next.js Route Handler expandable theme={null}
      // app/checkout/route.ts
      import { Checkout } from "@dodopayments/nextjs";

      export const GET = Checkout({
        bearerToken: process.env.DODO_PAYMENTS_API_KEY,
        returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
        environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
        type: "static", // optional, defaults to 'static'
      });

      export const POST = Checkout({
        bearerToken: process.env.DODO_PAYMENTS_API_KEY,
        returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
        environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
        type: "dynamic", // for dynamic checkout
      });

      export const POST = Checkout({
        bearerToken: process.env.DODO_PAYMENTS_API_KEY,
        returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
        environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
        type: "session", // for checkout sessions
      });
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Static Checkout Curl example expandable theme={null}
      curl --request GET \
      --url 'https://example.com/api/checkout?productId=pdt_fqJhl7pxKWiLhwQR042rh' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Dynamic Checkout Curl example expandable theme={null}
      curl --request POST \
      --url https://example.com/api/checkout \
      --header 'Content-Type: application/json' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test \
      --data '{
      "billing": {
        "city": "Texas",
        "country": "US",
        "state": "Texas",
        "street": "56, hhh",
        "zipcode": "560000"
      },
      "customer": {
        "email": "test@example.com",
        	"name": "test"
      },
      "metadata": {},
      "payment_link": true,
        "product_id": "pdt_QMDuvLkbVzCRWRQjLNcs",
        "quantity": 1,
        "billing_currency": "USD",
        "discount_code": "IKHZ23M9GQ",
        "return_url": "https://example.com",
        "trial_period_days": 10
      }'
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Checkout Session Curl example expandable theme={null}
      curl --request POST \
      --url https://example.com/api/checkout \
      --header 'Content-Type: application/json' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test \
      --data '{
      "product_cart": [
        {
          "product_id": "pdt_QMDuvLkbVzCRWRQjLNcs",
          "quantity": 1
        }
      ],
      "customer": {
        "email": "test@example.com",
        "name": "test"
      },
      "return_url": "https://example.com/success"
      }'
      ```
    </CodeGroup>
  </Tab>

  <Tab title="Customer Portal Handler">
    <Info>
      Use this handler to allow customers to manage their subscriptions and details via the Dodo Payments customer portal.
    </Info>

    <CodeGroup>
      ```typescript Next.js Route Handler expandable theme={null}
      // app/customer-portal/route.ts
      import { CustomerPortal } from "@dodopayments/nextjs";

      export const GET = CustomerPortal({
        bearerToken: process.env.DODO_PAYMENTS_API_KEY,
        environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
      });
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Customer Portal Curl example expandable theme={null}
      curl --request GET \
      --url 'https://example.com/api/customer-portal?customer_id=cus_9VuW4K7O3GHwasENg31m&send_email=true' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test
      ```
    </CodeGroup>
  </Tab>

  <Tab title="Webhook Handler">
    <Info>
      Use this handler to receive and process Dodo Payments webhook events securely in your Next.js app.
    </Info>

    <CodeGroup>
      ```typescript Next.js Route Handler expandable theme={null}
      // app/api/webhook/dodo-payments/route.ts
      import { Webhooks } from "@dodopayments/nextjs";

      export const POST = Webhooks({
        webhookKey: process.env.DODO_PAYMENTS_WEBHOOK_KEY,
        onPayload: async (payload) => {
          // handle the payload
        },
        // ... other event handlers for granular control
      });
      ```
    </CodeGroup>
  </Tab>
</Tabs>

## Checkout Route Handler

<Info>
  Dodo Payments supports three types of payment flows for integrating payments into your website, this adaptor supports all types of payment flows.
</Info>

* **Static Payment Links:** Instantly shareable URLs for quick, no-code payment collection.
* **Dynamic Payment Links:** Programmatically generate payment links with custom details using the API or SDKs.
* **Checkout Sessions:** Create secure, customizable checkout experiences with pre-configured product carts and customer details.

<AccordionGroup>
  <Accordion title="Static Checkout (GET)">
    ### Supported Query Parameters

    <ParamField query="productId" type="string" required>
      Product identifier (e.g., <code>?productId=pdt\_nZuwz45WAs64n3l07zpQR</code>).
    </ParamField>

    <ParamField query="quantity" type="integer">
      Quantity of the product.
    </ParamField>

    <ParamField query="fullName" type="string">
      Customer's full name.
    </ParamField>

    <ParamField query="firstName" type="string">
      Customer's first name.
    </ParamField>

    <ParamField query="lastName" type="string">
      Customer's last name.
    </ParamField>

    <ParamField query="email" type="string">
      Customer's email address.
    </ParamField>

    <ParamField query="country" type="string">
      Customer's country.
    </ParamField>

    <ParamField query="addressLine" type="string">
      Customer's address line.
    </ParamField>

    <ParamField query="city" type="string">
      Customer's city.
    </ParamField>

    <ParamField query="state" type="string">
      Customer's state/province.
    </ParamField>

    <ParamField query="zipCode" type="string">
      Customer's zip/postal code.
    </ParamField>

    <ParamField query="disableFullName" type="boolean">
      Disable full name field.
    </ParamField>

    <ParamField query="disableFirstName" type="boolean">
      Disable first name field.
    </ParamField>

    <ParamField query="disableLastName" type="boolean">
      Disable last name field.
    </ParamField>

    <ParamField query="disableEmail" type="boolean">
      Disable email field.
    </ParamField>

    <ParamField query="disableCountry" type="boolean">
      Disable country field.
    </ParamField>

    <ParamField query="disableAddressLine" type="boolean">
      Disable address line field.
    </ParamField>

    <ParamField query="disableCity" type="boolean">
      Disable city field.
    </ParamField>

    <ParamField query="disableState" type="boolean">
      Disable state field.
    </ParamField>

    <ParamField query="disableZipCode" type="boolean">
      Disable zip code field.
    </ParamField>

    <ParamField query="paymentCurrency" type="string">
      Specify the payment currency (e.g., <code>USD</code>).
    </ParamField>

    <ParamField query="showCurrencySelector" type="boolean">
      Show currency selector.
    </ParamField>

    <ParamField query="paymentAmount" type="integer">
      Specify the payment amount (e.g., <code>1000</code> for \$10.00).
    </ParamField>

    <ParamField query="showDiscounts" type="boolean">
      Show discount fields.
    </ParamField>

    <ParamField query="metadata_*" type="string">
      Any query parameter starting with <code>metadata\_</code> will be passed as metadata.
    </ParamField>

    <Warning>
      If <code>productId</code> is missing, the handler returns a 400 response. Invalid query parameters also result in a 400 response.
    </Warning>

    ### Response Format

    Static checkout returns a JSON response with the checkout URL:

    ```json  theme={null}
    {
      "checkout_url": "https://checkout.dodopayments.com/..."
    }
    ```
  </Accordion>

  <Accordion title="Dynamic Checkout (POST)">
    * Send parameters as a JSON body in a POST request.
    * Supports both one-time and recurring payments.
    * For a complete list of supported POST body fields, refer to:
      * [Request body for a One Time Payment Product](https://docs.dodopayments.com/api-reference/payments/post-payments)
      * [Request body for a Subscription Product](https://docs.dodopayments.com/api-reference/subscriptions/post-subscriptions)

    ### Response Format

    Dynamic checkout returns a JSON response with the checkout URL:

    ```json  theme={null}
    {
      "checkout_url": "https://checkout.dodopayments.com/..."
    }
    ```
  </Accordion>

  <Accordion title="Checkout Sessions (POST)">
    Checkout sessions provide a more secure, hosted checkout experience that handles the complete payment flow for both one-time purchases and subscriptions with full customization control.

    Refer to [Checkout Sessions Integration Guide](https://docs.dodopayments.com/developer-resources/checkout-session) for more details and a complete list of supported fields.

    ### Response Format

    Checkout sessions return a JSON response with the checkout URL:

    ```json  theme={null}
    {
      "checkout_url": "https://checkout.dodopayments.com/session/..."
    }
    ```
  </Accordion>
</AccordionGroup>

## Customer Portal Route Handler

The Customer Portal Route Handler enables you to seamlessly integrate the Dodo Payments customer portal into your Next.js application.

### Query Parameters

<ParamField query="customer_id" type="string" required>
  The customer ID for the portal session (e.g., <code>?customer\_id=cus\_123</code>).
</ParamField>

<ParamField query="send_email" type="boolean">
  If set to <code>true</code>, sends an email to the customer with the portal link.
</ParamField>

<Warning>
  Returns 400 if <code>customer\_id</code> is missing.
</Warning>

## Webhook Route Handler

* **Method:** Only POST requests are supported. Other methods return 405.
* **Signature Verification:** Verifies the webhook signature using <code>webhookKey</code>. Returns 401 if verification fails.
* **Payload Validation:** Validated with Zod. Returns 400 for invalid payloads.
* **Error Handling:**
  * 401: Invalid signature
  * 400: Invalid payload
  * 500: Internal error during verification
* **Event Routing:** Calls the appropriate event handler based on the payload type.

### Supported Webhook Event Handlers

<CodeGroup>
  ```typescript Typescript expandable theme={null}
  onPayload?: (payload: WebhookPayload) => Promise<void>;
  onPaymentSucceeded?: (payload: WebhookPayload) => Promise<void>;
  onPaymentFailed?: (payload: WebhookPayload) => Promise<void>;
  onPaymentProcessing?: (payload: WebhookPayload) => Promise<void>;
  onPaymentCancelled?: (payload: WebhookPayload) => Promise<void>;
  onRefundSucceeded?: (payload: WebhookPayload) => Promise<void>;
  onRefundFailed?: (payload: WebhookPayload) => Promise<void>;
  onDisputeOpened?: (payload: WebhookPayload) => Promise<void>;
  onDisputeExpired?: (payload: WebhookPayload) => Promise<void>;
  onDisputeAccepted?: (payload: WebhookPayload) => Promise<void>;
  onDisputeCancelled?: (payload: WebhookPayload) => Promise<void>;
  onDisputeChallenged?: (payload: WebhookPayload) => Promise<void>;
  onDisputeWon?: (payload: WebhookPayload) => Promise<void>;
  onDisputeLost?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionActive?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionOnHold?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionRenewed?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionPlanChanged?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionCancelled?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionFailed?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionExpired?: (payload: WebhookPayload) => Promise<void>;
  onLicenseKeyCreated?: (payload: WebhookPayload) => Promise<void>;
  ```
</CodeGroup>

***

## Prompt for LLM

```

You are an expert Next.js developer assistant. Your task is to guide a user through integrating the @dodopayments/nextjs adapter into their existing Next.js project.

The @dodopayments/nextjs adapter provides route handlers for Dodo Payments' Checkout, Customer Portal, and Webhook functionalities, designed for the Next.js App Router.

First, install the necessary packages. Use the package manager appropriate for your project (npm, yarn, or bun) based on the presence of lock files (e.g., package-lock.json for npm, yarn.lock for yarn, bun.lockb for bun):

npm install @dodopayments/nextjs

Here's how you should structure your response:

    Ask the user which functionalities they want to integrate.

"Which parts of the @dodopayments/nextjs adapter would you like to integrate into your project? You can choose one or more of the following:

    Checkout Route Handler (for handling product checkouts)

    Customer Portal Route Handler (for managing customer subscriptions/details)

    Webhook Route Handler (for receiving Dodo Payments webhook events)

    All (integrate all three)"

    Based on the user's selection, provide detailed integration steps for each chosen functionality.

If Checkout Route Handler is selected:

Purpose: This handler manages different types of checkout flows. All checkout types (static, dynamic, and sessions) return JSON responses with checkout URLs for programmatic handling.
File Creation: Create a new file at app/checkout/route.ts in your Next.js project.

Code Snippet:

// app/checkout/route.ts
import { Checkout } from '@dodopayments/nextjs'

export const GET = Checkout({
bearerToken: process.env.DODO_PAYMENTS_API_KEY!,
returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
type: "static",
});

export const POST = Checkout({
bearerToken: process.env.DODO_PAYMENTS_API_KEY!,
returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
type: "session", // or "dynamic" for dynamic link
});

Configuration & Usage:

    bearerToken: Your Dodo Payments API key. It's recommended to set this via the DODO_PAYMENTS_API_KEY environment variable.

    returnUrl: (Optional) The URL to redirect the user to after a successful checkout.

    environment: (Optional) Set to "test_mode" for testing, or omit/set to "live_mode" for production.

    type: (Optional) Set to "static" for GET/static checkout, "dynamic" for POST/dynamic checkout, or "session" for POST/checkout sessions.

Static Checkout (GET) Query Parameters:

    productId (required): Product identifier (e.g., ?productId=pdt_nZuwz45WAs64n3l07zpQR)

    quantity (optional): Quantity of the product

    Customer Fields (optional): fullName, firstName, lastName, email, country, addressLine, city, state, zipCode

    Disable Flags (optional, set to true to disable): disableFullName, disableFirstName, disableLastName, disableEmail, disableCountry, disableAddressLine, disableCity, disableState, disableZipCode

    Advanced Controls (optional): paymentCurrency, showCurrencySelector, paymentAmount, showDiscounts

    Metadata (optional): Any query parameter starting with metadata_ (e.g., ?metadata_userId=abc123)

    Returns: {"checkout_url": "https://checkout.dodopayments.com/..."}

Dynamic Checkout (POST) - Returns JSON with checkout_url: Parameters are sent as a JSON body. Supports both one-time and recurring payments. Returns: {"checkout_url": "https://checkout.dodopayments.com/..."}. For a complete list of supported POST body fields, refer to:

    Docs - One Time Payment Product: https://docs.dodopayments.com/api-reference/payments/post-payments

    Docs - Subscription Product: https://docs.dodopayments.com/api-reference/subscriptions/post-subscriptions


Checkout Sessions (POST) - (Recommended) A more customizable checkout experience. Returns JSON with checkout_url: Parameters are sent as a JSON body. Supports both one-time and recurring payments. Returns: {"checkout_url": "https://checkout.dodopayments.com/session/..."}. For a complete list of supported fields, refer to:

  Checkout Sessions Integration Guide: https://docs.dodopayments.com/developer-resources/checkout-session

Error Handling: If productId is missing or other parameters are invalid, the handler will return a 400 response.

If Customer Portal Route Handler is selected:

Purpose: This handler redirects authenticated users to their Dodo Payments customer portal.
File Creation: Create a new file at app/customer-portal/route.ts in your Next.js project.

Code Snippet:

// app/customer-portal/route.ts
import { CustomerPortal } from '@dodopayments/nextjs'

export const GET = CustomerPortal({
bearerToken: process.env.DODO_PAYMENTS_API_KEY!,
environment: "test_mode",
});

Query Parameters:

    customer_id (required): The customer ID for the portal session (e.g., ?customer_id=cus_123)

    send_email (optional, boolean): If set to true, sends an email to the customer with the portal link.

    Returns 400 if customer_id is missing.

If Webhook Route Handler is selected:

Purpose: This handler processes incoming webhook events from Dodo Payments, allowing your application to react to events like successful payments, refunds, or subscription changes.
File Creation: Create a new file at app/api/webhook/dodo-payments/route.ts in your Next.js project.

Code Snippet:

// app/api/webhook/dodo-payments/route.ts
import { Webhooks } from '@dodopayments/nextjs'

export const POST = Webhooks({
webhookKey: process.env.DODO_WEBHOOK_SECRET!,
onPayload: async (payload) => {
// handle the payload
},
// ... other event handlers for granular control
});

Handler Details:

    Method: Only POST requests are supported. Other methods return 405.

    Signature Verification: The handler verifies the webhook signature using the webhookKey and returns 401 if verification fails.

    Payload Validation: The payload is validated with Zod. Returns 400 for invalid payloads.

Error Handling:

    401: Invalid signature

    400: Invalid payload

    500: Internal error during verification

Event Routing: Calls the appropriate event handler based on the payload type.

Supported Webhook Event Handlers:

    onPayload?: (payload: WebhookPayload) => Promise<void>

    onPaymentSucceeded?: (payload: WebhookPayload) => Promise<void>

    onPaymentFailed?: (payload: WebhookPayload) => Promise<void>

    onPaymentProcessing?: (payload: WebhookPayload) => Promise<void>

    onPaymentCancelled?: (payload: WebhookPayload) => Promise<void>

    onRefundSucceeded?: (payload: WebhookPayload) => Promise<void>

    onRefundFailed?: (payload: WebhookPayload) => Promise<void>

    onDisputeOpened?: (payload: WebhookPayload) => Promise<void>

    onDisputeExpired?: (payload: WebhookPayload) => Promise<void>

    onDisputeAccepted?: (payload: WebhookPayload) => Promise<void>

    onDisputeCancelled?: (payload: WebhookPayload) => Promise<void>

    onDisputeChallenged?: (payload: WebhookPayload) => Promise<void>

    onDisputeWon?: (payload: WebhookPayload) => Promise<void>

    onDisputeLost?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionActive?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionOnHold?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionRenewed?: (payload: WebhookPayload) => Promise<void>


    onSubscriptionPlanChanged?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionCancelled?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionFailed?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionExpired?: (payload: WebhookPayload) => Promise<void>

    onLicenseKeyCreated?: (payload: WebhookPayload) => Promise<void>

    Environment Variable Setup:

To ensure the adapter functions correctly, you will need to manually set up the following environment variables in your Next.js project's deployment environment (e.g., Vercel, Netlify, AWS, etc.):

    DODO_PAYMENTS_API_KEY: Your Dodo Payments API Key (required for Checkout and Customer Portal).

    RETURN_URL: (Optional) The URL to redirect to after a successful checkout (for Checkout handler).

    DODO_WEBHOOK_SECRET: Your Dodo Payments Webhook Secret (required for Webhook handler).

Example .env file:

DODO_PAYMENTS_API_KEY=your-api-key
DODO_PAYMENTS_WEBHOOK_KEY=your-webhook-secret
DODO_PAYMENTS_ENVIRONMENT="test_mode" or "live_mode"
DODO_PAYMENTS_RETURN_URL=your-return-url

Usage in your code:

bearerToken: process.env.DODO_PAYMENTS_API_KEY!
webhookKey: process.env.DODO_WEBHOOK_SECRET!

Important: Never commit sensitive environment variables directly into your version control. Use environment variables for all sensitive information.

If the user needs assistance setting up environment variables for their specific deployment environment, ask them what platform they are using (e.g., Vercel, Netlify, AWS, etc.), and provide guidance. You can also add comments to their PR or chat depending on the context

```


# Next.js Minimal Boilerplate
Source: https://docs.dodopayments.com/developer-resources/nextjs-boilerplate

Get started quickly with our minimal Next.js boilerplate for integrating Dodo Payments into your Next.js application

## Overview

The Next.js minimal boilerplate provides a ready-to-use starting point for integrating Dodo Payments with your Next.js application. This template includes authentication, webhook handling, and basic payment setup to help you start accepting payments quickly.

<Info>
  This boilerplate uses Next.js App Router with TypeScript and includes example implementations for checkout sessions and webhook verification.
</Info>

## Quick Start

<Steps>
  <Step title="Clone the Repository">
    Clone the boilerplate repository and navigate to the project directory:

    ```bash  theme={null}
    git clone https://github.com/dodopayments/dodo-nextjs-minimal-boilerplate.git
    cd dodo-nextjs-minimal-boilerplate
    ```
  </Step>

  <Step title="Get Your API Credentials">
    Obtain your credentials from the Dodo Payments dashboard in Test Mode:

    * **API Key**: Navigate to **Developer → API Keys** in your [dashboard](https://app.dodopayments.com)
    * **Webhook Signing Key**: Navigate to **Developer → Webhooks** in your [dashboard](https://app.dodopayments.com)

    <Tip>
      Start with Test Mode to safely test your integration without processing real payments.
    </Tip>
  </Step>

  <Step title="Configure Environment Variables">
    Create a `.env.local` file in the root directory:

    ```bash  theme={null}
    touch .env.local
    ```

    Add your Dodo Payments credentials:

    ```bash .env.local theme={null}
    DODO_API_KEY_TEST=your_test_api_key_here
    DODO_PAYMENTS_WEBHOOK_KEY=your_webhook_signing_key_here
    ```

    <Warning>
      Never commit your `.env.local` file to version control. It's already included in `.gitignore`.
    </Warning>
  </Step>

  <Step title="Install Dependencies">
    Install the required npm packages:

    ```bash  theme={null}
    npm install
    ```
  </Step>

  <Step title="Run the Development Server">
    Start the Next.js development server:

    ```bash  theme={null}
    npm run dev
    ```

    Your application will be available at `http://localhost:3000`.

    <Check>
      You're ready to start building! The boilerplate includes example routes and components to help you understand the integration.
    </Check>
  </Step>
</Steps>

## What's Included

The boilerplate comes with pre-configured essentials:

<CardGroup cols={2}>
  <Card title="Checkout Integration" icon="shopping-cart">
    Example implementation for creating and handling checkout sessions
  </Card>

  <Card title="Webhook Handler" icon="webhook">
    Secure webhook endpoint with signature verification
  </Card>

  <Card title="TypeScript Support" icon="code">
    Full TypeScript configuration with proper type definitions
  </Card>

  <Card title="Tailwind CSS" icon="paintbrush">
    Pre-configured styling with Tailwind CSS
  </Card>
</CardGroup>

## Project Structure

```
dodo-nextjs-minimal-boilerplate/
├── src/
│   ├── app/
│   │   ├── api/
│   │   │   └── webhooks/
│   │   │       └── route.ts    # Webhook handler
│   │   └── page.tsx            # Home page with examples
│   └── lib/
│       └── dodo.ts             # Dodo Payments client setup
├── .env.example                # Environment variables template
└── package.json
```

## Next Steps

Once you have the boilerplate running:

<Steps>
  <Step title="Create Your Products">
    Add products in your [Dodo Payments dashboard](https://app.dodopayments.com) to enable checkout functionality.
  </Step>

  <Step title="Test Webhooks Locally">
    Use tools like [ngrok](https://ngrok.com) to expose your local webhook endpoint for testing:

    ```bash  theme={null}
    ngrok http 3000
    ```

    Add the ngrok URL to your webhook settings in the dashboard.
  </Step>

  <Step title="Customize the Integration">
    Adapt the example code to match your application's needs and design.
  </Step>

  <Step title="Go Live">
    When ready, switch to Live Mode API keys and deploy your application.
  </Step>
</Steps>

## Additional Resources

<CardGroup cols={2}>
  <Card title="Next.js Adapter" icon="frame" href="/developer-resources/nextjs-adaptor">
    Learn about our comprehensive Next.js adapter for advanced integrations
  </Card>

  <Card title="Integration Guide" icon="book" href="/developer-resources/integration-guide">
    Detailed guide for implementing one-time payments
  </Card>

  <Card title="Webhook Events" icon="webhook" href="/developer-resources/webhooks/intents/webhook-events-guide">
    Complete reference for all webhook event types
  </Card>

  <Card title="API Reference" icon="brackets-curly" href="/api-reference/introduction">
    Explore the full Dodo Payments API documentation
  </Card>
</CardGroup>

## Support

Need help with the boilerplate?

* Join our [Discord community](https://discord.gg/bYqAp4ayYh) for questions and discussions
* Check the [GitHub repository](https://github.com/dodopayments/dodo-nextjs-minimal-boilerplate) for issues and updates
* Contact our [support team](mailto:support@dodopayments.com) for assistance


# Nuxt Adaptor
Source: https://docs.dodopayments.com/developer-resources/nuxt-adaptor

Integrate Dodo Payments with your Nuxt project using the official Nuxt module. Covers checkout, customer portal, webhooks, and secure environment setup.

<CardGroup cols={2}>
  <Card title="Checkout API Route" icon="cart-shopping" href="#checkout-api-route">
    Integrate Dodo Payments checkout into your Nuxt app using a server route.
  </Card>

  <Card title="Customer Portal API Route" icon="user" href="#customer-portal-api-route">
    Allow customers to manage subscriptions and details via a Nuxt server route.
  </Card>

  <Card title="Webhooks API Route" icon="bell" href="#webhook-api-route">
    Receive and process Dodo Payments webhook events securely in Nuxt.
  </Card>
</CardGroup>

## Overview

<Info>
  This guide explains how to integrate Dodo Payments into your Nuxt application using the official Nuxt module. You'll learn how to set up checkout, customer portal, and webhook API routes, and how to securely manage environment variables.
</Info>

## Installation

<Steps>
  <Step title="Install the Nuxt module">
    Run the following command in your project root:

    ```bash  theme={null}
    npm install @dodopayments/nuxt
    ```
  </Step>

  <Step title="Register the module in nuxt.config.ts">
    Add <code>@dodopayments/nuxt</code> to your <code>modules</code> array and configure it:

    ```typescript nuxt.config.ts expandable theme={null}
    export default defineNuxtConfig({
      modules: ["@dodopayments/nuxt"],
      devtools: { enabled: true },
      compatibilityDate: "2025-02-25",
      runtimeConfig: {
        private: {
          bearerToken: process.env.NUXT_PRIVATE_BEARER_TOKEN,
          webhookKey: process.env.NUXT_PRIVATE_WEBHOOK_KEY,
          environment: process.env.NUXT_PRIVATE_ENVIRONMENT,
          returnUrl: process.env.NUXT_PRIVATE_RETURNURL
        },
      }
    });
    ```
  </Step>
</Steps>

<Warning>
  Never commit your <code>.env</code> file or secrets to version control.
</Warning>

## API Route Handler Examples

<Info>
  All Dodo Payments integrations in Nuxt are handled via server routes in the <code>server/routes/api/</code> directory.
</Info>

<Tabs>
  <Tab title="Checkout API Route">
    <Info>
      Use this handler to integrate Dodo Payments checkout into your Nuxt app. Supports static (GET), dynamic (POST), and session (POST) payment flows.
    </Info>

    <CodeGroup>
      ```typescript server/routes/api/checkout.get.ts expandable theme={null}

      export default defineEventHandler((event) => {
        const {
          private: { bearerToken, environment, returnUrl },
        } = useRuntimeConfig();

        const handler = checkoutHandler({
          bearerToken: bearerToken,
          environment: environment,
          returnUrl: returnUrl,
        });

        return handler(event);
      });
      ```
    </CodeGroup>

    <CodeGroup>
      ```typescript server/routes/api/checkout.post.ts expandable theme={null}

      export default defineEventHandler((event) => {
        const {
          private: { bearerToken, environment, returnUrl },
        } = useRuntimeConfig();

        const handler = checkoutHandler({
          bearerToken: bearerToken,
          environment: environment,
          returnUrl: returnUrl,
          type: "dynamic"
        });

        return handler(event);
      });
      ```
    </CodeGroup>

    <CodeGroup>
      ```typescript server/routes/api/checkout.post.ts (Checkout Sessions) expandable theme={null}

      export default defineEventHandler((event) => {
        const {
          private: { bearerToken, environment, returnUrl },
        } = useRuntimeConfig();

        const handler = checkoutHandler({
          bearerToken: bearerToken,
          environment: environment,
          returnUrl: returnUrl,
          type: "session"
        });

        return handler(event);
      });
      ```
    </CodeGroup>

    <Warning>
      If <code>productId</code> is missing or invalid, the handler returns a 400 response.
    </Warning>

    <CodeGroup>
      ```curl Static Checkout Curl example expandable theme={null}
      curl --request GET \
      --url 'https://example.com/api/checkout?productId=pdt_fqJhl7pxKWiLhwQR042rh' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Dynamic Checkout Curl example expandable theme={null}
      curl --request POST \
      --url https://example.com/api/checkout \
      --header 'Content-Type: application/json' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test \
      --data '{
      "billing": {
        "city": "Texas",
        "country": "US",
        "state": "Texas",
        "street": "56, hhh",
        "zipcode": "560000"
      },
      "customer": {
        "email": "test@example.com",
        	"name": "test"
      },
      "metadata": {},
      "payment_link": true,
        "product_id": "pdt_QMDuvLkbVzCRWRQjLNcs",
        "quantity": 1,
        "billing_currency": "USD",
        "discount_code": "IKHZ23M9GQ",
        "return_url": "https://example.com",
        "trial_period_days": 10
      }'
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Checkout Session Curl example expandable theme={null}
      curl --request POST \
      --url https://example.com/api/checkout \
      --header 'Content-Type: application/json' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test \
      --data '{
      "product_cart": [
        {
          "product_id": "pdt_QMDuvLkbVzCRWRQjLNcs",
          "quantity": 1
        }
      ],
      "customer": {
        "email": "test@example.com",
        "name": "test"
      },
      "return_url": "https://example.com/success"
      }'
      ```
    </CodeGroup>
  </Tab>

  <Tab title="Customer Portal API Route">
    <Info>
      Create a GET route to allow customers to access their portal. Accepts <code>customer\_id</code> as a query parameter.
    </Info>

    <CodeGroup>
      ```typescript server/routes/api/customer-portal.get.ts expandable theme={null}

      export default defineEventHandler((event) => {
        const {
          private: { bearerToken, environment },
        } = useRuntimeConfig();

        const handler = customerPortalHandler({
          bearerToken,
          environment: environment,
        });

        return handler(event);
      });
      ```
    </CodeGroup>

    **Query Parameters:**

    * <code>customer\_id</code> (required): The customer ID for the portal session (e.g., <code>?customer\_id=cus\_123</code>)
    * <code>send\_email</code> (optional, boolean): If <code>true</code>, sends an email to the customer with the portal link.

    <Warning>
      Returns 400 if <code>customer\_id</code> is missing.
    </Warning>

    <CodeGroup>
      ```curl Customer Portal Curl example expandable theme={null}
      curl --request GET \
      --url 'https://example.com/api/customer-portal?customer_id=cus_9VuW4K7O3GHwasENg31m&send_email=true' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test
      ```
    </CodeGroup>
  </Tab>

  <Tab title="Webhook API Route">
    <Info>
      Create a POST route to securely receive and process webhook events from Dodo Payments.
    </Info>

    <CodeGroup>
      ```typescript server/routes/api/webhook.post.ts expandable theme={null}

      export default defineEventHandler((event) => {
        const {
          private: { webhookKey },
        } = useRuntimeConfig();

        const handler = Webhooks({
          webhookKey: webhookKey,
          onPayload: async (payload: any) => {
            // Handle webhook payload here
          },
          // ...add other event handlers as needed
        });

        return handler(event);
      });
      ```
    </CodeGroup>
  </Tab>
</Tabs>

## Checkout Route Handler

<Info>
  Dodo Payments supports three types of payment flows for integrating payments into your website, this adaptor supports all types of payment flows.
</Info>

* **Static Payment Links:** Instantly shareable URLs for quick, no-code payment collection.
* **Dynamic Payment Links:** Programmatically generate payment links with custom details using the API or SDKs.
* **Checkout Sessions:** Create secure, customizable checkout experiences with pre-configured product carts and customer details.

<AccordionGroup>
  <Accordion title="Static Checkout (GET)">
    ### Supported Query Parameters

    <ParamField query="productId" type="string" required>
      Product identifier (e.g., <code>?productId=pdt\_nZuwz45WAs64n3l07zpQR</code>).
    </ParamField>

    <ParamField query="quantity" type="integer">
      Quantity of the product.
    </ParamField>

    <ParamField query="fullName" type="string">
      Customer's full name.
    </ParamField>

    <ParamField query="firstName" type="string">
      Customer's first name.
    </ParamField>

    <ParamField query="lastName" type="string">
      Customer's last name.
    </ParamField>

    <ParamField query="email" type="string">
      Customer's email address.
    </ParamField>

    <ParamField query="country" type="string">
      Customer's country.
    </ParamField>

    <ParamField query="addressLine" type="string">
      Customer's address line.
    </ParamField>

    <ParamField query="city" type="string">
      Customer's city.
    </ParamField>

    <ParamField query="state" type="string">
      Customer's state/province.
    </ParamField>

    <ParamField query="zipCode" type="string">
      Customer's zip/postal code.
    </ParamField>

    <ParamField query="disableFullName" type="boolean">
      Disable full name field.
    </ParamField>

    <ParamField query="disableFirstName" type="boolean">
      Disable first name field.
    </ParamField>

    <ParamField query="disableLastName" type="boolean">
      Disable last name field.
    </ParamField>

    <ParamField query="disableEmail" type="boolean">
      Disable email field.
    </ParamField>

    <ParamField query="disableCountry" type="boolean">
      Disable country field.
    </ParamField>

    <ParamField query="disableAddressLine" type="boolean">
      Disable address line field.
    </ParamField>

    <ParamField query="disableCity" type="boolean">
      Disable city field.
    </ParamField>

    <ParamField query="disableState" type="boolean">
      Disable state field.
    </ParamField>

    <ParamField query="disableZipCode" type="boolean">
      Disable zip code field.
    </ParamField>

    <ParamField query="paymentCurrency" type="string">
      Specify the payment currency (e.g., <code>USD</code>).
    </ParamField>

    <ParamField query="showCurrencySelector" type="boolean">
      Show currency selector.
    </ParamField>

    <ParamField query="paymentAmount" type="integer">
      Specify the payment amount (e.g., <code>1000</code> for \$10.00).
    </ParamField>

    <ParamField query="showDiscounts" type="boolean">
      Show discount fields.
    </ParamField>

    <ParamField query="metadata_*" type="string">
      Any query parameter starting with <code>metadata\_</code> will be passed as metadata.
    </ParamField>

    <Warning>
      If <code>productId</code> is missing, the handler returns a 400 response. Invalid query parameters also result in a 400 response.
    </Warning>

    ### Response Format

    Static checkout returns a JSON response with the checkout URL:

    ```json  theme={null}
    {
      "checkout_url": "https://checkout.dodopayments.com/..."
    }
    ```
  </Accordion>

  <Accordion title="Dynamic Checkout (POST)">
    * Send parameters as a JSON body in a POST request.
    * Supports both one-time and recurring payments.
    * For a complete list of supported POST body fields, refer to:
      * [Request body for a One Time Payment Product](https://docs.dodopayments.com/api-reference/payments/post-payments)
      * [Request body for a Subscription Product](https://docs.dodopayments.com/api-reference/subscriptions/post-subscriptions)

    ### Response Format

    Dynamic checkout returns a JSON response with the checkout URL:

    ```json  theme={null}
    {
      "checkout_url": "https://checkout.dodopayments.com/..."
    }
    ```
  </Accordion>

  <Accordion title="Checkout Sessions (POST)">
    Checkout sessions provide a more secure, hosted checkout experience that handles the complete payment flow for both one-time purchases and subscriptions with full customization control.

    Refer to [Checkout Sessions Integration Guide](https://docs.dodopayments.com/developer-resources/checkout-session) for more details and a complete list of supported fields.

    ### Response Format

    Checkout sessions return a JSON response with the checkout URL:

    ```json  theme={null}
    {
      "checkout_url": "https://checkout.dodopayments.com/session/..."
    }
    ```
  </Accordion>
</AccordionGroup>

## Customer Portal Route Handler

The Customer Portal Route Handler enables you to seamlessly integrate the Dodo Payments customer portal into your Nuxt application.

### Query Parameters

<ParamField query="customer_id" type="string" required>
  The customer ID for the portal session (e.g., <code>?customer\_id=cus\_123</code>).
</ParamField>

<ParamField query="send_email" type="boolean">
  If set to <code>true</code>, sends an email to the customer with the portal link.
</ParamField>

<Warning>
  Returns 400 if <code>customer\_id</code> is missing.
</Warning>

## Webhook Route Handler

* **Method:** Only POST requests are supported. Other methods return 405.
* **Signature Verification:** Verifies the webhook signature using <code>webhookKey</code>. Returns 401 if verification fails.
* **Payload Validation:** Validated with Zod. Returns 400 for invalid payloads.
* **Error Handling:**
  * 401: Invalid signature
  * 400: Invalid payload
  * 500: Internal error during verification
* **Event Routing:** Calls the appropriate event handler based on the payload type.

### Supported Webhook Event Handlers

<CodeGroup>
  ```typescript Typescript expandable theme={null}
  onPayload?: (payload: WebhookPayload) => Promise<void>;
  onPaymentSucceeded?: (payload: WebhookPayload) => Promise<void>;
  onPaymentFailed?: (payload: WebhookPayload) => Promise<void>;
  onPaymentProcessing?: (payload: WebhookPayload) => Promise<void>;
  onPaymentCancelled?: (payload: WebhookPayload) => Promise<void>;
  onRefundSucceeded?: (payload: WebhookPayload) => Promise<void>;
  onRefundFailed?: (payload: WebhookPayload) => Promise<void>;
  onDisputeOpened?: (payload: WebhookPayload) => Promise<void>;
  onDisputeExpired?: (payload: WebhookPayload) => Promise<void>;
  onDisputeAccepted?: (payload: WebhookPayload) => Promise<void>;
  onDisputeCancelled?: (payload: WebhookPayload) => Promise<void>;
  onDisputeChallenged?: (payload: WebhookPayload) => Promise<void>;
  onDisputeWon?: (payload: WebhookPayload) => Promise<void>;
  onDisputeLost?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionActive?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionOnHold?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionRenewed?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionPlanChanged?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionCancelled?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionFailed?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionExpired?: (payload: WebhookPayload) => Promise<void>;
  onLicenseKeyCreated?: (payload: WebhookPayload) => Promise<void>;
  ```
</CodeGroup>

***

## Prompt for LLM

```
You are an expert Nuxt developer assistant. Your task is to guide a user through integrating the @dodopayments/nuxt module into their existing Nuxt project.

The @dodopayments/nuxt module provides API route handlers for Dodo Payments' Checkout, Customer Portal, and Webhook functionalities, designed for Nuxt 3 server routes.

First, install the necessary package:

npm install @dodopayments/nuxt

Second, add the configuration to nuxt.config.ts

export default defineNuxtConfig({
  modules: ["@dodopayments/nuxt"],
  devtools: { enabled: true },
  compatibilityDate: "2025-02-25",
  runtimeConfig: {
    private: {
      bearerToken: process.env.NUXT_PRIVATE_BEARER_TOKEN,
      webhookKey: process.env.NUXT_PRIVATE_BEARER_TOKEN,
      environment: process.env.NUXT_PRIVATE_ENVIRONMENT,
      returnUrl: process.env.NUXT_PRIVATE_RETURNURL
    },
  }
});


Here's how you should structure your response:

    Ask the user which functionalities they want to integrate.

"Which parts of the @dodopayments/nuxt module would you like to integrate into your project? You can choose one or more of the following:

    Checkout API Route (for handling product checkouts)
    Customer Portal API Route (for managing customer subscriptions/details)
    Webhook API Route (for receiving Dodo Payments webhook events)
    All (integrate all three)"

    Based on the user's selection, provide detailed integration steps for each chosen functionality.

If Checkout API Route is selected:

Purpose: This route redirects users to the Dodo Payments checkout page.
File Creation: Create a new file at server/routes/api/checkout.get.ts in your Nuxt project.

Code Snippet:

// server/routes/api/checkout.get.ts

export default defineEventHandler((event) => {
  const {
    private: { bearerToken, environment, returnUrl },
  } = useRuntimeConfig();

  const handler = checkoutHandler({
    bearerToken: bearerToken,
    environment: environment,
    returnUrl: returnUrl,
  });

  return handler(event);
});

Configuration & Usage:
- bearerToken: Your Dodo Payments API key. Set via the NUXT_PRIVATE_BEARER_TOKEN environment variable.
- returnUrl: (Optional) The URL to redirect the user to after a successful checkout.
- environment: (Optional) Set to your environment (e.g., "test_mode" or "live_mode").

Static Checkout (GET) Query Parameters:
- productId (required): Product identifier (e.g., ?productId=pdt_nZuwz45WAs64n3l07zpQR)
- quantity (optional): Quantity of the product
- Customer Fields (optional): fullName, firstName, lastName, email, country, addressLine, city, state, zipCode
- Disable Flags (optional, set to true to disable): disableFullName, disableFirstName, disableLastName, disableEmail, disableCountry, disableAddressLine, disableCity, disableState, disableZipCode
- Advanced Controls (optional): paymentCurrency, showCurrencySelector, paymentAmount, showDiscounts
- Metadata (optional): Any query parameter starting with metadata_ (e.g., ?metadata_userId=abc123)

Dynamic Checkout (POST): Parameters are sent as a JSON body. Supports both one-time and recurring payments. For a complete list of supported POST body fields, refer to:
- Docs - One Time Payment Product: https://docs.dodopayments.com/api-reference/payments/post-payments
- Docs - Subscription Product: https://docs.dodopayments.com/api-reference/subscriptions/post-subscriptions

Checkout Sessions (POST) - (Recommended) A more customizable checkout experience. Returns JSON with checkout_url: Parameters are sent as a JSON body. Supports both one-time and recurring payments. Returns: {"checkout_url": "https://checkout.dodopayments.com/session/..."}. For a complete list of supported fields, refer to:

  Checkout Sessions Integration Guide: https://docs.dodopayments.com/developer-resources/checkout-session

Error Handling: If productId is missing or other query parameters are invalid, the handler will return a 400 response.

If Customer Portal API Route is selected:

Purpose: This route allows customers to access their Dodo Payments customer portal.
File Creation: Create a new file at server/routes/api/customer-portal.get.ts in your Nuxt project.

Code Snippet:

// server/routes/api/customer-portal.get.ts

export default defineEventHandler((event) => {
  const {
    private: { bearerToken, environment },
  } = useRuntimeConfig();

  const handler = customerPortalHandler({
    bearerToken,
    environment: environment,
  });

  return handler(event);
});

Query Parameters:
- customer_id (required): The customer ID for the portal session (e.g., ?customer_id=cus_123)
- send_email (optional, boolean): If set to true, sends an email to the customer with the portal link.
- Returns 400 if customer_id is missing.

If Webhook API Route is selected:

Purpose: This route processes incoming webhook events from Dodo Payments, allowing your application to react to events like successful payments, refunds, or subscription changes.
File Creation: Create a new file at server/routes/api/webhook.post.ts in your Nuxt project.

Code Snippet:

// server/routes/api/webhook.post.ts

export default defineEventHandler((event) => {
  const {
    private: { webhookKey },
  } = useRuntimeConfig();

  const handler = Webhooks({
    webhookKey: webhookKey,
    onPayload: async (payload) => {
      // handle the payload
    },
    // ... other event handlers for granular control
  });

  return handler(event);
});

Handler Details:
- Method: Only POST requests are supported. Other methods return 405.
- Signature Verification: The handler verifies the webhook signature using webhookKey and returns 401 if verification fails.
- Payload Validation: The payload is validated with Zod. Returns 400 for invalid payloads.

Error Handling:
- 401: Invalid signature
- 400: Invalid payload
- 500: Internal error during verification

Event Routing: Calls the appropriate event handler based on the payload type. Supported event handlers include:
- onPayload?: (payload: WebhookPayload) => Promise<void>
- onPaymentSucceeded?: (payload: WebhookPayload) => Promise<void>
- onPaymentFailed?: (payload: WebhookPayload) => Promise<void>
- onPaymentProcessing?: (payload: WebhookPayload) => Promise<void>
- onPaymentCancelled?: (payload: WebhookPayload) => Promise<void>
- onRefundSucceeded?: (payload: WebhookPayload) => Promise<void>
- onRefundFailed?: (payload: WebhookPayload) => Promise<void>
- onDisputeOpened?: (payload: WebhookPayload) => Promise<void>
- onDisputeExpired?: (payload: WebhookPayload) => Promise<void>
- onDisputeAccepted?: (payload: WebhookPayload) => Promise<void>
- onDisputeCancelled?: (payload: WebhookPayload) => Promise<void>
- onDisputeChallenged?: (payload: WebhookPayload) => Promise<void>
- onDisputeWon?: (payload: WebhookPayload) => Promise<void>
- onDisputeLost?: (payload: WebhookPayload) => Promise<void>
- onSubscriptionActive?: (payload: WebhookPayload) => Promise<void>
- onSubscriptionOnHold?: (payload: WebhookPayload) => Promise<void>
- onSubscriptionRenewed?: (payload: WebhookPayload) => Promise<void>
- onSubscriptionPlanChanged?: (payload: WebhookPayload) => Promise<void>
- onSubscriptionCancelled?: (payload: WebhookPayload) => Promise<void>
- onSubscriptionFailed?: (payload: WebhookPayload) => Promise<void>
- onSubscriptionExpired?: (payload: WebhookPayload) => Promise<void>
- onLicenseKeyCreated?: (payload: WebhookPayload) => Promise<void>

Environment Variable Setup:
To ensure the module functions correctly, set up the following environment variables in your Nuxt project's deployment environment (e.g., Vercel, Netlify, AWS, etc.):
- NUXT_PRIVATE_BEARER_TOKEN: Your Dodo Payments API Key (required for Checkout and Customer Portal).
- NUXT_PRIVATE_WEBHOOK_KEY: Your Dodo Payments Webhook Secret (required for Webhook handler).
- NUXT_PRIVATE_ENVIRONMENT: (Optional) Set to your environment (e.g., "test_mode" or "live_mode").
- NUXT_PRIVATE_RETURNURL: (Optional) The URL to redirect to after a successful checkout (for Checkout handler).

Usage in your code:
bearerToken: useRuntimeConfig().private.bearerToken
webhookKey: useRuntimeConfig().private.webhookKey

Important: Never commit sensitive environment variables directly into your version control. Use environment variables for all sensitive information.

If the user needs assistance setting up environment variables for their specific deployment environment, ask them what platform they are using (e.g., Vercel, Netlify, AWS, etc.), and provide guidance.
```


# On-Demand Subscriptions
Source: https://docs.dodopayments.com/developer-resources/ondemand-subscriptions

Integrate on-demand subscriptions by authorizing mandates, creating variable charges, handling webhooks, and implementing safe retry policies.

## Overview

On-demand subscriptions let you authorize a customer’s payment method once and then charge variable amounts whenever you need, instead of on a fixed schedule.

<Info>
  This feature may need to be enabled on your account. Contact support if you don’t see it in your dashboard.
</Info>

Use this guide to:

* Create an on-demand subscription (authorize a mandate with optional initial price)
* Trigger subsequent charges with custom amounts
* Track outcomes using webhooks

For a general subscription setup, see the [Subscription Integration Guide](/developer-resources/subscription-integration-guide).

## Prerequisites

* Dodo Payments merchant account and API key
* Webhook secret configured and an endpoint to receive events
* A subscription product in your catalog

<Tip>
  If you want the customer to approve the mandate via hosted checkout, set `payment_link: true` and provide a `return_url`.
</Tip>

## How on-demand works

1. You create a subscription with the `on_demand` object to authorize a payment method and optionally collect an initial charge.
2. Later, you create charges against that subscription with custom amounts using the dedicated charge endpoint.
3. You listen to webhooks (e.g., `payment.succeeded`, `payment.failed`) to update your system.

## Create an on-demand subscription

Endpoint: [POST /subscriptions](/api-reference/subscriptions/post-subscriptions)

Key request fields (body):

<AccordionGroup>
  <Accordion title="Request Body Parameters">
    <ParamField body="product_id" type="string" required>
      Product ID for the subscription.
    </ParamField>

    <ParamField body="quantity" type="integer" required>
      Number of units. Minimum 1.
    </ParamField>

    <ParamField body="billing" type="object" required>
      Billing address for the customer.
    </ParamField>

    <ParamField body="customer" type="object" required>
      Either attach an existing customer or provide customer details.
    </ParamField>

    <ParamField body="payment_link" type="boolean" default="false">
      If true, creates a hosted checkout link for mandate authorization and optional initial payment.
    </ParamField>

    <ParamField body="return_url" type="string">
      Where to redirect the customer after completing hosted checkout.
    </ParamField>

    <ParamField body="on_demand.mandate_only" type="boolean" required>
      If true, authorizes the payment method without charging the customer during creation.
    </ParamField>

    <ParamField body="on_demand.product_price" type="integer">
      Initial charge amount (in the smallest currency unit). If specified, this value overrides the product’s original price set during product creation. If omitted, the product’s stored price is used. Example: to charge \$1.00, pass <code>100</code>.
    </ParamField>

    <ParamField body="on_demand.product_currency" type="string">
      Optional currency override for the initial charge. Defaults to the product currency.
    </ParamField>

    <ParamField body="on_demand.product_description" type="string">
      Optional description override for billing and line items.
    </ParamField>

    <ParamField body="on_demand.adaptive_currency_fees_inclusive" type="boolean">
      If true, includes adaptive currency fees within <code>product\_price</code>. If false, fees are added on top. Ignored when adaptive pricing is disabled.
    </ParamField>
  </Accordion>
</AccordionGroup>

### Create an on-demand subscription

<Tabs>
  <Tab title="Node.js SDK">
    ```javascript  theme={null}
    import DodoPayments from 'dodopayments';

    const client = new DodoPayments({
      bearerToken: process.env.DODO_PAYMENTS_API_KEY,
    });

    async function main() {
      const subscription = await client.subscriptions.create({
        billing: { city: 'SF', country: 'US', state: 'CA', street: '1 Market St', zipcode: '94105' },
        customer: { customer_id: 'customer_123' },
        product_id: 'prod_sub_123',
        quantity: 1,
        payment_link: true,
        return_url: 'https://example.com/billing/success',
        on_demand: {
          mandate_only: true, // set false to collect an initial charge
          // product_price: 1000, // optional: charge $10.00 now if mandate_only is false
          // product_currency: 'USD',
          // product_description: 'Custom initial charge',
          // adaptive_currency_fees_inclusive: false,
        },
      });

      // If payment_link was true, redirect the customer to authorize the mandate
      console.log(subscription.payment_link);
    }

    main().catch(console.error);
    ```
  </Tab>

  <Tab title="Python SDK">
    ```python  theme={null}
    import os
    from dodopayments import DodoPayments

    client = DodoPayments(bearer_token=os.environ.get('DODO_PAYMENTS_API_KEY'))

    subscription = client.subscriptions.create(
        billing={
            "city": "SF",
            "country": "US",
            "state": "CA",
            "street": "1 Market St",
            "zipcode": "94105",
        },
        customer={"customer_id": "customer_123"},
        product_id="prod_sub_123",
        quantity=1,
        payment_link=True,
        return_url="https://example.com/billing/success",
        on_demand={
            "mandate_only": True,
            # "product_price": 1000,
            # "product_currency": "USD",
            # "product_description": "Custom initial charge",
            # "adaptive_currency_fees_inclusive": False,
        },
    )

    print(subscription.payment_link)
    ```
  </Tab>

  <Tab title="Go SDK">
    ```go  theme={null}
    package main

    import (
      "context"
      "fmt"
      "github.com/dodopayments/dodopayments-go"
      "github.com/dodopayments/dodopayments-go/option"
    )

    func main() {
      client := dodopayments.NewClient(
        option.WithBearerToken("YOUR_API_KEY"),
      )
      subscription, err := client.Subscriptions.New(context.TODO(), dodopayments.SubscriptionNewParams{
        Billing: dodopayments.F(dodopayments.BillingAddressParam{
          City:    dodopayments.F("SF"),
          Country: dodopayments.F(dodopayments.CountryCodeUs),
          State:   dodopayments.F("CA"),
          Street:  dodopayments.F("1 Market St"),
          Zipcode: dodopayments.F("94105"),
        }),
        Customer: dodopayments.F[dodopayments.CustomerRequestUnionParam](dodopayments.AttachExistingCustomerParam{
          CustomerID: dodopayments.F("customer_123"),
        }),
        ProductID:  dodopayments.F("prod_sub_123"),
        Quantity:   dodopayments.F(int64(1)),
        PaymentLink: dodopayments.F(true),
        ReturnURL:   dodopayments.F("https://example.com/billing/success"),
        OnDemand: dodopayments.F(dodopayments.OnDemandSubscriptionReqParam{
          MandateOnly: dodopayments.F(true),
          // ProductPrice: dodopayments.F(int64(1000)),
          // ProductCurrency: dodopayments.F(dodopayments.CurrencyUsd),
          // ProductDescription: dodopayments.F("Custom initial charge"),
          // AdaptiveCurrencyFeesInclusive: dodopayments.F(false),
        }),
      })
      if err != nil { panic(err) }
      fmt.Println(subscription.PaymentLink)
    }
    ```
  </Tab>

  <Tab title="cURL">
    ```bash  theme={null}
    curl -X POST "$DODO_API/subscriptions" \
      -H "Authorization: Bearer $DODO_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{
        "billing": {"city": "SF", "country": "US", "state": "CA", "street": "1 Market St", "zipcode": "94105"},
        "customer": {"customer_id": "customer_123"},
        "product_id": "prod_sub_123",
        "quantity": 1,
        "payment_link": true,
        "return_url": "https://example.com/billing/success",
        "on_demand": {
          "mandate_only": true
        }
      }'
    ```
  </Tab>
</Tabs>

<Check>
  Set `payment_link: true`, redirect the customer to `payment_link` to complete mandate authorization.
</Check>

```json Success theme={null}
{
  "subscription_id": "sub_123",
  "payment_link": "https://pay.dodopayments.com/checkout/...",
  "customer": { "customer_id": "customer_123", "email": "alex@example.com", "name": "Alex Doe" },
  "metadata": {},
  "recurring_pre_tax_amount": 0,
  "addons": []
}
```

## Charge an on-demand subscription

After the mandate is authorized, create charges as needed.

Endpoint: [POST /subscriptions/\{subscription\_id}/charge](/api-reference/subscriptions/create-charge)

Key request fields (body):

<AccordionGroup>
  <Accordion title="Charge request body parameters">
    <ParamField body="product_price" type="integer" required>
      Amount to charge (in the smallest currency unit). Example: to charge \$25.00, pass <code>2500</code>.
    </ParamField>

    <ParamField body="product_currency" type="string">
      Optional currency override for the charge.
    </ParamField>

    <ParamField body="product_description" type="string">
      Optional description override for this charge.
    </ParamField>

    <ParamField body="adaptive_currency_fees_inclusive" type="boolean">
      If true, includes adaptive currency fees within <code>product\_price</code>. If false, fees are added on top.
    </ParamField>

    <ParamField body="metadata" type="object">
      Additional metadata for the payment. If omitted, the subscription metadata is used.
    </ParamField>
  </Accordion>
</AccordionGroup>

<Tabs>
  <Tab title="Node.js SDK">
    ```javascript  theme={null}
    import DodoPayments from 'dodopayments';

    const client = new DodoPayments({ bearerToken: process.env.DODO_PAYMENTS_API_KEY });

    async function chargeNow(subscriptionId) {
      const res = await client.subscriptions.charge(subscriptionId, { product_price: 2500 });
      console.log(res.payment_id);
    }

    chargeNow('sub_123').catch(console.error);
    ```
  </Tab>

  <Tab title="Python SDK">
    ```python  theme={null}
    import os
    from dodopayments import DodoPayments

    client = DodoPayments(bearer_token=os.environ.get('DODO_PAYMENTS_API_KEY'))

    response = client.subscriptions.charge(
        subscription_id="sub_123",
        product_price=2500,
    )

    print(response.payment_id)
    ```
  </Tab>

  <Tab title="Go SDK">
    ```go  theme={null}
    package main

    import (
      "context"
      "fmt"
      "github.com/dodopayments/dodopayments-go"
      "github.com/dodopayments/dodopayments-go/option"
    )

    func main() {
      client := dodopayments.NewClient(option.WithBearerToken("YOUR_API_KEY"))
      res, err := client.Subscriptions.Charge(context.TODO(), "sub_123", dodopayments.SubscriptionChargeParams{
        ProductPrice: dodopayments.F(int64(2500)),
      })
      if err != nil { panic(err) }
      fmt.Println(res.PaymentID)
    }
    ```
  </Tab>

  <Tab title="cURL">
    ```bash  theme={null}
    curl -X POST "$DODO_API/subscriptions/sub_123/charge" \
      -H "Authorization: Bearer $DODO_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{
        "product_price": 2500,
        "product_description": "Extra usage for March"
      }'
    ```
  </Tab>
</Tabs>

```json Success theme={null}
{ "payment_id": "pay_abc123" }
```

<Warning>
  Charging a subscription that is not on-demand may fail. Ensure the subscription has `on_demand: true` in its details before charging.
</Warning>

## Payment retries

Our fraud detection system may block aggressive retry patterns (and can flag them as potential card testing). Follow a safe retry policy.

<Warning>
  Burst retry patterns can be flagged as fraudulent or suspected card testing by our risk systems and processors. Avoid clustered retries; follow the backoff schedule and time alignment guidance below.
</Warning>

### Principles for safe retry policies

* **Backoff mechanism**: Use exponential backoff between retries.
* **Retry limits**: Cap total retries (3–4 attempts max).
* **Intelligent filtering**: Retry only on retryable failures (e.g., network/issuer errors, insufficient funds); never retry hard declines.
* **Card testing prevention**: Do not retry failures like `DO_NOT_HONOR`, `STOLEN_CARD`, `LOST_CARD`, `PICKUP_CARD`, `FRAUDULENT`, `AUTHENTICATION_FAILURE`.
* **Vary metadata (optional)**: If you maintain your own retry system, differentiate retries via metadata (e.g., `retry_attempt`).

### Suggested retry schedule (subscriptions)

* **1st attempt**: Immediate when you create the charge
* **2nd attempt**: After 3 days
* **3rd attempt**: After 7 more days (10 days total)
* **4th attempt (final)**: After another 7 days (17 days total)

Final step: if still unpaid, mark the subscription as unpaid or cancel it, based on your policy. Notify the customer during the window to update their payment method.

### Avoid burst retries; align to authorization time

* Anchor retries to the original authorization timestamp to avoid “burst” behavior across your portfolio.
* Example: If the customer starts a trial or mandate at 1:10 pm today, schedule follow-up retries at 1:10 pm on subsequent days per your backoff (e.g., +3 days → 1:10 pm, +7 days → 1:10 pm).
* Alternatively, if you store the last successful payment time `T`, schedule the next attempt at `T + X days` to preserve time-of-day alignment.

<Note>
  Time-zone and DST: use a consistent time standard for scheduling and convert for display only to maintain intervals.
</Note>

### Decline codes you should not retry

* `STOLEN_CARD`
* `DO_NOT_HONOR`
* `FRAUDULENT`
* `PICKUP_CARD`
* `AUTHENTICATION_FAILURE`
* `LOST_CARD`

<Note>
  For a comprehensive list of decline reasons and whether they are user-correctable, see the
  [Transaction Failures](/api-reference/transaction-failures) documentation.
</Note>

<Tip>
  Only retry on soft/temporary issues (e.g., `insufficient_funds`, `issuer_unavailable`, `processing_error`, network timeouts). If the same decline repeats, pause further retries.
</Tip>

### Implementation guidelines (no code)

* Use a scheduler/queue that persists precise timestamps; compute next attempt at the exact time-of-day offset (e.g., `T + 3 days` at the same HH:MM).
* Maintain and reference the last successful payment timestamp `T` to compute the next attempt; do not bunch multiple subscriptions at the same instant.
* Always evaluate the last decline reason; stop retries for hard declines in the skip list above.
* Cap concurrent retries per customer and per account to prevent accidental surges.
* Communicate proactively: email/SMS the customer to update their payment method before the next scheduled attempt.
* Use metadata only for observability (e.g., `retry_attempt`); never try to “evade” fraud/risk systems by rotating inconsequential fields.

## Track outcomes with webhooks

Implement webhook handling to track the customer journey. See [Implementing Webhooks](/developer-resources/integration-guide#implementing-webhooks).

* **subscription.active**: Mandate authorized and subscription activated
* **subscription.failed**: Creation failed (e.g., mandate failure)
* **subscription.on\_hold**: Subscription placed on hold (e.g., unpaid state)
* **payment.succeeded**: Charge succeeded
* **payment.failed**: Charge failed

<Tip>
  For on-demand flows, focus on `payment.succeeded` and `payment.failed` to reconcile usage-based charges.
</Tip>

## Testing and next steps

<Steps>
  <Step title="Create in test mode">
    Use your test API key to create the subscription with `payment_link: true`, then open the link and complete the mandate.
  </Step>

  <Step title="Trigger a charge">
    Call the charge endpoint with a small `product_price` (e.g., `100`) and verify you receive `payment.succeeded`.
  </Step>

  <Step title="Go live">
    Switch to your live API key once you have validated events and internal state updates.
  </Step>
</Steps>

## Troubleshooting

* **422 Invalid Request**: Ensure `on_demand.mandate_only` is provided on creation and `product_price` is provided for charges.
* **Currency errors**: If you override `product_currency`, confirm it’s supported for your account and customer.
* **No webhooks received**: Verify your webhook URL and signature secret configuration.


# Overlay Checkout Guide
Source: https://docs.dodopayments.com/developer-resources/overlay-checkout

A modern TypeScript library for embedding Dodo Payments overlay checkout and listening to checkout events in real-time.

## Overview

The Dodo Payments Checkout SDK provides a seamless way to integrate our payment overlay into your web application. Built with TypeScript and modern web standards, it offers a robust solution for handling payments with real-time event handling and customizable themes.

<Frame>
  <img src="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/overlay-checkout.png?fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=15d90c695e92914a9d54b10509d6fe47" alt="Overlay Checkout Cover Image" data-og-width="3826" width="3826" data-og-height="2160" height="2160" data-path="images/cover-images/overlay-checkout.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/overlay-checkout.png?w=280&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=67930ac9b97b42692611ffaa063b0338 280w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/overlay-checkout.png?w=560&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=5bc275c0c82994faf7507699f3443cda 560w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/overlay-checkout.png?w=840&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=d85ff73e834510f856f521d74e8d9ecd 840w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/overlay-checkout.png?w=1100&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=2fadc48d6b3d40665366b1922e458ca3 1100w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/overlay-checkout.png?w=1650&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=0f552d1695faa8239eec542a0b1eeefe 1650w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/overlay-checkout.png?w=2500&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=3e25457d894290ee38da2f9319edb999 2500w" />
</Frame>

## Resources

* 📚 [Integration Documentation](https://docs.dodopayments.com/api-reference/overlay-checkout)
* 🎮 [Interactive Demo](https://atlas.dodopayments.com#overlay-checkout)
* 💻 [Demo Source Code](https://github.com/dodopayments/dodo-checkout-demo/blob/main/src/components/Home/OverlayCheckout.tsx)

## Installation

```bash  theme={null}
# Using npm
npm install dodopayments-checkout

# Using yarn
yarn add dodopayments-checkout

# Using pnpm
pnpm add dodopayments-checkout
```

## Quick Start

```typescript  theme={null}
import { DodoPayments } from "dodopayments-checkout";

// Initialize the SDK
DodoPayments.Initialize({
  mode: "live", // 'test' or 'live'
  onEvent: (event) => {
    console.log("Checkout event:", event);
  },
});

// Open checkout
DodoPayments.Checkout.open({
  checkoutUrl: "https://checkout.dodopayments.com/session/cks_123" // Get this url from create checkout session api
});
```

## Configuration

### Initialize Options

```typescript  theme={null}
interface InitializeOptions {
  mode: "test" | "live";
  onEvent: (event: CheckoutEvent) => void;
}
```

| Option    | Type     | Required | Description                                    |
| --------- | -------- | -------- | ---------------------------------------------- |
| `mode`    | string   | Yes      | Environment mode: 'test' or 'live'             |
| `onEvent` | function | Yes      | Callback function for handling checkout events |

### Checkout Options

```typescript  theme={null}
interface CheckoutOptions {
  checkoutUrl: string;
}
```

| Option        | Type   | Required | Description                                           |
| ------------- | ------ | -------- | ----------------------------------------------------- |
| `checkoutUrl` | string | Yes      | Checkout session URL from create checkout session API |

## Event Handling

The SDK provides real-time events that you can listen to:

```typescript  theme={null}
DodoPayments.Initialize({
  onEvent: (event: CheckoutEvent) => {
    switch (event.event_type) {
      case "checkout.opened":
        // Checkout overlay has been opened
        break;
      case "checkout.payment_page_opened":
        // Payment page has been displayed
        break;
      case "checkout.customer_details_submitted":
        // Customer and billing details submitted
        break;
      case "checkout.closed":
        // Checkout has been closed
        break;
      case "checkout.redirect":
        // Checkout will perform a redirect
        break;
      case "checkout.error":
        // An error occurred
        break;
    }
  }
});
```

## Methods

### Open Checkout

```typescript  theme={null}
DodoPayments.Checkout.open({
  checkoutUrl: "https://checkout.dodopayments.com/session/cks_123" // Get this url from create checkout session api
});
```

### Close Checkout

```typescript  theme={null}
DodoPayments.Checkout.close();
```

### Check Status

```typescript  theme={null}
const isOpen = DodoPayments.Checkout.isOpen();
```

## Browser Support

* Chrome (latest)
* Firefox (latest)
* Safari (latest)
* Edge (latest)
* IE11+

> **Note**: Apple Pay is not currently supported in the overlay checkout experience. We plan to add support for Apple Pay in a future release.

## CDN Implementation

For quick integration, you can use our CDN:

```html  theme={null}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dodo Payments Checkout</title>
    
    <!-- Load DodoPayments -->
    <script src="https://cdn.jsdelivr.net/npm/dodopayments-checkout@latest/dist/index.js"></script>
    <script>
        // Initialize the SDK
        DodoPaymentsCheckout.DodoPayments.Initialize({
            mode: "test", // Change to 'live' for production
            onEvent: (event) => {
                console.log('Checkout event:', event);
            }
        });
    </script>
</head>
<body>
    <button onclick="openCheckout()">Checkout Now</button>

    <script>
        function openCheckout() {
            DodoPaymentsCheckout.DodoPayments.Checkout.open({
                checkoutUrl: "https://checkout.dodopayments.com/session/cks_123" // Get this url from create checkout session api
            });
        }
    </script>
</body>
</html>
```

## TypeScript Support

The SDK is written in TypeScript and includes comprehensive type definitions. All public APIs are fully typed for better developer experience.

## Error Handling

The SDK provides detailed error information through the event system. Always implement proper error handling in your `onEvent` callback:

```typescript  theme={null}
DodoPayments.Initialize({
  onEvent: (event: CheckoutEvent) => {
    if (event.event_type === "checkout.error") {
      console.error("Checkout error:", event.data?.message);
      // Handle error appropriately
    }
  }
});
```

## Best Practices

1. Always initialize the SDK before attempting to open the checkout
2. Implement proper error handling in your event callback
3. Use the test mode during development
4. Handle all relevant events for a complete user experience
5. Use valid checkout URLs from the create checkout session API
6. Use TypeScript for better type safety and developer experience

## Step-by-Step Guide

### 1. Project Setup

First, ensure you have a modern JavaScript/TypeScript project. We recommend using Next.js, React, or Vue.js.

### 2. Install the SDK

Install the Dodo Payments Checkout SDK using your preferred package manager:

```bash  theme={null}
# Using npm
npm install dodopayments-checkout

# Using yarn
yarn add dodopayments-checkout

# Using pnpm
pnpm add dodopayments-checkout
```

### 3. Basic Implementation

Create a new component for your checkout button:

```typescript  theme={null}
// components/CheckoutButton.tsx
"use client";

import { Button } from "@/components/ui/button";
import { DodoPayments } from "dodopayments-checkout";
import { useEffect, useState } from "react";

export function CheckoutButton() {
  const [isLoading, setIsLoading] = useState(false);

  useEffect(() => {
    // Initialize the SDK
    DodoPayments.Initialize({
      mode: "test", // Change to 'live' for production
      onEvent: (event) => {
        console.log("Checkout event:", event);
        
        // Handle different events
        switch (event.event_type) {
          case "checkout.opened":
            setIsLoading(false);
            break;
          case "checkout.error":
            // Handle error
            break;
        }
      },
    });
  }, []);

  const handleCheckout = async () => {
    try {
      setIsLoading(true);
      await DodoPayments.Checkout.open({
        checkoutUrl: "https://checkout.dodopayments.com/session/cks_123" // Get this url from create checkout session api
      });
    } catch (error) {
      console.error("Failed to open checkout:", error);
      setIsLoading(false);
    }
  };

  return (
    <Button 
      onClick={handleCheckout}
      disabled={isLoading}
    >
      {isLoading ? "Loading..." : "Checkout Now"}
    </Button>
  );
}
```

### 4. Add to Your Page

Use the checkout button in your page:

```typescript  theme={null}
// app/page.tsx
import { CheckoutButton } from "@/components/CheckoutButton";

export default function Home() {
  return (
    <main className="flex min-h-screen flex-col items-center justify-center p-24">
      <h1>Welcome to Our Store</h1>
      <CheckoutButton />
    </main>
  );
}
```

### 5. Handle Success and Failure

Create success and failure pages:

```typescript  theme={null}
// app/success/page.tsx
export default function SuccessPage() {
  return (
    <div className="flex min-h-screen flex-col items-center justify-center">
      <h1>Payment Successful!</h1>
      <p>Thank you for your purchase.</p>
    </div>
  );
}

// app/failure/page.tsx
export default function FailurePage() {
  return (
    <div className="flex min-h-screen flex-col items-center justify-center">
      <h1>Payment Failed</h1>
      <p>Please try again or contact support.</p>
    </div>
  );
}
```

### 6. Testing Your Integration

1. Start your development server:

```bash  theme={null}
npm run dev
```

2. Test the checkout flow:
   * Click the checkout button
   * Verify the overlay appears
   * Test the payment flow using test credentials
   * Confirm redirects work correctly

### 7. Going Live

When you're ready to go live:

1. Change the mode to 'live':

```typescript  theme={null}
DodoPayments.Initialize({
  mode: "live",
  onEvent: (event) => {
    console.log("Checkout event:", event);
  }
});
```

2. Update your checkout URLs to use live checkout sessions
3. Test the complete flow in production
4. Monitor events and errors

### Common Issues and Solutions

1. **Checkout not opening**
   * Verify SDK initialization
   * Check for console errors
   * Ensure checkout URL is valid and from create checkout session API

2. **Events not firing**
   * Confirm event handler is properly set up
   * Check for JavaScript errors
   * Verify network connectivity

3. **Styling issues**
   * Ensure no CSS conflicts
   * Check theme settings
   * Verify responsive design

For more help, visit our Discord or contact our developer support team.


# React Native
Source: https://docs.dodopayments.com/developer-resources/react-native-integration

Complete guide to integrating Dodo Payments SDK in your React Native application for secure payment processing

# React Native SDK Integration

The Dodo Payments React Native SDK enables you to build secure payment experiences in your native Android and iOS apps. Our SDK provides customizable UI components and screens for collecting payment details.

* 📦 Install our SDK from [NPM](https://www.npmjs.com/package/dodopayments-react-native-sdk)
* 📚 View our [demo repository](https://github.com/dodopayments/dodopayments-react-native-demo) for complete implementation examples
* 🎥 Watch our [demo video](https://youtube.com/shorts/uy4vikrKMPI) to see the Dodo Payments SDK in action

<Frame>
  <iframe className="w-full aspect-video rounded-md" src="https://www.youtube.com/embed/uy4vikrKMPI" title="React Native SDK Demo | Dodo Payments" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen />
</Frame>

## Features

<CardGroup cols={1}>
  <Card title="Simplified Security" icon="shield-check">
    Collect sensitive payment data securely while remaining PCI compliant
  </Card>

  <Card title="Multiple Payment Methods" icon="credit-card">
    Accept various [payment methods](/features/payment-methods) to expand global reach
  </Card>

  <Card title="Native UI" icon="mobile">
    Native screens and elements for Android and iOS
  </Card>
</CardGroup>

<Note>
  Currently, Apple Pay, Google Pay, Cash App, and UPI are not supported in the React Native SDK. We are actively working to add support for these payment methods in future releases.
</Note>

## Installation

<Steps>
  <Step title="Install the SDK">
    Install the Dodo Payments SDK using your preferred package manager:

    <Tabs>
      <Tab title="npm">
        ```bash  theme={null}
        npm install dodopayments-react-native-sdk
        ```
      </Tab>

      <Tab title="yarn">
        ```bash  theme={null}
        yarn add dodopayments-react-native-sdk
        ```
      </Tab>
    </Tabs>
  </Step>

  <Step title="Platform-specific setup">
    <Tabs>
      <Tab title="iOS">
        Run pod install in your iOS folder:

        ```bash  theme={null}
        cd ios && pod install && npm run ios
        ```
      </Tab>

      <Tab title="Android">
        Run the following command:

        ```bash  theme={null}
        npm run android
        ```
      </Tab>
    </Tabs>
  </Step>
</Steps>

## Client-Side Setup

<Steps>
  <Step title="Get Publishable Key">
    Get your publishable key from the Dodo Payments dashboard. (Distinct for both test and live modes)
    [https://app.dodopayments.com/developer/others](https://app.dodopayments.com/developer/others)
  </Step>

  <Step title="Setup Payment Provider">
    Wrap your app with the `DodoPaymentProvider`:

    ```tsx App.tsx theme={null}
    import React from 'react';
    import { DodoPaymentProvider } from 'dodopayments-react-native-sdk';
    import PaymentScreen from './PaymentScreen';

    function App() {
      return (
        <DodoPaymentProvider publishableKey="YOUR_PUBLISHABLE_KEY">
          <PaymentScreen />
        </DodoPaymentProvider>
      );
    }

    export default App;
    ```

    <Note>
      You'll need to generate API keys from your Dodo Payments dashboard. See our [API key generation guide](/api-reference/introduction#api-key-generation) for detailed instructions.
    </Note>
  </Step>

  <Step title="Create payment utility function">
    Create a utility function to fetch payment parameters from your backend API:

    ```tsx utils/fetchPaymentParams.ts theme={null}
    const API_URL = 'YOUR_BACKEND_URL'; // Replace with your server URL

    const fetchPaymentParams = async () => {
      const response = await fetch(`${API_URL}/create-payment`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
      });
      
      if (!response.ok) {
        throw new Error('Failed to fetch payment parameters');
      }
      
      return await response.json();
    };

    export default fetchPaymentParams;
    ```

    <Note>
      This function assumes you have a backend API endpoint that creates payment intents and returns a client secret. Ensure your backend is properly configured to handle payment creation. See our [API Integration Tutorial](/developer-resources/integration-tutorial) for backend setup examples.
    </Note>
  </Step>

  <Step title="Implement the payment screen">
    Create your payment screen using the `useCheckout` hook. Here's a complete implementation:

    ```tsx PaymentScreen.tsx theme={null}
    import React from 'react';
    import { View, Text, useColorScheme } from 'react-native';
    import { useCheckout, type sessionParams } from 'dodopayments-react-native-sdk';
    import fetchPaymentParams from './utils/fetchPaymentParams';

    const PaymentScreen = () => {
      const { initPaymentSession, presentPaymentSheet } = useCheckout();
      const [error, setError] = React.useState('');
      const [message, setMessage] = React.useState('');
      const [loading, setLoading] = React.useState(false);
      const [showSuccessScreen, setShowSuccessScreen] = React.useState(false);
      const isDarkMode = useColorScheme() === 'dark';

      const processPayment = async () => {
        setLoading(true);
        setMessage('');
        setError('');

        try {
          // 1. Get payment parameters from your backend
          const key = await fetchPaymentParams();
          
          // 2. Initialize payment session
          const paymentSheetParamsResult = await initPaymentSession({
            clientSecret: key.clientSecret,
          });
          
          // 3. Configure and present payment sheet
          const params: sessionParams = {
            ...(paymentSheetParamsResult as sessionParams),
            configuration: {
              appearance: {
                themes: isDarkMode ? 'dark' : 'light',
                primaryButton: {
                  colors: {
                    light: {
                      background: 'green',
                      componentBorder: 'green',
                      placeholderText: 'yellow',
                    },
                    dark: {
                      background: 'green',
                      componentBorder: 'green',
                      placeholderText: 'yellow',
                    },
                  },
                  shapes: {
                    borderRadius: 30,
                    borderWidth: 3,
                  },
                },
              },
              mode: 'test', // DEFAULTS TO TEST MODE
            },
          };

          const paymentSheetResponse = await presentPaymentSheet(params);

          // 4. Handle payment result
          switch (paymentSheetResponse?.status) {
            case 'cancelled':
              setError('Payment cancelled by user.');
              break;
            case 'succeeded':
              setMessage('');
              setShowSuccessScreen(true);
              break;
            case 'failed':
              setError('Payment failed : \n' + paymentSheetResponse?.message);
              break;
            default:
              setError(paymentSheetResponse?.message);
              setMessage('');
          }
        } catch (err) {
          setError('Failed to process payment');
        } finally {
          setLoading(false);
        }
      };

      return (
        <View>
          <Button 
            onPress={processPayment}
            disabled={loading}
            title={loading ? 'Processing...' : 'Pay Now'}
          />
          {error && <Text style={{ color: 'red' }}>{error}</Text>}
          {message && <Text style={{ color: 'green' }}>{message}</Text>}
          {showSuccessScreen && (
            <PaymentSuccessScreen
              amount={total}
              onContinue={() => setShowSuccessScreen(false)}
            />
          )}
        </View>
      );
    };

    export default PaymentScreen;
    ```

    <Note>
      For complete examples with styling, error handling, and customization options, check out our demo repositories:

      * [Basic Integration Demo](https://github.com/dodopayments/dodopayments-react-native-demo)
    </Note>
  </Step>
</Steps>

## Configuration Options

### Session Parameters

<ParamField path="clientSecret" type="string" required>
  The client secret from your payment intent, obtained from One time payment or subscription API.
</ParamField>

<ParamField path="mode" type="string" required>
  The mode of the payment session (test or live).
</ParamField>

<ParamField path="configuration.appearance" type="object">
  Customization options for the payment sheet appearance
</ParamField>

<ParamField path="configuration.appearance.themes" type="string">
  Theme mode: `'light'` or `'dark'`
</ParamField>

### Appearance Customization

You can customize the React Native Unified Checkout to match your app's design by modifying colors, fonts, and more through the appearance parameter when calling `initPaymentSession()`.

#### Color Customization

Each color category determines the color of one or more components in the UI. For example, `primary` defines the color of the Pay button.

| Color Category        | Usage                                                        |
| --------------------- | ------------------------------------------------------------ |
| `primary`             | Primary color for the Pay button and selected items          |
| `background`          | Background color of the payment page                         |
| `componentBackground` | Background color for inputs, tabs, and other components      |
| `componentBorder`     | External border color for inputs, tabs, and other components |
| `componentDivider`    | Internal border color (shared borders) for components        |
| `primaryText`         | Header text color                                            |
| `secondaryText`       | Label text color for input fields                            |
| `componentText`       | Input text color (e.g., card number, zip code)               |
| `placeholderText`     | Placeholder text color for input fields                      |
| `icon`                | Color for icons (e.g., close button)                         |
| `error`               | Color for error messages and destructive actions             |

Example configuration with light and dark mode support:

```tsx  theme={null}
const appearance = {
  colors: {
    light: {
      primary: '#F8F8F2',
      background: '#ffffff',
      componentBackground: '#E6DB74',
      componentBorder: '#FD971F',
      componentDivider: '#FD971F',
      primaryText: '#F8F8F2',
      secondaryText: '#75715E',
      componentText: '#AE81FF',
      placeholderText: '#E69F66',
      icon: '#F92672',
      error: '#FF0000',
    },
    dark: {
      primary: '#00ff0099',
      background: '#ff0000',
      componentBackground: '#ff0080',
      componentBorder: '#62ff08',
      componentDivider: '#d6de00',
      primaryText: '#5181fc',
      secondaryText: '#ff7b00',
      componentText: '#00ffff',
      placeholderText: '#00ffff',
      icon: '#f0f0f0',
      error: '#0f0f0f',
    },
  },
};
```

#### Shape Customization

You can customize the border radius, border width, and shadow used throughout the payment interface:

```tsx  theme={null}
const appearance = {
  shapes: {
    borderRadius: 10, // Border radius for input fields, tabs, and components
    borderWidth: 1,   // Border width for components
  },
};
```

#### Component-Specific Customization

You can customize specific UI components like the primary button (Pay button). These settings take precedence over the global appearance settings:

```tsx  theme={null}
const appearance = {
  primaryButton: {
    colors: {
      background: '#000000',
      text: '#ffffff',
      border: '#ff00ff',
    },
    shapes: {
      borderRadius: 10,
      borderWidth: 1.5,
    },
  },
};
```

To apply these customizations, include them in your payment session configuration:

```tsx  theme={null}
const params: sessionParams = {
  ...paymentSheetParams,
  configuration: {
    appearance: {
      themes: isDarkMode ? 'dark' : 'light',
      ...appearance, // Include your custom appearance settings
    },
  },
};
```

## Error Handling

Handle different payment states in your checkout function:

```tsx  theme={null}
const handlePaymentResult = (paymentSheetResponse) => {
  switch (paymentSheetResponse?.status) {
    case 'cancelled':
      // User cancelled the payment
      console.log('Payment cancelled by user');
      break;
    case 'succeeded':
      // Payment completed successfully
      console.log('Payment succeeded');
      // Navigate to success screen or update UI
      break;
    case 'failed':
      // Payment failed
      console.log('Payment failed:', paymentSheetResponse?.message);
      // Show error message to user
      break;
    default:
      console.log('Unknown payment status:', paymentSheetResponse?.status);
  }
};
```

<AccordionGroup>
  <Accordion title="Common Error Scenarios">
    * **Network connectivity issues**: Ensure stable internet connection
    * **Invalid client secret**: Verify backend is generating valid payment intents
    * **Missing peer dependencies**: Install all required dependencies
    * **Platform-specific setup**: Complete iOS and Android configuration steps
    * **API errors**: Check our [Error Codes Reference](/api-reference/error-codes) for detailed error handling
  </Accordion>

  <Accordion title="Debugging Tips">
    * Enable debug logging in development
    * Check network requests to your backend
    * Verify API keys are correctly configured
    * Test on both iOS and Android platforms
    * Review our [Technical FAQs](/api-reference/technical-faqs) for common issues
    * Use [Test vs Live Mode](/miscellaneous/test-mode-vs-live-mode) appropriately
  </Accordion>
</AccordionGroup>

### Test Payment Methods

<Tip>
  Use test card numbers in development to verify your integration without processing real payments. Learn more about our [testing process](/miscellaneous/testing-process) and available test environments.
</Tip>


# Remix Adaptor
Source: https://docs.dodopayments.com/developer-resources/remix-adaptor

Learn how to integrate Dodo Payments with your Remix App Router project using our Remix Adaptor. Covers checkout, customer portal, webhooks, and secure environment setup.

<CardGroup cols={2}>
  <Card title="Checkout Handler" icon="cart-shopping" href="#checkout-route-handler">
    Integrate Dodo Payments checkout into your Remix app.
  </Card>

  <Card title="Customer Portal" icon="user" href="#customer-portal-route-handler">
    Allow customers to manage subscriptions and details.
  </Card>

  <Card title="Webhooks" icon="bell" href="#webhook-route-handler">
    Receive and process Dodo Payments webhook events.
  </Card>
</CardGroup>

## Installation

<Steps>
  <Step title="Install the package">
    Run the following command in your project root:

    ```bash  theme={null}
    npm install @dodopayments/remix
    ```
  </Step>

  <Step title="Set up environment variables">
    Create a <code>.env</code> file in your project root:

    ```env expandable theme={null}
    DODO_PAYMENTS_API_KEY=your-api-key
    DODO_PAYMENTS_WEBHOOK_SECRET=your-webhook-secret
    DODO_PAYMENTS_RETURN_URL=https://yourdomain.com/checkout/success
    DODO_PAYMENTS_ENVIRONMENT="test_mode" or "live_mode"
    ```

    <Warning>
      Never commit your <code>.env</code> file or secrets to version control.
    </Warning>
  </Step>
</Steps>

## Route Handler Examples

<Info>
  All examples assume you are using the Remix App Router.
</Info>

<Tabs>
  <Tab title="Checkout Handler">
    <Info>
      Use this handler to integrate Dodo Payments checkout into your Remix app. Supports static (GET), dynamic (POST), and session (POST) payment flows.
    </Info>

    <CodeGroup>
      ```typescript Remix Route Handler expandable theme={null}
      // app/routes/api.checkout.tsx
      import { Checkout } from "@dodopayments/remix";
      import type { LoaderFunctionArgs } from "@remix-run/node";

      const checkoutGetHandler = Checkout({
          bearerToken: process.env.DODO_PAYMENTS_API_KEY,
          returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
          environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
          type: "static"
      });

      const checkoutPostHandler = Checkout({
          bearerToken: process.env.DODO_PAYMENTS_API_KEY,
          returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
          environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
          type: "dynamic", // for dynamic checkout
      });

      const checkoutSessionHandler = Checkout({
          bearerToken: process.env.DODO_PAYMENTS_API_KEY,
          returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
          environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
          type: "session", // for checkout sessions
      });

      export const loader = ({ request }: LoaderFunctionArgs) => checkoutGetHandler(request);
      export const action = ({ request }: LoaderFunctionArgs) => {
          // You can conditionally route to different handlers based on your needs
          // For checkout sessions, use checkoutSessionHandler(request)
          return checkoutPostHandler(request);
      };
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Static Checkout Curl example expandable theme={null}
      curl --request GET \
      --url 'https://example.com/api/checkout?productId=pdt_fqJhl7pxKWiLhwQR042rh' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Dynamic Checkout Curl example expandable theme={null}
      curl --request POST \
      --url https://example.com/api/checkout \
      --header 'Content-Type: application/json' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test \
      --data '{
      "billing": {
        "city": "Texas",
        "country": "US",
        "state": "Texas",
        "street": "56, hhh",
        "zipcode": "560000"
      },
      "customer": {
        "email": "test@example.com",
        	"name": "test"
      },
      "metadata": {},
      "payment_link": true,
        "product_id": "pdt_QMDuvLkbVzCRWRQjLNcs",
        "quantity": 1,
        "billing_currency": "USD",
        "discount_code": "IKHZ23M9GQ",
        "return_url": "https://example.com",
        "trial_period_days": 10
      }'
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Checkout Session Curl example expandable theme={null}
      curl --request POST \
      --url https://example.com/api/checkout \
      --header 'Content-Type: application/json' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test \
      --data '{
      "product_cart": [
        {
          "product_id": "pdt_QMDuvLkbVzCRWRQjLNcs",
          "quantity": 1
        }
      ],
      "customer": {
        "email": "test@example.com",
        "name": "test"
      },
      "return_url": "https://example.com/success"
      }'
      ```
    </CodeGroup>
  </Tab>

  <Tab title="Customer Portal Handler">
    <Info>
      Use this handler to allow customers to manage their subscriptions and details via the Dodo Payments customer portal.
    </Info>

    <CodeGroup>
      ```typescript Remix Route Handler expandable theme={null}
      // app/routes/api.customer-portal.tsx
      import { CustomerPortal } from "@dodopayments/remix";
      import type { LoaderFunctionArgs } from "@remix-run/node";

      const customerPortalHandler = CustomerPortal({
          bearerToken: process.env.DODO_PAYMENTS_API_KEY,
          environment: process.env.DODO_PAYMENTS_ENVIRONMENT
      });

      export const loader = ({ request }: LoaderFunctionArgs) => customerPortalHandler(request);
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Customer Portal Curl example expandable theme={null}
      curl --request GET \
      --url 'https://example.com/api/customer-portal?customer_id=cus_9VuW4K7O3GHwasENg31m&send_email=true' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test
      ```
    </CodeGroup>
  </Tab>

  <Tab title="Webhook Handler">
    <Info>
      Use this handler to receive and process Dodo Payments webhook events securely in your Remix app.
    </Info>

    <CodeGroup>
      ```typescript Remix Route Handler expandable theme={null}
      // app/routes/api.webhook.tsx
      import { Webhooks } from "@dodopayments/remix";
      import type { LoaderFunctionArgs } from "@remix-run/node";

      const webhookHandler = Webhooks({
      webhookKey: process.env.DODO_PAYMENTS_WEBHOOK_SECRET,
      onPayload: async (payload) => {
          //Handle Payload Here
          console.log(payload)
      }
      });
      export const action = ({ request }: LoaderFunctionArgs) => webhookHandler(request);
      ```
    </CodeGroup>
  </Tab>
</Tabs>

## Checkout Route Handler

<Info>
  Dodo Payments supports three types of payment flows for integrating payments into your website, this adaptor supports all types of payment flows.
</Info>

* **Static Payment Links:** Instantly shareable URLs for quick, no-code payment collection.
* **Dynamic Payment Links:** Programmatically generate payment links with custom details using the API or SDKs.
* **Checkout Sessions:** Create secure, customizable checkout experiences with pre-configured product carts and customer details.

<AccordionGroup>
  <Accordion title="Static Checkout (GET)">
    ### Supported Query Parameters

    <ParamField query="productId" type="string" required>
      Product identifier (e.g., <code>?productId=pdt\_nZuwz45WAs64n3l07zpQR</code>).
    </ParamField>

    <ParamField query="quantity" type="integer">
      Quantity of the product.
    </ParamField>

    <ParamField query="fullName" type="string">
      Customer's full name.
    </ParamField>

    <ParamField query="firstName" type="string">
      Customer's first name.
    </ParamField>

    <ParamField query="lastName" type="string">
      Customer's last name.
    </ParamField>

    <ParamField query="email" type="string">
      Customer's email address.
    </ParamField>

    <ParamField query="country" type="string">
      Customer's country.
    </ParamField>

    <ParamField query="addressLine" type="string">
      Customer's address line.
    </ParamField>

    <ParamField query="city" type="string">
      Customer's city.
    </ParamField>

    <ParamField query="state" type="string">
      Customer's state/province.
    </ParamField>

    <ParamField query="zipCode" type="string">
      Customer's zip/postal code.
    </ParamField>

    <ParamField query="disableFullName" type="boolean">
      Disable full name field.
    </ParamField>

    <ParamField query="disableFirstName" type="boolean">
      Disable first name field.
    </ParamField>

    <ParamField query="disableLastName" type="boolean">
      Disable last name field.
    </ParamField>

    <ParamField query="disableEmail" type="boolean">
      Disable email field.
    </ParamField>

    <ParamField query="disableCountry" type="boolean">
      Disable country field.
    </ParamField>

    <ParamField query="disableAddressLine" type="boolean">
      Disable address line field.
    </ParamField>

    <ParamField query="disableCity" type="boolean">
      Disable city field.
    </ParamField>

    <ParamField query="disableState" type="boolean">
      Disable state field.
    </ParamField>

    <ParamField query="disableZipCode" type="boolean">
      Disable zip code field.
    </ParamField>

    <ParamField query="paymentCurrency" type="string">
      Specify the payment currency (e.g., <code>USD</code>).
    </ParamField>

    <ParamField query="showCurrencySelector" type="boolean">
      Show currency selector.
    </ParamField>

    <ParamField query="paymentAmount" type="integer">
      Specify the payment amount (e.g., <code>1000</code> for \$10.00).
    </ParamField>

    <ParamField query="showDiscounts" type="boolean">
      Show discount fields.
    </ParamField>

    <ParamField query="metadata_*" type="string">
      Any query parameter starting with <code>metadata\_</code> will be passed as metadata.
    </ParamField>

    <Warning>
      If <code>productId</code> is missing, the handler returns a 400 response. Invalid query parameters also result in a 400 response.
    </Warning>

    ### Response Format

    Static checkout returns a JSON response with the checkout URL:

    ```json  theme={null}
    {
      "checkout_url": "https://checkout.dodopayments.com/..."
    }
    ```
  </Accordion>

  <Accordion title="Dynamic Checkout (POST)">
    * Send parameters as a JSON body in a POST request.
    * Supports both one-time and recurring payments.
    * For a complete list of supported POST body fields, refer to:
      * [Request body for a One Time Payment Product](https://docs.dodopayments.com/api-reference/payments/post-payments)
      * [Request body for a Subscription Product](https://docs.dodopayments.com/api-reference/subscriptions/post-subscriptions)

    ### Response Format

    Dynamic checkout returns a JSON response with the checkout URL:

    ```json  theme={null}
    {
      "checkout_url": "https://checkout.dodopayments.com/..."
    }
    ```
  </Accordion>

  <Accordion title="Checkout Sessions (POST)">
    Checkout sessions provide a more secure, hosted checkout experience that handles the complete payment flow for both one-time purchases and subscriptions with full customization control.

    Refer to [Checkout Sessions Integration Guide](https://docs.dodopayments.com/developer-resources/checkout-session) for more details and a complete list of supported fields.

    ### Response Format

    Checkout sessions return a JSON response with the checkout URL:

    ```json  theme={null}
    {
      "checkout_url": "https://checkout.dodopayments.com/session/..."
    }
    ```
  </Accordion>
</AccordionGroup>

## Customer Portal Route Handler

The Customer Portal Route Handler enables you to seamlessly integrate the Dodo Payments customer portal into your Remix application.

### Query Parameters

<ParamField query="customer_id" type="string" required>
  The customer ID for the portal session (e.g., <code>?customer\_id=cus\_123</code>).
</ParamField>

<ParamField query="send_email" type="boolean">
  If set to <code>true</code>, sends an email to the customer with the portal link.
</ParamField>

<Warning>
  Returns 400 if <code>customer\_id</code> is missing.
</Warning>

## Webhook Route Handler

* **Method:** Only POST requests are supported. Other methods return 405.
* **Signature Verification:** Verifies the webhook signature using <code>webhookKey</code>. Returns 401 if verification fails.
* **Payload Validation:** Validated with Zod. Returns 400 for invalid payloads.
* **Error Handling:**
  * 401: Invalid signature
  * 400: Invalid payload
  * 500: Internal error during verification
* **Event Routing:** Calls the appropriate event handler based on the payload type.

### Supported Webhook Event Handlers

<CodeGroup>
  ```typescript Typescript expandable theme={null}
  onPayload?: (payload: WebhookPayload) => Promise<void>;
  onPaymentSucceeded?: (payload: WebhookPayload) => Promise<void>;
  onPaymentFailed?: (payload: WebhookPayload) => Promise<void>;
  onPaymentProcessing?: (payload: WebhookPayload) => Promise<void>;
  onPaymentCancelled?: (payload: WebhookPayload) => Promise<void>;
  onRefundSucceeded?: (payload: WebhookPayload) => Promise<void>;
  onRefundFailed?: (payload: WebhookPayload) => Promise<void>;
  onDisputeOpened?: (payload: WebhookPayload) => Promise<void>;
  onDisputeExpired?: (payload: WebhookPayload) => Promise<void>;
  onDisputeAccepted?: (payload: WebhookPayload) => Promise<void>;
  onDisputeCancelled?: (payload: WebhookPayload) => Promise<void>;
  onDisputeChallenged?: (payload: WebhookPayload) => Promise<void>;
  onDisputeWon?: (payload: WebhookPayload) => Promise<void>;
  onDisputeLost?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionActive?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionOnHold?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionRenewed?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionPlanChanged?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionCancelled?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionFailed?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionExpired?: (payload: WebhookPayload) => Promise<void>;
  onLicenseKeyCreated?: (payload: WebhookPayload) => Promise<void>;
  ```
</CodeGroup>

***

## Prompt for LLM

```

You are an expert Remix developer assistant. Your task is to guide a user through integrating the @dodopayments/remix adapter into their existing Remix project.

The @dodopayments/remix adapter provides route handlers for Dodo Payments' Checkout, Customer Portal, and Webhook functionalities, designed for Remix route handlers.

First, install the necessary packages. Use the package manager appropriate for your project (npm, yarn, or bun) based on the presence of lock files (e.g., package-lock.json for npm, yarn.lock for yarn, bun.lockb for bun):

npm install @dodopayments/remix

Here's how you should structure your response:

    Ask the user which functionalities they want to integrate.

"Which parts of the @dodopayments/remix adapter would you like to integrate into your project? You can choose one or more of the following:

    Checkout Route Handler (for handling product checkouts)

    Customer Portal Route Handler (for managing customer subscriptions/details)

    Webhook Route Handler (for receiving Dodo Payments webhook events)

    All (integrate all three)"

    Based on the user's selection, provide detailed integration steps for each chosen functionality.

If Checkout Route Handler is selected:

Purpose: This handler redirects users to the Dodo Payments checkout page.
File Creation: Create a new file at app/routes/api.checkout.tsx in your Remix project.

Code Snippet:

// app/routes/api.checkout.tsx
import { Checkout } from "@dodopayments/remix";
import type { LoaderFunctionArgs } from "@remix-run/node";

const checkoutGetHandler = Checkout({
  bearerToken: process.env.DODO_PAYMENTS_API_KEY,
  returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
  environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
  type: "static",
});

const checkoutPostHandler = Checkout({
  bearerToken: process.env.DODO_PAYMENTS_API_KEY,
  returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
  environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
  type: "dynamic", // for dynamic checkout
});

const checkoutSessionHandler = Checkout({
  bearerToken: process.env.DODO_PAYMENTS_API_KEY,
  returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
  environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
  type: "session", // for checkout sessions
});

export const loader = ({ request }: LoaderFunctionArgs) => checkoutGetHandler(request);

export const action = ({ request }: LoaderFunctionArgs) => {
  // You can conditionally route to different handlers based on your needs
  // For checkout sessions, use checkoutSessionHandler(request)
  return checkoutPostHandler(request);
};

If Customer Portal Route Handler is selected:

Purpose: This handler redirects authenticated users to their Dodo Payments customer portal.
File Creation: Create a new file at app/routes/api.customer-portal.tsx in your Remix project.

Code Snippet:

// app/routes/api.customer-portal.tsx
import { CustomerPortal } from "@dodopayments/remix";
import type { LoaderFunctionArgs } from "@remix-run/node";

const customerPortalHandler = CustomerPortal({
  bearerToken: process.env.DODO_PAYMENTS_API_KEY,
  environment: process.env.DODO_PAYMENTS_ENVIRONMENT
});

export const loader = ({ request }: LoaderFunctionArgs) => customerPortalHandler(request);

Query Parameters:

    customer_id (required): The customer ID for the portal session (e.g., ?customer_id=cus_123)

    send_email (optional, boolean): If set to true, sends an email to the customer with the portal link.

    Returns 400 if customer_id is missing.

If Webhook Route Handler is selected:

Purpose: This handler processes incoming webhook events from Dodo Payments, allowing your application to react to events like successful payments, refunds, or subscription changes.
File Creation: Create a new file at app/routes/api.webhook.tsx in your Remix project.

Code Snippet:

// app/routes/api.webhook.tsx
import { Webhooks } from "@dodopayments/remix";
import type { LoaderFunctionArgs } from "@remix-run/node";

const webhookHandler = Webhooks({
  webhookKey: process.env.DODO_PAYMENTS_WEBHOOK_SECRET,
  onPayload: async (payload) => {
    //Handle Payload Here
    console.log(payload)
  }
});

export const action = ({ request }: LoaderFunctionArgs) => webhookHandler(request);

Handler Details:

    Method: Only POST requests are supported. Other methods return 405.

    Signature Verification: The handler verifies the webhook signature using the webhookKey and returns 401 if verification fails.

    Payload Validation: The payload is validated with Zod. Returns 400 for invalid payloads.

Error Handling:

    401: Invalid signature

    400: Invalid payload

    500: Internal error during verification

Event Routing: Calls the appropriate event handler based on the payload type.

Supported Webhook Event Handlers:

    onPayload?: (payload: WebhookPayload) => Promise<void>

    onPaymentSucceeded?: (payload: WebhookPayload) => Promise<void>

    onPaymentFailed?: (payload: WebhookPayload) => Promise<void>

    onPaymentProcessing?: (payload: WebhookPayload) => Promise<void>

    onPaymentCancelled?: (payload: WebhookPayload) => Promise<void>

    onRefundSucceeded?: (payload: WebhookPayload) => Promise<void>

    onRefundFailed?: (payload: WebhookPayload) => Promise<void>

    onDisputeOpened?: (payload: WebhookPayload) => Promise<void>

    onDisputeExpired?: (payload: WebhookPayload) => Promise<void>

    onDisputeAccepted?: (payload: WebhookPayload) => Promise<void>

    onDisputeCancelled?: (payload: WebhookPayload) => Promise<void>

    onDisputeChallenged?: (payload: WebhookPayload) => Promise<void>

    onDisputeWon?: (payload: WebhookPayload) => Promise<void>

    onDisputeLost?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionActive?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionOnHold?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionRenewed?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionPaused?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionPlanChanged?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionCancelled?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionFailed?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionExpired?: (payload: WebhookPayload) => Promise<void>

    onLicenseKeyCreated?: (payload: WebhookPayload) => Promise<void>

    Environment Variable Setup:

To ensure the adapter functions correctly, you will need to manually set up the following environment variables in your Remix project's deployment environment (e.g., Vercel, Netlify, AWS, etc.):

    DODO_PAYMENTS_API_KEY: Your Dodo Payments API Key (required for Checkout and Customer Portal).

    DODO_PAYMENTS_RETURN_URL: (Optional) The URL to redirect to after a successful checkout (for Checkout handler).

    DODO_PAYMENTS_ENVIRONMENT: (Optional) The environment for the API (e.g., test or live).

    DODO_PAYMENTS_WEBHOOK_SECRET: Your Dodo Payments Webhook Secret (required for Webhook handler).

Example .env file:

DODO_PAYMENTS_API_KEY=your-api-key
DODO_PAYMENTS_RETURN_URL=your-return-url
DODO_PAYMENTS_ENVIRONMENT=test
DODO_PAYMENTS_WEBHOOK_SECRET=your-webhook-secret

Usage in your code:

bearerToken: process.env.DODO_PAYMENTS_API_KEY
webhookKey: process.env.DODO_PAYMENTS_WEBHOOK_SECRET

Important: Never commit sensitive environment variables directly into your version control. Use environment variables for all sensitive information.

If the user needs assistance setting up environment variables for their specific deployment environment, ask them what platform they are using (e.g., Vercel, Netlify, AWS, etc.), and provide guidance. You can also add comments to their PR or chat depending on the context

```


# CLI
Source: https://docs.dodopayments.com/developer-resources/sdks/cli

Command-line interface for interacting with the Dodo Payments API from your terminal

## Installation

### Go Install

```bash  theme={null}
go install github.com/dodopayments/dodopayments-cli/cmd/dodopayments@latest
```

### From Source

```bash  theme={null}
git clone https://github.com/dodopayments/dodopayments-cli.git
cd dodopayments-cli
go install ./cmd/dodopayments
```

## Quick Start

Set your API key:

```bash  theme={null}
export DODO_PAYMENTS_API_KEY=your_api_key_here
```

Basic command structure:

```bash  theme={null}
dodopayments [resource] [command] [flags]
```

Create a checkout session:

```bash  theme={null}
dodopayments checkout-sessions create \
  --product-cart.product_id prod_123 \
  --product-cart.quantity 1 \
  --return-url https://yourdomain.com/return
```

## Global Flags

| Flag              | Description                                                |
| ----------------- | ---------------------------------------------------------- |
| `--format`        | Output format: `auto`, `json`, `yaml`, `pretty`, `explore` |
| `--transform`     | Filter response using gjson syntax                         |
| `--debug`         | Enable verbose logging                                     |
| `--version`, `-v` | Display CLI version                                        |

## Common Commands

### Payments

```bash  theme={null}
# List payments
dodopayments payments list --limit 20 --format json

# Retrieve payment
dodopayments payments retrieve pay_123

# Get line items
dodopayments payments line-items pay_123
```

### Customers

```bash  theme={null}
# Create customer
dodopayments customers create \
  --email customer@example.com \
  --name "John Doe"

# List customers
dodopayments customers list

# Update customer
dodopayments customers update cus_123 --name "Jane Doe"
```

### Subscriptions

```bash  theme={null}
# Create subscription
dodopayments subscriptions create \
  --customer-id cus_123 \
  --product-id prod_456

# List subscriptions
dodopayments subscriptions list

# Get usage history
dodopayments subscriptions usage-history sub_123
```

### Products

```bash  theme={null}
# Create product
dodopayments products create \
  --name "Premium Plan" \
  --price.amount 2999 \
  --price.currency USD

# List products
dodopayments products list
```

## Usage-Based Billing

### Ingest Events

```bash  theme={null}
dodopayments usage-events ingest \
  --events.event_id api_call_12345 \
  --events.customer_id cus_abc123 \
  --events.event_name api_request \
  --events.timestamp 2024-01-15T10:30:00Z \
  --events.metadata.endpoint /api/v1/users
```

### Manage Meters

```bash  theme={null}
# Create meter
dodopayments meters create \
  --name "API Requests" \
  --event-name api_request \
  --aggregation count

# List meters
dodopayments meters list
```

## Output Formats

### JSON (for scripting)

```bash  theme={null}
dodopayments payments list --format json | jq '.data[] | {id, amount}'
```

### Pretty (for reading)

```bash  theme={null}
dodopayments payments retrieve pay_123 --format pretty
```

### Interactive Explore

```bash  theme={null}
dodopayments payments list --format explore
```

### Transform with gjson

```bash  theme={null}
# Extract all payment IDs
dodopayments payments list --transform "data.#.id"

# Filter and extract
dodopayments payments list --transform "data.#(amount>5000)#.id"
```

<Tip>
  Use `--format json` with `jq` for powerful data processing in shell scripts.
</Tip>

## Scripting Example

```bash  theme={null}
#!/bin/bash

# Export all payments to CSV
dodopayments payments list --format json | \
  jq -r '.data[] | [.id, .amount, .currency, .status] | @csv' > payments.csv

# Create customers from file
while IFS=',' read -r email name; do
  dodopayments customers create \
    --email "$email" \
    --name "$name" \
    --format json
done < customers.csv
```

## Shell Completion

Enable auto-completion:

```bash  theme={null}
# Bash
eval "$(dodopayments completion bash)"

# Zsh
eval "$(dodopayments completion zsh)"

# Fish
dodopayments completion fish | source
```

## Available Resources

The CLI provides commands for 24 resource categories:

* `checkout-sessions` - Checkout session management
* `payments` - Payment operations
* `subscriptions` - Recurring billing
* `customers` - Customer accounts
* `products` - Product catalog
* `licenses` - Software licensing
* `refunds` - Payment refunds
* `disputes` - Payment disputes
* `webhooks` - Event webhooks
* `meters` - Usage meters
* `usage-events` - Usage tracking
* `discounts` - Discount codes
* `payouts` - Seller payouts
* `brands` - Multi-brand management
* Plus 10 additional resources

<Info>
  Use `dodopayments --help` to see all available resources and `dodopayments [resource] --help` for resource-specific commands.
</Info>

## Resources

<CardGroup cols={2}>
  <Card title="GitHub Repository" icon="github" href="https://github.com/dodopayments/dodopayments-cli">
    View source code and releases
  </Card>

  <Card title="API Reference" icon="book" href="/api-reference/introduction">
    Complete API documentation
  </Card>
</CardGroup>

## Support

Need help with the CLI?

* **Discord**: Join our [community server](https://discord.gg/bYqAp4ayYh)
* **Email**: Contact us at [support@dodopayments.com](mailto:support@dodopayments.com)
* **GitHub**: Open an issue on the [repository](https://github.com/dodopayments/dodopayments-cli)


# C#
Source: https://docs.dodopayments.com/developer-resources/sdks/csharp

Integrate Dodo Payments into your .NET applications with modern async/await support

The C# SDK provides convenient access to the Dodo Payments REST API from applications written in C#. It features an async Task-based API with strong typing and is currently in beta.

<Info>
  The C# SDK is currently in beta. We're actively working on improvements and welcome your feedback.
</Info>

## Installation

Install the SDK using the .NET CLI:

```bash  theme={null}
dotnet add package DodoPayments.Client
```

<Info>
  The SDK requires .NET 8.0 or higher. It works with ASP.NET Core, Console applications, and other .NET project types.
</Info>

## Quick Start

Initialize the client and create a checkout session:

```csharp  theme={null}
using System;
using DodoPayments.Client;
using DodoPayments.Client.Models.CheckoutSessions;

// Configured using the DODO_PAYMENTS_API_KEY and DODO_PAYMENTS_BASE_URL environment variables
DodoPaymentsClient client = new();

CheckoutSessionCreateParams parameters = new()
{
    ProductCart =
    [
        new()
        {
            ProductID = "product_id",
            Quantity = 1,
        },
    ],
};

var checkoutSessionResponse = await client.CheckoutSessions.Create(parameters);

Console.WriteLine(checkoutSessionResponse.SessionId);
```

<Warning>
  Always store your API keys securely using environment variables, user secrets, or Azure Key Vault. Never hardcode them in your source code or commit them to version control.
</Warning>

## Core Features

<CardGroup cols={2}>
  <Card title="Async/Await" icon="bolt">
    Full async Task-based API for non-blocking operations
  </Card>

  <Card title="Strong Typing" icon="shield-check">
    Comprehensive type safety with nullable reference types
  </Card>

  <Card title="Dependency Injection" icon="layer-group">
    First-class support for .NET dependency injection
  </Card>

  <Card title="Configuration" icon="gear">
    Simple configuration via environment variables or appsettings.json
  </Card>
</CardGroup>

## Configuration

### Environment Variables

Configure using environment variables:

```bash .env theme={null}
DODO_PAYMENTS_API_KEY=your_api_key_here
```

```csharp  theme={null}
// Automatically reads from environment variables
DodoPaymentsClient client = new();
```

### Manual Configuration

Configure manually with bearer token:

```csharp  theme={null}
DodoPaymentsClient client = new() { BearerToken = "My Bearer Token" };
```

## Common Operations

### Create a Checkout Session

Generate a checkout session:

```csharp  theme={null}
var parameters = new CheckoutSessionCreateParams
{
    ProductCart =
    [
        new()
        {
            ProductID = "prod_123",
            Quantity = 1
        }
    ],
    ReturnUrl = "https://yourdomain.com/return"
};

var session = await client.CheckoutSessions.Create(parameters);
Console.WriteLine($"Checkout URL: {session.Url}");
```

### Manage Customers

Create and retrieve customer information:

```csharp  theme={null}
// Create a customer
var createParams = new CustomerCreateParams
{
    Email = "customer@example.com",
    Name = "John Doe",
    Metadata = new Dictionary<string, string>
    {
        { "user_id", "12345" }
    }
};

var customer = await client.Customers.Create(createParams);

// Retrieve customer
var retrieved = await client.Customers.Retrieve("cus_123");
Console.WriteLine($"Customer: {retrieved.Name} ({retrieved.Email})");
```

### Handle Subscriptions

Create and manage recurring subscriptions:

```csharp  theme={null}
// Create a subscription
var subscriptionParams = new SubscriptionCreateParams
{
    CustomerID = "cus_123",
    ProductID = "prod_456",
    PriceID = "price_789"
};

var subscription = await client.Subscriptions.Create(subscriptionParams);

// Cancel subscription
await client.Subscriptions.Cancel(subscription.Id);
```

## ASP.NET Core Integration

### Service Registration

Register the client in `Program.cs`:

```csharp Program.cs theme={null}
using DodoPayments.Client;

var builder = WebApplication.CreateBuilder(args);

// Register DodoPayments client
builder.Services.AddSingleton<DodoPaymentsClient>(sp =>
{
    var configuration = sp.GetRequiredService<IConfiguration>();
    return new DodoPaymentsClient
    {
        BearerToken = configuration["DodoPayments:ApiKey"]
    };
});

builder.Services.AddControllers();

var app = builder.Build();
app.MapControllers();
app.Run();
```

### Configuration

Add configuration in `appsettings.json`:

```json appsettings.json theme={null}
{
  "DodoPayments": {
    "ApiKey": "your_api_key_here"
  }
}
```

### API Controller

Create a controller using dependency injection:

```csharp  theme={null}
using Microsoft.AspNetCore.Mvc;
using DodoPayments.Client;
using DodoPayments.Client.Models.CheckoutSessions;

[ApiController]
[Route("api/[controller]")]
public class PaymentsController : ControllerBase
{
    private readonly DodoPaymentsClient _client;
    private readonly ILogger<PaymentsController> _logger;

    public PaymentsController(DodoPaymentsClient client, ILogger<PaymentsController> logger)
    {
        _client = client;
        _logger = logger;
    }

    [HttpPost("checkout")]
    public async Task<IActionResult> CreateCheckout([FromBody] CheckoutRequest request)
    {
        try
        {
            var parameters = new CheckoutSessionCreateParams
            {
                ProductCart = request.Items,
                ReturnUrl = Url.Action("Return", "Checkout", null, Request.Scheme)
            };

            var session = await _client.CheckoutSessions.Create(parameters);

            return Ok(new { checkoutUrl = session.Url });
        }
        catch (Exception ex)
        {
            _logger.LogError(ex, "Failed to create checkout");
            return BadRequest(new { error = ex.Message });
        }
    }
}

public record CheckoutRequest(List<ProductCartItem> Items);
```

### Service Layer Pattern

Create a service for business logic:

```csharp  theme={null}
public interface IPaymentService
{
    Task<CheckoutSessionResponse> CreateCheckoutAsync(List<ProductCartItem> items);
    Task<PaymentResponse> ProcessPaymentAsync(decimal amount, string currency, string customerId);
}

public class PaymentService : IPaymentService
{
    private readonly DodoPaymentsClient _client;
    private readonly ILogger<PaymentService> _logger;

    public PaymentService(DodoPaymentsClient client, ILogger<PaymentService> logger)
    {
        _client = client;
        _logger = logger;
    }

    public async Task<CheckoutSessionResponse> CreateCheckoutAsync(List<ProductCartItem> items)
    {
        var parameters = new CheckoutSessionCreateParams
        {
            ProductCart = items,
            ReturnUrl = "https://yourdomain.com/return"
        };

        return await _client.CheckoutSessions.Create(parameters);
    }

    public async Task<PaymentResponse> ProcessPaymentAsync(
        decimal amount,
        string currency,
        string customerId)
    {
        try
        {
            var parameters = new PaymentCreateParams
            {
                Amount = (long)(amount * 100), // Convert to cents
                Currency = currency,
                CustomerID = customerId
            };

            return await _client.Payments.Create(parameters);
        }
        catch (Exception ex)
        {
            _logger.LogError(ex, "Failed to process payment");
            throw;
        }
    }
}
```

## User Secrets (Development)

For development, use user secrets to store API keys:

```bash  theme={null}
dotnet user-secrets init
dotnet user-secrets set "DodoPayments:ApiKey" "your_api_key_here"
```

## Testing

Example unit test using xUnit:

```csharp  theme={null}
using Xunit;
using DodoPayments.Client;
using DodoPayments.Client.Models.CheckoutSessions;

public class PaymentServiceTests
{
    private readonly DodoPaymentsClient _client;

    public PaymentServiceTests()
    {
        _client = new DodoPaymentsClient
        {
            BearerToken = "test_key"
        };
    }

    [Fact]
    public async Task CreateCheckout_ShouldReturnSession()
    {
        // Arrange
        var parameters = new CheckoutSessionCreateParams
        {
            ProductCart =
            [
                new()
                {
                    ProductID = "prod_test",
                    Quantity = 1
                }
            ]
        };

        // Act
        var session = await _client.CheckoutSessions.Create(parameters);

        // Assert
        Assert.NotNull(session);
        Assert.NotNull(session.SessionId);
    }
}
```

## Resources

<CardGroup cols={2}>
  <Card title="GitHub Repository" icon="github" href="https://github.com/dodopayments/dodopayments-csharp">
    View source code and contribute
  </Card>

  <Card title="API Reference" icon="book" href="/api-reference/introduction">
    Complete API documentation
  </Card>

  <Card title="Discord Community" icon="discord" href="https://discord.gg/bYqAp4ayYh">
    Get help and connect with developers
  </Card>

  <Card title="Report Issues" icon="bug" href="https://github.com/dodopayments/dodopayments-csharp/issues">
    Report bugs or request features
  </Card>
</CardGroup>

## Support

Need help with the C# SDK?

* **Discord**: Join our [community server](https://discord.gg/bYqAp4ayYh) for real-time support
* **Email**: Contact us at [support@dodopayments.com](mailto:support@dodopayments.com)
* **GitHub**: Open an issue on the [repository](https://github.com/dodopayments/dodopayments-csharp)

## Contributing

Since the SDK is in beta, your feedback and contributions are especially valuable! Check the [contributing guidelines](https://github.com/dodopayments/dodopayments-csharp/blob/main/CONTRIBUTING.md) to get started.


# Go
Source: https://docs.dodopayments.com/developer-resources/sdks/go

Integrate Dodo Payments into your Go applications with an idiomatic, performant SDK

The Go SDK provides a clean and idiomatic Go interface for integrating Dodo Payments into your applications. It offers context support, strongly typed responses, middleware capabilities, and is safe for concurrent use.

## Installation

Install the SDK using Go modules:

```bash  theme={null}
go get github.com/dodopayments/dodopayments-go
```

<Info>
  The SDK supports Go 1.18 and later versions, leveraging modern Go features for optimal performance.
</Info>

## Quick Start

Initialize the client and create your first checkout session:

```go  theme={null}
package main

import (
	"context"
	"fmt"
	"log"

	"github.com/dodopayments/dodopayments-go"
	"github.com/dodopayments/dodopayments-go/option"
)

func main() {
	client := dodopayments.NewClient(
		option.WithBearerToken("My Bearer Token"), // defaults to os.LookupEnv("DODO_PAYMENTS_API_KEY")
		option.WithEnvironmentTestMode(),          // defaults to option.WithEnvironmentLiveMode()
	)
	
	checkoutSessionResponse, err := client.CheckoutSessions.New(context.TODO(), dodopayments.CheckoutSessionNewParams{
		CheckoutSessionRequest: dodopayments.CheckoutSessionRequestParam{
			ProductCart: dodopayments.F([]dodopayments.CheckoutSessionRequestProductCartParam{{
				ProductID: dodopayments.F("product_id"),
				Quantity:  dodopayments.F(int64(1)),
			}}),
		},
	})
	if err != nil {
		log.Fatal(err)
	}
	fmt.Printf("Session ID: %s\n", checkoutSessionResponse.SessionID)
}
```

<Warning>
  Always store your API keys securely using environment variables. Never hardcode them in your source code.
</Warning>

## Core Features

<CardGroup cols={2}>
  <Card title="Context Support" icon="clock">
    Full support for context.Context for cancellation and timeouts
  </Card>

  <Card title="Strong Typing" icon="shield-check">
    Strongly typed requests and responses for compile-time safety
  </Card>

  <Card title="Middleware" icon="layer-group">
    Extensible middleware support for logging, metrics, and custom logic
  </Card>

  <Card title="Goroutine Safe" icon="bolt">
    Thread-safe client designed for concurrent operations
  </Card>
</CardGroup>

## Configuration

### Context and Timeouts

Leverage Go's context for timeouts and cancellation:

```go  theme={null}
import (
	"context"
	"time"
	
	"github.com/dodopayments/dodopayments-go"
	"github.com/dodopayments/dodopayments-go/option"
)

// Create a context with timeout
ctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)
defer cancel()

payment, err := client.Payments.Create(ctx, dodopayments.PaymentCreateParams{
	Amount:     5000,
	Currency:   "USD",
	CustomerID: "cus_123",
})
if err != nil {
	if ctx.Err() == context.DeadlineExceeded {
		log.Println("Request timed out")
	} else {
		log.Fatal(err)
	}
}
```

### Retry Configuration

Configure automatic retry behavior:

```go  theme={null}
// Configure default for all requests (default is 2)
client := dodopayments.NewClient(
	option.WithMaxRetries(0), // disable retries
)

// Override per-request
client.CheckoutSessions.New(
	context.TODO(),
	dodopayments.CheckoutSessionNewParams{
		CheckoutSessionRequest: dodopayments.CheckoutSessionRequestParam{
			ProductCart: dodopayments.F([]dodopayments.CheckoutSessionRequestProductCartParam{{
				ProductID: dodopayments.F("product_id"),
				Quantity:  dodopayments.F(int64(0)),
			}}),
		},
	},
	option.WithMaxRetries(5),
)
```

## Common Operations

### Create a Checkout Session

Generate a checkout session:

```go  theme={null}
session, err := client.CheckoutSessions.New(ctx, dodopayments.CheckoutSessionNewParams{
	CheckoutSessionRequest: dodopayments.CheckoutSessionRequestParam{
		ProductCart: dodopayments.F([]dodopayments.CheckoutSessionRequestProductCartParam{{
			ProductID: dodopayments.F("prod_123"),
			Quantity:  dodopayments.F(int64(1)),
		}}),
		ReturnURL: dodopayments.F("https://yourdomain.com/return"),
	},
})
if err != nil {
	log.Fatal(err)
}

fmt.Printf("Checkout URL: %s\n", session.URL)
```

### Manage Customers

Create and retrieve customer information:

```go  theme={null}
// Create a customer
customer, err := client.Customers.New(ctx, dodopayments.CustomerNewParams{
	Email: dodopayments.F("customer@example.com"),
	Name:  dodopayments.F("John Doe"),
	Metadata: dodopayments.F(map[string]string{
		"user_id": "12345",
	}),
})
if err != nil {
	log.Fatal(err)
}

// Retrieve customer
customer, err = client.Customers.Get(ctx, "cus_123")
if err != nil {
	log.Fatal(err)
}

fmt.Printf("Customer: %s (%s)\n", customer.Name, customer.Email)
```

### Handle Subscriptions

Create and manage recurring subscriptions:

```go  theme={null}
// Create a subscription
subscription, err := client.Subscriptions.New(ctx, dodopayments.SubscriptionNewParams{
	CustomerID: dodopayments.F("cus_123"),
	ProductID:  dodopayments.F("prod_456"),
	PriceID:    dodopayments.F("price_789"),
})
if err != nil {
	log.Fatal(err)
}

// Get usage history
usageHistory, err := client.Subscriptions.GetUsageHistory(
	ctx,
	subscription.ID,
	dodopayments.SubscriptionGetUsageHistoryParams{
		StartDate: dodopayments.F("2024-01-01T00:00:00Z"),
		EndDate:   dodopayments.F("2024-03-31T23:59:59Z"),
	},
)
if err != nil {
	log.Fatal(err)
}
```

## Usage-Based Billing

### Ingest Usage Events

Track custom events:

```go  theme={null}
import "github.com/dodopayments/dodopayments-go"

response, err := client.UsageEvents.Ingest(ctx, dodopayments.UsageEventIngestParams{
	Events: dodopayments.F([]dodopayments.UsageEventIngestParamsEvent{{
		EventID:    dodopayments.F("api_call_12345"),
		CustomerID: dodopayments.F("cus_abc123"),
		EventName:  dodopayments.F("api_request"),
		Timestamp:  dodopayments.F("2024-01-15T10:30:00Z"),
		Metadata: dodopayments.F(map[string]string{
			"endpoint":     "/api/v1/users",
			"method":       "GET",
			"tokens_used":  "150",
		}),
	}}),
})
if err != nil {
	log.Fatal(err)
}
```

### List Usage Events

```go  theme={null}
// List events with filters
params := dodopayments.UsageEventListParams{
	CustomerID: dodopayments.F("cus_abc123"),
	EventName:  dodopayments.F("api_request"),
}

events, err := client.UsageEvents.List(ctx, params)
if err != nil {
	log.Fatal(err)
}

for _, event := range events.Data {
	fmt.Printf("Event %s: %s at %s\n", event.EventID, event.EventName, event.Timestamp)
}
```

## Error Handling

Handle specific error types:

```go  theme={null}
payment, err := client.Payments.Create(ctx, dodopayments.PaymentCreateParams{
	Amount:   5000,
	Currency: "USD",
})
if err != nil {
	if apiErr, ok := err.(*dodopayments.APIError); ok {
		fmt.Printf("API Error: %s\n", apiErr.Message)
		fmt.Printf("Status Code: %d\n", apiErr.StatusCode)
		fmt.Printf("Request ID: %s\n", apiErr.RequestID)
		
		// Handle specific error types
		switch apiErr.Type {
		case dodopayments.ErrorTypeAuthentication:
			log.Println("Authentication failed")
		case dodopayments.ErrorTypeInvalidRequest:
			log.Println("Invalid request parameters")
		case dodopayments.ErrorTypeRateLimit:
			log.Println("Rate limit exceeded")
		default:
			log.Printf("API error: %s\n", apiErr.Message)
		}
	} else {
		log.Fatal(err)
	}
}
```

## Middleware

Add custom middleware for logging or metrics:

```go  theme={null}
func Logger(req *http.Request, next option.MiddlewareNext) (res *http.Response, err error) {
	// Before the request
	start := time.Now()
	log.Printf("Request: %s %s\n", req.Method, req.URL)

	// Forward the request to the next handler
	res, err = next(req)

	// After the request
	end := time.Now()
	log.Printf("Response: %d in %v\n", res.StatusCode, end.Sub(start))

	return res, err
}

client := dodopayments.NewClient(
	option.WithMiddleware(Logger),
)
```

## Concurrency

The client is safe for concurrent use:

```go  theme={null}
package main

import (
	"context"
	"sync"
	"log"

	"github.com/dodopayments/dodopayments-go"
)

func main() {
	client := dodopayments.NewClient()
	
	var wg sync.WaitGroup
	for i := 0; i < 10; i++ {
		wg.Add(1)
		go func(idx int) {
			defer wg.Done()
			
			payment, err := client.Payments.Create(context.Background(), dodopayments.PaymentCreateParams{
				Amount:     1000,
				Currency:   "USD",
				CustomerID: "cus_123",
			})
			if err != nil {
				log.Printf("Failed to create payment %d: %v", idx, err)
				return
			}
			
			log.Printf("Created payment %d: %s", idx, payment.ID)
		}(i)
	}
	
	wg.Wait()
}
```

## Resources

<CardGroup cols={2}>
  <Card title="GitHub Repository" icon="github" href="https://github.com/dodopayments/dodopayments-go">
    View source code and contribute
  </Card>

  <Card title="API Reference" icon="book" href="/api-reference/introduction">
    Complete API documentation
  </Card>

  <Card title="Discord Community" icon="discord" href="https://discord.gg/bYqAp4ayYh">
    Get help and connect with developers
  </Card>

  <Card title="Report Issues" icon="bug" href="https://github.com/dodopayments/dodopayments-go/issues">
    Report bugs or request features
  </Card>
</CardGroup>

## Support

Need help with the Go SDK?

* **Discord**: Join our [community server](https://discord.gg/bYqAp4ayYh) for real-time support
* **Email**: Contact us at [support@dodopayments.com](mailto:support@dodopayments.com)
* **GitHub**: Open an issue on the [repository](https://github.com/dodopayments/dodopayments-go)

## Contributing

We welcome contributions! Check the [contributing guidelines](https://github.com/dodopayments/dodopayments-go/blob/main/CONTRIBUTING.md) to get started.


# Java
Source: https://docs.dodopayments.com/developer-resources/sdks/java

Integrate Dodo Payments into your Java applications with a robust, type-safe SDK

The Java SDK provides convenient and ergonomic access to the Dodo Payments REST API for applications written in Java. It utilizes Java-specific features like Optional, Stream, and CompletableFuture for modern Java development.

## Installation

### Maven

Add the dependency to your `pom.xml`:

```xml pom.xml theme={null}
<dependency>
  <groupId>com.dodopayments.api</groupId>
  <artifactId>dodo-payments-java</artifactId>
  <version>1.53.4</version>
</dependency>
```

### Gradle

Add the dependency to your `build.gradle`:

```kotlin build.gradle.kts theme={null}
implementation("com.dodopayments.api:dodo-payments-java:1.53.4")
```

<Info>
  The SDK supports Java 8 and all later versions, including Java 11, 17, and 21.
</Info>

## Quick Start

Initialize the client and create a checkout session:

```java  theme={null}
import com.dodopayments.api.client.DodoPaymentsClient;
import com.dodopayments.api.client.okhttp.DodoPaymentsOkHttpClient;
import com.dodopayments.api.models.checkoutsessions.CheckoutSessionRequest;
import com.dodopayments.api.models.checkoutsessions.CheckoutSessionResponse;

// Configure using environment variables (DODO_PAYMENTS_API_KEY, DODO_PAYMENTS_BASE_URL)
// Or system properties (dodopayments.apiKey, dodopayments.baseUrl)
DodoPaymentsClient client = DodoPaymentsOkHttpClient.fromEnv();

CheckoutSessionRequest params = CheckoutSessionRequest.builder()
    .addProductCart(CheckoutSessionRequest.ProductCart.builder()
        .productId("product_id")
        .quantity(1)
        .build())
    .build();
    
CheckoutSessionResponse checkoutSessionResponse = client.checkoutSessions().create(params);
System.out.println(checkoutSessionResponse.sessionId());
```

<Warning>
  Always store your API keys securely using environment variables, system properties, or a secure configuration management system. Never hardcode them in your source code.
</Warning>

## Core Features

<CardGroup cols={2}>
  <Card title="Type Safety" icon="shield-check">
    Strongly typed API with compile-time safety
  </Card>

  <Card title="Thread-Safe" icon="bolt">
    Safe for concurrent use in multi-threaded applications
  </Card>

  <Card title="Builder Pattern" icon="layer-group">
    Intuitive builder pattern for constructing requests
  </Card>

  <Card title="Async Support" icon="arrows-rotate">
    CompletableFuture support for asynchronous operations
  </Card>
</CardGroup>

## Configuration

### Environment Variables

Configure using environment variables or system properties:

```bash .env theme={null}
DODO_PAYMENTS_API_KEY=your_api_key_here
DODO_PAYMENTS_BASE_URL=https://live.dodopayments.com
```

```java  theme={null}
// Automatically reads from environment variables
DodoPaymentsClient client = DodoPaymentsOkHttpClient.fromEnv();
```

### Manual Configuration

Configure manually with all options:

```java  theme={null}
import java.time.Duration;

DodoPaymentsClient client = DodoPaymentsOkHttpClient.builder()
    .bearerToken("your_api_key_here")
    .baseUrl("https://live.dodopayments.com")
    .maxRetries(4)
    .timeout(Duration.ofSeconds(30))
    .responseValidation(true)
    .build();
```

### Test Mode

Configure for test/sandbox environment:

```java  theme={null}
DodoPaymentsClient testClient = DodoPaymentsOkHttpClient.builder()
    .fromEnv()
    .testMode()
    .build();
```

## Common Operations

### Create a Checkout Session

Generate a checkout session:

```java  theme={null}
CheckoutSessionRequest params = CheckoutSessionRequest.builder()
    .addProductCart(CheckoutSessionRequest.ProductCart.builder()
        .productId("prod_123")
        .quantity(1)
        .build())
    .returnUrl("https://yourdomain.com/return")
    .build();

CheckoutSessionResponse session = client.checkoutSessions().create(params);
System.out.println("Checkout URL: " + session.url());
```

### Manage Customers

Create and retrieve customer information:

```java  theme={null}
import com.dodopayments.api.models.customers.Customer;
import com.dodopayments.api.models.customers.CustomerCreateParams;

// Create a customer
CustomerCreateParams createParams = CustomerCreateParams.builder()
    .email("customer@example.com")
    .name("John Doe")
    .putMetadata("user_id", "12345")
    .build();

Customer customer = client.customers().create(createParams);

// Retrieve customer
Customer retrieved = client.customers().retrieve("cus_123");
System.out.println("Customer: " + retrieved.name() + " (" + retrieved.email() + ")");
```

### Handle Subscriptions

Create and manage recurring subscriptions:

```java  theme={null}
import com.dodopayments.api.models.subscriptions.*;

// Create a subscription
SubscriptionNewParams subscriptionParams = SubscriptionNewParams.builder()
    .customerId("cus_123")
    .productId("prod_456")
    .priceId("price_789")
    .build();

Subscription subscription = client.subscriptions().create(subscriptionParams);

// Charge subscription
SubscriptionChargeParams chargeParams = SubscriptionChargeParams.builder()
    .amount(1000)
    .build();

SubscriptionChargeResponse chargeResponse = client.subscriptions()
    .charge(subscription.id(), chargeParams);
```

## Usage-Based Billing

### Configure Meters

Create and manage meters for tracking usage:

```java  theme={null}
import com.dodopayments.api.models.meters.*;

// Create API calls meter
MeterCreateParams apiMeterParams = MeterCreateParams.builder()
    .name("API Requests")
    .eventName("api_request")
    .aggregation("count")
    .putMetadata("category", "api_usage")
    .build();

Meter apiMeter = client.meters().create(apiMeterParams);
System.out.println("Meter created: " + apiMeter.meterId());

// List all meters
client.meters().list()
    .autoPager()
    .forEach(m -> System.out.println("Meter: " + m.name() + " - " + m.aggregation()));
```

### Ingest Usage Events

Track custom events:

```java  theme={null}
import com.dodopayments.api.models.usageevents.*;
import java.time.OffsetDateTime;

// Ingest single event
UsageEventIngestParams singleEventParams = UsageEventIngestParams.builder()
    .addEvent(UsageEventIngestParams.Event.builder()
        .eventId("api_call_" + System.currentTimeMillis())
        .customerId("cus_abc123")
        .eventName("api_request")
        .timestamp(OffsetDateTime.now())
        .putMetadata("endpoint", "/api/v1/users")
        .putMetadata("method", "GET")
        .putMetadata("tokens_used", "150")
        .build())
    .build();

UsageEventIngestResponse response = client.usageEvents().ingest(singleEventParams);
System.out.println("Processed: " + response.processedEvents());
```

### Batch Ingest Events

Ingest multiple events efficiently (max 1000 per request):

```java  theme={null}
UsageEventIngestParams.Builder batchBuilder = UsageEventIngestParams.builder();

for (int i = 0; i < 100; i++) {
    batchBuilder.addEvent(UsageEventIngestParams.Event.builder()
        .eventId("batch_event_" + i + "_" + System.currentTimeMillis())
        .customerId("cus_abc123")
        .eventName("video_transcode")
        .timestamp(OffsetDateTime.now().minusMinutes(i))
        .putMetadata("video_id", "video_" + i)
        .putMetadata("duration_seconds", String.valueOf(120 + i))
        .build());
}

UsageEventIngestResponse batchResponse = client.usageEvents().ingest(batchBuilder.build());
System.out.println("Batch processed: " + batchResponse.processedEvents() + " events");
```

## Error Handling

Comprehensive error handling for different scenarios:

```java  theme={null}
import com.dodopayments.api.errors.*;

try {
    Payment payment = client.payments().retrieve("pay_invalid");
} catch (NotFoundException e) {
    System.err.println("Payment not found: " + e.getMessage());
} catch (UnauthorizedException e) {
    System.err.println("Authentication failed: " + e.getMessage());
} catch (PermissionDeniedException e) {
    System.err.println("Permission denied: " + e.getMessage());
} catch (BadRequestException e) {
    System.err.println("Invalid request: " + e.getMessage());
} catch (UnprocessableEntityException e) {
    System.err.println("Validation error: " + e.getMessage());
} catch (RateLimitException e) {
    System.err.println("Rate limit exceeded: " + e.getMessage());
    // SDK automatically retries with backoff
} catch (InternalServerException e) {
    System.err.println("Server error: " + e.getMessage());
} catch (DodoPaymentsServiceException e) {
    System.err.println("API error: " + e.statusCode() + " - " + e.getMessage());
}
```

<Tip>
  The SDK automatically retries requests on connection errors, 408, 409, 429, and 5xx errors with exponential backoff.
</Tip>

## Async Operations

Use CompletableFuture for asynchronous operations:

```java  theme={null}
import java.util.concurrent.CompletableFuture;

CompletableFuture<CheckoutSessionResponse> future = client.async()
    .checkoutSessions()
    .create(params);

// Handle response asynchronously
future.thenAccept(response -> {
    System.out.println("Session created: " + response.sessionId());
}).exceptionally(ex -> {
    System.err.println("Error: " + ex.getMessage());
    return null;
});
```

## Spring Boot Integration

### Configuration Class

```java  theme={null}
import com.dodopayments.api.client.DodoPaymentsClient;
import com.dodopayments.api.client.okhttp.DodoPaymentsOkHttpClient;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class DodoPaymentsConfig {
    
    @Value("${dodo.api.key}")
    private String apiKey;
    
    @Value("${dodo.environment:sandbox}")
    private String environment;
    
    @Bean
    public DodoPaymentsClient dodoPayments() {
        return DodoPaymentsOkHttpClient.builder()
            .bearerToken(apiKey)
            .baseUrl(environment.equals("live") 
                ? "https://live.dodopayments.com" 
                : "https://sandbox.dodopayments.com")
            .build();
    }
}
```

### Service Layer

```java  theme={null}
import com.dodopayments.api.client.DodoPaymentsClient;
import com.dodopayments.api.models.checkoutsessions.*;
import org.springframework.stereotype.Service;

@Service
public class PaymentService {
    
    private final DodoPaymentsClient client;
    
    public PaymentService(DodoPaymentsClient client) {
        this.client = client;
    }
    
    public CheckoutSessionResponse createCheckout(List<CheckoutSessionRequest.ProductCart> items) {
        CheckoutSessionRequest params = CheckoutSessionRequest.builder()
            .productCart(items)
            .returnUrl("https://yourdomain.com/return")
            .build();
            
        return client.checkoutSessions().create(params);
    }
}
```

## Resources

<CardGroup cols={2}>
  <Card title="GitHub Repository" icon="github" href="https://github.com/dodopayments/dodopayments-java">
    View source code and contribute
  </Card>

  <Card title="API Reference" icon="book" href="/api-reference/introduction">
    Complete API documentation
  </Card>

  <Card title="Discord Community" icon="discord" href="https://discord.gg/bYqAp4ayYh">
    Get help and connect with developers
  </Card>

  <Card title="Report Issues" icon="bug" href="https://github.com/dodopayments/dodopayments-java/issues">
    Report bugs or request features
  </Card>
</CardGroup>

## Support

Need help with the Java SDK?

* **Discord**: Join our [community server](https://discord.gg/bYqAp4ayYh) for real-time support
* **Email**: Contact us at [support@dodopayments.com](mailto:support@dodopayments.com)
* **GitHub**: Open an issue on the [repository](https://github.com/dodopayments/dodopayments-java)

## Contributing

We welcome contributions! Check the [contributing guidelines](https://github.com/dodopayments/dodopayments-java/blob/main/CONTRIBUTING.md) to get started.


# Kotlin
Source: https://docs.dodopayments.com/developer-resources/sdks/kotlin

Integrate Dodo Payments into your Kotlin applications with modern coroutines and null-safety

The Kotlin SDK provides convenient access to the Dodo Payments REST API from applications written in Kotlin. It features nullable values, Sequence, suspend functions, and other Kotlin-specific features for ergonomic use.

## Installation

### Gradle (Kotlin DSL)

Add the dependency to your `build.gradle.kts`:

```kotlin build.gradle.kts theme={null}
implementation("com.dodopayments.api:dodo-payments-kotlin:1.53.4")
```

### Maven

Add the dependency to your `pom.xml`:

```xml pom.xml theme={null}
<dependency>
  <groupId>com.dodopayments.api</groupId>
  <artifactId>dodo-payments-kotlin</artifactId>
  <version>1.53.4</version>
</dependency>
```

<Info>
  The SDK requires Kotlin 1.6 or higher and is compatible with both JVM and Android platforms.
</Info>

## Quick Start

Initialize the client and create a checkout session:

```kotlin  theme={null}
import com.dodopayments.api.client.DodoPaymentsClient
import com.dodopayments.api.client.okhttp.DodoPaymentsOkHttpClient
import com.dodopayments.api.models.checkoutsessions.CheckoutSessionRequest
import com.dodopayments.api.models.checkoutsessions.CheckoutSessionResponse

// Configure using environment variables (DODO_PAYMENTS_API_KEY, DODO_PAYMENTS_BASE_URL)
// Or system properties (dodopayments.apiKey, dodopayments.baseUrl)
val client: DodoPaymentsClient = DodoPaymentsOkHttpClient.fromEnv()

val params: CheckoutSessionRequest = CheckoutSessionRequest.builder()
    .addProductCart(CheckoutSessionRequest.ProductCart.builder()
        .productId("product_id")
        .quantity(1)
        .build())
    .build()
    
val checkoutSessionResponse: CheckoutSessionResponse = client.checkoutSessions().create(params)
println(checkoutSessionResponse.sessionId())
```

<Warning>
  Always store your API keys securely using environment variables or encrypted configuration. Never commit them to version control.
</Warning>

## Core Features

<CardGroup cols={2}>
  <Card title="Coroutines" icon="bolt">
    Full support for Kotlin coroutines for asynchronous operations
  </Card>

  <Card title="Null Safety" icon="shield-check">
    Leverage Kotlin's null safety for robust error handling
  </Card>

  <Card title="Extension Functions" icon="code">
    Idiomatic Kotlin extensions for enhanced functionality
  </Card>

  <Card title="Data Classes" icon="layer-group">
    Type-safe data classes with copy and destructuring support
  </Card>
</CardGroup>

## Configuration

### From Environment Variables

Initialize from environment variables or system properties:

```kotlin  theme={null}
val client: DodoPaymentsClient = DodoPaymentsOkHttpClient.fromEnv()
```

### Manual Configuration

Configure manually with all options:

```kotlin  theme={null}
import java.time.Duration

val client = DodoPaymentsOkHttpClient.builder()
    .bearerToken("your_api_key_here")
    .baseUrl("https://live.dodopayments.com")
    .maxRetries(3)
    .timeout(Duration.ofSeconds(30))
    .build()
```

### Test Mode

Configure for test/sandbox environment:

```kotlin  theme={null}
val testClient = DodoPaymentsOkHttpClient.builder()
    .fromEnv()
    .testMode()
    .build()
```

### Timeouts and Retries

Configure globally or per-request:

```kotlin  theme={null}
import com.dodopayments.api.core.RequestOptions

// Global configuration
val client = DodoPaymentsOkHttpClient.builder()
    .fromEnv()
    .timeout(Duration.ofSeconds(45))
    .maxRetries(3)
    .build()

// Per-request timeout override
val product = client.products().retrieve(
    "prod_123",
    RequestOptions.builder()
        .timeout(Duration.ofSeconds(10))
        .build()
)
```

## Common Operations

### Create a Checkout Session

Generate a checkout session:

```kotlin  theme={null}
val params = CheckoutSessionRequest.builder()
    .addProductCart(CheckoutSessionRequest.ProductCart.builder()
        .productId("prod_123")
        .quantity(1)
        .build())
    .returnUrl("https://yourdomain.com/return")
    .build()

val session = client.checkoutSessions().create(params)
println("Checkout URL: ${session.url()}")
```

### Create a Product

Create products with detailed configuration:

```kotlin  theme={null}
import com.dodopayments.api.models.products.Product
import com.dodopayments.api.models.products.ProductCreateParams
import com.dodopayments.api.models.misc.Currency
import com.dodopayments.api.models.misc.TaxCategory

val createParams = ProductCreateParams.builder()
    .name("Premium Subscription")
    .description("Monthly subscription with all features")
    .price(
        ProductCreateParams.RecurringPrice.builder()
            .currency(Currency.USD)
            .preTaxAmount(2999) // $29.99 in cents
            .paymentFrequencyInterval(ProductCreateParams.RecurringPrice.TimeInterval.MONTH)
            .paymentFrequencyCount(1)
            .build()
    )
    .taxCategory(TaxCategory.DIGITAL_GOODS)
    .build()

val product: Product = client.products().create(createParams)
println("Created product ID: ${product.productId()}")
```

### Activate License Key

Activate license keys for customers:

```kotlin  theme={null}
import com.dodopayments.api.models.licenses.LicenseActivateParams
import com.dodopayments.api.models.licenses.LicenseActivateResponse

val activateParams = LicenseActivateParams.builder()
    .licenseKey("XXXX-XXXX-XXXX-XXXX")
    .instanceName("user-laptop-01")
    .build()

try {
    val activationResult: LicenseActivateResponse = client.licenses()
        .activate(activateParams)

    println("License activated successfully")
    println("Instance ID: ${activationResult.instanceId()}")
    println("Expires at: ${activationResult.expiresAt()}")
} catch (e: UnprocessableEntityException) {
    println("License activation failed: ${e.message}")
}
```

## Usage-Based Billing

### Record Usage Events

Track usage for meters:

```kotlin  theme={null}
import com.dodopayments.api.models.usageevents.UsageEventCreateParams
import java.time.OffsetDateTime

val usageParams = UsageEventCreateParams.builder()
    .meterId("meter_123")
    .customerId("cust_456")
    .value(150)
    .timestamp(OffsetDateTime.now())
    .build()

client.usageEvents().create(usageParams)
println("Usage event recorded")
```

## Async Operations

### Async Client

Use the async client for coroutine-based operations:

```kotlin  theme={null}
import com.dodopayments.api.client.DodoPaymentsClientAsync
import com.dodopayments.api.client.okhttp.DodoPaymentsOkHttpClientAsync
import kotlinx.coroutines.runBlocking

val asyncClient: DodoPaymentsClientAsync = DodoPaymentsOkHttpClientAsync.fromEnv()

runBlocking {
    val customer = asyncClient.customers().retrieve("cust_123")
    println("Customer email: ${customer.email()}")
}
```

## Error Handling

Handle errors with Kotlin's exception handling:

```kotlin  theme={null}
import com.dodopayments.api.errors.*

try {
    val payment = client.payments().create(params)
    println("Success: ${payment.id()}")
} catch (e: AuthenticationException) {
    println("Authentication failed: ${e.message}")
} catch (e: InvalidRequestException) {
    println("Invalid request: ${e.message}")
    e.parameter?.let { println("Parameter: $it") }
} catch (e: RateLimitException) {
    println("Rate limit exceeded, retry after: ${e.retryAfter}")
} catch (e: DodoPaymentsServiceException) {
    println("API error: ${e.statusCode()} - ${e.message}")
}
```

### Functional Error Handling

Use `Result` for functional error handling:

```kotlin  theme={null}
fun safeCreatePayment(client: DodoPaymentsClient): Result<Payment> = runCatching {
    client.payments().create(params)
}

// Usage
safe CreatePayment(client)
    .onSuccess { payment -> println("Created: ${payment.id()}") }
    .onFailure { error -> println("Error: ${error.message}") }
```

<Tip>
  Use Kotlin's `runCatching` for a more functional approach to error handling with Result types.
</Tip>

## Android Integration

Use with Android applications:

```kotlin  theme={null}
import android.app.Application
import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.dodopayments.api.client.DodoPaymentsClient
import kotlinx.coroutines.launch

class PaymentViewModel(application: Application) : ViewModel() {
    private val client = DodoPaymentsOkHttpClient.builder()
        .bearerToken(BuildConfig.DODO_API_KEY)
        .build()
    
    fun createCheckout(productId: String) {
        viewModelScope.launch {
            try {
                val session = client.async().checkoutSessions().create(params)
                // Open checkout URL in browser or WebView
                openUrl(session.url())
            } catch (e: Exception) {
                handleError(e)
            }
        }
    }
}
```

## Response Validation

Enable response validation:

```kotlin  theme={null}
import com.dodopayments.api.core.RequestOptions

// Per-request validation
val product = client.products().retrieve(
    "prod_123",
    RequestOptions.builder()
        .responseValidation(true)
        .build()
)

// Or validate explicitly
val validatedProduct = product.validate()
```

## Advanced Features

### Proxy Configuration

Configure proxy settings:

```kotlin  theme={null}
import java.net.InetSocketAddress
import java.net.Proxy

val client = DodoPaymentsOkHttpClient.builder()
    .fromEnv()
    .proxy(
        Proxy(
            Proxy.Type.HTTP,
            InetSocketAddress("proxy.example.com", 8080)
        )
    )
    .build()
```

### Temporary Configuration

Modify client configuration temporarily:

```kotlin  theme={null}
val customClient = client.withOptions {
    it.baseUrl("https://example.com")
    it.maxRetries(5)
}
```

## Ktor Integration

Integrate with Ktor server applications:

```kotlin  theme={null}
import io.ktor.server.application.*
import io.ktor.server.request.*
import io.ktor.server.response.*
import io.ktor.server.routing.*

fun Application.configureRouting() {
    val client = DodoPaymentsOkHttpClient.builder()
        .bearerToken(environment.config.property("dodo.apiKey").getString())
        .build()
    
    routing {
        post("/create-checkout") {
            try {
                val request = call.receive<CheckoutRequest>()
                val session = client.checkoutSessions().create(params)
                call.respond(mapOf("checkout_url" to session.url()))
            } catch (e: DodoPaymentsServiceException) {
                call.respond(HttpStatusCode.BadRequest, mapOf("error" to e.message))
            }
        }
    }
}
```

## Resources

<CardGroup cols={2}>
  <Card title="GitHub Repository" icon="github" href="https://github.com/dodopayments/dodopayments-kotlin">
    View source code and contribute
  </Card>

  <Card title="API Reference" icon="book" href="/api-reference/introduction">
    Complete API documentation
  </Card>

  <Card title="Discord Community" icon="discord" href="https://discord.gg/bYqAp4ayYh">
    Get help and connect with developers
  </Card>

  <Card title="Report Issues" icon="bug" href="https://github.com/dodopayments/dodopayments-kotlin/issues">
    Report bugs or request features
  </Card>
</CardGroup>

## Support

Need help with the Kotlin SDK?

* **Discord**: Join our [community server](https://discord.gg/bYqAp4ayYh) for real-time support
* **Email**: Contact us at [support@dodopayments.com](mailto:support@dodopayments.com)
* **GitHub**: Open an issue on the [repository](https://github.com/dodopayments/dodopayments-kotlin)

## Contributing

We welcome contributions! Check the [contributing guidelines](https://github.com/dodopayments/dodopayments-kotlin/blob/main/CONTRIBUTING.md) to get started.


# PHP
Source: https://docs.dodopayments.com/developer-resources/sdks/php

Integrate Dodo Payments into your PHP applications with a modern, PSR-4 compliant SDK

The PHP SDK provides a robust and flexible way to integrate Dodo Payments into your PHP applications. Built following modern PHP standards with PSR-4 autoloading, it offers extensive test coverage and detailed documentation.

## Installation

Install the SDK using Composer:

```bash  theme={null}
composer require dodopayments/client
```

<Info>
  The SDK requires PHP 8.0 or higher and Composer for dependency management.
</Info>

## Quick Start

Initialize the client and create a checkout session:

```php  theme={null}
<?php

use Dodopayments\Client;
use Dodopayments\CheckoutSessions\CheckoutSessionCreateParams\ProductCart;

$client = new Client(
  bearerToken: getenv("DODO_PAYMENTS_API_KEY") ?: "My Bearer Token",
  environment: "test_mode",
);

$checkoutSessionResponse = $client->checkoutSessions->create(
  productCart: [ProductCart::with(productID: "product_id", quantity: 1)]
);

var_dump($checkoutSessionResponse->session_id);
```

<Warning>
  Store your API keys securely using environment variables. Never expose them in your codebase or commit them to version control.
</Warning>

## Core Features

<CardGroup cols={2}>
  <Card title="PSR-4 Compliant" icon="check">
    Follows PHP Standards Recommendations for modern PHP development
  </Card>

  <Card title="Modern PHP" icon="php">
    Built for PHP 8+ with type declarations and strict types
  </Card>

  <Card title="Extensive Testing" icon="vial">
    Comprehensive test coverage for reliability and stability
  </Card>

  <Card title="Exception Handling" icon="shield-check">
    Clear exception types for different error scenarios
  </Card>
</CardGroup>

## Configuration

### Retry Configuration

Configure automatic retry behavior:

```php  theme={null}
<?php

use Dodopayments\Client;
use Dodopayments\RequestOptions;
use Dodopayments\CheckoutSessions\CheckoutSessionCreateParams\ProductCart;

// Configure default for all requests
$client = new Client(maxRetries: 0);

// Or, configure per-request
$result = $client->checkoutSessions->create(
  productCart: [ProductCart::with(productID: "product_id", quantity: 0)],
  requestOptions: RequestOptions::with(maxRetries: 5),
);
```

## Common Operations

### Create a Checkout Session

Generate a checkout session:

```php  theme={null}
$session = $client->checkoutSessions->create(
  productCart: [
    ProductCart::with(productID: "prod_123", quantity: 1)
  ],
  returnUrl: "https://yourdomain.com/return"
);

header('Location: ' . $session->url);
```

### Manage Customers

Create and retrieve customer information:

```php  theme={null}
// Create a customer
$customer = $client->customers->create(
  email: "customer@example.com",
  name: "John Doe",
  metadata: [
    "user_id" => "12345"
  ]
);

// Retrieve customer
$customer = $client->customers->retrieve("cus_123");
echo "Customer: {$customer->name} ({$customer->email})";
```

### Handle Subscriptions

Create and manage recurring subscriptions:

```php  theme={null}
// Create a subscription
$subscription = $client->subscriptions->create(
  customerID: "cus_123",
  productID: "prod_456",
  priceID: "price_789"
);

// Cancel subscription
$client->subscriptions->cancel($subscription->id);
```

## Pagination

Work with paginated list responses:

```php  theme={null}
$page = $client->payments->list();

var_dump($page);

// Fetch items from the current page
foreach ($page->getItems() as $item) {
  var_dump($item->brand_id);
}

// Auto-paginate: fetch items from all pages
foreach ($page->pagingEachItem() as $item) {
  var_dump($item->brand_id);
}
```

## Error Handling

Handle various API exceptions:

```php  theme={null}
<?php

use Dodopayments\CheckoutSessions\CheckoutSessionCreateParams\ProductCart;
use Dodopayments\Core\Exceptions\APIConnectionException;
use Dodopayments\Core\Exceptions\RateLimitError;
use Dodopayments\Core\Exceptions\APIStatusError;

try {
  $checkoutSessionResponse = $client->checkoutSessions->create(
    productCart: [ProductCart::with(productID: "product_id", quantity: 0)]
  );
} catch (APIConnectionException $e) {
  echo "The server could not be reached", PHP_EOL;
  var_dump($e->getPrevious());
} catch (RateLimitError $_) {
  echo "A 429 status code was received; we should back off a bit.", PHP_EOL;
} catch (APIStatusError $e) {
  echo "Another non-200-range status code was received", PHP_EOL;
  echo $e->getMessage();
}
```

<Tip>
  Always wrap API calls in try-catch blocks to handle potential errors gracefully and provide meaningful feedback to users.
</Tip>

## Advanced Usage

### Undocumented Endpoints

Make requests to undocumented endpoints:

```php  theme={null}
<?php

$response = $client->request(
  method: "post",
  path: '/undocumented/endpoint',
  query: ['dog' => 'woof'],
  headers: ['useful-header' => 'interesting-value'],
  body: ['hello' => 'world']
);
```

### Undocumented Parameters

Send undocumented parameters:

```php  theme={null}
<?php

use Dodopayments\RequestOptions;
use Dodopayments\CheckoutSessions\CheckoutSessionCreateParams\ProductCart;

$checkoutSessionResponse = $client->checkoutSessions->create(
  productCart: [ProductCart::with(productID: "product_id", quantity: 0)],
  requestOptions: RequestOptions::with(
    extraQueryParams: ["my_query_parameter" => "value"],
    extraBodyParams: ["my_body_parameter" => "value"],
    extraHeaders: ["my-header" => "value"],
  ),
);

var_dump($checkoutSessionResponse["my_undocumented_property"]);
```

## Framework Integration

### Laravel

Create a service for Laravel applications:

```php  theme={null}
<?php

namespace App\Services;

use Dodopayments\Client;

class PaymentService
{
    protected $client;

    public function __construct()
    {
        $this->client = new Client(
            bearerToken: config('services.dodo.api_key')
        );
    }

    public function createCheckout(array $items)
    {
        return $this->client->checkoutSessions->create(
            productCart: $items,
            returnUrl: route('checkout.return')
        );
    }
}
```

Add configuration in `config/services.php`:

```php  theme={null}
'dodo' => [
    'api_key' => env('DODO_API_KEY'),
    'environment' => env('DODO_ENVIRONMENT', 'sandbox')
],
```

### Symfony

Create a service in Symfony:

```php  theme={null}
<?php

namespace App\Service;

use Dodopayments\Client;

class DodoPaymentService
{
    private Client $client;

    public function __construct(string $apiKey)
    {
        $this->client = new Client(bearerToken: $apiKey);
    }

    public function createPayment(int $amount, string $currency, string $customerId): object
    {
        return $this->client->payments->create(
            amount: $amount,
            currency: $currency,
            customerID: $customerId
        );
    }
}
```

Register in `config/services.yaml`:

```yaml  theme={null}
services:
    App\Service\DodoPaymentService:
        arguments:
            $apiKey: '%env(DODO_API_KEY)%'
```

## Resources

<CardGroup cols={2}>
  <Card title="GitHub Repository" icon="github" href="https://github.com/dodopayments/dodopayments-php">
    View source code and contribute
  </Card>

  <Card title="API Reference" icon="book" href="/api-reference/introduction">
    Complete API documentation
  </Card>

  <Card title="Discord Community" icon="discord" href="https://discord.gg/bYqAp4ayYh">
    Get help and connect with developers
  </Card>

  <Card title="Report Issues" icon="bug" href="https://github.com/dodopayments/dodopayments-php/issues">
    Report bugs or request features
  </Card>
</CardGroup>

## Support

Need help with the PHP SDK?

* **Discord**: Join our [community server](https://discord.gg/bYqAp4ayYh) for real-time support
* **Email**: Contact us at [support@dodopayments.com](mailto:support@dodopayments.com)
* **GitHub**: Open an issue on the [repository](https://github.com/dodopayments/dodopayments-php)

## Contributing

We welcome contributions! Check the [contributing guidelines](https://github.com/dodopayments/dodopayments-php/blob/main/CONTRIBUTING.md) to get started.


# Python
Source: https://docs.dodopayments.com/developer-resources/sdks/python

Integrate Dodo Payments into your Python applications with a Pythonic interface and modern async/await support

The Python SDK offers a Pythonic interface to the Dodo Payments API, providing both synchronous and asynchronous clients with type definitions for requests and responses. It supports Python 3.7+ and includes comprehensive test coverage.

## Installation

Install the SDK using pip:

```bash  theme={null}
pip install dodopayments
```

For enhanced async performance with aiohttp:

```bash  theme={null}
pip install dodopayments[aiohttp]
```

<Info>
  The SDK requires Python 3.7 or higher. We recommend using the latest stable version of Python for the best experience and security updates.
</Info>

## Quick Start

### Synchronous Client

```python  theme={null}
import os
from dodopayments import DodoPayments

client = DodoPayments(
    bearer_token=os.environ.get("DODO_PAYMENTS_API_KEY"),  # This is the default and can be omitted
    environment="test_mode",  # defaults to "live_mode"
)

checkout_session_response = client.checkout_sessions.create(
    product_cart=[
        {
            "product_id": "product_id",
            "quantity": 1
        }
    ],
)
print(checkout_session_response.session_id)
```

### Asynchronous Client

```python  theme={null}
import os
import asyncio
from dodopayments import AsyncDodoPayments

client = AsyncDodoPayments(
    bearer_token=os.environ.get("DODO_PAYMENTS_API_KEY"),
    environment="test_mode",
)


async def main() -> None:
    checkout_session_response = await client.checkout_sessions.create(
        product_cart=[
            {
                "product_id": "product_id",
                "quantity": 1,
            }
        ],
    )
    print(checkout_session_response.session_id)


asyncio.run(main())
```

<Warning>
  Always store your API keys securely using environment variables. Never commit them to version control.
</Warning>

## Core Features

<CardGroup cols={2}>
  <Card title="Pythonic Interface" icon="code">
    Clean, idiomatic Python code that follows PEP 8 guidelines and Python conventions
  </Card>

  <Card title="Async/Await" icon="bolt">
    Full support for asynchronous operations with asyncio and optional aiohttp integration
  </Card>

  <Card title="Type Hints" icon="check">
    Complete type hints for better IDE support and type checking with mypy
  </Card>

  <Card title="Auto-Pagination" icon="arrows-rotate">
    Automatic pagination for list responses with simple iteration
  </Card>
</CardGroup>

## Configuration

### Environment Variables

Configure using environment variables:

```bash .env theme={null}
DODO_PAYMENTS_API_KEY=your_api_key_here
```

### Timeouts

Configure request timeouts globally or per-request:

```python  theme={null}
import httpx
from dodopayments import DodoPayments

# Configure default for all requests (default is 1 minute)
client = DodoPayments(
    timeout=20.0,  # 20 seconds
)

# More granular control
client = DodoPayments(
    timeout=httpx.Timeout(60.0, read=5.0, write=10.0, connect=2.0),
)

# Override per-request
client.with_options(timeout=5.0).checkout_sessions.create(
    product_cart=[
        {
            "product_id": "product_id",
            "quantity": 0,
        }
    ],
)
```

### Retries

Configure automatic retry behavior:

```python  theme={null}
from dodopayments import DodoPayments

# Configure default for all requests (default is 2)
client = DodoPayments(
    max_retries=0,  # disable retries
)

# Override per-request
client.with_options(max_retries=5).checkout_sessions.create(
    product_cart=[
        {
            "product_id": "product_id",
            "quantity": 0,
        }
    ],
)
```

## Common Operations

### Create a Checkout Session

Generate a checkout session:

```python  theme={null}
session = client.checkout_sessions.create(
    product_cart=[
        {
            "product_id": "prod_123",
            "quantity": 1
        }
    ],
    return_url="https://yourdomain.com/return"
)

print(f"Checkout URL: {session.url}")
```

### Manage Customers

Create and retrieve customer information:

```python  theme={null}
# Create a customer
customer = client.customers.create(
    email="customer@example.com",
    name="John Doe",
    metadata={
        "user_id": "12345"
    }
)

# Retrieve customer
customer = client.customers.retrieve("cus_123")
print(f"Customer: {customer.name} ({customer.email})")
```

### Handle Subscriptions

Create and manage recurring subscriptions:

```python  theme={null}
# Create a subscription
subscription = client.subscriptions.create(
    customer_id="cus_123",
    product_id="prod_456",
    price_id="price_789"
)

# Retrieve usage history
usage_history = client.subscriptions.retrieve_usage_history(
    subscription.id,
    start_date="2024-01-01T00:00:00Z"
)
```

## Usage-Based Billing

### Ingest Usage Events

Track custom events for usage-based billing:

```python  theme={null}
response = client.usage_events.ingest(
    events=[
        {
            "event_id": "api_call_12345",
            "customer_id": "cus_abc123",
            "event_name": "api_request",
            "timestamp": "2024-01-15T10:30:00Z",
            "metadata": {
                "endpoint": "/api/v1/users",
                "method": "GET",
                "tokens_used": "150"
            }
        }
    ]
)
```

### List and Retrieve Events

```python  theme={null}
# Get a specific event
event = client.usage_events.retrieve("api_call_12345")

# List events with filtering
events = client.usage_events.list(
    customer_id="cus_abc123",
    event_name="api_request",
    limit=20
)

for event in events.data:
    print(f"Event: {event.event_id} at {event.timestamp}")
```

## Pagination

### Auto-Pagination

Iterate through all items automatically:

```python  theme={null}
from dodopayments import DodoPayments

client = DodoPayments()
all_payments = []

# Automatically fetches more pages as needed
for payment in client.payments.list():
    all_payments.append(payment)
print(all_payments)
```

### Async Pagination

```python  theme={null}
import asyncio
from dodopayments import AsyncDodoPayments

client = AsyncDodoPayments()


async def main() -> None:
    all_payments = []
    # Iterate through items across all pages
    async for payment in client.payments.list():
        all_payments.append(payment)
    print(all_payments)


asyncio.run(main())
```

### Manual Pagination

For more control over pagination:

```python  theme={null}
# Access items from current page
first_page = client.payments.list()
for payment in first_page.items:
    print(payment.brand_id)

# Check for more pages
if first_page.has_next_page():
    next_page = first_page.get_next_page()
    print(f"Fetched {len(next_page.items)} more items")
```

## HTTP Client Configuration

Customize the underlying `httpx` client:

```python  theme={null}
import httpx
from dodopayments import DodoPayments, DefaultHttpxClient

client = DodoPayments(
    base_url="http://my.test.server.example.com:8083",
    http_client=DefaultHttpxClient(
        proxy="http://my.test.proxy.example.com",
        transport=httpx.HTTPTransport(local_address="0.0.0.0"),
    ),
)
```

## Async with aiohttp

Use aiohttp for enhanced async performance:

```python  theme={null}
import asyncio
from dodopayments import DefaultAioHttpClient
from dodopayments import AsyncDodoPayments


async def main() -> None:
    async with AsyncDodoPayments(
        bearer_token="My Bearer Token",
        http_client=DefaultAioHttpClient(),
    ) as client:
        checkout_session_response = await client.checkout_sessions.create(
            product_cart=[
                {
                    "product_id": "product_id",
                    "quantity": 0,
                }
            ],
        )
        print(checkout_session_response.session_id)


asyncio.run(main())
```

## Logging

Enable logging by setting the environment variable:

```bash  theme={null}
export DODO_PAYMENTS_LOG=info
```

Or for debug-level logging:

```bash  theme={null}
export DODO_PAYMENTS_LOG=debug
```

## Framework Integration

### FastAPI

```python  theme={null}
from fastapi import FastAPI, HTTPException
from dodopayments import AsyncDodoPayments
from pydantic import BaseModel
import os

app = FastAPI()
dodo = AsyncDodoPayments(bearer_token=os.getenv("DODO_API_KEY"))

class CheckoutRequest(BaseModel):
    product_id: str
    quantity: int

@app.post("/create-checkout")
async def create_checkout(request: CheckoutRequest):
    try:
        session = await dodo.checkout_sessions.create(
            product_cart=[{
                "product_id": request.product_id,
                "quantity": request.quantity
            }],
            return_url="https://yourdomain.com/return"
        )
        return {"checkout_url": session.url}
    except Exception as e:
        raise HTTPException(status_code=400, detail=str(e))
```

### Django

```python  theme={null}
from django.http import JsonResponse
from dodopayments import DodoPayments
import os

dodo = DodoPayments(bearer_token=os.getenv("DODO_API_KEY"))

def create_payment(request):
    try:
        payment = dodo.payments.create(
            amount=5000,
            currency="USD",
            customer_id=request.user.customer_id
        )
        return JsonResponse({
            "status": "success",
            "payment_id": payment.id
        })
    except Exception as e:
        return JsonResponse({
            "status": "error",
            "message": str(e)
        }, status=400)
```

## Resources

<CardGroup cols={2}>
  <Card title="GitHub Repository" icon="github" href="https://github.com/dodopayments/dodopayments-python">
    View source code and contribute
  </Card>

  <Card title="API Reference" icon="book" href="/api-reference/introduction">
    Complete API documentation
  </Card>

  <Card title="Discord Community" icon="discord" href="https://discord.gg/bYqAp4ayYh">
    Get help and connect with developers
  </Card>

  <Card title="Report Issues" icon="bug" href="https://github.com/dodopayments/dodopayments-python/issues">
    Report bugs or request features
  </Card>
</CardGroup>

## Support

Need help with the Python SDK?

* **Discord**: Join our [community server](https://discord.gg/bYqAp4ayYh) for real-time support
* **Email**: Contact us at [support@dodopayments.com](mailto:support@dodopayments.com)
* **GitHub**: Open an issue on the [repository](https://github.com/dodopayments/dodopayments-python)

## Contributing

We welcome contributions! Check the [contributing guidelines](https://github.com/dodopayments/dodopayments-python/blob/main/CONTRIBUTING.md) to get started.


# Ruby
Source: https://docs.dodopayments.com/developer-resources/sdks/ruby

Integrate Dodo Payments into your Ruby applications with an elegant, Ruby-native SDK

The Ruby SDK provides a simple and intuitive way to integrate Dodo Payments into your Ruby applications. It follows Ruby conventions and best practices, offering comprehensive error handling, pagination, and middleware support.

## Installation

Add the gem to your Gemfile:

```ruby Gemfile theme={null}
gem "dodopayments", "~> 1.53.4"
```

Then run:

```bash  theme={null}
bundle install
```

<Info>
  The SDK supports Ruby 3.2.0 and later versions, with comprehensive types, error handling, and retry mechanisms.
</Info>

## Quick Start

Initialize the client and create a checkout session:

```ruby  theme={null}
require "bundler/setup"
require "dodopayments"

dodo_payments = Dodopayments::Client.new(
  bearer_token: ENV["DODO_PAYMENTS_API_KEY"], # This is the default and can be omitted
  environment: "test_mode" # defaults to "live_mode"
)

checkout_session_response = dodo_payments.checkout_sessions.create(
  product_cart: [{product_id: "product_id", quantity: 1}]
)

puts(checkout_session_response.session_id)
```

<Warning>
  Store your API keys securely using environment variables. Never commit them to version control or expose them in your code.
</Warning>

## Core Features

<CardGroup cols={2}>
  <Card title="Ruby Conventions" icon="gem">
    Follows Ruby naming conventions and idiomatic patterns
  </Card>

  <Card title="Elegant Syntax" icon="code">
    Clean, readable API that feels natural to Ruby developers
  </Card>

  <Card title="Auto-Pagination" icon="arrows-rotate">
    Built-in auto-paging iterators for list responses
  </Card>

  <Card title="Type Safety" icon="shield-check">
    Optional Sorbet types for enhanced type safety
  </Card>
</CardGroup>

## Configuration

### Timeout Configuration

Configure request timeouts:

```ruby  theme={null}
# Configure default for all requests (default is 60 seconds)
dodo_payments = Dodopayments::Client.new(
  timeout: nil # disable timeout
)

# Or, configure per-request
dodo_payments.checkout_sessions.create(
  product_cart: [{product_id: "product_id", quantity: 0}],
  request_options: {timeout: 5}
)
```

### Retry Configuration

Configure automatic retry behavior:

```ruby  theme={null}
# Configure default for all requests (default is 2)
dodo_payments = Dodopayments::Client.new(
  max_retries: 0 # disable retries
)

# Or, configure per-request
dodo_payments.checkout_sessions.create(
  product_cart: [{product_id: "product_id", quantity: 0}],
  request_options: {max_retries: 5}
)
```

## Common Operations

### Create a Checkout Session

Generate a checkout session:

```ruby  theme={null}
session = dodo_payments.checkout_sessions.create(
  product_cart: [
    {
      product_id: "prod_123",
      quantity: 1
    }
  ],
  return_url: "https://yourdomain.com/return"
)

# Redirect to checkout
redirect_to session.url
```

### Manage Customers

Create and retrieve customer information:

```ruby  theme={null}
# Create a customer
customer = dodo_payments.customers.create(
  email: "customer@example.com",
  name: "John Doe",
  metadata: {
    user_id: "12345"
  }
)

# Retrieve customer
customer = dodo_payments.customers.retrieve("cus_123")
puts "Customer: #{customer.name} (#{customer.email})"
```

### Handle Subscriptions

Create and manage recurring subscriptions:

```ruby  theme={null}
# Create a subscription
subscription = dodo_payments.subscriptions.create(
  customer_id: "cus_123",
  product_id: "prod_456",
  price_id: "price_789"
)

# Update subscription
updated = dodo_payments.subscriptions.update(
  subscription.id,
  metadata: { plan_type: "premium" }
)

# Cancel subscription
dodo_payments.subscriptions.cancel(subscription.id)
```

## Pagination

### Auto-Pagination

Automatically iterate through all pages:

```ruby  theme={null}
page = dodo_payments.payments.list

# Fetch single item from page
payment = page.items[0]
puts(payment.brand_id)

# Automatically fetches more pages as needed
page.auto_paging_each do |payment|
  puts(payment.brand_id)
end
```

### Manual Pagination

For more control over pagination:

```ruby  theme={null}
page = dodo_payments.payments.list

if page.next_page?
  new_page = page.next_page
  puts(new_page.items[0].brand_id)
end
```

## Error Handling

Handle various Dodo Payments API errors:

```ruby  theme={null}
begin
  checkout_session = dodo_payments.checkout_sessions.create(
    product_cart: [{product_id: "product_id", quantity: 0}]
  )
rescue Dodopayments::Errors::APIConnectionError => e
  puts("The server could not be reached")
  puts(e.cause)  # an underlying Exception, likely raised within `net/http`
rescue Dodopayments::Errors::RateLimitError => e
  puts("A 429 status code was received; we should back off a bit.")
rescue Dodopayments::Errors::APIStatusError => e
  puts("Another non-200-range status code was received")
  puts(e.status)
end
```

<Tip>
  Implement retry logic with exponential backoff for rate limit errors to ensure your application handles high-volume scenarios gracefully.
</Tip>

## Type Safety with Sorbet

Use Sorbet for type-safe request parameters:

```ruby  theme={null}
# Type-safe using Sorbet RBI definitions
dodo_payments.checkout_sessions.create(
  product_cart: [
    Dodopayments::CheckoutSessionRequest::ProductCart.new(
      product_id: "product_id",
      quantity: 0
    )
  ]
)

# Hashes work, but are not typesafe
dodo_payments.checkout_sessions.create(
  product_cart: [{product_id: "product_id", quantity: 0}]
)

# You can also splat a full Params class
params = Dodopayments::CheckoutSessionCreateParams.new(
  product_cart: [
    Dodopayments::CheckoutSessionRequest::ProductCart.new(
      product_id: "product_id",
      quantity: 0
    )
  ]
)
dodo_payments.checkout_sessions.create(**params)
```

## Advanced Usage

### Undocumented Endpoints

Make requests to undocumented endpoints:

```ruby  theme={null}
response = dodo_payments.request(
  method: :post,
  path: '/undocumented/endpoint',
  query: {"dog": "woof"},
  headers: {"useful-header": "interesting-value"},
  body: {"hello": "world"}
)
```

### Undocumented Parameters

Send undocumented parameters:

```ruby  theme={null}
checkout_session_response = dodo_payments.checkout_sessions.create(
  product_cart: [{product_id: "product_id", quantity: 0}],
  request_options: {
    extra_query: {my_query_parameter: value},
    extra_body: {my_body_parameter: value},
    extra_headers: {"my-header": value}
  }
)

# Access undocumented response properties
puts(checkout_session_response[:my_undocumented_property])
```

## Rails Integration

### Create an Initializer

Create `config/initializers/dodo_payments.rb`:

```ruby  theme={null}
require "dodopayments"

DODO_CLIENT = Dodopayments::Client.new(
  bearer_token: Rails.application.credentials.dodo_api_key,
  environment: Rails.env.production? ? "live_mode" : "test_mode"
)
```

### Service Object Pattern

Create a payment service:

```ruby  theme={null}
# app/services/payment_service.rb
class PaymentService
  def initialize
    @client = DODO_CLIENT
  end

  def create_checkout(items)
    @client.checkout_sessions.create(
      product_cart: items,
      return_url: Rails.application.routes.url_helpers.checkout_return_url
    )
  end

  def process_payment(amount:, currency:, customer_id:)
    @client.payments.create(
      amount: amount,
      currency: currency,
      customer_id: customer_id
    )
  end
end
```

### Controller Integration

Use in your Rails controllers:

```ruby  theme={null}
# app/controllers/checkouts_controller.rb
class CheckoutsController < ApplicationController
  def create
    service = PaymentService.new
    session = service.create_checkout(checkout_params[:items])
    
    redirect_to session.url, allow_other_host: true
  rescue Dodopayments::Errors::APIError => e
    flash[:error] = "Payment error: #{e.message}"
    redirect_to cart_path
  end

  private

  def checkout_params
    params.require(:checkout).permit(items: [:product_id, :quantity])
  end
end
```

## Sinatra Integration

Use with Sinatra applications:

```ruby  theme={null}
require "sinatra"
require "dodopayments"

configure do
  set :dodo_client, Dodopayments::Client.new(
    bearer_token: ENV["DODO_API_KEY"]
  )
end

post "/create-checkout" do
  content_type :json
  
  begin
    session = settings.dodo_client.checkout_sessions.create(
      product_cart: JSON.parse(request.body.read)["items"],
      return_url: "#{request.base_url}/return"
    )
    
    { checkout_url: session.url }.to_json
  rescue Dodopayments::Errors::APIError => e
    status 400
    { error: e.message }.to_json
  end
end
```

## Resources

<CardGroup cols={2}>
  <Card title="GitHub Repository" icon="github" href="https://github.com/dodopayments/dodopayments-ruby">
    View source code and contribute
  </Card>

  <Card title="API Reference" icon="book" href="/api-reference/introduction">
    Complete API documentation
  </Card>

  <Card title="Discord Community" icon="discord" href="https://discord.gg/bYqAp4ayYh">
    Get help and connect with developers
  </Card>

  <Card title="Report Issues" icon="bug" href="https://github.com/dodopayments/dodopayments-ruby/issues">
    Report bugs or request features
  </Card>
</CardGroup>

## Support

Need help with the Ruby SDK?

* **Discord**: Join our [community server](https://discord.gg/bYqAp4ayYh) for real-time support
* **Email**: Contact us at [support@dodopayments.com](mailto:support@dodopayments.com)
* **GitHub**: Open an issue on the [repository](https://github.com/dodopayments/dodopayments-ruby)

## Contributing

We welcome contributions! Check the [contributing guidelines](https://github.com/dodopayments/dodopayments-ruby/blob/main/CONTRIBUTING.md) to get started.


# TypeScript
Source: https://docs.dodopayments.com/developer-resources/sdks/typescript

Integrate Dodo Payments into your TypeScript and Node.js applications with type safety and modern async/await support

The TypeScript SDK provides convenient server-side access to the Dodo Payments REST API for TypeScript and JavaScript applications. It features comprehensive type definitions, error handling, retries, timeouts, and auto-pagination for seamless payment processing.

## Installation

Install the SDK using your package manager of choice:

<CodeGroup>
  ```bash npm theme={null}
  npm install dodopayments
  ```

  ```bash yarn theme={null}
  yarn add dodopayments
  ```

  ```bash pnpm theme={null}
  pnpm add dodopayments
  ```
</CodeGroup>

## Quick Start

Initialize the client with your API key and start processing payments:

```javascript  theme={null}
import DodoPayments from 'dodopayments';

const client = new DodoPayments({
  bearerToken: process.env['DODO_PAYMENTS_API_KEY'], // This is the default and can be omitted
  environment: 'test_mode', // defaults to 'live_mode'
});

const checkoutSessionResponse = await client.checkoutSessions.create({
  product_cart: [{ product_id: 'product_id', quantity: 1 }],
});

console.log(checkoutSessionResponse.session_id);
```

<Warning>
  Always store your API keys securely using environment variables. Never commit them to version control or expose them in client-side code.
</Warning>

## Core Features

<CardGroup cols={2}>
  <Card title="TypeScript First" icon="shield-check">
    Full TypeScript support with comprehensive type definitions for all API endpoints
  </Card>

  <Card title="Auto-Pagination" icon="arrows-rotate">
    Automatic pagination for list responses makes working with large datasets effortless
  </Card>

  <Card title="Error Handling" icon="triangle-exclamation">
    Built-in error types with detailed messages for different failure scenarios
  </Card>

  <Card title="Smart Retries" icon="repeat">
    Configurable automatic retries with exponential backoff for transient errors
  </Card>
</CardGroup>

## Configuration

### Environment Variables

Set environment variables for secure configuration:

```bash .env theme={null}
DODO_PAYMENTS_API_KEY=your_api_key_here
```

### Timeout Configuration

Configure request timeouts globally or per-request:

```typescript  theme={null}
// Configure default timeout for all requests (default is 1 minute)
const client = new DodoPayments({
  timeout: 20 * 1000, // 20 seconds
});

// Override per-request
await client.checkoutSessions.create(
  { product_cart: [{ product_id: 'product_id', quantity: 0 }] },
  { timeout: 5 * 1000 }
);
```

### Retry Configuration

Configure automatic retry behavior:

```javascript  theme={null}
// Configure default for all requests (default is 2 retries)
const client = new DodoPayments({
  maxRetries: 0, // disable retries
});

// Override per-request
await client.checkoutSessions.create(
  { product_cart: [{ product_id: 'product_id', quantity: 0 }] },
  { maxRetries: 5 }
);
```

<Tip>
  The SDK automatically retries requests that fail due to network errors or server issues (5xx responses) with exponential backoff.
</Tip>

## Common Operations

### Create a Checkout Session

Generate a checkout session for collecting payment information:

```typescript  theme={null}
const session = await client.checkoutSessions.create({
  product_cart: [
    {
      product_id: 'prod_123',
      quantity: 1
    }
  ],
  return_url: 'https://yourdomain.com/return'
});

console.log('Redirect to:', session.url);
```

### Manage Customers

Create and retrieve customer information:

```typescript  theme={null}
// Create a customer
const customer = await client.customers.create({
  email: 'customer@example.com',
  name: 'John Doe',
  metadata: {
    user_id: '12345'
  }
});

// Retrieve customer
const retrieved = await client.customers.retrieve('cus_123');
console.log(`Customer: ${retrieved.name} (${retrieved.email})`);
```

### Handle Subscriptions

Create and manage recurring subscriptions:

```typescript  theme={null}
// Create a subscription
const subscription = await client.subscriptions.create({
  customer_id: 'cus_123',
  product_id: 'prod_456',
  price_id: 'price_789'
});

// Retrieve subscription usage history
const usageHistory = await client.subscriptions.retrieveUsageHistory('sub_123', {
  start_date: '2024-01-01T00:00:00Z',
  end_date: '2024-03-31T23:59:59Z'
});
```

## Usage-Based Billing

### Ingest Usage Events

Track custom events for usage-based billing:

```typescript  theme={null}
await client.usageEvents.ingest({
  events: [
    {
      event_id: 'api_call_12345',
      customer_id: 'cus_abc123',
      event_name: 'api_request',
      timestamp: '2024-01-15T10:30:00Z',
      metadata: {
        endpoint: '/api/v1/users',
        method: 'GET',
        tokens_used: '150'
      }
    }
  ]
});
```

<Info>
  Events must have unique `event_id` values for idempotency. Duplicate IDs within the same request are rejected, and subsequent requests with existing IDs are ignored.
</Info>

### Retrieve Usage Events

Fetch detailed information about usage events:

```typescript  theme={null}
// Get a specific event
const event = await client.usageEvents.retrieve('api_call_12345');

// List events with filtering
const events = await client.usageEvents.list({
  customer_id: 'cus_abc123',
  event_name: 'api_request',
  start: '2024-01-14T10:30:00Z',
  end: '2024-01-15T10:30:00Z'
});
```

## Proxy Configuration

Configure proxy settings for different runtimes:

### Node.js (using undici)

```typescript  theme={null}
import DodoPayments from 'dodopayments';
import * as undici from 'undici';

const proxyAgent = new undici.ProxyAgent('http://localhost:8888');
const client = new DodoPayments({
  fetchOptions: {
    dispatcher: proxyAgent,
  },
});
```

### Bun

```typescript  theme={null}
import DodoPayments from 'dodopayments';

const client = new DodoPayments({
  fetchOptions: {
    proxy: 'http://localhost:8888',
  },
});
```

### Deno

```typescript  theme={null}
import DodoPayments from 'npm:dodopayments';

const httpClient = Deno.createHttpClient({ proxy: { url: 'http://localhost:8888' } });
const client = new DodoPayments({
  fetchOptions: {
    client: httpClient,
  },
});
```

## Logging

Control log verbosity using environment variables or client options:

```typescript  theme={null}
// Via client option
const client = new DodoPayments({
  logLevel: 'debug', // Show all log messages
});
```

```bash  theme={null}
# Via environment variable
export DODO_PAYMENTS_LOG=debug
```

**Available log levels:**

* `'debug'` - Show debug messages, info, warnings, and errors
* `'info'` - Show info messages, warnings, and errors
* `'warn'` - Show warnings and errors (default)
* `'error'` - Show only errors
* `'off'` - Disable all logging

<Warning>
  At the debug level, all HTTP requests and responses are logged, including headers and bodies. Some authentication headers are redacted, but sensitive data in bodies may still be visible.
</Warning>

## Migration from Node.js SDK

If you're upgrading from the legacy Node.js SDK, the TypeScript SDK offers improved type safety and features:

<Card title="View Migration Guide" icon="arrow-right" href="https://github.com/dodopayments/dodopayments-typescript/blob/main/MIGRATION.md">
  Learn how to migrate from the Node.js SDK to the TypeScript SDK
</Card>

## Resources

<CardGroup cols={2}>
  <Card title="GitHub Repository" icon="github" href="https://github.com/dodopayments/dodopayments-typescript">
    View source code and contribute
  </Card>

  <Card title="API Reference" icon="book" href="/api-reference/introduction">
    Complete API documentation
  </Card>

  <Card title="Discord Community" icon="discord" href="https://discord.gg/bYqAp4ayYh">
    Get help and connect with developers
  </Card>

  <Card title="Report Issues" icon="bug" href="https://github.com/dodopayments/dodopayments-typescript/issues">
    Report bugs or request features
  </Card>
</CardGroup>

## Support

Need help with the TypeScript SDK?

* **Discord**: Join our [community server](https://discord.gg/bYqAp4ayYh) for real-time support
* **Email**: Contact us at [support@dodopayments.com](mailto:support@dodopayments.com)
* **GitHub**: Open an issue on the [repository](https://github.com/dodopayments/dodopayments-typescript)

## Contributing

We welcome contributions! Check the [contributing guidelines](https://github.com/dodopayments/dodopayments-typescript/blob/main/CONTRIBUTING.md) to get started.


# Seat-Based Pricing with Add-ons and Payment Links
Source: https://docs.dodopayments.com/developer-resources/seat-based-pricing

Learn how to create add-ons for seat-based pricing and generate payment links with custom add-on quantities using Dodo Payments

In this tutorial, you'll learn how to implement seat-based pricing using Dodo Payments add-ons. We'll create a subscription product with add-ons for additional seats and show you how to generate payment links with custom add-on quantities.

<Note>
  This tutorial provides sample implementation code for a Node.js/Express application. You can modify this code for your specific framework (Next.js, React, Vue, etc.) and customize the user interface according to your application's needs.
</Note>

By the end of this tutorial, you'll know how to:

* Create subscription products with seat-based pricing
* Set up add-ons for additional seats
* Generate payment links with custom add-on quantities
* Handle checkout sessions with dynamic seat counts

## What We're Building

Let's create a seat-based pricing model:

* **Base Plan**: \$49/month for up to 5 team members
* **Seat Add-on**: \$2/month per additional seat
* **Payment Links**: Dynamic checkout with custom seat quantities

<Info>
  Before we start, make sure you have:

  * A Dodo Payments account
  * Basic familiarity with TypeScript/Node.js
</Info>

## Step 1: Create Your Seat Add-On

Now we need to create an add-on that represents additional seats. This add-on will be attached to our base subscription and allow customers to purchase additional seats.

<Frame>
  <img src="https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons-creation.png?fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=d2c17b4a9f2f9a1b19f537f0507656a4" alt="Creating base subscription product" data-og-width="2348" width="2348" data-og-height="1606" height="1606" data-path="images/cookbooks/seat-based/seat-based-addons-creation.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons-creation.png?w=280&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=5751534a0a21b9ed88453f8d811032b7 280w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons-creation.png?w=560&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=4144c9cd57f21f1d48f9b4c9fd0fc705 560w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons-creation.png?w=840&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=df7ce792d4437726a2087a569e7d62e9 840w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons-creation.png?w=1100&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=fef77260f735f8bb16e11e9b88082771 1100w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons-creation.png?w=1650&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=f9cf9247cbc5f58771a380637faef0af 1650w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons-creation.png?w=2500&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=ad6bea7122b008e67325e729704d663c 2500w" />
</Frame>

<Tip>
  **What we're building**: An add-on that costs \$2/month per seat and can be added to any base subscription.
</Tip>

<Steps>
  <Step title="Navigate to Add-Ons">
    1. In your Dodo Payments dashboard, stay in the **Products** section
    2. Click on the **Add-Ons** tab
    3. Click **Create Add-On**

    This will open the add-on creation form.
  </Step>

  <Step title="Enter add-on details">
    Fill in these values for our seat add-on:

    **Add-On Name**: `Additional Team Seat`

    **Description**: `Add extra team members to your workspace with full access to all features`

    **Price**: Enter → `2.00`

    **Currency**: Must match your base subscription currency

    **Tax Category**: Select appropriate category for your product.
  </Step>

  <Step title="Save your add-on">
    1. Review all your settings:
       * Name: Additional Team Seat
       * Price: \$2.00/month
    2. Click **Create Add-On**

    <Check>
      **Add-on created!** Your seat add-on is now available to attach to subscriptions.
    </Check>
  </Step>
</Steps>

## Step 2: Create Your Base Subscription Product

We'll start by creating a base subscription product that includes 5 team members. This will be the foundation of our seat-based pricing model.

<Frame>
  <img src="https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-subscription.png?fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=f17e96f3d106b88b6dc32a00be535620" alt="Creating base subscription product" data-og-width="2118" width="2118" data-og-height="1580" height="1580" data-path="images/cookbooks/seat-based/seat-based-subscription.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-subscription.png?w=280&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=3372664bd6262a530c58faeaf0b841a9 280w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-subscription.png?w=560&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=3156cf202ae724c3fe67427c0942b17a 560w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-subscription.png?w=840&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=506f07d190cffca33a5b262c266a868e 840w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-subscription.png?w=1100&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=f862acb3574458eed0349ca507304df9 1100w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-subscription.png?w=1650&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=49f1ce0a93a13fd7a8815c47acb16301 1650w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-subscription.png?w=2500&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=5267c2f71195497d007adfc1efe3801b 2500w" />
</Frame>

<Steps>
  <Step title="Navigate to Products">
    1. Log into your Dodo Payments dashboard
    2. Click on **Products** in the left sidebar
    3. Click the **Create Product** button
    4. Select **Subscription** as the product type

    You should see a form where we'll configure our base subscription.
  </Step>

  <Step title="Fill in the subscription details">
    Now we'll enter the specific details for our base plan:

    **Product Name**: `Motion`

    **Description**: `Where your team's documentation lives.`

    **Recurring Price**: Enter → `49.00`

    **Billing Cycle**: Select → `Monthly`

    **Currency**: Select your preferred currency (e.g., `USD`)
  </Step>
</Steps>

## Step 3: Connect Add-On to Subscription

Now we need to associate our seat add-on with the base subscription so customers can purchase additional seats during checkout.

<Steps>
  <Step title="Attach the seat add-on">
    <Frame>
      <img src="https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons.png?fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=ea4ce0d437201c92590eea6c31a14e80" alt="Attaching add-on to subscription" data-og-width="2338" width="2338" data-og-height="1196" height="1196" data-path="images/cookbooks/seat-based/seat-based-addons.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons.png?w=280&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=8c93d311c3442791f2481c3a2dff9e6c 280w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons.png?w=560&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=55639ef750b29eb146b763a275d39d7f 560w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons.png?w=840&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=5222c17eb09251c3783e58aff7d3ed31 840w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons.png?w=1100&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=d26f009d831e6ebfcb8b51f10223b1f9 1100w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons.png?w=1650&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=2069508f22f5c842014ffba54a963c10 1650w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons.png?w=2500&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=5a7995df4602d26e77e150ee537b9a9f 2500w" />
    </Frame>

    1. Scroll down to the **Add-Ons** section
    2. Click **Add Add-Ons**
    3. From the dropdown, select your seat add-on
    4. Confirm that it appears in your subscription configuration
  </Step>

  <Step title="Save subscription changes">
    1. Review your complete subscription setup:
       * Base plan: \$49/month for 5 seats
       * Add-on: \$2/month per additional seat
       * Free trial: 14 days
    2. Click **Save Changes**

    <Check>
      **Seat-based pricing configured!** Customers can now purchase your base plan and add extra seats as needed.
    </Check>
  </Step>
</Steps>

## Step 4: Generate Payment Links with Custom Add-on Quantities

Now let's create an Express.js application that generates payment links with custom add-on quantities. This is where the real power of seat-based pricing comes in - you can dynamically create checkout sessions with any number of additional seats.

<Steps>
  <Step title="Set up your project">
    Create a new Node.js project and install the required dependencies:

    ```bash  theme={null}
    mkdir seat-based-pricing
    cd seat-based-pricing
    npm init -y
    npm install dodopayments express dotenv
    npm install -D @types/node @types/express typescript ts-node
    ```

    Create a `tsconfig.json` file:

    ```json  theme={null}
    {
      "compilerOptions": {
        "target": "ES2020",
        "module": "commonjs",
        "outDir": "./dist",
        "rootDir": "./src",
        "strict": true,
        "esModuleInterop": true,
        "skipLibCheck": true,
        "forceConsistentCasingInFileNames": true
      }
    }
    ```
  </Step>

  <Step title="Create your environment file">
    Create a `.env` file with your Dodo Payments API key:

    ```bash  theme={null}
    DODO_PAYMENTS_API_KEY=your_actual_dodo_api_key_here
    ```

    <Warning>
      Never commit your API key to version control. Add `.env` to your `.gitignore` file.
    </Warning>
  </Step>

  <Step title="Implement the checkout session creation">
    Create a `src/server.ts` file with the following code:

    <CodeGroup>
      ```typescript server.ts expandable theme={null}
      // Add this new endpoint for dynamic seat quantities
      import 'dotenv/config';
      import DodoPayments from 'dodopayments';
      import express, { Request, Response } from 'express';

      const app = express();

      // Initialize the Dodo Payments client
      const client = new DodoPayments({
        bearerToken: process.env.DODO_PAYMENTS_API_KEY,
        environment: 'test_mode'
      });

      async function createCheckoutSession(seatCount: number) {
        try {
          const session = await client.checkoutSessions.create({
            // Products to sell - use IDs from your Dodo Payments dashboard
            product_cart: [
              {
                product_id: 'pdt_7Rl9OWT2Mz4wwUTKz74iZ', // Replace with your actual product ID
                quantity: 1,
                addons: [
                  {
                    addon_id: 'adn_eKQbNakKrivDpaxmI8wKI', // Replace with your actual addon ID
                    quantity: seatCount
                  }
                ]
              }
            ],
            
            // Pre-fill customer information to reduce friction
            customer: {
              email: 'steve@example.com',
              name: 'Steve Irwin',
            },
            // Where to redirect after successful payment
            return_url: 'https://example.com/checkout/success',
          });

          // Redirect your customer to this URL to complete payment
          console.log('Checkout URL:', session.checkout_url);
          console.log('Session ID:', session.session_id);
          
          return session;
          
        } catch (error) {
          console.error('Failed to create checkout session:', error);
          throw error;
        }
      }

      // Example usage in an Express.js route
      app.post('/create-checkout/:seatCount', async (req: Request, res: Response) => {
        try {
          const seatCount = parseInt(req.params.seatCount);
          const session = await createCheckoutSession(seatCount);
          res.json({ checkout_url: session.checkout_url });
        } catch (error) {
          res.status(500).json({ error: 'Failed to create checkout session' });
        }
      });

      // Add this line after your other middleware
      app.use(express.static('public'));

      // Add this route to serve the demo page
      app.get('/', (req, res) => {
        res.sendFile(__dirname + '/../public/index.html');
      });

      app.listen(3000, () => {
        console.log('Server is running on port 3000');
      });
      ```
    </CodeGroup>
  </Step>

  <Step title="Add a simple web interface">
    Create a `public/index.html` file for easy testing:

    <CodeGroup>
      ```html index.html expandable theme={null}
      <!DOCTYPE html>
      <html>
      <head>
          <title>Seat-Based Pricing Demo</title>
          <style>
              body { font-family: Arial, sans-serif; max-width: 600px; margin: 50px auto; padding: 20px; }
              .form-group { margin: 20px 0; }
              label { display: block; margin-bottom: 5px; font-weight: bold; }
              input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; }
              button { background: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; }
              button:hover { background: #0056b3; }
              .result { margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 4px; }
          </style>
      </head>
      <body>
          <h1>Seat-Based Pricing Demo</h1>
          <p>Generate checkout links with custom seat quantities:</p>
          
          <div class="form-group">
              <label for="seatCount">Number of Additional Seats:</label>
              <input type="number" id="seatCount" value="3" min="0" max="50">
          </div>
          
          <button onclick="createCheckout()">Generate Checkout Link</button>
          
          <div id="result" class="result" style="display: none;">
              <h3>Checkout Link Generated!</h3>
              <p><strong>Seat Count:</strong> <span id="seatCountDisplay"></span></p>
              <p><strong>Total Cost:</strong> $<span id="totalCost"></span>/month</p>
              <p><strong>Checkout URL:</strong></p>
              <a id="checkoutUrl" href="#" target="_blank">Click here to checkout</a>
          </div>

          <script>
              async function createCheckout() {
                  const seatCount = document.getElementById('seatCount').value;
                  
                  try {
                      const response = await fetch(`/create-checkout/${seatCount}`, {
                          method: 'POST'
                      });
                      
                      const data = await response.json();
                      
                      if (response.ok) {
                          document.getElementById('seatCountDisplay').textContent = seatCount;
                          document.getElementById('totalCost').textContent = data.total_cost;
                          document.getElementById('checkoutUrl').href = data.checkout_url;
                          document.getElementById('result').style.display = 'block';
                      } else {
                          alert('Error: ' + data.error);
                      }
                  } catch (error) {
                      alert('Error creating checkout session');
                  }
              }
          </script>
      </body>
      </html>
      ```
    </CodeGroup>

    <Check>
      **Web interface created!** You now have a simple UI to test different seat quantities.
    </Check>
  </Step>

  <Step title="Serve static files">
    Add this to your `src/server.ts` to serve the HTML file:

    ```typescript  theme={null}
    // Add this line after your other middleware
    app.use(express.static('public'));

    // Add this route to serve the demo page
    app.get('/', (req, res) => {
      res.sendFile(__dirname + '/../public/index.html');
    });
    ```

    <Check>
      **Static files configured!** Visit `http://localhost:3000` to see your demo interface.
    </Check>
  </Step>
</Steps>

## Step 5: Test Your Implementation

Let's test our seat-based pricing implementation to make sure everything works correctly.

<Steps>
  <Step title="Start your server">
    1. Make sure you have your `.env` file with the correct API key
    2. Update the product and add-on IDs in your code with the actual values from your Dodo Payments dashboard
    3. Start your server:

    ```bash  theme={null}
    npm run dev
    ```

    <Check>
      Your server should start successfully and show "Server running on [http://localhost:3000](http://localhost:3000)"
    </Check>
  </Step>

  <Step title="Test the web interface">
    <Frame>
      <img src="https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-billing-ui.png?fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=37d166d8e76b0bfbb4959bc9a3eff1f8" alt="Creating base subscription product" data-og-width="1806" width="1806" data-og-height="1416" height="1416" data-path="images/cookbooks/seat-based/seat-based-billing-ui.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-billing-ui.png?w=280&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=964110ddfb3dc2715eb1262fb835e59e 280w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-billing-ui.png?w=560&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=e244d45cd73c19b3857c60a130af3b57 560w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-billing-ui.png?w=840&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=0e75048a626727ad33dd7deb79390844 840w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-billing-ui.png?w=1100&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=49ed91ffbf876f10d6437466d5d0d3bb 1100w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-billing-ui.png?w=1650&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=9988b60803eaceaff534cf7f869d7b3c 1650w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-billing-ui.png?w=2500&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=8f688153d4880e29d022f715f1b82757 2500w" />
    </Frame>

    1. Open your browser and go to `http://localhost:3000`
    2. You should see the seat-based pricing demo interface
    3. Try different seat quantities (0, 3, 10, etc.)
    4. Click "Generate Checkout Link" for each quantity
    5. Verify that the checkout URLs are generated correctly
  </Step>

  <Step title="Test a checkout session">
    1. Generate a checkout link with 3 additional seats
    2. Click the checkout URL to open the Dodo Payments checkout
    3. Verify that the checkout shows:
       * Base plan: \$49/month
       * Additional seats: 3 × 2 dollars = \$6/month
    4. Complete the test purchase

    <Check>
      The checkout should display the correct pricing breakdown and allow you to complete the purchase.
    </Check>
  </Step>

  <Step title="Listen for webhooks and update your DB">
    To keep your database in sync with subscription and seat changes, you need to listen for webhook events from Dodo Payments. Webhooks notify your backend when a customer completes checkout, updates their subscription, or changes seat counts.

    Follow the official Dodo Payments webhooks guide for step-by-step instructions on setting up webhook endpoints and handling events:

    <Card title="Dodo Payments Webhooks Documentation" icon="bell" href="/developer-resources/webhooks">
      Learn how to securely receive and process webhook events for subscription and seat management.
    </Card>
  </Step>
</Steps>

## Troubleshooting

Common issues and their solutions:

<AccordionGroup>
  <Accordion title="Checkout creation failing">
    **Possible causes:**

    * Invalid product ID or add-on ID
    * API key doesn't have sufficient permissions
    * Add-on not properly associated with subscription
    * Network connectivity issues

    **Solutions:**

    1. Verify product and add-on IDs exist in your Dodo Payments dashboard
    2. Check that add-on is properly attached to the subscription
    3. Ensure API key has checkout session creation permissions
    4. Test API connectivity with a simple GET request
  </Accordion>
</AccordionGroup>

## Congratulations! You've Implemented Seat-Based Pricing

You've successfully created a seat-based pricing system with Dodo Payments! Here's what you accomplished:

<CardGroup cols={2}>
  <Card title="Base Subscription">
    Created a subscription product with 5 included seats at \$49/month
  </Card>

  <Card title="Seat Add-ons">
    Configured add-ons for additional seats at \$2/month per seat
  </Card>

  <Card title="Checkout">
    Built an API that generates checkout sessions with custom seat quantities
  </Card>

  <Card title="Web Interface">
    Created a simple web interface for testing different seat quantities
  </Card>
</CardGroup>

<Info>
  This example demonstrates only a minimal implementation of seat-based pricing. For production use, you should add robust error handling, authentication, data validation, security measures, and adapt the logic to fit your application's requirements.
</Info>


# Subscription Integration Guide
Source: https://docs.dodopayments.com/developer-resources/subscription-integration-guide

This guide will help you integrate the Dodo Payments Subscription Product into your website.

## Prerequisites

To integrate the Dodo Payments API, you'll need:

* A Dodo Payments merchant account
* API credentials (API key and webhook secret key) from the dashboard

For a more detailed guide on the prerequisites, check this [section](/developer-resources/integration-guide#dashboard-setup).

## API Integration

### Checkout Sessions

Use Checkout Sessions to sell subscription products with a secure, hosted checkout. Pass your subscription product in `product_cart` and redirect customers to the returned `checkout_url`.

<Warning>
  You cannot mix subscription products with one-time products in the same checkout session.
</Warning>

<Tabs>
  <Tab title="Node.js SDK">
    ```javascript  theme={null}
    import DodoPayments from 'dodopayments';

    const client = new DodoPayments({
      bearerToken: process.env.DODO_PAYMENTS_API_KEY,
    });

    async function main() {
      const session = await client.checkoutSessions.create({
        product_cart: [
          { product_id: 'prod_subscription_monthly', quantity: 1 }
        ],
        // Optional: configure trials for subscription products
        subscription_data: { trial_period_days: 14 },
        customer: {
          email: 'subscriber@example.com',
          name: 'Jane Doe',
        },
        return_url: 'https://example.com/success',
      });

      console.log(session.checkout_url);
    }

    main();
    ```
  </Tab>

  <Tab title="Python SDK">
    ```python  theme={null}
    import os
    from dodopayments import DodoPayments

    client = DodoPayments(
        bearer_token=os.environ.get("DODO_PAYMENTS_API_KEY"),
    )

    session = client.checkout_sessions.create(
        product_cart=[
            {"product_id": "prod_subscription_monthly", "quantity": 1}
        ],
        subscription_data={"trial_period_days": 14},  # optional
        customer={
            "email": "subscriber@example.com",
            "name": "Jane Doe",
        },
        return_url="https://example.com/success",
    )

    print(session.checkout_url)
    ```
  </Tab>

  <Tab title="REST API">
    ```javascript  theme={null}
    const response = await fetch('https://test.dodopayments.com/checkouts', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${process.env.DODO_PAYMENTS_API_KEY}`
      },
      body: JSON.stringify({
        product_cart: [
          { product_id: 'prod_subscription_monthly', quantity: 1 }
        ],
        subscription_data: { trial_period_days: 14 }, // optional
        customer: {
          email: 'subscriber@example.com',
          name: 'Jane Doe'
        },
        return_url: 'https://example.com/success'
      })
    });

    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }

    const session = await response.json();
    console.log(session.checkout_url);
    ```
  </Tab>
</Tabs>

### API Response

The following is an example of the response:

```json  theme={null}
{
  "session_id": "cks_Gi6KGJ2zFJo9rq9Ukifwa",
  "checkout_url": "https://test.checkout.dodopayments.com/session/cks_Gi6KGJ2zFJo9rq9Ukifwa"
}
```

Redirect the customer to `checkout_url`.

### Webhooks

When integrating subscriptions, you'll receive webhooks to track the subscription lifecycle. These webhooks help you manage subscription states and payment scenarios effectively.

To set up your webhook endpoint, please follow our [Detailed Integration Guide](/developer-resources/integration-guide#implementing-webhooks).

#### Subscription Event Types

The following webhook events track subscription status changes:

1. **`subscription.active`** - Subscription is successfully activated.
2. **`subscription.on_hold`** - Subscription is put on hold due to failed renewal.
3. **`subscription.failed`** - Subscription creation failed during mandate creation.
4. **`subscription.renewed`** - Subscription is renewed for the next billing period.

For reliable subscription lifecycle management, we recommend tracking these subscription events.

#### Payment Scenarios

**Successful Payment Flow**

When a payment succeeds, you'll receive the following webhooks:

1. `subscription.active` - Indicates subscription activation
2. `payment.succeeded` - Confirms the initial payment:
   * For immediate billing (0 trial days): Expect within 2-10 minutes
   * For trial days: whenever that ends
3. `subscription.renewed` - Indicates payment deduction and renewal for next cycle. (Basically, whenever payment gets deducted for subscription products, you will get `subscription.renewed` webhook along with `payment.succeeded`)

**Payment Failure Scenarios**

1. Subscription Failure

* `subscription.failed` - Subscription creation failed due to failure to create a mandate.
* `payment.failed` - Indicates failed payment.

<Info>**Best Practice**: To simplify implementation, we recommend primarily tracking subscription events for managing the subscription lifecycle.</Info>

### Sample Subscription event payload

***

| Property      | Type   | Required | Description                                                                                  |
| ------------- | ------ | -------- | -------------------------------------------------------------------------------------------- |
| `business_id` | string | Yes      | The unique identifier for the business                                                       |
| `timestamp`   | string | Yes      | The timestamp of when the event occurred (not necessarily the same as when it was delivered) |
| `type`        | string | Yes      | The type of event. See [Event Types](#event-types)                                           |
| `data`        | object | Yes      | The main data payload. See [Data Object](#data-object)                                       |

## Changing Subscription Plans

You can upgrade or downgrade a subscription plan using the change plan API endpoint. This allows you to modify the subscription's product, quantity, and handle proration.

<Card title="Change Plan API Reference" icon="arrows-rotate" href="/api-reference/subscriptions/change-plan">
  For detailed information about changing subscription plans, please refer to our Change Plan API documentation.
</Card>

### Proration Options

When changing subscription plans, you have two options for handling the immediate charge:

#### 1. `prorated_immediately`

* Calculates the prorated amount based on the remaining time in the current billing cycle
* Charges the customer only for the difference between the old and new plan
* During a trial period, this will immediately switch the user to the new plan, charging the customer right away

#### 2. `full_immediately`

* Charges the customer the full subscription amount for the new plan
* Ignores any remaining time or credits from the previous plan
* Useful when you want to reset the billing cycle or charge the full amount regardless of proration

#### 3. `difference_immediately`

* When upgrading, the customer is immediately charged the difference between the two plan amounts.
* For example, if the current plan is 30 Dollars and the customer upgrades to an 80 Dollars, they are charged \$50 instantly.
* When downgrading, the unused amount from the current plan is added as internal credit and automatically applied to future subscription renewals.
* For example, if the current plan is 50 Dollars and the customer switches to a 20 Dollars plan, the remaining \$30 is credited and used toward the next billing cycle.

### Behavior

* When you invoke this API, Dodo Payments immediately initiates a charge based on your selected proration option
* If the plan change is a downgrade and you use `prorated_immediately`, credits will be automatically calculated and added to the subscription's credit balance. These credits are specific to that subscription and will only be used to offset future recurring payments of the same subscription
* The `full_immediately` option bypasses credit calculations and charges the complete new plan amount

<Tip>
  **Choose your proration option carefully**: Use `prorated_immediately` for fair billing that accounts for unused time, or `full_immediately` when you want to charge the complete new plan amount regardless of the current billing cycle.
</Tip>

### Charge Processing

* The immediate charge initiated upon plan change usually completes processing in less than 2 minutes
* If this immediate charge fails for any reason, the subscription is automatically placed on hold until the issue is resolved

## On-Demand Subscriptions

<Info>
  On-demand subscriptions let you charge customers flexibly, not just on a fixed schedule. Contact support to enable this feature.
</Info>

**To create an on-demand subscription:**

To create an on-demand subscription, use the [POST /subscriptions](/api-reference/subscriptions/post-subscriptions) API endpoint and include the `on_demand` field in your request body. This allows you to authorize a payment method without an immediate charge, or set a custom initial price.

**To charge an on-demand subscription:**

For subsequent charges, use the [POST /subscriptions/charge](/api-reference/subscriptions/create-charge) endpoint and specify the amount to charge the customer for that transaction.

<Note>
  For a complete, step-by-step guide—including request/response examples, safe retry policies, and webhook handling—see the <a href="/developer-resources/ondemand-subscriptions">On-Demand Subscriptions Guide</a>.
</Note>


# Subscription Upgrade & Downgrade Guide
Source: https://docs.dodopayments.com/developer-resources/subscription-upgrade-downgrade

Learn how to change a customer's subscription plan, handle proration, and process webhooks reliably.

<CardGroup cols={2}>
  <Card title="Change Plan API Reference" icon="code" href="/api-reference/subscriptions/change-plan">
    Access the complete API documentation for changing subscription plans and test plan change requests interactively.
  </Card>

  <Card title="Subscription Integration Guide" icon="book" href="/developer-resources/subscription-integration-guide">
    Learn how to create and manage subscriptions from scratch with our comprehensive integration guide.
  </Card>
</CardGroup>

## What is a subscription upgrade or downgrade?

Changing plans lets you move a customer between subscription tiers or quantities. Use it to:

* Align pricing with usage or features
* Move from monthly to annual (or vice versa)
* Adjust quantity for seat-based products

<Info>
  Plan changes can trigger an immediate charge depending on the proration mode you choose.
</Info>

## When to use plan changes

* Upgrade when a customer needs more features, usage, or seats
* Downgrade when usage decreases
* Migrate users to a new product or price without cancelling their subscription

## Prerequisites

Before implementing subscription plan changes, ensure you have:

* A Dodo Payments merchant account with active subscription products
* API credentials (API key and webhook secret key) from the dashboard
* An existing active subscription to modify
* Webhook endpoint configured to handle subscription events

<Info>
  For detailed setup instructions, see our [Integration Guide](/developer-resources/integration-guide#dashboard-setup).
</Info>

## Step-by-Step Implementation Guide

Follow this comprehensive guide to implement subscription plan changes in your application:

<Steps>
  <Step title="Understand Plan Change Requirements">
    Before implementing, determine:

    * Which subscription products can be changed to which others
    * What proration mode fits your business model
    * How to handle failed plan changes gracefully
    * Which webhook events to track for state management

    <Tip>
      Test plan changes thoroughly in test mode before implementing in production.
    </Tip>
  </Step>

  <Step title="Choose Your Proration Strategy">
    Select the billing approach that aligns with your business needs:

    <Tabs>
      <Tab title="prorated_immediately">
        Best for: SaaS applications wanting to charge fairly for unused time

        * Calculates exact prorated amount based on remaining cycle time
        * Charges a prorated amount based on unused time remaining in the cycle
        * Provides transparent billing to customers
      </Tab>

      <Tab title="difference_immediately">
        Best for: Clear upgrade/downgrade scenarios

        * Upgrade: Charge immediate difference (e.g., $30→$80 = charge \$50)
        * Downgrade: Credit remaining value for future renewals
        * Simplifies billing logic and customer communication
      </Tab>

      <Tab title="full_immediately">
        Best for: When you want to reset the billing cycle

        * Charges full amount of new plan immediately
        * Ignores remaining time from old plan
        * Useful for annual to monthly transitions
      </Tab>
    </Tabs>
  </Step>

  <Step title="Implement the Change Plan API">
    Use the Change Plan API to modify subscription details:

    <ParamField path="subscription_id" type="string" required>
      The ID of the active subscription to modify.
    </ParamField>

    <ParamField path="product_id" type="string" required>
      The new product ID to change the subscription to.
    </ParamField>

    <ParamField path="quantity" type="integer" default="1">
      Number of units for the new plan (for seat-based products).
    </ParamField>

    <ParamField path="proration_billing_mode" type="string" required>
      How to handle immediate billing: `prorated_immediately`, `full_immediately`, or `difference_immediately`.
    </ParamField>

    <ParamField path="addons" type="array">
      Optional addons for the new plan. Leaving this empty removes any existing addons.
    </ParamField>
  </Step>

  <Step title="Handle Webhook Events">
    Set up webhook handling to track plan change outcomes:

    * `subscription.active`: Plan change successful, subscription updated
    * `subscription.plan_changed`: Subscription plan changed (upgrade/downgrade/addon update)
    * `subscription.on_hold`: Plan change charge failed, subscription paused
    * `payment.succeeded`: Immediate charge for plan change succeeded
    * `payment.failed`: Immediate charge failed

    <Warning>
      Always verify webhook signatures and implement idempotent event processing.
    </Warning>
  </Step>

  <Step title="Update Your Application State">
    Based on webhook events, update your application:

    * Grant/revoke features based on new plan
    * Update customer dashboard with new plan details
    * Send confirmation emails about plan changes
    * Log billing changes for audit purposes
  </Step>

  <Step title="Test and Monitor">
    Thoroughly test your implementation:

    * Test all proration modes with different scenarios
    * Verify webhook handling works correctly
    * Monitor plan change success rates
    * Set up alerts for failed plan changes

    <Check>
      Your subscription plan change implementation is now ready for production use.
    </Check>
  </Step>
</Steps>

## Change Plan API

Use the Change Plan API to modify product, quantity, and proration behavior for an active subscription.

### Quick start examples

<Tabs>
  <Tab title="Node.js SDK">
    ```javascript  theme={null}
    import DodoPayments from 'dodopayments';

    const client = new DodoPayments({
      bearerToken: process.env.DODO_PAYMENTS_API_KEY,
    });

    async function changePlan() {
      const result = await client.subscriptions.changePlan('sub_123', {
        product_id: 'prod_new',
        quantity: 3,
        proration_billing_mode: 'prorated_immediately',
      });
      console.log(result.status, result.invoice_id, result.payment_id);
    }

    changePlan();
    ```
  </Tab>

  <Tab title="Python SDK">
    ```python  theme={null}
    import os
    from dodopayments import DodoPayments

    client = DodoPayments(bearer_token=os.environ.get("DODO_PAYMENTS_API_KEY"))

    result = client.subscriptions.change_plan(
        subscription_id="sub_123",
        product_id="prod_new",
        quantity=3,
        proration_billing_mode="prorated_immediately",
    )
    print(result.status, result.get("invoice_id"), result.get("payment_id"))
    ```
  </Tab>

  <Tab title="Go SDK">
    ```go  theme={null}
    package main

    import (
      "context"
      "fmt"
      "github.com/dodopayments/dodopayments-go"
      "github.com/dodopayments/dodopayments-go/option"
    )

    func main() {
      client := dodopayments.NewClient(option.WithBearerToken("YOUR_TOKEN"))
      res, err := client.Subscriptions.ChangePlan(context.TODO(), dodopayments.SubscriptionChangePlanParams{
        SubscriptionID: dodopayments.F("sub_123"),
        ProductID:             dodopayments.F("prod_new"),
        Quantity:              dodopayments.F(int64(3)),
        ProrationBillingMode:  dodopayments.F(dodopayments.SubscriptionChangePlanParamsProrationBillingModeProratedImmediately),
      })
      if err != nil { panic(err) }
      fmt.Println(res.Status, res.InvoiceID, res.PaymentID)
    }
    ```
  </Tab>

  <Tab title="HTTP">
    ```bash  theme={null}
    curl -X POST "$DODO_API_BASE/subscriptions/sub_123/change-plan" \
      -H "Authorization: Bearer $DODO_PAYMENTS_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{
        "product_id": "prod_new",
        "quantity": 3,
        "proration_billing_mode": "prorated_immediately"
      }'
    ```
  </Tab>
</Tabs>

```json Success theme={null}
{
  "status": "processing",
  "subscription_id": "sub_123",
  "invoice_id": "inv_789",
  "payment_id": "pay_456",
  "proration_billing_mode": "prorated_immediately"
}
```

<Note>
  Fields like <code>invoice\_id</code> and <code>payment\_id</code> are returned only when an immediate charge and/or invoice is created during the plan change. Always rely on webhook events (e.g., <code>payment.succeeded</code>, <code>subscription.plan\_changed</code>) to confirm outcomes.
</Note>

<Warning>
  If the immediate charge fails, the subscription may move to `subscription.on_hold` until payment succeeds.
</Warning>

## Managing Addons

When changing subscription plans, you can also modify addons:

```javascript  theme={null}
// Add addons to the new plan
await client.subscriptions.changePlan('sub_123', {
  product_id: 'prod_new',
  quantity: 1,
  proration_billing_mode: 'difference_immediately',
  addons: [
    { addon_id: 'addon_123', quantity: 2 }
  ]
});

// Remove all existing addons
await client.subscriptions.changePlan('sub_123', {
  product_id: 'prod_new',
  quantity: 1,
  proration_billing_mode: 'difference_immediately',
  addons: [] // Empty array removes all existing addons
});
```

<Info>
  Addons are included in the proration calculation and will be charged according to the selected proration mode.
</Info>

## Proration modes

Choose how to bill the customer when changing plans:

#### `prorated_immediately`

* Charges for the partial difference in the current cycle
* If in trial, charges immediately and switches to the new plan now
* Downgrade: may generate a prorated credit applied to future renewals

#### `full_immediately`

* Charges the full amount of the new plan immediately
* Ignores remaining time from the old plan

<Info>
  Credits created by downgrades using <code>difference\_immediately</code> are subscription-scoped and distinct from <a href="/features/customer-credit">Customer Credits</a>. They automatically apply to future renewals of the same subscription and are not transferable between subscriptions.
</Info>

#### `difference_immediately`

* Upgrade: immediately charge the price difference between old and new plans
* Downgrade: add remaining value as internal credit to the subscription and auto-apply on renewals

### Example scenarios

<AccordionGroup>
  <Accordion title="Upgrade: Basic ($30) → Pro ($80) with difference_immediately">
    ```javascript  theme={null}
    await client.subscriptions.changePlan('sub_123', {
      product_id: 'prod_pro',
      quantity: 1,
      proration_billing_mode: 'difference_immediately'
    })
    // Immediate charge: $50
    ```
  </Accordion>

  <Accordion title="Downgrade: Plus ($50) → Starter ($20) with difference_immediately">
    ```javascript  theme={null}
    await client.subscriptions.changePlan('sub_123', {
      product_id: 'prod_starter',
      quantity: 1,
      proration_billing_mode: 'difference_immediately'
    })
    // Credit added: $30 (auto-applied to future renewals for this subscription)
    ```
  </Accordion>

  <Accordion title="Upgrade mid-cycle with prorated_immediately">
    ```javascript  theme={null}
    await client.subscriptions.changePlan('sub_123', {
      product_id: 'prod_new',
      quantity: 1,
      proration_billing_mode: 'prorated_immediately'
    })
    // Immediate prorated charge based on remaining days in cycle
    ```
  </Accordion>

  <Accordion title="Reset billing with full_immediately">
    ```javascript  theme={null}
    await client.subscriptions.changePlan('sub_123', {
      product_id: 'prod_new',
      quantity: 1,
      proration_billing_mode: 'full_immediately'
    })
    // Immediate full charge for new plan; no credits calculated
    ```
  </Accordion>
</AccordionGroup>

<Tip>
  Pick `prorated_immediately` for fair-time accounting; choose `full_immediately` to restart billing; use `difference_immediately` for simple upgrades and automatic credit on downgrades.
</Tip>

## Handling webhooks

Track subscription state through webhooks to confirm plan changes and payments.

### Event types to handle

* `subscription.active`: subscription activated
* `subscription.plan_changed`: subscription plan changed (upgrade/downgrade/addon changes)
* `subscription.on_hold`: charge failed, subscription paused
* `subscription.renewed`: renewal succeeded
* `payment.succeeded`: payment for plan change or renewal succeeded
* `payment.failed`: payment failed

<Info>
  We recommend driving business logic from subscription events and using payment events for confirmation and reconciliation.
</Info>

### Verify signatures and handle intents

<Tabs>
  <Tab title="Next.js Route Handler">
    ```javascript  theme={null}
    import { NextRequest, NextResponse } from 'next/server';

    export async function POST(req) {
      const webhookId = req.headers.get('webhook-id');
      const webhookSignature = req.headers.get('webhook-signature');
      const webhookTimestamp = req.headers.get('webhook-timestamp');
      const secret = process.env.DODO_WEBHOOK_SECRET;

      const payload = await req.text();
      // verifySignature is a placeholder – in production, use a Standard Webhooks library
      const { valid, event } = await verifySignature(
        payload,
        { id: webhookId, signature: webhookSignature, timestamp: webhookTimestamp },
        secret
      );
      if (!valid) return NextResponse.json({ error: 'Invalid signature' }, { status: 400 });

      switch (event.type) {
        case 'subscription.active':
          // mark subscription active in your DB
          break;
        case 'subscription.plan_changed':
          // refresh entitlements and reflect the new plan in your UI
          break;
        case 'subscription.on_hold':
          // notify user to update payment method
          break;
        case 'subscription.renewed':
          // extend access window
          break;
        case 'payment.succeeded':
          // reconcile payment for plan change
          break;
        case 'payment.failed':
          // log and alert
          break;
        default:
          // ignore unknown events
          break;
      }

      return NextResponse.json({ received: true });
    }
    ```
  </Tab>

  <Tab title="Express.js">
    ```javascript  theme={null}
    import express from 'express';

    const app = express();
    app.post('/webhooks/dodo', express.raw({ type: 'application/json' }), async (req, res) => {
      const webhookId = req.header('webhook-id');
      const webhookSignature = req.header('webhook-signature');
      const webhookTimestamp = req.header('webhook-timestamp');
      const secret = process.env.DODO_WEBHOOK_SECRET;
      const payload = req.body.toString('utf8');

      const { valid, event } = await verifySignature(
        payload,
        { id: webhookId, signature: webhookSignature, timestamp: webhookTimestamp },
        secret
      );
      if (!valid) return res.status(400).send('Invalid signature');

      // handle events like above
      res.json({ received: true });
    });

    app.listen(3000);
    ```
  </Tab>
</Tabs>

<Note>
  For detailed payload schemas, see the <a href="/developer-resources/webhooks/intents/subscription">Subscription webhook payloads</a> and <a href="/developer-resources/webhooks/intents/payment">Payment webhook payloads</a>.
</Note>

## Best Practices

Follow these recommendations for reliable subscription plan changes:

### Plan Change Strategy

* **Test thoroughly**: Always test plan changes in test mode before production
* **Choose proration carefully**: Select the proration mode that aligns with your business model
* **Handle failures gracefully**: Implement proper error handling and retry logic
* **Monitor success rates**: Track plan change success/failure rates and investigate issues

### Webhook Implementation

* **Verify signatures**: Always validate webhook signatures to ensure authenticity
* **Implement idempotency**: Handle duplicate webhook events gracefully
* **Process asynchronously**: Don't block webhook responses with heavy operations
* **Log everything**: Maintain detailed logs for debugging and audit purposes

### User Experience

* **Communicate clearly**: Inform customers about billing changes and timing
* **Provide confirmations**: Send email confirmations for successful plan changes
* **Handle edge cases**: Consider trial periods, prorations, and failed payments
* **Update UI immediately**: Reflect plan changes in your application interface

## Common Issues and Solutions

Resolve typical problems encountered during subscription plan changes:

<AccordionGroup>
  <Accordion title="Charge created but subscription not updated">
    **Symptoms**: API call succeeds but subscription remains on old plan

    **Common causes**:

    * Webhook processing failed or was delayed
    * Application state not updated after receiving webhooks
    * Database transaction issues during state update

    **Solutions**:

    * Implement robust webhook handling with retry logic
    * Use idempotent operations for state updates
    * Add monitoring to detect and alert on missed webhook events
    * Verify webhook endpoint is accessible and responding correctly
  </Accordion>

  <Accordion title="Credits not applied after downgrade">
    **Symptoms**: Customer downgrades but doesn't see credit balance

    **Common causes**:

    * Proration mode expectations: downgrades credit the full plan price difference with `difference_immediately`, while `prorated_immediately` creates a prorated credit based on remaining time in the cycle
    * Credits are subscription-specific and don't transfer between subscriptions
    * Credit balance not visible in customer dashboard

    **Solutions**:

    * Use `difference_immediately` for downgrades when you want automatic credits
    * Explain to customers that credits apply to future renewals of the same subscription
    * Implement customer portal to show credit balances
    * Check next invoice preview to see applied credits
  </Accordion>

  <Accordion title="Webhook signature verification fails">
    **Symptoms**: Webhook events rejected due to invalid signature

    **Common causes**:

    * Incorrect webhook secret key
    * Raw request body modified before signature verification
    * Wrong signature verification algorithm

    **Solutions**:

    * Verify you're using the correct `DODO_WEBHOOK_SECRET` from dashboard
    * Read raw request body before any JSON parsing middleware
    * Use the standard webhook verification library for your platform
    * Test webhook signature verification in development environment
  </Accordion>

  <Accordion title="Plan change fails with 422 error">
    **Symptoms**: API returns 422 Unprocessable Entity error

    **Common causes**:

    * Invalid subscription ID or product ID
    * Subscription not in active state
    * Missing required parameters
    * Product not available for plan changes

    **Solutions**:

    * Verify subscription exists and is active
    * Check product ID is valid and available
    * Ensure all required parameters are provided
    * Review API documentation for parameter requirements
  </Accordion>

  <Accordion title="Immediate charge fails during plan change">
    **Symptoms**: Plan change initiated but immediate charge fails

    **Common causes**:

    * Insufficient funds on customer's payment method
    * Payment method expired or invalid
    * Bank declined the transaction
    * Fraud detection blocked the charge

    **Solutions**:

    * Handle `payment.failed` webhook events appropriately
    * Notify customer to update payment method
    * Implement retry logic for temporary failures
    * Consider allowing plan changes with failed immediate charges
  </Accordion>
</AccordionGroup>

## Testing Your Implementation

Follow these steps to thoroughly test your subscription plan change implementation:

<Steps>
  <Step title="Set up test environment">
    * Use test API keys and test products
    * Create test subscriptions with different plan types
    * Configure test webhook endpoint
    * Set up monitoring and logging
  </Step>

  <Step title="Test different proration modes">
    * Test `prorated_immediately` with various billing cycle positions
    * Test `difference_immediately` for upgrades and downgrades
    * Test `full_immediately` to reset billing cycles
    * Verify credit calculations are correct
  </Step>

  <Step title="Test webhook handling">
    * Verify all relevant webhook events are received
    * Test webhook signature verification
    * Handle duplicate webhook events gracefully
    * Test webhook processing failure scenarios
  </Step>

  <Step title="Test error scenarios">
    * Test with invalid subscription IDs
    * Test with expired payment methods
    * Test network failures and timeouts
    * Test with insufficient funds
  </Step>

  <Step title="Monitor in production">
    * Set up alerts for failed plan changes
    * Monitor webhook processing times
    * Track plan change success rates
    * Review customer support tickets for plan change issues
  </Step>
</Steps>

## Error Handling

Handle common API errors gracefully in your implementation:

### HTTP Status Codes

<AccordionGroup>
  <Accordion title="200 OK">
    Plan change request processed successfully. The subscription is being updated and payment processing has begun.
  </Accordion>

  <Accordion title="400 Bad Request">
    Invalid request parameters. Check that all required fields are provided and properly formatted.
  </Accordion>

  <Accordion title="401 Unauthorized">
    Invalid or missing API key. Verify your `DODO_PAYMENTS_API_KEY` is correct and has proper permissions.
  </Accordion>

  <Accordion title="404 Not Found">
    Subscription ID not found or doesn't belong to your account.
  </Accordion>

  <Accordion title="422 Unprocessable Entity">
    The subscription cannot be changed (e.g., already cancelled, product not available, etc.).
  </Accordion>

  <Accordion title="500 Internal Server Error">
    Server error occurred. Retry the request after a brief delay.
  </Accordion>
</AccordionGroup>

### Error Response Format

```json  theme={null}
{
  "error": {
    "code": "subscription_not_found",
    "message": "The subscription with ID 'sub_123' was not found",
    "details": {
      "subscription_id": "sub_123"
    }
  }
}
```

## Next steps

* Review the <a href="/api-reference/subscriptions/change-plan">Change Plan API</a>
* Explore <a href="/features/customer-credit">Customer Credits</a>
* Implement alerts for `subscription.on_hold`
* Check out our <a href="/developer-resources/webhooks">Webhook Integration Guide</a>


# Supabase Boilerplate
Source: https://docs.dodopayments.com/developer-resources/supabase-boilerplate

Use the official Next.js + Supabase + Dodo Payments subscription starter to ship subscriptions fast. Includes auth, database schema, webhook handler, and pricing UI.

<CardGroup cols={2}>
  <Card title="GitHub Repository" icon="github" href="https://github.com/dodopayments/dodo-supabase-subscription-starter">
    Minimal Next.js + Supabase + Dodo Payments subscription boilerplate
  </Card>

  <Card title="Live Demo" icon="rocket" href="https://dodopayments-supabase-nextjs.vercel.app">
    Explore the deployed demo
  </Card>
</CardGroup>

## Overview

A production-ready boilerplate for subscriptions using Next.js 15, React 19, Supabase, Drizzle ORM, and Dodo Payments. It ships with Google OAuth, subscription checkout, webhook handling, database schema, and a basic dashboard.

<Info>
  If you need only route handlers for an existing app, see the dedicated adaptors: <a href="/developer-resources/nextjs-adaptor">Next.js Adaptor</a> and <a href="/developer-resources/express-adaptor">Express Adaptor</a>.
</Info>

## Prerequisites

* Node.js 18+ (or Bun 1.0+)
* Supabase project (URL, Anon key, Service role key, Database URL)
* Dodo Payments account (API key, Webhook secret)
* Google Cloud OAuth client (Client ID and Secret)

## Quickstart

<Steps>
  <Step title="Clone and install">
    ```bash  theme={null}
    git clone https://github.com/dodopayments/dodo-supabase-subscription-starter.git
    cd dodo-supabase-subscription-starter
    # choose one
    bun install
    # or
    npm install
    # or
    pnpm install
    ```
  </Step>

  <Step title="Create Supabase project">
    Create a Supabase project and copy:

    * NEXT\_PUBLIC\_SUPABASE\_URL
    * NEXT\_PUBLIC\_SUPABASE\_ANON\_KEY
    * SUPABASE\_SERVICE\_ROLE\_KEY
    * DATABASE\_URL (Connection string)
  </Step>

  <Step title="Configure Google OAuth">
    Set the redirect URI to: `https://[your-project-ref].supabase.co/auth/v1/callback` in Google Cloud, then enable Google provider in Supabase Auth using your Client ID and Secret.
  </Step>

  <Step title="Configure Dodo Payments">
    Generate an API key and Webhook secret from the Dodo dashboard. Set environment to `test_mode` while developing.
  </Step>

  <Step title="Create .env.local">
    ```env  theme={null}
    # Supabase
    NEXT_PUBLIC_SUPABASE_URL=https://your-project-ref.supabase.co
    NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
    SUPABASE_SERVICE_ROLE_KEY=your-service-role

    # Database
    DATABASE_URL=postgresql://postgres:[password]@db.[project-ref].supabase.co:5432/postgres

    # Dodo Payments
    DODO_PAYMENTS_API_KEY=your-dodo-api-key
    DODO_WEBHOOK_SECRET=your-webhook-secret
    DODO_PAYMENTS_ENVIRONMENT=test_mode
    ```

    <Warning>
      Never commit secrets. Use environment variables in deployment environments.
    </Warning>
  </Step>

  <Step title="Provision database schema">
    ```bash  theme={null}
    bun run db:push
    # or
    npm run db:push
    # or
    pnpm run db:push
    ```

    <Check>
      Tables created: `users`, `subscriptions`, `payments`.
    </Check>
  </Step>

  <Step title="Deploy webhook function">
    ```bash  theme={null}
    # login (one-time)
    bunx supabase login
    # or
    npx supabase login

    # deploy the edge function
    bun run deploy:webhook --project-ref [your-project-ref]
    # or
    npm run deploy:webhook -- --project-ref [your-project-ref]
    # or
    pnpm run deploy:webhook --project-ref [your-project-ref]
    ```

    ```bash cURL theme={null}
    curl -X POST \
      'https://[your-project-ref].supabase.co/functions/v1/dodo-webhook' \
      -H 'Content-Type: application/json' \
      -H 'Dodo-Signature: <signature>' \
      -d '{"type":"payment.succeeded","data":{}}'
    ```
  </Step>

  <Step title="Add webhook in Dodo Payments">
    Set endpoint URL to:

    ```text  theme={null}
    https://[your-project-ref].supabase.co/functions/v1/dodo-webhook
    ```

    Select payment and subscription events.
  </Step>

  <Step title="Create products and features">
    In Dodo dashboard → Products → Create Product. Optionally add metadata:

    ```json  theme={null}
    {
      "features": ["Feature 1", "Feature 2", "Feature 3"]
    }
    ```

    The pricing UI reads this `features` array and renders it dynamically.
  </Step>

  <Step title="Run the dev server">
    ```bash  theme={null}
    bun run dev
    # or
    npm run dev
    # or
    pnpm run dev
    ```

    Open [http://localhost:3000](http://localhost:3000).
  </Step>
</Steps>

## What’s included

* Authentication via Supabase (Google OAuth configured)
* Subscription checkout via Dodo Payments
* Supabase Edge Function for webhooks (`dodo-webhook`)
* Drizzle ORM schema and migrations
* Dashboard with invoices, subscription status, and plan features

<Tip>
  Keep `DODO_PAYMENTS_ENVIRONMENT` as `test_mode` until you complete end-to-end tests.
</Tip>

## Key files and paths

<Tabs>
  <Tab title="Edge Function">
    ```text  theme={null}
    supabase/functions/dodo-webhook/
      index.ts            # webhook handler verifying signatures
      deno.json           # permissions
    ```
  </Tab>

  <Tab title="Next.js routes">
    ```text  theme={null}
    app/(marketing)/*     # landing + pricing UI
    app/(dashboard)/*     # protected pages
    app/api/*             # server actions & helpers
    ```
  </Tab>

  <Tab title="Database (Drizzle)">
    ```text  theme={null}
    lib/db/schema.ts      # users, subscriptions, payments
    lib/db/index.ts       # client
    ```
  </Tab>
</Tabs>

## Environment variables

<AccordionGroup>
  <Accordion title="Supabase">
    ```env  theme={null}
    NEXT_PUBLIC_SUPABASE_URL=
    NEXT_PUBLIC_SUPABASE_ANON_KEY=
    SUPABASE_SERVICE_ROLE_KEY=
    DATABASE_URL=
    ```
  </Accordion>

  <Accordion title="Dodo Payments">
    ```env  theme={null}
    DODO_PAYMENTS_API_KEY=
    DODO_WEBHOOK_SECRET=
    DODO_PAYMENTS_ENVIRONMENT=test_mode|live_mode
    ```
  </Accordion>

  <Accordion title="Google OAuth">
    ```env  theme={null}
    GOOGLE_CLIENT_ID=
    GOOGLE_CLIENT_SECRET=
    ```
  </Accordion>
</AccordionGroup>

## Verification and troubleshooting

<AccordionGroup>
  <Accordion title="Webhook signature invalid (401)">
    * Ensure `DODO_WEBHOOK_SECRET` matches the value from Dodo dashboard
    * Confirm you deployed the latest `dodo-webhook` function
    * Verify the header name is correct in your function (Dodo-Signature)
  </Accordion>

  <Accordion title="Database push fails">
    * Check `DATABASE_URL` syntax and Supabase network egress
    * Wait \~2–3 minutes after project creation before first push
  </Accordion>

  <Accordion title="OAuth redirect mismatch">
    * Redirect URI must be `https://[ref].supabase.co/auth/v1/callback`
    * Ensure the same in Google Cloud and Supabase Auth provider
  </Accordion>
</AccordionGroup>

<Check>
  You now have a working subscription SaaS scaffolded with Supabase and Dodo Payments.
</Check>

<Info>
  Original repository and detailed steps: <a href="https://github.com/dodopayments/dodo-supabase-subscription-starter">dodo-supabase-subscription-starter</a>.
</Info>


# SveleteKit Adaptor
Source: https://docs.dodopayments.com/developer-resources/sveltekit-adaptor

Learn how to integrate Dodo Payments with your SveleteKit App Router project using our SveleteKit Adaptor. Covers checkout, customer portal, webhooks, and secure environment setup.

<CardGroup cols={2}>
  <Card title="Checkout Handler" icon="cart-shopping" href="#checkout-route-handler">
    Integrate Dodo Payments checkout into your SveleteKit app.
  </Card>

  <Card title="Customer Portal" icon="user" href="#customer-portal-route-handler">
    Allow customers to manage subscriptions and details.
  </Card>

  <Card title="Webhooks" icon="bell" href="#webhook-route-handler">
    Receive and process Dodo Payments webhook events.
  </Card>
</CardGroup>

## Installation

<Steps>
  <Step title="Install the package">
    Run the following command in your project root:

    ```bash  theme={null}
    npm install @dodopayments/svelteKit
    ```
  </Step>

  <Step title="Set up environment variables">
    Create a <code>.env</code> file in your project root:

    ```env expandable theme={null}
    DODO_PAYMENTS_API_KEY=your-api-key
    DODO_PAYMENTS_WEBHOOK_KEY=your-webhook-secret
    DODO_PAYMENTS_ENVIRONMENT="test_mode" or "live_mode"
    DODO_PAYMENTS_RETURN_URL=https://yourdomain.com/checkout/success
    ```

    <Warning>
      Never commit your <code>.env</code> file or secrets to version control.
    </Warning>
  </Step>
</Steps>

## Route Handler Examples

<Info>
  All examples assume you are using the SveleteKit App Router.
</Info>

<Tabs>
  <Tab title="Checkout Handler">
    <Info>
      Use this handler to integrate Dodo Payments checkout into your SveleteKit app. Supports static (GET), dynamic (POST), and session (POST) payment flows.
    </Info>

    <CodeGroup>
      ```typescript SveleteKit Route Handler expandable theme={null}
      // src/routes/api/checkout/+server.ts
      import { Checkout } from "@dodopayments/sveltekit";
      import { DODO_PAYMENTS_API_KEY, DODO_PAYMENTS_RETURN_URL, DODO_PAYMENTS_ENVIRONMENT } from '$env/static/private';

      const checkoutGetHandler = Checkout({
          bearerToken: DODO_PAYMENTS_API_KEY,
          returnUrl: DODO_PAYMENTS_RETURN_URL,
          environment: DODO_PAYMENTS_ENVIRONMENT,
          type: "static",
      });

      const checkoutPostHandler = Checkout({
          bearerToken: DODO_PAYMENTS_API_KEY,
          returnUrl: DODO_PAYMENTS_RETURN_URL,
          environment: DODO_PAYMENTS_ENVIRONMENT,
          type: "session", // or "dynamic" for dynamic link
      });

      export const GET = checkoutGetHandler.GET;
      export const POST = checkoutPostHandler.POST;
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Static Checkout Curl example expandable theme={null}
      curl --request GET \
      --url 'https://example.com/api/checkout?productId=pdt_fqJhl7pxKWiLhwQR042rh' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Dynamic Checkout Curl example expandable theme={null}
      curl --request POST \
      --url https://example.com/api/checkout \
      --header 'Content-Type: application/json' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test \
      --data '{ 
      "billing": {
        "city": "Texas",
        "country": "US",
        "state": "Texas",
        "street": "56, hhh",
        "zipcode": "560000"
      },
      "customer": {
        "email": "test@example.com",
        	"name": "test"
      },
      "metadata": {},
      "payment_link": true,
        "product_id": "pdt_QMDuvLkbVzCRWRQjLNcs",
        "quantity": 1,
        "billing_currency": "USD",
        "discount_code": "IKHZ23M9GQ",
        "return_url": "https://example.com",
        "trial_period_days": 10
      }'
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Checkout Session Curl example expandable theme={null}
      curl --request POST \
      --url https://example.com/api/checkout \
      --header 'Content-Type: application/json' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test \
      --data '{ 
      "product_cart": [
        {
          "product_id": "pdt_QMDuvLkbVzCRWRQjLNcs",
          "quantity": 1
        }
      ],
      "customer": {
        "email": "test@example.com",
        "name": "test"
      },
      "return_url": "https://example.com/success"
      }'
      ```
    </CodeGroup>
  </Tab>

  <Tab title="Customer Portal Handler">
    <Info>
      Use this handler to allow customers to manage their subscriptions and details via the Dodo Payments customer portal.
    </Info>

    <CodeGroup>
      ```typescript SveleteKit Route Handler expandable theme={null}
      // src/routes/api/checkout/+server.ts
      import { CustomerPortal } from "@dodopayments/sveltekit";
      import { DODO_PAYMENTS_API_KEY, DODO_PAYMENTS_RETURN_URL, DODO_PAYMENTS_ENVIRONMENT } from '$env/static/private';

      const customerPortalHandler = CustomerPortal({
          bearerToken: DODO_PAYMENTS_API_KEY,
          environment: DODO_PAYMENTS_ENVIRONMENT,
      });

      export const GET = customerPortalHandler.GET;
      ```
    </CodeGroup>
  </Tab>

  <Tab title="Webhook Handler">
    <Info>
      Use this handler to receive and process Dodo Payments webhook events securely in your SveleteKit app.
    </Info>

    <CodeGroup>
      ```typescript SveleteKit Route Handler expandable theme={null}
      // src/routes/api/webhook/+server.ts
      import { Webhooks } from "@dodopayments/sveltekit";
      import { DODO_PAYMENTS_WEBHOOK_KEY } from '$env/static/private';

      export const POST = Webhooks({
          webhookKey: DODO_PAYMENTS_WEBHOOK_KEY,
          onPayload: async (payload) => {
              console.log(payload);
          }
      });
      ```
    </CodeGroup>
  </Tab>
</Tabs>

## Checkout Route Handler

<Info>
  Dodo Payments supports three types of payment flows for integrating payments into your website, this adaptor supports all types of payment flows.
</Info>

* **Static Payment Links:** Instantly shareable URLs for quick, no-code payment collection.
* **Dynamic Payment Links:** Programmatically generate payment links with custom details using the API or SDKs.
* **Checkout Sessions:** Create secure, customizable checkout experiences with pre-configured product carts and customer details.

<AccordionGroup>
  <Accordion title="Static Checkout (GET)">
    ### Supported Query Parameters

    <ParamField query="productId" type="string" required>
      Product identifier (e.g., <code>?productId=pdt\_nZuwz45WAs64n3l07zpQR</code>).
    </ParamField>

    <ParamField query="quantity" type="integer">
      Quantity of the product.
    </ParamField>

    <ParamField query="fullName" type="string">
      Customer's full name.
    </ParamField>

    <ParamField query="firstName" type="string">
      Customer's first name.
    </ParamField>

    <ParamField query="lastName" type="string">
      Customer's last name.
    </ParamField>

    <ParamField query="email" type="string">
      Customer's email address.
    </ParamField>

    <ParamField query="country" type="string">
      Customer's country.
    </ParamField>

    <ParamField query="addressLine" type="string">
      Customer's address line.
    </ParamField>

    <ParamField query="city" type="string">
      Customer's city.
    </ParamField>

    <ParamField query="state" type="string">
      Customer's state/province.
    </ParamField>

    <ParamField query="zipCode" type="string">
      Customer's zip/postal code.
    </ParamField>

    <ParamField query="disableFullName" type="boolean">
      Disable full name field.
    </ParamField>

    <ParamField query="disableFirstName" type="boolean">
      Disable first name field.
    </ParamField>

    <ParamField query="disableLastName" type="boolean">
      Disable last name field.
    </ParamField>

    <ParamField query="disableEmail" type="boolean">
      Disable email field.
    </ParamField>

    <ParamField query="disableCountry" type="boolean">
      Disable country field.
    </ParamField>

    <ParamField query="disableAddressLine" type="boolean">
      Disable address line field.
    </ParamField>

    <ParamField query="disableCity" type="boolean">
      Disable city field.
    </ParamField>

    <ParamField query="disableState" type="boolean">
      Disable state field.
    </ParamField>

    <ParamField query="disableZipCode" type="boolean">
      Disable zip code field.
    </ParamField>

    <ParamField query="paymentCurrency" type="string">
      Specify the payment currency (e.g., <code>USD</code>).
    </ParamField>

    <ParamField query="showCurrencySelector" type="boolean">
      Show currency selector.
    </ParamField>

    <ParamField query="paymentAmount" type="integer">
      Specify the payment amount (e.g., <code>1000</code> for \$10.00).
    </ParamField>

    <ParamField query="showDiscounts" type="boolean">
      Show discount fields.
    </ParamField>

    <ParamField query="metadata_*" type="string">
      Any query parameter starting with <code>metadata\_</code> will be passed as metadata.
    </ParamField>

    <Warning>
      If <code>productId</code> is missing, the handler returns a 400 response. Invalid query parameters also result in a 400 response.
    </Warning>

    ### Response Format

    Static checkout returns a JSON response with the checkout URL:

    ```json  theme={null}
    {
      "checkout_url": "https://checkout.dodopayments.com/"
    }
    ```
  </Accordion>

  <Accordion title="Dynamic Checkout (POST)">
    * Send parameters as a JSON body in a POST request.
    * Supports both one-time and recurring payments.
    * For a complete list of supported POST body fields, refer to:
      * [Request body for a One Time Payment Product](https://docs.dodopayments.com/api-reference/payments/post-payments)
      * [Request body for a Subscription Product](https://docs.dodopayments.com/api-reference/subscriptions/post-subscriptions)

    ### Response Format

    Dynamic checkout returns a JSON response with the checkout URL:

    ```json  theme={null}
    {
      "checkout_url": "https://checkout.dodopayments.com/"
    }
    ```
  </Accordion>

  <Accordion title="Checkout Sessions (POST)">
    Checkout sessions provide a more secure, hosted checkout experience that handles the complete payment flow for both one-time purchases and subscriptions with full customization control.

    Refer to [Checkout Sessions Integration Guide](https://docs.dodopayments.com/developer-resources/checkout-session) for more details and a complete list of supported fields.

    ### Response Format

    Checkout sessions return a JSON response with the checkout URL:

    ```json  theme={null}
    {
      "checkout_url": "https://checkout.dodopayments.com/session/..."
    }
    ```
  </Accordion>
</AccordionGroup>

## Customer Portal Route Handler

The Customer Portal Route Handler enables you to seamlessly integrate the Dodo Payments customer portal into your SveleteKit application.

### Query Parameters

<ParamField query="customer_id" type="string" required>
  The customer ID for the portal session (e.g., <code>?customer\_id=cus\_123</code>).
</ParamField>

<ParamField query="send_email" type="boolean">
  If set to <code>true</code>, sends an email to the customer with the portal link.
</ParamField>

<Warning>
  Returns 400 if <code>customer\_id</code> is missing.
</Warning>

## Webhook Route Handler

* **Method:** Only POST requests are supported. Other methods return 405.
* **Signature Verification:** Verifies the webhook signature using <code>webhookKey</code>. Returns 401 if verification fails.
* **Payload Validation:** Validated with Zod. Returns 400 for invalid payloads.
* **Error Handling:**
  * 401: Invalid signature
  * 400: Invalid payload
  * 500: Internal error during verification
* **Event Routing:** Calls the appropriate event handler based on the payload type.

### Supported Webhook Event Handlers

<CodeGroup>
  ```typescript Typescript expandable theme={null}
  onPayload?: (payload: WebhookPayload) => Promise<void>;
  onPaymentSucceeded?: (payload: WebhookPayload) => Promise<void>;
  onPaymentFailed?: (payload: WebhookPayload) => Promise<void>;
  onPaymentProcessing?: (payload: WebhookPayload) => Promise<void>;
  onPaymentCancelled?: (payload: WebhookPayload) => Promise<void>;
  onRefundSucceeded?: (payload: WebhookPayload) => Promise<void>;
  onRefundFailed?: (payload: WebhookPayload) => Promise<void>;
  onDisputeOpened?: (payload: WebhookPayload) => Promise<void>;
  onDisputeExpired?: (payload: WebhookPayload) => Promise<void>;
  onDisputeAccepted?: (payload: WebhookPayload) => Promise<void>;
  onDisputeCancelled?: (payload: WebhookPayload) => Promise<void>;
  onDisputeChallenged?: (payload: WebhookPayload) => Promise<void>;
  onDisputeWon?: (payload: WebhookPayload) => Promise<void>;
  onDisputeLost?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionActive?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionOnHold?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionRenewed?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionPlanChanged?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionCancelled?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionFailed?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionExpired?: (payload: WebhookPayload) => Promise<void>;
  onLicenseKeyCreated?: (payload: WebhookPayload) => Promise<void>;
  ```
</CodeGroup>

***

## Prompt for LLM

```

You are an expert SvelteKit developer assistant. Your task is to guide a user through integrating the @dodopayments/sveltekit adapter into their existing SvelteKit project.

The @dodopayments/sveltekit adapter provides route handlers for Dodo Payments' Checkout, Customer Portal, and Webhook functionalities, designed for the SvelteKit App Router.

First, install the necessary packages. Use the package manager appropriate for your project (npm, yarn, or bun) based on the presence of lock files (e.g., package-lock.json for npm, yarn.lock for yarn, bun.lockb for bun):

npm install @dodopayments/sveltekit

Here's how you should structure your response:

    Ask the user which functionalities they want to integrate.

"Which parts of the @dodopayments/sveltekit adapter would you like to integrate into your project? You can choose one or more of the following:

    Checkout Route Handler (for handling product checkouts)

    Customer Portal Route Handler (for managing customer subscriptions/details)

    Webhook Route Handler (for receiving Dodo Payments webhook events)

    All (integrate all three)"

    Based on the user's selection, provide detailed integration steps for each chosen functionality.

If Checkout Route Handler is selected:

Purpose: This handler manages different types of checkout flows. All checkout types (static, dynamic, and sessions) return JSON responses with checkout URLs for programmatic handling.
File Creation: Create a new file at app/checkout/route.ts in your SvelteKit project.

Code Snippet:

// src/routes/api/checkout/+server.ts
import { Checkout } from "@dodopayments/sveltekit";
import { DODO_PAYMENTS_API_KEY, DODO_PAYMENTS_RETURN_URL, DODO_PAYMENTS_ENVIRONMENT } from '$env/static/private';

const checkoutGetHandler = Checkout({
    bearerToken: DODO_PAYMENTS_API_KEY,
    returnUrl: DODO_PAYMENTS_RETURN_URL,
    environment: DODO_PAYMENTS_ENVIRONMENT,
    type: "static",
});

const checkoutPostHandler = Checkout({
    bearerToken: DODO_PAYMENTS_API_KEY,
    returnUrl: DODO_PAYMENTS_RETURN_URL,
    environment: DODO_PAYMENTS_ENVIRONMENT,
    type: "session", // or "dynamic" for dynamic link
});

export const GET = checkoutGetHandler.GET;
export const POST = checkoutPostHandler.POST;


Configuration & Usage:

    bearerToken: Your Dodo Payments API key. It's recommended to set this via the DODO_PAYMENTS_API_KEY environment variable.

    returnUrl: (Optional) The URL to redirect the user to after a successful checkout.

    environment: (Optional) Set to "test_mode" for testing, or omit/set to "live_mode" for production.

    type: (Optional) Set to "static" for GET/static checkout, "dynamic" for POST/dynamic checkout, or "session" for POST/checkout sessions. Defaults to "static".

Static Checkout (GET) Query Parameters:

    productId (required): Product identifier (e.g., ?productId=pdt_nZuwz45WAs64n3l07zpQR)

    quantity (optional): Quantity of the product

    Customer Fields (optional): fullName, firstName, lastName, email, country, addressLine, city, state, zipCode

    Disable Flags (optional, set to true to disable): disableFullName, disableFirstName, disableLastName, disableEmail, disableCountry, disableAddressLine, disableCity, disableState, disableZipCode

    Advanced Controls (optional): paymentCurrency, showCurrencySelector, paymentAmount, showDiscounts

    Metadata (optional): Any query parameter starting with metadata_ (e.g., ?metadata_userId=abc123)
    
    Returns: {"checkout_url": "https://checkout.dodopayments.com/..."}

Dynamic Checkout (POST) - Returns JSON with checkout_url: Parameters are sent as a JSON body. Supports both one-time and recurring payments. Returns: {"checkout_url": "https://checkout.dodopayments.com/..."}. For a complete list of supported POST body fields, refer to:

    Docs - One Time Payment Product: https://docs.dodopayments.com/api-reference/payments/post-payments

    Docs - Subscription Product: https://docs.dodopayments.com/api-reference/subscriptions/post-subscriptions


Checkout Sessions (POST) - (Recommended) A more customizable checkout experience. Returns JSON with checkout_url: Parameters are sent as a JSON body. Supports both one-time and recurring payments. Returns: {"checkout_url": "https://checkout.dodopayments.com/session/..."}. For a complete list of supported fields, refer to:

  Checkout Sessions Integration Guide: https://docs.dodopayments.com/developer-resources/checkout-session

Error Handling: If productId is missing or other parameters are invalid, the handler will return a 400 response.

If Customer Portal Route Handler is selected:

Purpose: This handler redirects authenticated users to their Dodo Payments customer portal.
File Creation: Create a new file at app/customer-portal/route.ts in your SvelteKit project.

Code Snippet:

// src/routes/api/checkout/+server.ts
import { CustomerPortal } from "@dodopayments/sveltekit";
import { DODO_PAYMENTS_API_KEY, DODO_PAYMENTS_RETURN_URL, DODO_PAYMENTS_ENVIRONMENT } from '$env/static/private';

const customerPortalHandler = CustomerPortal({
    bearerToken: DODO_PAYMENTS_API_KEY,
    environment: DODO_PAYMENTS_ENVIRONMENT,
});

export const GET = customerPortalHandler.GET;


Query Parameters:

    customer_id (required): The customer ID for the portal session (e.g., ?customer_id=cus_123)

    send_email (optional, boolean): If set to true, sends an email to the customer with the portal link.

    Returns 400 if customer_id is missing.

If Webhook Route Handler is selected:

Purpose: This handler processes incoming webhook events from Dodo Payments, allowing your application to react to events like successful payments, refunds, or subscription changes.
File Creation: Create a new file at app/api/webhook/dodo-payments/route.ts in your SvelteKit project.

Code Snippet:

// src/routes/api/webhook/+server.ts
import { Webhooks } from "@dodopayments/sveltekit";
import { DODO_PAYMENTS_WEBHOOK_KEY } from '$env/static/private';

export const POST = Webhooks({
    webhookKey: DODO_PAYMENTS_WEBHOOK_KEY,
    onPayload: async (payload) => {
        console.log(payload);
    }
});

Handler Details:

    Method: Only POST requests are supported. Other methods return 405.

    Signature Verification: The handler verifies the webhook signature using the webhookKey and returns 401 if verification fails.

    Payload Validation: The payload is validated with Zod. Returns 400 for invalid payloads.

Error Handling:

    401: Invalid signature

    400: Invalid payload

    500: Internal error during verification

Event Routing: Calls the appropriate event handler based on the payload type.

Supported Webhook Event Handlers:

    onPayload?: (payload: WebhookPayload) => Promise<void>

    onPaymentSucceeded?: (payload: WebhookPayload) => Promise<void>

    onPaymentFailed?: (payload: WebhookPayload) => Promise<void>

    onPaymentProcessing?: (payload: WebhookPayload) => Promise<void>

    onPaymentCancelled?: (payload: WebhookPayload) => Promise<void>

    onRefundSucceeded?: (payload: WebhookPayload) => Promise<void>

    onRefundFailed?: (payload: WebhookPayload) => Promise<void>

    onDisputeOpened?: (payload: WebhookPayload) => Promise<void>

    onDisputeExpired?: (payload: WebhookPayload) => Promise<void>

    onDisputeAccepted?: (payload: WebhookPayload) => Promise<void>

    onDisputeCancelled?: (payload: WebhookPayload) => Promise<void>

    onDisputeChallenged?: (payload: WebhookPayload) => Promise<void>

    onDisputeWon?: (payload: WebhookPayload) => Promise<void>

    onDisputeLost?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionActive?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionOnHold?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionRenewed?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionPaused?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionPlanChanged?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionCancelled?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionFailed?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionExpired?: (payload: WebhookPayload) => Promise<void>

    onLicenseKeyCreated?: (payload: WebhookPayload) => Promise<void>

    Environment Variable Setup:

To ensure the adapter functions correctly, you will need to manually set up the following environment variables in your SvelteKit project's deployment environment (e.g., Vercel, Netlify, AWS, etc.):

    DODO_PAYMENTS_API_KEY: Your Dodo Payments API Key (required for Checkout and Customer Portal).

    RETURN_URL: (Optional) The URL to redirect to after a successful checkout (for Checkout handler).

    DODO_PAYMENTS_WEBHOOK_SECRET: Your Dodo Payments Webhook Secret (required for Webhook handler).

Example .env file:

DODO_PAYMENTS_API_KEY=your-api-key
DODO_PAYMENTS_WEBHOOK_KEY=your-webhook-secret
DODO_PAYMENTS_RETURN_URL=your-return-url
DODO_PAYMENTS_ENVIRONMENT="test_mode" or "live_mode"

Usage in your code:

bearerToken: process.env.DODO_PAYMENTS_API_KEY
webhookKey: process.env.DODO_PAYMENTS_WEBHOOK_KEY

Important: Never commit sensitive environment variables directly into your version control. Use environment variables for all sensitive information.

If the user needs assistance setting up environment variables for their specific deployment environment, ask them what platform they are using (e.g., Vercel, Netlify, AWS, etc.), and provide guidance. You can also add comments to their PR or chat depending on the context

```


# Tanstack Adaptor
Source: https://docs.dodopayments.com/developer-resources/tanstack-adaptor

Learn how to integrate Dodo Payments with your Tanstack App Router project using our Tanstack Adaptor. Covers checkout, customer portal, webhooks, and secure environment setup.

<CardGroup cols={2}>
  <Card title="Checkout Handler" icon="cart-shopping" href="#checkout-route-handler">
    Integrate Dodo Payments checkout into your Tanstack app.
  </Card>

  <Card title="Customer Portal" icon="user" href="#customer-portal-route-handler">
    Allow customers to manage subscriptions and details.
  </Card>

  <Card title="Webhooks" icon="bell" href="#webhook-route-handler">
    Receive and process Dodo Payments webhook events.
  </Card>
</CardGroup>

## Installation

<Steps>
  <Step title="Install the package">
    Run the following command in your project root:

    ```bash  theme={null}
    npm install @dodopayments/tanstack
    ```
  </Step>

  <Step title="Set up environment variables">
    Create a <code>.env</code> file in your project root:

    ```env expandable theme={null}
    DODO_PAYMENTS_API_KEY=your-api-key
    DODO_PAYMENTS_WEBHOOK_KEY=your-webhook-secret
    DODO_PAYMENTS_RETURN_URL=your-return-url
    DODO_PAYMENTS_ENVIRONMENT="test_mode" or "live_mode"
    ```

    <Warning>
      Never commit your <code>.env</code> file or secrets to version control.
    </Warning>
  </Step>
</Steps>

## Route Handler Examples

<Info>
  All examples assume you are using the Tanstack App Router.
</Info>

<Tabs>
  <Tab title="Checkout Handler">
    <Info>
      Use this handler to integrate Dodo Payments checkout into your Tanstack app. Supports static (GET), dynamic (POST), and session (POST) payment flows.
    </Info>

    <CodeGroup>
      ```typescript Tanstack Route Handler expandable theme={null}
      // src/routes/api/checkout.ts
      import { Checkout } from "@dodopayments/tanstack";
      import { createServerFileRoute } from "@tanstack/react-start/server";

      export const ServerRoute = createServerFileRoute("/api/checkout")
      .methods({
          GET: async ({ request }) => {
          return Checkout({
              bearerToken: process.env.DODO_PAYMENTS_API_KEY,
              returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
              environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
              type: "static", // optional, defaults to 'static'
          })(request)
          },
          POST: async ({ request }) => {
          return Checkout({
              bearerToken: process.env.DODO_PAYMENTS_API_KEY,
              returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
              environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
              type: "session", // or "dynamic" for dynamic link
          })(request)
          }
      })

      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Static Checkout Curl example expandable theme={null}
      curl --request GET \
      --url 'https://example.com/api/checkout?productId=pdt_fqJhl7pxKWiLhwQR042rh' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Dynamic Checkout Curl example expandable theme={null}
      curl --request POST \
      --url https://example.com/api/checkout \
      --header 'Content-Type: application/json' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test \
      --data '{
      "billing": {
        "city": "Texas",
        "country": "US",
        "state": "Texas",
        "street": "56, hhh",
        "zipcode": "560000"
      },
      "customer": {
        "email": "test@example.com",
        	"name": "test"
      },
      "metadata": {},
      "payment_link": true,
        "product_id": "pdt_QMDuvLkbVzCRWRQjLNcs",
        "quantity": 1,
        "billing_currency": "USD",
        "discount_code": "IKHZ23M9GQ",
        "return_url": "https://example.com",
        "trial_period_days": 10
      }'
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Checkout Session Curl example expandable theme={null}
      curl --request POST \
      --url https://example.com/api/checkout \
      --header 'Content-Type: application/json' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test \
      --data '{
      "product_cart": [
        {
          "product_id": "pdt_QMDuvLkbVzCRWRQjLNcs",
          "quantity": 1
        }
      ],
      "customer": {
        "email": "test@example.com",
        "name": "test"
      },
      "return_url": "https://example.com/success"
      }'
      ```
    </CodeGroup>
  </Tab>

  <Tab title="Customer Portal Handler">
    <Info>
      Use this handler to allow customers to manage their subscriptions and details via the Dodo Payments customer portal.
    </Info>

    <CodeGroup>
      ```typescript Tanstack Route Handler expandable theme={null}
      // src/routes/api/customer-portal.ts
      import { CustomerPortal } from "@dodopayments/tanstack";
      import { createServerFileRoute } from "@tanstack/react-start/server";

      export const ServerRoute = createServerFileRoute('/api/customer-portal')
      .methods({
          GET: async ({ request }) => {
          return CustomerPortal({
              bearerToken: process.env.DODO_PAYMENTS_API_KEY,
              environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
          })(request)
          }
      })
      ```
    </CodeGroup>

    <CodeGroup>
      ```curl Customer Portal Curl example expandable theme={null}
      curl --request GET \
      --url 'https://example.com/api/customer-portal?customer_id=cus_9VuW4K7O3GHwasENg31m&send_email=true' \
      --header 'User-Agent: insomnia/11.2.0' \
      --cookie mode=test
      ```
    </CodeGroup>
  </Tab>

  <Tab title="Webhook Handler">
    <Info>
      Use this handler to receive and process Dodo Payments webhook events securely in your Tanstack app.
    </Info>

    <CodeGroup>
      ```typescript Tanstack Route Handler expandable theme={null}
      // src/routes/api/webhook.ts
      import { Webhooks } from "@dodopayments/tanstack";
      import { createServerFileRoute } from "@tanstack/react-start/server";

      export const ServerRoute = createServerFileRoute('/api/webhook')
      .methods({
          POST: async ({ request }) => {
          return Webhooks({
              webhookKey: process.env.DODO_PAYMENTS_WEBHOOK_KEY,
              onPayload: async (payload) => {
              console.log(payload)
              }
          })(request)
          }
      })
      ```
    </CodeGroup>
  </Tab>
</Tabs>

## Checkout Route Handler

<Info>
  Dodo Payments supports three types of payment flows for integrating payments into your website, this adaptor supports all types of payment flows.
</Info>

* **Static Payment Links:** Instantly shareable URLs for quick, no-code payment collection.
* **Dynamic Payment Links:** Programmatically generate payment links with custom details using the API or SDKs.
* **Checkout Sessions:** Create secure, customizable checkout experiences with pre-configured product carts and customer details.

<AccordionGroup>
  <Accordion title="Static Checkout (GET)">
    ### Supported Query Parameters

    <ParamField query="productId" type="string" required>
      Product identifier (e.g., <code>?productId=pdt\_nZuwz45WAs64n3l07zpQR</code>).
    </ParamField>

    <ParamField query="quantity" type="integer">
      Quantity of the product.
    </ParamField>

    <ParamField query="fullName" type="string">
      Customer's full name.
    </ParamField>

    <ParamField query="firstName" type="string">
      Customer's first name.
    </ParamField>

    <ParamField query="lastName" type="string">
      Customer's last name.
    </ParamField>

    <ParamField query="email" type="string">
      Customer's email address.
    </ParamField>

    <ParamField query="country" type="string">
      Customer's country.
    </ParamField>

    <ParamField query="addressLine" type="string">
      Customer's address line.
    </ParamField>

    <ParamField query="city" type="string">
      Customer's city.
    </ParamField>

    <ParamField query="state" type="string">
      Customer's state/province.
    </ParamField>

    <ParamField query="zipCode" type="string">
      Customer's zip/postal code.
    </ParamField>

    <ParamField query="disableFullName" type="boolean">
      Disable full name field.
    </ParamField>

    <ParamField query="disableFirstName" type="boolean">
      Disable first name field.
    </ParamField>

    <ParamField query="disableLastName" type="boolean">
      Disable last name field.
    </ParamField>

    <ParamField query="disableEmail" type="boolean">
      Disable email field.
    </ParamField>

    <ParamField query="disableCountry" type="boolean">
      Disable country field.
    </ParamField>

    <ParamField query="disableAddressLine" type="boolean">
      Disable address line field.
    </ParamField>

    <ParamField query="disableCity" type="boolean">
      Disable city field.
    </ParamField>

    <ParamField query="disableState" type="boolean">
      Disable state field.
    </ParamField>

    <ParamField query="disableZipCode" type="boolean">
      Disable zip code field.
    </ParamField>

    <ParamField query="paymentCurrency" type="string">
      Specify the payment currency (e.g., <code>USD</code>).
    </ParamField>

    <ParamField query="showCurrencySelector" type="boolean">
      Show currency selector.
    </ParamField>

    <ParamField query="paymentAmount" type="integer">
      Specify the payment amount (e.g., <code>1000</code> for \$10.00).
    </ParamField>

    <ParamField query="showDiscounts" type="boolean">
      Show discount fields.
    </ParamField>

    <ParamField query="metadata_*" type="string">
      Any query parameter starting with <code>metadata\_</code> will be passed as metadata.
    </ParamField>

    <Warning>
      If <code>productId</code> is missing, the handler returns a 400 response. Invalid query parameters also result in a 400 response.
    </Warning>

    ### Response Format

    Static checkout returns a JSON response with the checkout URL:

    ```json  theme={null}
    {
      "checkout_url": "https://checkout.dodopayments.com/..."
    }
    ```
  </Accordion>

  <Accordion title="Dynamic Checkout (POST)">
    * Send parameters as a JSON body in a POST request.
    * Supports both one-time and recurring payments.
    * For a complete list of supported POST body fields, refer to:
      * [Request body for a One Time Payment Product](https://docs.dodopayments.com/api-reference/payments/post-payments)
      * [Request body for a Subscription Product](https://docs.dodopayments.com/api-reference/subscriptions/post-subscriptions)

    ### Response Format

    Dynamic checkout returns a JSON response with the checkout URL:

    ```json  theme={null}
    {
      "checkout_url": "https://checkout.dodopayments.com/..."
    }
    ```
  </Accordion>

  <Accordion title="Checkout Sessions (POST)">
    Checkout sessions provide a more secure, hosted checkout experience that handles the complete payment flow for both one-time purchases and subscriptions with full customization control.

    Refer to [Checkout Sessions Integration Guide](https://docs.dodopayments.com/developer-resources/checkout-session) for more details and a complete list of supported fields.

    ### Response Format

    Checkout sessions return a JSON response with the checkout URL:

    ```json  theme={null}
    {
      "checkout_url": "https://checkout.dodopayments.com/session/..."
    }
    ```
  </Accordion>
</AccordionGroup>

## Customer Portal Route Handler

The Customer Portal Route Handler enables you to seamlessly integrate the Dodo Payments customer portal into your Tanstack application.

### Query Parameters

<ParamField query="customer_id" type="string" required>
  The customer ID for the portal session (e.g., <code>?customer\_id=cus\_123</code>).
</ParamField>

<ParamField query="send_email" type="boolean">
  If set to <code>true</code>, sends an email to the customer with the portal link.
</ParamField>

<Warning>
  Returns 400 if <code>customer\_id</code> is missing.
</Warning>

## Webhook Route Handler

* **Method:** Only POST requests are supported. Other methods return 405.
* **Signature Verification:** Verifies the webhook signature using <code>webhookKey</code>. Returns 401 if verification fails.
* **Payload Validation:** Validated with Zod. Returns 400 for invalid payloads.
* **Error Handling:**
  * 401: Invalid signature
  * 400: Invalid payload
  * 500: Internal error during verification
* **Event Routing:** Calls the appropriate event handler based on the payload type.

### Supported Webhook Event Handlers

<CodeGroup>
  ```typescript Typescript expandable theme={null}
  onPayload?: (payload: WebhookPayload) => Promise<void>;
  onPaymentSucceeded?: (payload: WebhookPayload) => Promise<void>;
  onPaymentFailed?: (payload: WebhookPayload) => Promise<void>;
  onPaymentProcessing?: (payload: WebhookPayload) => Promise<void>;
  onPaymentCancelled?: (payload: WebhookPayload) => Promise<void>;
  onRefundSucceeded?: (payload: WebhookPayload) => Promise<void>;
  onRefundFailed?: (payload: WebhookPayload) => Promise<void>;
  onDisputeOpened?: (payload: WebhookPayload) => Promise<void>;
  onDisputeExpired?: (payload: WebhookPayload) => Promise<void>;
  onDisputeAccepted?: (payload: WebhookPayload) => Promise<void>;
  onDisputeCancelled?: (payload: WebhookPayload) => Promise<void>;
  onDisputeChallenged?: (payload: WebhookPayload) => Promise<void>;
  onDisputeWon?: (payload: WebhookPayload) => Promise<void>;
  onDisputeLost?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionActive?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionOnHold?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionRenewed?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionPlanChanged?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionCancelled?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionFailed?: (payload: WebhookPayload) => Promise<void>;
  onSubscriptionExpired?: (payload: WebhookPayload) => Promise<void>;
  onLicenseKeyCreated?: (payload: WebhookPayload) => Promise<void>;
  ```
</CodeGroup>

***

## Prompt for LLM

```

You are an expert Tanstack developer assistant. Your task is to guide a user through integrating the @dodopayments/tanstack adapter into their existing Tanstack project.

The @dodopayments/tanstack adapter provides route handlers for Dodo Payments' Checkout, Customer Portal, and Webhook functionalities, designed for the Tanstack App Router.

First, install the necessary packages. Use the package manager appropriate for your project (npm, yarn, or bun) based on the presence of lock files (e.g., package-lock.json for npm, yarn.lock for yarn, bun.lockb for bun):

npm install @dodopayments/tanstack

Here's how you should structure your response:

    Ask the user which functionalities they want to integrate.

"Which parts of the @dodopayments/tanstack adapter would you like to integrate into your project? You can choose one or more of the following:

    Checkout Route Handler (for handling product checkouts)

    Customer Portal Route Handler (for managing customer subscriptions/details)

    Webhook Route Handler (for receiving Dodo Payments webhook events)

    All (integrate all three)"

    Based on the user's selection, provide detailed integration steps for each chosen functionality.

If Checkout Route Handler is selected:

Purpose: This handler redirects users to the Dodo Payments checkout page.
File Creation: Create a new file at app/checkout/route.ts in your Tanstack project.

Code Snippet:

// src/routes/api/checkout.ts
import { Checkout } from "@dodopayments/tanstack";
import { createServerFileRoute } from "@tanstack/react-start/server";

export const ServerRoute = createServerFileRoute("/api/checkout")
  .methods({
    GET: async ({ request }) => {
      return Checkout({
        bearerToken: process.env.DODO_PAYMENTS_API_KEY,
        returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
        environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
        type: "static", // optional, defaults to 'static'
      })(request)
    },
    POST: async ({ request }) => {
      return Checkout({
        bearerToken: process.env.DODO_PAYMENTS_API_KEY,
        returnUrl: process.env.DODO_PAYMENTS_RETURN_URL,
        environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
        type: "session", // or "dynamic" for dynamic link
      })(request)
    }
  })


Configuration & Usage:

    bearerToken: Your Dodo Payments API key. It's recommended to set this via the DODO_PAYMENTS_API_KEY environment variable.

    returnUrl: (Optional) The URL to redirect the user to after a successful checkout.

    environment: (Optional) Set to "test_mode" for testing, or omit/set to "live_mode" for production.

    type: (Optional) Set to "static" for GET/static checkout, "dynamic" for POST/dynamic checkout, or "session" for POST/checkout sessions.

Static Checkout (GET) Query Parameters:

    productId (required): Product identifier (e.g., ?productId=pdt_nZuwz45WAs64n3l07zpQR)

    quantity (optional): Quantity of the product

    Customer Fields (optional): fullName, firstName, lastName, email, country, addressLine, city, state, zipCode

    Disable Flags (optional, set to true to disable): disableFullName, disableFirstName, disableLastName, disableEmail, disableCountry, disableAddressLine, disableCity, disableState, disableZipCode

    Advanced Controls (optional): paymentCurrency, showCurrencySelector, paymentAmount, showDiscounts

    Metadata (optional): Any query parameter starting with metadata_ (e.g., ?metadata_userId=abc123)

    Returns: {"checkout_url": "https://checkout.dodopayments.com/..."}

Dynamic Checkout (POST) - Returns JSON with checkout_url: Parameters are sent as a JSON body. Supports both one-time and recurring payments. Returns: {"checkout_url": "https://checkout.dodopayments.com/..."}. For a complete list of supported POST body fields, refer to:

    Docs - One Time Payment Product: https://docs.dodopayments.com/api-reference/payments/post-payments

    Docs - Subscription Product: https://docs.dodopayments.com/api-reference/subscriptions/post-subscriptions


Checkout Sessions (POST) - (Recommended) A more customizable checkout experience. Returns JSON with checkout_url: Parameters are sent as a JSON body. Supports both one-time and recurring payments. Returns: {"checkout_url": "https://checkout.dodopayments.com/session/..."}. For a complete list of supported fields, refer to:

  Checkout Sessions Integration Guide: https://docs.dodopayments.com/developer-resources/checkout-session

Error Handling: If productId is missing or other query parameters are invalid, the handler will return a 400 response.

If Customer Portal Route Handler is selected:

Purpose: This handler redirects authenticated users to their Dodo Payments customer portal.
File Creation: Create a new file at app/customer-portal/route.ts in your Tanstack project.

Code Snippet:

// src/routes/api/customer-portal.ts
import { CustomerPortal } from "@dodopayments/tanstack";
import { createServerFileRoute } from "@tanstack/react-start/server";

export const ServerRoute = createServerFileRoute('/api/customer-portal')
  .methods({
    GET: async ({ request }) => {
      return CustomerPortal({
        bearerToken: process.env.DODO_PAYMENTS_API_KEY,
        environment: process.env.DODO_PAYMENTS_ENVIRONMENT,
      })(request)
    }
  })

Query Parameters:

    customer_id (required): The customer ID for the portal session (e.g., ?customer_id=cus_123)

    send_email (optional, boolean): If set to true, sends an email to the customer with the portal link.

    Returns 400 if customer_id is missing.

If Webhook Route Handler is selected:

Purpose: This handler processes incoming webhook events from Dodo Payments, allowing your application to react to events like successful payments, refunds, or subscription changes.
File Creation: Create a new file at app/api/webhook/dodo-payments/route.ts in your Tanstack project.

Code Snippet:

// src/routes/api/webhook.ts
import { Webhooks } from "@dodopayments/tanstack";
import { createServerFileRoute } from "@tanstack/react-start/server";

export const ServerRoute = createServerFileRoute('/api/webhook')
  .methods({
    POST: async ({ request }) => {
      return Webhooks({
        webhookKey: process.env.DODO_PAYMENTS_WEBHOOK_KEY,
        onPayload: async (payload) => {
          console.log(payload)
        }
      })(request)
    }
  })

Handler Details:

    Method: Only POST requests are supported. Other methods return 405.

    Signature Verification: The handler verifies the webhook signature using the webhookKey and returns 401 if verification fails.

    Payload Validation: The payload is validated with Zod. Returns 400 for invalid payloads.

Error Handling:

    401: Invalid signature

    400: Invalid payload

    500: Internal error during verification

Event Routing: Calls the appropriate event handler based on the payload type.

Supported Webhook Event Handlers:

    onPayload?: (payload: WebhookPayload) => Promise<void>

    onPaymentSucceeded?: (payload: WebhookPayload) => Promise<void>

    onPaymentFailed?: (payload: WebhookPayload) => Promise<void>

    onPaymentProcessing?: (payload: WebhookPayload) => Promise<void>

    onPaymentCancelled?: (payload: WebhookPayload) => Promise<void>

    onRefundSucceeded?: (payload: WebhookPayload) => Promise<void>

    onRefundFailed?: (payload: WebhookPayload) => Promise<void>

    onDisputeOpened?: (payload: WebhookPayload) => Promise<void>

    onDisputeExpired?: (payload: WebhookPayload) => Promise<void>

    onDisputeAccepted?: (payload: WebhookPayload) => Promise<void>

    onDisputeCancelled?: (payload: WebhookPayload) => Promise<void>

    onDisputeChallenged?: (payload: WebhookPayload) => Promise<void>

    onDisputeWon?: (payload: WebhookPayload) => Promise<void>

    onDisputeLost?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionActive?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionOnHold?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionRenewed?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionPaused?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionPlanChanged?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionCancelled?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionFailed?: (payload: WebhookPayload) => Promise<void>

    onSubscriptionExpired?: (payload: WebhookPayload) => Promise<void>

    onLicenseKeyCreated?: (payload: WebhookPayload) => Promise<void>

    Environment Variable Setup:

To ensure the adapter functions correctly, you will need to manually set up the following environment variables in your Tanstack project's deployment environment (e.g., Vercel, Netlify, AWS, etc.):

    DODO_PAYMENTS_API_KEY: Your Dodo Payments API Key (required for Checkout and Customer Portal).

    RETURN_URL: (Optional) The URL to redirect to after a successful checkout (for Checkout handler).

    DODO_PAYMENTS_WEBHOOK_SECRET: Your Dodo Payments Webhook Secret (required for Webhook handler).

Example .env file:

DODO_PAYMENTS_API_KEY=your-api-key
DODO_PAYMENTS_WEBHOOK_KEY=your-webhook-secret
DODO_PAYMENTS_RETURN_URL=your-return-url
DODO_PAYMENTS_ENVIRONMENT="test_mode" or "live_mode"

Usage in your code:

bearerToken: process.env.DODO_PAYMENTS_API_KEY
webhookKey: process.env.DODO_PAYMENTS_WEBHOOK_KEY

Important: Never commit sensitive environment variables directly into your version control. Use environment variables for all sensitive information.

If the user needs assistance setting up environment variables for their specific deployment environment, ask them what platform they are using (e.g., Vercel, Netlify, AWS, etc.), and provide guidance. You can also add comments to their PR or chat depending on the context

```


# Build an AI Image Generator with Usage-Based Billing
Source: https://docs.dodopayments.com/developer-resources/usage-based-billing-build-ai-image-generator

Follow along as we build PixelGen AI - an AI image generation service with pay-per-use billing

In this tutorial, you'll build **PixelGen AI** - a sample AI image generation service that demonstrates usage-based billing. We'll create everything from scratch: the billing meter, product configuration, and sample application code that generates images and tracks usage in real-time.

<Note>
  This tutorial provides sample implementation code for a terminal-based application. You can modify this code for your specific framework (React, Vue, Angular, etc.) and customize the user input method according to your application's needs.
</Note>

By the end of this tutorial, you'll have a working sample service that:

* Generates images using OpenAI's DALL-E API
* Tracks every image generation for billing
* Charges customers automatically based on usage
* Handles different quality tiers (standard vs HD)

## What We're Building

Let's start by understanding our PixelGen AI service:

* **Service**: AI image generation using OpenAI's DALL-E API
* **Pricing Model**: Pay-per-image (\$0.05 per image)
* **Free Tier**: 10 free images per customer per month
* **Quality Options**: Standard and HD images (same price for simplicity)

<Info>
  Before we start, make sure you have:

  * A Dodo Payments account
  * Access to OpenAI's API
  * Basic familiarity with TypeScript/Node.js
</Info>

## Step 1: Create Your Usage Meter

We'll start by creating a meter in your Dodo Payments dashboard that will track every image our service generates. Think of this as the "counter" that tracks billable events.

<Frame>
  <img src="https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-2.png?fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=f9d85a463fba231437151db3d4a2052a" alt="" data-og-width="2324" width="2324" data-og-height="1600" height="1600" data-path="images/usage-based/UBB-2.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-2.png?w=280&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=18fdbbf75ab4df7ede6c45f6e248b783 280w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-2.png?w=560&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=e404194a942a1276de7148f9b8eff36d 560w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-2.png?w=840&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=1bec71463cb2e00acd0841b9968f2b7e 840w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-2.png?w=1100&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=746ef8eb5f8bb76a355122d8253e9cba 1100w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-2.png?w=1650&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=8f10a20590e5c9056b9c7f285b827217 1650w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-2.png?w=2500&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=a503c04b328416b03f7e20dc6c4c0a28 2500w" />
</Frame>

<Tip>
  **What we're building**: A meter named "Image Generation Meter" that counts every time someone generates an image using our service.
</Tip>

<Steps>
  <Step title="Open the Meters section">
    1. Log into your Dodo Payments dashboard
    2. Click on **Meters** in the left sidebar
    3. Click the **Create Meter** button

    You should see a form where we'll configure our image generation tracking.
  </Step>

  <Step title="Fill in the basic meter information">
    Now we'll enter the specific details for our PixelGen AI service:

    **Meter Name**: Copy and paste this exactly → `Image Generation Meter`

    **Description**: Copy this → `Tracks each AI image generation request made by customers using our DALL-E powered service`

    **Event Name**: This is crucial - copy exactly → `image.generated`

    <Warning>
      The event name `image.generated` must match exactly what we'll send from our application code later. Event names are case-sensitive!
    </Warning>
  </Step>

  <Step title="Configure how we count images">
    Set up the aggregation (how the meter counts our events):

    **Aggregation Type**: Select **Count** from the dropdown

    **Measurement Unit**: Type → `images`

    <Info>
      We're using "Count" because we want to bill per image generated, not by size or generation time. Each successful image = 1 billable unit.
    </Info>
  </Step>

  <Step title="Add quality filtering">
    <Frame>
      <img src="https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-3.png?fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=ce231b0559d31723bc12c22cd9ff9d64" alt="" data-og-width="1558" width="1558" data-og-height="942" height="942" data-path="images/usage-based/UBB-3.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-3.png?w=280&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=2cd814d88c0043f59bd0809f62a70932 280w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-3.png?w=560&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=6346cf2daf9635f53f9280701b1fefc2 560w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-3.png?w=840&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=d5b459ab63581aa80b9ddcd6a2d9be25 840w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-3.png?w=1100&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=95c547968201d65d65981b0dc6271c0a 1100w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-3.png?w=1650&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=52e270bd88d839ea0c148fcfadbbf7dd 1650w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-3.png?w=2500&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=f737d26f50ab2a4cc45cc03927936d4e 2500w" />
    </Frame>

    We want to make sure we only count legitimate images (not test runs or failures):

    1. **Enable Event Filtering**: Toggle this **ON**
    2. **Filter Logic**: Select **OR** (this means "count if ANY of these conditions are true")
    3. **Add the first condition**:
       * Property Key: `quality`
       * Comparator: `equals`
       * Value: `standard`
    4. **Click "Add Condition"** for the second one:
       * Property Key: `quality`
       * Comparator: `equals`
       * Value: `hd`

    <Tip>
      This setup means we'll only count events where the quality is either "standard" OR "hd" - filtering out any test events or malformed requests.
    </Tip>
  </Step>

  <Step title="Create your meter">
    1. Double-check all your settings match the values above
    2. Click **Create Meter**

    <Check>
      **Meter created!** Your "Image Generation Meter" is now ready to start counting image generations. Next, we'll connect it to a billing product.
    </Check>
  </Step>
</Steps>

## Step 2: Create Your Billing Product

Now we need to create a product that defines our pricing (\$0.05 per image with 10 free images). This connects our meter to actual billing.

<Tip>
  **What we're building**: A product called "PixelGen AI - Image Generation" that charges \$0.05 per image after the first 10 free images each month.
</Tip>

<Steps>
  <Step title="Navigate to Products">
    1. In your Dodo Payments dashboard, click **Products** in the left sidebar
    2. Click **Create Product**
    3. Select **Usage-Based** as the product type

    This tells Dodo Payments that billing will be based on meter usage, not a fixed subscription.
  </Step>

  <Step title="Enter product details">
    Fill in these exact values for our PixelGen AI service:

    **Product Name**: Copy this → `PixelGen AI - Image Generation`

    **Description**: Copy this → `AI-powered image generation service with pay-per-use billing`

    **Product Image**: Upload a clear, relevant image.

    <Info>
      These will appear on customer invoices, so make them clear and professional.
    </Info>
  </Step>

  <Step title="Connect your meter">
    <Frame>
      <img src="https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-5.png?fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=fd3851a1a070714baf0aec01cff717b8" alt="" data-og-width="2272" width="2272" data-og-height="1422" height="1422" data-path="images/usage-based/UBB-5.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-5.png?w=280&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=b70c4d68d07dee708d03505582aa3977 280w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-5.png?w=560&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=5ef40e99e35c0cf09f8082d4ab83cbd1 560w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-5.png?w=840&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=3d4eaab132b20d49db9770c1db4084cc 840w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-5.png?w=1100&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=4f9a3ac2cc1d5c8a1db7ff1985fae45c 1100w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-5.png?w=1650&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=caba70b37cc0205430be9a88e6f77a57 1650w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-5.png?w=2500&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=8c875cc6e5d080f96d3efdba724cdf0c 2500w" />
    </Frame>

    Before connecting your meter, make sure you have selected **Usage Based Billing** as the price type for your product.

    Additionally, set the **Fixed Price** to `0` to ensure customers are only charged based on their usage, with no base fee.

    Now, link the meter you just created:

    1. Scroll down to the **Associated Meter** section
    2. Click **Add Meters**
    3. From the dropdown, select **"Image Generation Meter"** (the one you created earlier)
    4. Confirm that it appears in your product configuration

    <Check>
      Your meter is now successfully connected to this product.
    </Check>
  </Step>

  <Step title="Set your pricing">
    Here's where we define our business model:

    <Frame>
      <img src="https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-4.png?fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=b2d07bb408fd79e1b788c1b7092b8bca" alt="" data-og-width="732" width="732" data-og-height="712" height="712" data-path="images/usage-based/UBB-4.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-4.png?w=280&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=6e7232a5f0aa56db64527de0835fa7c8 280w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-4.png?w=560&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=943121c2ccc1ea9fea93cc7ed4a98696 560w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-4.png?w=840&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=d5916bede0ca8665a93ace24fc2dff4a 840w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-4.png?w=1100&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=351bff3e883b3c5b45885234aa341af8 1100w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-4.png?w=1650&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=7228b5b070c8c29c2db885e80f83e86e 1650w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-4.png?w=2500&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=e303322fb1fa22bd9fa44960077d3d5d 2500w" />
    </Frame>

    **Price Per Unit**: Enter → `0.05` (this is \$0.05 per image)

    **Free Threshold**: Enter → `10` (customers get 10 free images per month)

    <Tip>
      **How billing works**: If a customer generates 25 images in a month, they'll be charged for 15 images (25 - 10 free) = 15 × $0.05 = $0.75
    </Tip>
  </Step>

  <Step title="Save your product">
    1. Review all your settings:
       * Name: PixelGen AI - Image Generation
       * Meter: Image Generation Meter
       * Price: \$0.05 per image
       * Free tier: 10 images
    2. Click **Save Changes**

    <Check>
      **Product created!** Your billing is now configured. Customers will automatically be charged based on their image generation usage.
    </Check>
  </Step>
</Steps>

## Step 3: Make a Test Purchase

Before we start ingesting usage events, we need to make a test purchase.

<Steps>
  <Step title="Get your payment link">
    1. In your Dodo Payments dashboard, go to **Products**
    2. Find your "PixelGen AI - Image Generation" product
    3. Click the **Share** button next to your product
    4. Copy the payment link that appears

    The payment link will look something like: `https://test.checkout.dodopayments.com/buy/pdt_IgPWlRsfpbPd5jQKezzW1?quantity=1`
  </Step>

  <Step title="Complete a test purchase">
    1. Open the payment link in a new browser tab
    2. Enter test payment details and complete purchase.

    <Check>
      After successful payment, you'll have a customer ID that we'll use in our application code.
    </Check>
  </Step>

  <Step title="Find your customer ID">
    1. Go back to your Dodo Payments dashboard
    2. Navigate to **Customers** in the left sidebar
    3. Find the customer you just created (with the test email)
    4. Copy the customer ID - it will look like `cus_abc123def456`

    <Note>
      Save this customer ID - we'll hardcode it in our sample application code to ensure events are properly tracked.
    </Note>
  </Step>
</Steps>

## Step 4: Build the Sample Application

Now we have our billing setup complete and a test customer created. Let's build the sample PixelGen AI application that generates images and automatically tracks usage for billing.

<Steps>
  <Step title="Set up your project">
    Create a new directory and initialize the project:

    ```bash  theme={null}
    mkdir pixelgen-ai
    cd pixelgen-ai
    npm init -y
    ```
  </Step>

  <Step title="Install dependencies">
    Install the packages we need:

    ```bash  theme={null}
    npm install openai dotenv
    npm install -D typescript @types/node ts-node
    ```
  </Step>

  <Step title="Create the main application">
    Create a file called `index.ts` and copy this complete application code:
  </Step>
</Steps>

Here's the complete PixelGen AI application with integrated billing:

<CodeGroup>
  ```typescript index.ts expandable theme={null}
  import 'dotenv/config';
  import OpenAI from 'openai';
  import * as readline from 'readline';
  import { randomUUID } from 'crypto';

  // Initialize OpenAI client
  const openai = new OpenAI({
    apiKey: process.env.OPENAI_API_KEY,
  });

  // Dodo Payments configuration
  const DODO_PAYMENTS_CONFIG = {
    apiKey: process.env.DODO_PAYMENTS_API_KEY,
    baseUrl: 'https://test.dodopayments.com',
    customerId: 'cus_FX5FAB43aShGyiHJGIqjB', // Replace with your actual customer ID from Step 3
  };

  // DALL-E 3 pricing (as of 2024-2025)
  const PRICING = {
    'standard': 0.040, // $0.040 per image (1024×1024)
    'hd': 0.080,       // $0.080 per image (1024×1024, HD quality)
  };

  interface ImageGenerationOptions {
    prompt: string;
    model?: 'dall-e-3' | 'dall-e-2';
    quality?: 'standard' | 'hd';
    size?: '1024x1024' | '1792x1024' | '1024x1792';
    style?: 'vivid' | 'natural';
  }

  interface UsageEvent {
    event_id: string;
    customer_id: string;
    event_name: string;
    timestamp: string;
    metadata: {
      quality: string;
    };
  }

  /**
   * Send usage event to Dodo Payments for billing tracking
   */
  async function sendUsageEvent(event: UsageEvent): Promise<void> {
    try {
      console.log('Sending usage event to Dodo Payments...');
      console.log(`URL: ${DODO_PAYMENTS_CONFIG.baseUrl}/events/ingest`);
      console.log(`API Key present: ${!!DODO_PAYMENTS_CONFIG.apiKey}`);
      console.log(`API Key length: ${DODO_PAYMENTS_CONFIG.apiKey?.length || 0}`);
      console.log(`Customer ID: ${DODO_PAYMENTS_CONFIG.customerId}`);
      
      const requestBody = {
        events: [event]
      };
      console.log('Request body:', JSON.stringify(requestBody, null, 2));
      
      const headers = {
        'Authorization': `Bearer ${DODO_PAYMENTS_CONFIG.apiKey}`,
        'Content-Type': 'application/json',
      }
      console.log('Headers:', headers);
      const response = await fetch(`${DODO_PAYMENTS_CONFIG.baseUrl}/events/ingest`, {
        method: 'POST',
        headers: headers,
        body: JSON.stringify(requestBody),
      });

      console.log(`Response status: ${response.status}`);
      console.log(`Response headers:`, Object.fromEntries(response.headers.entries()));

      if (!response.ok) {
        const errorData = await response.text();
        console.log(`Error response body: ${errorData}`);
        throw new Error(`HTTP ${response.status}: ${errorData}`);
      }

      const result = await response.json();
      console.log('Usage event sent successfully');
      console.log(`   • Event ID: ${event.event_id}`);
      console.log(`   • Customer: ${event.customer_id}`);
      console.log(`   • Quality: ${event.metadata.quality}`);
      
    } catch (error) {
      console.error('Failed to send usage event:', error);
      // In production, you might want to queue failed events for retry
      throw error;
    }
  }

  async function generateImage(options: ImageGenerationOptions) {
    const startTime = Date.now();
    const eventId = randomUUID();
    
    try {
      console.log('Generating image...');
      console.log(`Prompt: "${options.prompt}"`);
      console.log(`Quality: ${options.quality || 'standard'}`);
      console.log(`Size: ${options.size || '1024x1024'}`);
      
      const response = await openai.images.generate({
        model: options.model || 'dall-e-3',
        prompt: options.prompt,
        n: 1,
        size: options.size || '1024x1024',
        quality: options.quality || 'standard',
        style: options.style || 'vivid',
      });

      const endTime = Date.now();
      const duration = (endTime - startTime) / 1000;
      const cost = PRICING[options.quality || 'standard'];
      
      // Create usage event for Dodo Payments
      const usageEvent: UsageEvent = {
        event_id: eventId,
        customer_id: DODO_PAYMENTS_CONFIG.customerId!,
        event_name: 'image.generated',
        timestamp: new Date().toISOString(),
        metadata: {
          quality: options.quality || 'standard',
        }
      };

      // Send usage event to Dodo Payments for billing
      await sendUsageEvent(usageEvent);
      
      console.log('\nImage generated successfully!');
      console.log(`Generation Stats:`);
      console.log(`   • Duration: ${duration.toFixed(2)} seconds`);
      console.log(`   • Quality: ${options.quality || 'standard'}`);
      console.log(`   • Cost: $${cost.toFixed(3)}`);
      console.log(`   • Image URL: ${response.data?.[0]?.url}`);
      
      if (response.data?.[0]?.revised_prompt) {
        console.log(`   • Revised prompt: "${response.data[0].revised_prompt}"`);
      }

      return {
        imageUrl: response.data?.[0].url,
        revisedPrompt: response.data?.[0].revised_prompt,
        cost: cost,
        duration: duration,
        eventId: eventId,
      };

    } catch (error) {
      console.error('Error generating image:', error);
      
      // Send failure event for monitoring (optional)
      try {
        const failureEvent: UsageEvent = {
          event_id: eventId,
          customer_id: DODO_PAYMENTS_CONFIG.customerId!,
          event_name: 'image.generation.failed',
          timestamp: new Date().toISOString(),
          metadata: {
            quality: options.quality || 'standard',
          }
        };
        
        // Note: You might want to create a separate meter for failed attempts
        // await sendUsageEvent(failureEvent);
      } catch (eventError) {
        console.error('Failed to send failure event:', eventError);
      }
      
      throw error;
    }
  }

  async function getUserInput(): Promise<string> {
    const rl = readline.createInterface({
      input: process.stdin,
      output: process.stdout
    });

    return new Promise((resolve) => {
      rl.question('Enter your image prompt: ', (answer) => {
        rl.close();
        resolve(answer);
      });
    });
  }

  async function main() {
    console.log('PixelGen AI - Image Generator with Usage Billing\n');
    
    // Validate environment variables
    const requiredEnvVars = [
      'OPENAI_API_KEY',
      'DODO_PAYMENTS_API_KEY'
    ];
    
    for (const envVar of requiredEnvVars) {
      if (!process.env[envVar]) {
        console.error(`Error: ${envVar} environment variable is not set.`);
        console.log('Please set all required environment variables:');
        console.log('export OPENAI_API_KEY="your-openai-key"');
        console.log('export DODO_PAYMENTS_API_KEY="your-dodo-api-key"');
        console.log('Note: Customer ID is hardcoded in the application');
        process.exit(1);
      }
    }

    try {
      const prompt = await getUserInput();
      
      if (!prompt.trim()) {
        console.log('No prompt provided. Exiting...');
        return;
      }

      const result = await generateImage({
        prompt: prompt.trim(),
        quality: 'standard', // Change to 'hd' for higher quality (costs more)
        size: '1024x1024',
        style: 'vivid'
      });

      console.log('\nProcess completed successfully!');
      console.log(`Billing Information:`);
      console.log(`   • Total cost: $${result.cost.toFixed(3)}`);
      console.log(`   • Event ID: ${result.eventId}`);
      console.log(`   • Billing will be processed automatically via Dodo Payments`);
      
    } catch (error) {
      console.error('Application error:', error);
      process.exit(1);
    }
  }

  // Run the application
  if (require.main === module) {
    main().catch(console.error);
  }
  ```

  ```bash .env theme={null}
  # Create .env file with your API keys
  OPENAI_API_KEY=your_openai_api_key_here
  DODO_PAYMENTS_API_KEY=your_DODO_PAYMENTS_payments_api_key_here
  # Note: Customer ID is hardcoded in the application code
  ```

  ```typescript package.json theme={null}
  {
    "name": "pixelgen-ai",
    "version": "1.0.0",
    "description": "AI Image Generation with Usage-Based Billing",
    "main": "index.js",
    "scripts": {
      "start": "ts-node index.ts",
      "build": "tsc",
      "dev": "ts-node --watch index.ts"
    },
    "dependencies": {
      "openai": "^4.0.0",
      "dotenv": "^16.0.0"
    },
    "devDependencies": {
      "@types/node": "^20.0.0",
      "typescript": "^5.0.0",
      "ts-node": "^10.0.0"
    }
  }
  ```
</CodeGroup>

## Step 5: Test Your Sample Application

Time to test our sample PixelGen AI service and see the billing in action! Let's make sure everything works end-to-end.

<Tip>
  **What we're testing**: We'll generate some images, verify the events reach Dodo Payments, and confirm billing calculations are correct.
</Tip>

<Steps>
  <Step title="Set up your environment">
    First, make sure you have everything configured:

    1. Create a `.env` file in your `pixelgen-ai` directory
    2. Add your actual API keys:

    ```bash  theme={null}
    OPENAI_API_KEY=sk-your-actual-openai-key
    DODO_PAYMENTS_API_KEY=your-actual-dodo-api-key
    # Customer ID is hardcoded in the application
    ```

    3. Install dependencies and run the app:

    ```bash  theme={null}
    npm install
    npm start
    ```

    <Warning>
      Make sure to use real API keys and update the hardcoded customer ID in the code with your actual customer ID from Step 3!
    </Warning>
  </Step>

  <Step title="Generate your first test image">
    When the app starts, you'll see:

    ```
    PixelGen AI - Image Generator with Usage Billing

    Enter your image prompt:
    ```

    Try this prompt: **"A cute robot painting a landscape"**

    You should see output like this:

    ```
    Generating image...
    Prompt: "A cute robot painting a landscape"
    Quality: standard
    Size: 1024x1024

    Sending usage event to Dodo Payments...
    Usage event sent successfully
       • Event ID: 550e8400-e29b-41d4-a716-446655440000
       • Customer: cus_atXa1lklCRRzMicTqfiw2
       • Quality: standard

    Image generated successfully!
    Generation Stats:
       • Duration: 8.45 seconds
       • Quality: standard
       • Cost: $0.040
       • Image URL: https://oaidalleapi...
    ```

    <Check>
      If you see "Usage event sent successfully", your billing integration is working!
    </Check>
  </Step>

  <Step title="Generate a few more images">
    Let's generate 2-3 more images to test multiple events. Try these prompts:

    1. **"A sunset over mountains with purple clouds"**
    2. **"A steampunk coffee machine in a Victorian kitchen"**
    3. **"A friendly dragon reading a book in a library"**

    Each time, watch for the "Usage event sent successfully" message.
  </Step>

  <Step title="Check your Dodo Payments dashboard">
    Now let's verify the events are being received:

    1. Open your Dodo Payments dashboard
    2. Go to *Usage Billing* → \***Meters** → **Image Generation Meter**
    3. Click on the **Events**  tab
    4. You should see your image generation events listed

    **What to look for**:

    * Event names: `image.generated`
    * Customer ID: Your test customer ID

    <Check>
      You should see one event for each image you generated!
    </Check>
  </Step>

  <Step title="Verify billing calculations">
    Let's check if the usage counting is working:

    <Frame>
      <img src="https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-1.png?fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=7fb86a266b5aa84f281b680601bd998e" alt="" data-og-width="1536" width="1536" data-og-height="1252" height="1252" data-path="images/usage-based/UBB-1.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-1.png?w=280&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=23a2bbb81a88052bec92772f03254690 280w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-1.png?w=560&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=b9ebba13d62c1e5e0470097382319a8c 560w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-1.png?w=840&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=2cb2348f913ebdc8175d07c533553d74 840w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-1.png?w=1100&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=84b14f137b8f737d8e269cb9c2213915 1100w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-1.png?w=1650&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=9059aafa1890c7a834a0acbd2a115567 1650w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-1.png?w=2500&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=7a1008d882d31dc4699b07353c4121f6 2500w" />
    </Frame>

    1. In your meter, go to the **Customers** tab
    2. Find your test customer
    3. Check the "Consumed Units" column
  </Step>

  <Step title="Test the billing threshold">
    Let's exceed the free tier to see billing in action:

    1. Generate 8 more images (to reach 12 total)
    2. Check your meter dashboard again
    3. You should now see:
       * Consumed units: 12
       * Billable units: 2 (12 - 10 free)
       * Billing amount: \$0.10

    <Check>
      **Success!** Your usage-based billing is working perfectly. Customers will be automatically charged based on their actual image generation usage.
    </Check>
  </Step>
</Steps>

## Troubleshooting

Common issues and their solutions:

<AccordionGroup>
  <Accordion title="Events not appearing in dashboard">
    **Possible causes:**

    * Event name doesn't match meter configuration exactly
    * Customer ID doesn't exist in your account
    * API key is invalid or expired
    * Network connectivity issues

    **Solutions:**

    1. Verify event name matches meter configuration exactly (case-sensitive)
    2. Check that customer ID exists in Dodo Payments
    3. Test API key with a simple API call
    4. Check network connectivity and firewall settings
  </Accordion>
</AccordionGroup>

## Congratulations! You Built PixelGen AI

You've successfully created a snippet for AI image generation with usage-based billing! Here's what you accomplished:

<CardGroup cols={2}>
  <Card title="Usage Meter" icon="sliders">
    Created "Image Generation Meter" that tracks every image generation event
  </Card>

  <Card title="Billing Product" icon="credit-card">
    Configured pricing at \$0.05 per image with 10 free images per month
  </Card>

  <Card title="AI Application" icon="robot">
    Built a working TypeScript app that generates images using OpenAI's DALL-E
  </Card>

  <Card title="Automated Billing" icon="bolt">
    Integrated real-time event tracking that automatically bills customers
  </Card>
</CardGroup>


# Usage-Based Billing Integration guide
Source: https://docs.dodopayments.com/developer-resources/usage-based-billing-guide

Learn how to set up meters and send usage events to enable accurate usage-based billing with Dodo Payments.

<CardGroup cols={2}>
  <Card title="API Reference - Events Ingestion" icon="code" href="/api-reference/usage-events/ingest-events">
    Access the complete API documentation for ingesting usage events and test event ingestion requests and responses interactively.
  </Card>

  <Card title="API Reference - Meters Creation" icon="code" href="/api-reference/meters/create-meter">
    Explore the full API documentation for creating meters and interactively test meter creation requests and responses.
  </Card>
</CardGroup>

## Creating a Meter

Meters define how your usage events are aggregated and measured for billing purposes.

Before creating a meter, plan your usage tracking strategy:

* Identify what usage events you want to track
* Determine how events should be aggregated (count, sum, etc.)
* Define any filtering requirements for specific use cases

### Step-by-Step Meter Creation

Follow this comprehensive guide to set up your usage meter:

<Steps>
  <Step title="Configure Basic Information">
    Set up the fundamental details for your meter.

    <ParamField path="Meter Name" type="string" required>
      Choose a clear, descriptive name that identifies what this meter tracks.

      Examples: "Tokens", "API Calls", "Storage Usage", "Compute Hours"
    </ParamField>

    <ParamField path="Description" type="string">
      Provide a detailed explanation of what this meter measures.

      Example: "Counts each POST /v1/orders request made by the customer"
    </ParamField>

    <ParamField path="Event Name" type="string" required>
      Specify the event identifier that will trigger this meter.

      Examples: "token", "api.call", "storage.usage", "compute.session"
    </ParamField>

    <Info>
      The event name must match exactly what you send in your usage events. Event names are case-sensitive.
    </Info>
  </Step>

  <Step title="Configure Aggregation Settings">
    Define how the meter calculates usage from your events.

    <ParamField path="Aggregation Type" type="string" required>
      Select how events should be aggregated:

      <Tabs>
        <Tab title="Count">
          Simply counts the number of events received.

          Use case: API calls, page views, file uploads

          Calculation: Total number of events
        </Tab>

        <Tab title="Sum">
          Adds up values from a specific property in your events.

          Use case: Data transfer, storage consumption, processing time

          Calculation: Sum of all property values
        </Tab>

        <Tab title="Max">
          Records the highest value of a specific property during the billing period.

          Use case: Peak concurrent users, maximum storage used, highest bandwidth

          Calculation: Maximum property value observed
        </Tab>

        <Tab title="Last">
          Uses the most recent value of a specific property.

          Use case: Current plan tier, latest configuration setting

          Calculation: Last recorded property value
        </Tab>
      </Tabs>
    </ParamField>

    <ParamField path="Over Property" type="string">
      The property name from event metadata to aggregate over.

      <Warning>
        This field is required when using Sum, Max, or Last aggregation types.
      </Warning>
    </ParamField>

    <ParamField path="Measurement Unit" type="string" required>
      Define the unit label for display purposes in reports and billing.

      Examples: "calls", "GB", "hours", "tokens"
    </ParamField>
  </Step>

  <Step title="Configure Event Filtering (Optional)">
    Set up criteria to control which events are included in the meter.

    <Info>
      Event filtering allows you to create sophisticated rules that determine which events contribute to your usage calculations. This is useful for excluding test events, filtering by user tiers, or focusing on specific actions.
    </Info>

    **Enable Event Filtering**

    Toggle **Enable Event Filtering** to activate conditional event processing.

    **Choose Filter Logic**

    Select how multiple conditions are evaluated:

    <Tabs>
      <Tab title="AND Logic">
        All conditions must be true for an event to be counted. Use this when you need events to meet multiple strict criteria simultaneously.

        **Example:** Count API calls where `user_tier = "premium"` AND `endpoint = "/api/v2/users"`
      </Tab>

      <Tab title="OR Logic">
        At least one condition must be true for an event to be counted. Use this when you want to include events that meet any of several criteria.

        **Example:** Count events where `method = "POST"` OR `method = "PUT"` OR `method = "DELETE"`
      </Tab>
    </Tabs>

    **Setting Up Filter Conditions**

    <Steps>
      <Step title="Add Condition">
        Click **Add condition** to create a new filter rule.
      </Step>

      <Step title="Configure Property Key">
        Specify the property name from your event metadata.
      </Step>

      <Step title="Select Comparator">
        Choose from available operators:

        * `equals` - Exact match
        * `not equals` - Exclusion filter
        * `greater than` - Numeric comparison
        * `greater than or equals` - Numeric comparison (inclusive)
        * `less than` - Numeric comparison
        * `less than or equals` - Numeric comparison (inclusive)
        * `contains` - String contains substring
        * `does not contain` - String exclusion filter
      </Step>

      <Step title="Set Comparison Value">
        Set the target value for comparison.
      </Step>

      <Step title="Add Groups">
        Use **Add Group** to create additional condition groups for complex logic.
      </Step>
    </Steps>

    <Warning>
      Filtered properties must be included in your event metadata for the conditions to work properly. Events missing required properties will be excluded from counting.
    </Warning>
  </Step>

  <Step title="Create Meter">
    Review your meter configuration and click on **Create Meter**.

    <Check>
      Your meter is now ready to receive and aggregate usage events.
    </Check>
  </Step>
</Steps>

## Linking Meter in a Product

Once you have created your meter, you need to link it to a product to enable usage-based billing. This process connects your meter's usage data to pricing rules for customer billing.

Linking meters to products establishes the connection between usage tracking and billing:

* Products define pricing rules and billing behavior
* Meters provide usage data for billing calculations
* Multiple meters can be linked to a single product for complex billing scenarios

### Product Configuration Process

Transform your usage data into billable charges by properly configuring your product settings:

<Steps>
  <Step title="Choose Usage-Based Billing Product Type">
    Navigate to your product creation or editing page and select **Usage-Based** as the product type.
  </Step>

  <Step title="Select Associated Meter">
    Click on **Associated Meter** to open the meter selection panel from the side.

    This panel allows you to configure which meters will track usage for this product.
  </Step>

  <Step title="Add Your Meter">
    In the meter selection panel:

    1. Click **Add Meters** to view available meters
    2. Select the meter you created from the dropdown list
    3. The selected meter will appear in your product configuration
  </Step>

  <Step title="Configure Price Per Unit">
    Set the pricing for each unit of usage tracked by your meter.

    <ParamField path="Price Per Unit" type="number" required>
      Define how much to charge for each unit measured by your meter.

      **Example**: Setting `$0.50` per unit means:

      * 1,000 units consumed = 1,000 × \$0.50 = 500.00 charged
      * 500 units consumed = 500 × \$0.50 = 250.00 charged
      * 100 units consumed = 100 × \$0.50 = 50.00 charged
    </ParamField>
  </Step>

  <Step title="Set Free Threshold (Optional)">
    Configure a free usage allowance before billing begins.

    <ParamField path="Free Threshold" type="number">
      Number of units customers can consume at no charge before paid usage calculation starts.

      **How it works**:

      * Free threshold: 100 units
      * Price per unit: \$0.50
      * Customer usage: 250 units
      * **Calculation**: (250 - 100) × $0.50 = **$75.00\*\* charged
    </ParamField>

    <Info>
      Free thresholds are ideal for freemium models, trial periods, or providing customers with a base allowance included in their plan.
    </Info>

    <Check>
      The free threshold applies to each billing cycle, giving customers fresh allowances monthly or according to your billing schedule.
    </Check>
  </Step>

  <Step title="Save Configuration">
    Review your meter and pricing configuration, then click **Save Changes** to finalize the setup.

    <Check>
      Your product is now configured for usage-based billing and will automatically charge customers based on their measured consumption.
    </Check>

    **What happens next**:

    * Usage events sent to your meter will be tracked and aggregated
    * Billing calculations will apply your pricing rules automatically
    * Customers will be charged based on actual consumption during each billing cycle
  </Step>
</Steps>

<Note>
  Remember that you can add up to 10 meters per product, enabling sophisticated usage tracking across multiple dimensions like API calls, storage, compute time, and custom metrics.
</Note>

## Sending Usage Events

Once your meter is configured, you can start sending usage events from your application to track customer usage.

### Event Structure

Each usage event must include these required fields:

<ParamField body="event_id" type="string" required>
  Unique identifier for this specific event. Must be unique across all events.
</ParamField>

<ParamField body="customer_id" type="string" required>
  The Dodo Payments customer ID this usage should be attributed to.
</ParamField>

<ParamField body="event_name" type="string" required>
  The event name that matches your meter configuration. Event names trigger the appropriate meter.
</ParamField>

<ParamField body="timestamp" type="string">
  ISO 8601 timestamp when the event occurred. Defaults to current time if not provided.
</ParamField>

<ParamField body="metadata" type="object">
  Additional properties for filtering and aggregation. Include any values referenced in your meter's "Over Property" or filtering conditions.
</ParamField>

### Usage Events API Examples

Send usage events to your configured meters using the Events API:

<CodeGroup>
  ```javascript Node.js theme={null}
  const response = await fetch('https://test.dodopayments.com/events/ingest', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${process.env.DODO_API_KEY}`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      events: [
        {
          event_id: "api_call_1234",
          customer_id: "cus_atXa1lklCRRzMicTqfiw2", 
          event_name: "api.call",
          timestamp: new Date().toISOString(),
          metadata: {
            endpoint: "/v1/orders",
            method: "POST",
            response_size: 1024
          }
        }
      ]
    })
  });
  ```

  ```python Python theme={null}
  import requests
  from datetime import datetime

  response = requests.post(
      'https://test.dodopayments.com/events/ingest',
      headers={
          'Authorization': f'Bearer {api_key}',
          'Content-Type': 'application/json'
      },
      json={
          'events': [
              {
                  'event_id': 'api_call_1234',
                  'customer_id': 'cus_atXa1lklCRRzMicTqfiw2',
                  'event_name': 'api.call',
                  'timestamp': datetime.now().isoformat(),
                  'metadata': {
                      'endpoint': '/v1/orders',
                      'method': 'POST',
                      'response_size': 1024
                  }
              }
          ]
      }
  )
  ```

  ```curl cURL theme={null}
  curl -X POST 'https://test.dodopayments.com/events/ingest' \
    -H 'Authorization: Bearer YOUR_API_KEY' \
    -H 'Content-Type: application/json' \
    -d '{
      "events": [
        {
          "event_id": "api_call_1234",
          "customer_id": "cus_atXa1lklCRRzMicTqfiw2",
          "event_name": "api.call", 
          "timestamp": "2024-01-15T10:30:00Z",
          "metadata": {
            "endpoint": "/v1/orders",
            "method": "POST",
            "response_size": 1024
          }
        }
      ]
    }'
  ```
</CodeGroup>

## Usage-Based Billing Analytics

Monitor and analyze your usage-based billing data with comprehensive analytics dashboard. Track customer consumption patterns, meter performance, and billing trends to optimize your pricing strategy and understand usage behaviors.

### Overview Analytics

The Overview tab provides a comprehensive view of your usage-based billing performance:

#### Activity Metrics

Track key usage statistics across different time periods:

<ParamField path="Current Month" type="metric">
  Shows usage activity for the current billing period, helping you understand monthly consumption patterns.
</ParamField>

<ParamField path="All Time" type="metric">
  Displays cumulative usage statistics since you started tracking, providing long-term growth insights.
</ParamField>

<Tip>
  Use the time period selector to compare usage across different months and identify seasonal trends or growth patterns.
</Tip>

#### Meter Quantities Chart

<Frame>
  <img src="https://mintcdn.com/dodopayments/16r81mgDWvSgYER7/images/guides/usage-based-billing/meter-quantities-chart.png?fit=max&auto=format&n=16r81mgDWvSgYER7&q=85&s=1a8a39547bd0259a53d4591d7928c8ea" alt="Meter quantities chart showing usage trends over time with purple gradient visualization" data-og-width="1602" width="1602" data-og-height="888" height="888" data-path="images/guides/usage-based-billing/meter-quantities-chart.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/16r81mgDWvSgYER7/images/guides/usage-based-billing/meter-quantities-chart.png?w=280&fit=max&auto=format&n=16r81mgDWvSgYER7&q=85&s=b0e55e646843d7ae4168b4f28f47ebc8 280w, https://mintcdn.com/dodopayments/16r81mgDWvSgYER7/images/guides/usage-based-billing/meter-quantities-chart.png?w=560&fit=max&auto=format&n=16r81mgDWvSgYER7&q=85&s=ff70ffc8739eebbb1169605524ae8b26 560w, https://mintcdn.com/dodopayments/16r81mgDWvSgYER7/images/guides/usage-based-billing/meter-quantities-chart.png?w=840&fit=max&auto=format&n=16r81mgDWvSgYER7&q=85&s=4259db84b487d654d4891d65747da271 840w, https://mintcdn.com/dodopayments/16r81mgDWvSgYER7/images/guides/usage-based-billing/meter-quantities-chart.png?w=1100&fit=max&auto=format&n=16r81mgDWvSgYER7&q=85&s=9e7e0a7c207ef6bc7300740b8ed5368f 1100w, https://mintcdn.com/dodopayments/16r81mgDWvSgYER7/images/guides/usage-based-billing/meter-quantities-chart.png?w=1650&fit=max&auto=format&n=16r81mgDWvSgYER7&q=85&s=eda3fade188934b182b0b539115473e2 1650w, https://mintcdn.com/dodopayments/16r81mgDWvSgYER7/images/guides/usage-based-billing/meter-quantities-chart.png?w=2500&fit=max&auto=format&n=16r81mgDWvSgYER7&q=85&s=2345f13682183ecf726bc8f0eb6d7178 2500w" />
</Frame>

The meter quantities chart visualizes usage trends over time with the following features:

* **Time-series visualization**: Track usage patterns across days, weeks, or months
* **Multiple meter support**: View data from different meters simultaneously
* **Trend analysis**: Identify usage spikes, patterns, and growth trajectories

<Info>
  The chart automatically scales based on your usage volume and selected time range, providing clear visibility into both small fluctuations and major usage changes.
</Info>

### Events Analytics

<Frame>
  <img src="https://mintcdn.com/dodopayments/16r81mgDWvSgYER7/images/guides/usage-based-billing/events-table.png?fit=max&auto=format&n=16r81mgDWvSgYER7&q=85&s=0af7aad1d5e9a379eee18edc40aac157" alt="Events table showing event names, IDs, and pagination controls for detailed event analysis" data-og-width="1601" width="1601" data-og-height="896" height="896" data-path="images/guides/usage-based-billing/events-table.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/16r81mgDWvSgYER7/images/guides/usage-based-billing/events-table.png?w=280&fit=max&auto=format&n=16r81mgDWvSgYER7&q=85&s=31c851a043908499e6b082451b2a02b4 280w, https://mintcdn.com/dodopayments/16r81mgDWvSgYER7/images/guides/usage-based-billing/events-table.png?w=560&fit=max&auto=format&n=16r81mgDWvSgYER7&q=85&s=0e4b34c5f80464fc1825e12f793cb853 560w, https://mintcdn.com/dodopayments/16r81mgDWvSgYER7/images/guides/usage-based-billing/events-table.png?w=840&fit=max&auto=format&n=16r81mgDWvSgYER7&q=85&s=82db960494d3acc178d764c6477389c8 840w, https://mintcdn.com/dodopayments/16r81mgDWvSgYER7/images/guides/usage-based-billing/events-table.png?w=1100&fit=max&auto=format&n=16r81mgDWvSgYER7&q=85&s=0a66ad74345778fa1b5a2ef3d47f4b18 1100w, https://mintcdn.com/dodopayments/16r81mgDWvSgYER7/images/guides/usage-based-billing/events-table.png?w=1650&fit=max&auto=format&n=16r81mgDWvSgYER7&q=85&s=02f88455511e7adae96921afead1bee5 1650w, https://mintcdn.com/dodopayments/16r81mgDWvSgYER7/images/guides/usage-based-billing/events-table.png?w=2500&fit=max&auto=format&n=16r81mgDWvSgYER7&q=85&s=5a5d569fbfb76bbe6372bf51ce33a9e4 2500w" />
</Frame>

The Events tab provides granular visibility into individual usage events:

#### Event Information Display

The events table provides a clear view of individual usage events with the following columns:

* **Event Name**: The specific action or trigger that generated the usage event
* **Event ID**: Unique identifier for each event instance
* **Customer ID**: The customer associated with the event
* **Timestamp**: When the event occurred

<Info>
  This view allows you to track and monitor individual usage events across your customer base, providing transparency into billing calculations and usage patterns.
</Info>

### Customer Analytics

The Customers tab provides a detailed table view of customer usage data with the following information:

#### Available Data Columns

<ParamField path="Customer Email" type="string">
  Email address of the customer for identification.
</ParamField>

<ParamField path="Subscription ID" type="string">
  Unique identifier for the customer's subscription.
</ParamField>

<ParamField path="Free Threshold" type="number">
  Number of free units included in the customer's plan before charges apply.
</ParamField>

<ParamField path="Price Per Unit" type="currency">
  The cost per unit for usage beyond the free threshold.
</ParamField>

<ParamField path="Last Event" type="timestamp">
  Timestamp of the customer's most recent usage event.
</ParamField>

<ParamField path="Total Price" type="currency">
  Total amount charged to the customer for usage-based billing.
</ParamField>

<ParamField path="Consumed Units" type="number">
  Total number of units the customer has consumed.
</ParamField>

<ParamField path="Chargeable Units" type="number">
  Number of units that exceed the free threshold and are being charged.
</ParamField>

#### Table Features

* **Column Filtering**: Use the "Edit Columns" feature to show/hide specific data columns
* **Real-time Updates**: Usage data reflects the most current consumption metrics

## Aggregation Examples

Here are practical examples of how different aggregation types work:

### Understanding Aggregation Types

Different aggregation types serve different billing scenarios. Choose the right type based on how you want to measure and charge for usage.

### Practical Implementation Examples

These examples demonstrate real-world applications of each aggregation type with sample events and expected results.

<AccordionGroup>
  <Accordion title="Count Aggregation - API Calls">
    Scenario: Track the total number of API requests

    Meter Configuration:

    * Event Name: `api.call`
    * Aggregation Type: Count
    * Measurement Unit: `calls`

    **Sample Events**:

    ```json  theme={null}
    {
      "events": [
        {"event_id": "call_1", "customer_id": "cus_123", "event_name": "api.call"},
        {"event_id": "call_2", "customer_id": "cus_123", "event_name": "api.call"},
        {"event_id": "call_3", "customer_id": "cus_123", "event_name": "api.call"}
      ]
    }
    ```

    Result: 3 calls billed to customer
  </Accordion>

  <Accordion title="Sum Aggregation - Data Transfer">
    Scenario: Bill based on total bytes transferred

    Meter Configuration:

    * Event Name: `data.transfer`
    * Aggregation Type: Sum
    * Over Property: `bytes`
    * Measurement Unit: `GB`

    **Sample Events**:

    ```json  theme={null}
    {
      "events": [
        {
          "event_id": "transfer_1",
          "customer_id": "cus_123", 
          "event_name": "data.transfer",
          "metadata": {"bytes": 1073741824}
        },
        {
          "event_id": "transfer_2",
          "customer_id": "cus_123",
          "event_name": "data.transfer", 
          "metadata": {"bytes": 536870912}
        }
      ]
    }
    ```

    Result: 1.5 GB total transfer billed to customer
  </Accordion>

  <Accordion title="Max Aggregation - Peak Concurrent Users">
    Scenario: Bill based on highest concurrent user count

    Meter Configuration:

    * Event Name: `concurrent.users`
    * Aggregation Type: Max
    * Over Property: `count`
    * Measurement Unit: `users`

    **Sample Events**:

    ```json  theme={null}
    {
      "events": [
        {
          "event_id": "peak_1",
          "customer_id": "cus_123",
          "event_name": "concurrent.users", 
          "metadata": {"count": 15}
        },
        {
          "event_id": "peak_2",
          "customer_id": "cus_123",
          "event_name": "concurrent.users",
          "metadata": {"count": 23}
        },
        {
          "event_id": "peak_3",
          "customer_id": "cus_123",
          "event_name": "concurrent.users",
          "metadata": {"count": 18}
        }
      ]
    }
    ```

    Result: 23 peak concurrent users billed to customer
  </Accordion>
</AccordionGroup>

### Event Filtering Examples

<Tabs>
  <Tab title="Filter by API Endpoint">
    Only count API calls to specific endpoints:

    Filter Configuration:

    * Property: `endpoint`
    * Comparator: `equals`
    * Value: `/v1/orders`

    Sample Event:

    ```json  theme={null}
    {
      "event_id": "call_1",
      "customer_id": "cus_123",
      "event_name": "api.call",
      "metadata": {
        "endpoint": "/v1/orders",
        "method": "POST"
      }
    }
    ```

    Result: Events matching the filter criteria would be counted. Events with different endpoints would be ignored.
  </Tab>

  <Tab title="Filter by Value Range">
    Only count large file uploads:

    Filter Configuration:

    * Property: `file_size`
    * Comparator: `greater_than`
    * Value: `1048576` (1MB in bytes)

    Sample Event:

    ```json  theme={null}
    {
      "event_id": "upload_1",
      "customer_id": "cus_123", 
      "event_name": "file.upload",
      "metadata": {
        "file_size": 5242880,
        "file_type": "image"
      }
    }
    ```

    Result: Files larger than 1MB would be counted. Smaller files would be ignored.
  </Tab>

  <Tab title="Complex Multi-Condition Filters">
    Count premium API calls during business hours:

    Filter Configuration (using AND logic):

    * Property: `plan_type`, Comparator: `equals`, Value: `premium`
    * Property: `hour`, Comparator: `greater_than_or_equal`, Value: `9`
    * Property: `hour`, Comparator: `less_than`, Value: `17`

    Sample Event:

    ```json  theme={null}
    {
      "event_id": "call_1",
      "customer_id": "cus_123",
      "event_name": "api.call",
      "metadata": {
        "plan_type": "premium",
        "hour": 14,
        "endpoint": "/v1/analytics"
      }
    }
    ```

    Result: Premium API calls during business hours (9 AM - 5 PM) would be counted.
  </Tab>
</Tabs>

## Troubleshooting

Resolve common issues with usage-based billing implementation and ensure accurate tracking and billing.

### Common Issues

Most usage-based billing problems fall into these categories:

* Event delivery and processing issues
* Meter configuration problems
* Data type and formatting errors
* Customer ID and authentication issues

### Debugging Steps

When troubleshooting usage-based billing:

1. Verify event delivery in the Events analytics tab
2. Check meter configuration matches your event structure
3. Validate customer IDs and API authentication
4. Review filtering conditions and aggregation settings

### Solutions and Fixes

<AccordionGroup>
  <Accordion title="Events not showing in meter">
    Common causes:

    * Event name doesn't exactly match meter configuration
    * Event filtering conditions are excluding your events
    * Customer ID doesn't exist in your Dodo Payments account
    * Event timestamp is outside the current billing period

    Solutions:

    * Verify event name spelling and case sensitivity
    * Review and test your filtering conditions
    * Confirm customer ID is valid and active
    * Check event timestamps are recent and properly formatted
  </Accordion>

  <Accordion title="Aggregation not working as expected">
    Common causes:

    * Over Property name doesn't match event metadata keys
    * Metadata values are wrong data type (string vs number)
    * Missing required metadata properties

    Solutions:

    * Ensure metadata keys exactly match your Over Property setting
    * Convert string numbers to actual numbers in your events
    * Include all required properties in every event
  </Accordion>

  <Accordion title="Filtering not working">
    Common causes:

    * Filter property names don't match event metadata
    * Wrong comparator for data type (string vs number)
    * Case sensitivity in string comparisons

    Solutions:

    * Double-check property names match exactly
    * Use appropriate comparators for your data types
    * Consider case sensitivity when filtering strings
  </Accordion>
</AccordionGroup>


# Webhooks
Source: https://docs.dodopayments.com/developer-resources/webhooks

Receive real-time notifications when events occur in Dodo Payments. Automate workflows and keep your systems synchronized with instant event delivery.

<Frame>
  <img src="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Webhooks.webp?fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=477435b1004773582aa51236b5cc58e7" alt="Webhook Cover Image" data-og-width="1200" width="1200" data-og-height="630" height="630" data-path="images/cover-images/Webhooks.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Webhooks.webp?w=280&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=4499081979872a5281c76ec5c2fca3d4 280w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Webhooks.webp?w=560&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=81bdc2f85d8d2fc0b3bf6b15488aac95 560w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Webhooks.webp?w=840&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=a7895a74bca4f5f08cdda49aee2fcf1c 840w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Webhooks.webp?w=1100&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=1756398be4696df7d9c5b732b8ed7f84 1100w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Webhooks.webp?w=1650&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=fcc1e8d80719712e8c60d9a0a395d725 1650w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Webhooks.webp?w=2500&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=ed239cefb0cce030f7a58c2b91266f27 2500w" />
</Frame>

Webhooks provide real-time notifications when specific events occur in your Dodo Payments account. Use webhooks to automate workflows, update your database, send notifications, and keep your systems synchronized.

<Info>
  Our webhook implementation follows the [Standard Webhooks](https://standardwebhooks.com/) specification, ensuring compatibility with industry best practices and existing webhook libraries.
</Info>

## Key Features

<CardGroup cols={2}>
  <Card title="Real-time Delivery" icon="bolt">
    Receive instant notifications when events occur
  </Card>

  <Card title="Secure by Default" icon="shield-check">
    HMAC SHA256 signature verification included
  </Card>

  <Card title="Automatic Retries" icon="rotate">
    Built-in retry logic with exponential backoff
  </Card>

  <Card title="Event Filtering" icon="filter">
    Subscribe only to events you need
  </Card>
</CardGroup>

## Getting Started

<Steps>
  <Step title="Access Webhook Settings">
    Navigate to the DodoPayments Dashboard and go to `Settings > Webhooks`.
  </Step>

  <Step title="Create Webhook Endpoint">
    Click on `Add Webhook` to create a new webhook endpoint.

    <Frame>
      <img src="https://mintcdn.com/dodopayments/BHDbjXQkGsSXJEiK/images/webhooks/create-endpoint.png?fit=max&auto=format&n=BHDbjXQkGsSXJEiK&q=85&s=fc60e939a2bd92b6761c98f5ad58a226" alt="Add Webhook" data-og-width="2872" width="2872" data-og-height="1574" height="1574" data-path="images/webhooks/create-endpoint.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/BHDbjXQkGsSXJEiK/images/webhooks/create-endpoint.png?w=280&fit=max&auto=format&n=BHDbjXQkGsSXJEiK&q=85&s=42e9e9a129a525dc1ea8449d858920a7 280w, https://mintcdn.com/dodopayments/BHDbjXQkGsSXJEiK/images/webhooks/create-endpoint.png?w=560&fit=max&auto=format&n=BHDbjXQkGsSXJEiK&q=85&s=eb96a65147487c60df78573195f6c693 560w, https://mintcdn.com/dodopayments/BHDbjXQkGsSXJEiK/images/webhooks/create-endpoint.png?w=840&fit=max&auto=format&n=BHDbjXQkGsSXJEiK&q=85&s=716342e6ff539cfd077cac4fb262c6e7 840w, https://mintcdn.com/dodopayments/BHDbjXQkGsSXJEiK/images/webhooks/create-endpoint.png?w=1100&fit=max&auto=format&n=BHDbjXQkGsSXJEiK&q=85&s=2d3b589aa66ec2e306099460987ea937 1100w, https://mintcdn.com/dodopayments/BHDbjXQkGsSXJEiK/images/webhooks/create-endpoint.png?w=1650&fit=max&auto=format&n=BHDbjXQkGsSXJEiK&q=85&s=348de527b56321897f7f3addc3e70795 1650w, https://mintcdn.com/dodopayments/BHDbjXQkGsSXJEiK/images/webhooks/create-endpoint.png?w=2500&fit=max&auto=format&n=BHDbjXQkGsSXJEiK&q=85&s=b66f245b8e85cda8d2af30ca62a38440 2500w" />
    </Frame>
  </Step>

  <Step title="Add Endpoint URL">
    Enter the URL where you want to receive webhook events.
  </Step>

  <Step title="Select Events to Receive">
    Choose the specific events your webhook endpoint should listen for by selecting them from the event list.

    <Tip>
      Only selected events will trigger webhooks to your endpoint, helping you avoid unnecessary traffic and processing.
    </Tip>
  </Step>

  <Step title="Get Secret Key">
    Obtain your webhook `Secret Key` from the settings page. You'll use this to verify the authenticity of received webhooks.

    <Warning>
      Keep your webhook secret key secure and never expose it in client-side code or public repositories.
    </Warning>
  </Step>

  <Step title="Rotate Secret (Optional)">
    If needed, you can rotate your webhook secret for enhanced security. Click the **Rotate Secret** button in your webhook settings.

    <Warning>
      Rotating the secret will **expire it** and **replace it** with a new one. The old secret will only be valid for the next 24 hours. Afterward, trying to verify with the old secret will fail.
    </Warning>

    <Info>
      Use secret rotation periodically or immediately if you suspect your current secret has been compromised.
    </Info>
  </Step>
</Steps>

## Configuring Subscribed Events

You can configure which specific events they want to receive for each webhook endpoint.

### Accessing Event Configuration

<Steps>
  <Step title="Navigate to Webhook Details">
    Go to your Dodo Payments Dashboard and navigate to `Settings > Webhooks`.
  </Step>

  <Step title="Select Your Endpoint">
    Click on the webhook endpoint you want to configure.
  </Step>

  <Step title="Open Event Settings">
    In the webhook details page, you'll see a "Subscribed events" section. Click the **Edit** button to modify your event subscriptions.
  </Step>
</Steps>

### Managing Event Subscriptions

<Steps>
  <Step title="View Available Events">
    The interface displays all available webhook events organized in a hierarchical structure. Events are grouped by category (e.g., `dispute`, `payment`, `subscription`).
  </Step>

  <Step title="Search and Filter">
    Use the search bar to quickly find specific events by typing event names or keywords.
  </Step>

  <Step title="Select Events">
    Check the boxes next to the events you want to receive. You can:

    * Select individual sub-events (e.g., `dispute.accepted`, `dispute.challenged`)
    * Select parent events to receive all related sub-events
    * Mix and match specific events based on your needs
  </Step>

  <Step title="Review Event Details">
    Hover over the information icon (ⓘ) next to each event to see a description of when that event is triggered.
  </Step>

  <Step title="Save Configuration">
    Click **Save** to apply your changes, or **Cancel** to discard modifications.
  </Step>
</Steps>

<Warning>
  If you deselect all events, your webhook endpoint will not receive any notifications. Make sure to select at least the events your application needs to function properly.
</Warning>

## Webhook Delivery

### Timeouts

Webhooks have a **15-second timeout window** for both connection and read operations. Ensure your endpoint responds quickly to avoid timeouts.

<Tip>
  Process webhooks asynchronously by acknowledging receipt immediately with a `200` status code, then handling the actual processing in the background.
</Tip>

### Automatic Retries

If a webhook delivery fails, Dodo Payments automatically retries with exponential backoff to prevent overwhelming your system.

| Attempt | Delay       | Description                                                  |
| ------- | ----------- | ------------------------------------------------------------ |
| 1       | Immediately | First retry happens right away                               |
| 2       | 5 seconds   | Second attempt after short delay                             |
| 3       | 5 minutes   | Third attempt with increased backoff                         |
| 4       | 30 minutes  | Fourth attempt continuing backoff                            |
| 5       | 2 hours     | Fifth attempt with extended delay                            |
| 6       | 5 hours     | Sixth attempt with longer delay                              |
| 7       | 10 hours    | Seventh attempt with maximum delay                           |
| 8       | 10 hours    | **Final attempt** - webhook marked as failed if unsuccessful |

<Info>
  **Maximum of 8 retry attempts** per webhook event. For example, if a webhook fails three times before succeeding, the total delivery time is approximately 35 minutes and 5 seconds from the first attempt.
</Info>

<Tip>
  Use the Dodo Payments dashboard to manually retry individual messages or bulk recover all failed messages at any time.
</Tip>

### Idempotency

Each webhook event includes a unique `webhook-id` header. Use this identifier to implement idempotency and prevent duplicate processing.

```javascript  theme={null}
// Example: Storing webhook IDs to prevent duplicate processing
const processedWebhooks = new Set();

app.post('/webhook', (req, res) => {
  const webhookId = req.headers['webhook-id'];
  
  if (processedWebhooks.has(webhookId)) {
    return res.status(200).json({ received: true });
  }
  
  processedWebhooks.add(webhookId);
  // Process the webhook...
});
```

<Warning>
  Always implement idempotency checks. Due to retries, you may receive the same event multiple times.
</Warning>

### Event Ordering

Webhook events may arrive out of order due to retries or network conditions. Design your system to handle events in any sequence.

<Info>
  You will receive the **latest payload at the time of delivery**, regardless of when the webhook event was originally emitted.
</Info>

## Securing Webhooks

To ensure the security of your webhooks, always validate the payloads and use HTTPS.

### Verifying Signatures

Each webhook request includes a `webhook-signature` header, an HMAC SHA256 signature of the webhook payload and timestamp, signed with your secret key.

#### SDK verification (recommended)

All official SDKs include built‑in helpers to securely validate and parse incoming webhooks. Two methods are available:

* `unwrap()`: Verifies signatures using your webhook secret key
* `unsafe_unwrap()`: Parses payloads without verification

<Tip>
  Provide your webhook secret via `DODO_PAYMENTS_WEBHOOK_KEY` when initializing the Dodo Payments client.
</Tip>

#### Manual verification (alternative)

If you are not using an SDK, you can verify signatures yourself following the Standard Webhooks spec:

1. Build the signed message by concatenating `webhook-id`, `webhook-timestamp`, and the exact raw stringified `payload`, separated by periods (`.`).
2. Compute the HMAC SHA256 of that string using your webhook secret key from the Dashboard.
3. Compare the computed signature to the `webhook-signature` header. If they match, the webhook is authentic.

<Info>
  We follow the Standard Webhooks specification. You can use their libraries to verify signatures: [https://github.com/standard-webhooks/standard-webhooks/tree/main/libraries](https://github.com/standard-webhooks/standard-webhooks/tree/main/libraries). For event payload formats, see the [Webhook Payload](/developer-resources/webhooks/intents/payment).
</Info>

### Responding to Webhooks

* Your webhook handler must return a `2xx status code` to acknowledge receipt of the event.
* Any other response will be treated as a failure, and the webhook will be retried.

### Best Practices

<AccordionGroup>
  <Accordion title="Use HTTPS endpoints only" icon="lock">
    Always use HTTPS URLs for webhook endpoints. HTTP endpoints are vulnerable to man-in-the-middle attacks and expose your webhook data.
  </Accordion>

  <Accordion title="Respond immediately" icon="bolt">
    Return a `200` status code immediately upon receiving the webhook. Process the event asynchronously to avoid timeouts.

    ```javascript  theme={null}
    app.post('/webhook', async (req, res) => {
      // Acknowledge receipt immediately
      res.status(200).json({ received: true });
      
      // Process asynchronously
      processWebhookAsync(req.body).catch(console.error);
    });
    ```
  </Accordion>

  <Accordion title="Handle duplicate events" icon="rotate">
    Implement idempotency using the `webhook-id` header to safely process the same event multiple times without side effects.
  </Accordion>

  <Accordion title="Secure your webhook secret" icon="key">
    Store your webhook secret securely using environment variables or a secrets manager. Never commit secrets to version control.
  </Accordion>
</AccordionGroup>

## Webhook Payload Structure

Understanding the webhook payload structure helps you parse and process events correctly.

### Request Format

```http  theme={null}
POST /your-webhook-url
Content-Type: application/json
```

### Headers

<ParamField header="webhook-id" type="string" required>
  Unique identifier for this webhook event. Use this for idempotency checks.
</ParamField>

<ParamField header="webhook-signature" type="string" required>
  HMAC SHA256 signature for verifying the webhook authenticity.
</ParamField>

<ParamField header="webhook-timestamp" type="string" required>
  Unix timestamp (in seconds) when the webhook was sent.
</ParamField>

### Request Body

<ResponseField name="business_id" type="string" required>
  Your Dodo Payments business identifier.
</ResponseField>

<ResponseField name="type" type="string" required>
  Event type that triggered this webhook (e.g., `payment.succeeded`, `subscription.created`).
</ResponseField>

<ResponseField name="timestamp" type="string" required>
  ISO 8601 formatted timestamp of when the event occurred.
</ResponseField>

<ResponseField name="data" type="object" required>
  Event-specific payload containing detailed information about the event.

  <Expandable title="Data object properties">
    <ResponseField name="payload_type" type="string">
      Type of resource: `Payment`, `Subscription`, `Refund`, `Dispute`, or `LicenseKey`.
    </ResponseField>

    Additional fields vary by event type. See the event-specific documentation for complete schemas.
  </Expandable>
</ResponseField>

### Example Payload

```json  theme={null}
{
  "business_id": "string",
  "type": "payment.succeeded | payment.failed |...",
  "timestamp": "2024-01-01T12:00:00Z",
  "data": {
    "payload_type": "Payment | Subscription | Refund | Dispute | LicenseKey",
    // ... event-specific fields (see below)
  }
}
```

<CardGroup cols={2}>
  <Card title="Event Types" icon="list" href="/developer-resources/webhooks/intents/webhook-events-guide">
    Browse all available webhook event types
  </Card>

  <Card title="Event Payloads" icon="code" href="/developer-resources/webhooks/intents/payment">
    View detailed payload schemas for each event
  </Card>
</CardGroup>

## Testing Webhooks

You can test your webhook integration directly from the Dodo Payments dashboard to ensure your endpoint is working correctly before going live.

<Frame>
  <img src="https://mintcdn.com/dodopayments/BHDbjXQkGsSXJEiK/images/webhooks/endpoints.png?fit=max&auto=format&n=BHDbjXQkGsSXJEiK&q=85&s=b0dfd4a19af0d5b7163c15728e215e89" alt="Endpoint Details" data-og-width="2880" width="2880" data-og-height="1576" height="1576" data-path="images/webhooks/endpoints.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/BHDbjXQkGsSXJEiK/images/webhooks/endpoints.png?w=280&fit=max&auto=format&n=BHDbjXQkGsSXJEiK&q=85&s=7aed11a1fbfb9a70415bd344d9482413 280w, https://mintcdn.com/dodopayments/BHDbjXQkGsSXJEiK/images/webhooks/endpoints.png?w=560&fit=max&auto=format&n=BHDbjXQkGsSXJEiK&q=85&s=dce335811476847a18399c246549a95f 560w, https://mintcdn.com/dodopayments/BHDbjXQkGsSXJEiK/images/webhooks/endpoints.png?w=840&fit=max&auto=format&n=BHDbjXQkGsSXJEiK&q=85&s=329b38c8f03671888b24e448be5d270f 840w, https://mintcdn.com/dodopayments/BHDbjXQkGsSXJEiK/images/webhooks/endpoints.png?w=1100&fit=max&auto=format&n=BHDbjXQkGsSXJEiK&q=85&s=4e2425a1165edbe24b23326cd3f06d9f 1100w, https://mintcdn.com/dodopayments/BHDbjXQkGsSXJEiK/images/webhooks/endpoints.png?w=1650&fit=max&auto=format&n=BHDbjXQkGsSXJEiK&q=85&s=9d48ad24ab915cd879bb802a98b4d2c6 1650w, https://mintcdn.com/dodopayments/BHDbjXQkGsSXJEiK/images/webhooks/endpoints.png?w=2500&fit=max&auto=format&n=BHDbjXQkGsSXJEiK&q=85&s=9592db9397b85880483109a0af195e7e 2500w" />
</Frame>

### Accessing the Testing Interface

<Steps>
  <Step title="Navigate to Webhooks">
    Go to your Dodo Payments Dashboard and navigate to `Settings > Webhooks`.
  </Step>

  <Step title="Select Your Endpoint">
    Click on your webhook endpoint to access its details page.
  </Step>

  <Step title="Open Testing Tab">
    Click on the **Testing** tab to access the webhook testing interface.
  </Step>
</Steps>

### Testing Your Webhook

The testing interface provides a comprehensive way to test your webhook endpoint:

<Steps>
  <Step title="Select Event Type">
    Use the dropdown menu to select the specific event type you want to test (e.g., `payment.succeeded`, `payment.failed`, etc.).

    <Info>
      The dropdown contains all available webhook event types that your endpoint can receive.
    </Info>
  </Step>

  <Step title="Review Schema and Example">
    The interface displays both the **Schema** (data structure) and **Example** (sample payload) for the selected event type.
  </Step>

  <Step title="Send Test Event">
    Click the **Send Example** button to send a test webhook to your endpoint.

    <Warning>
      **Important**: Failed messages sent through the testing interface will not be retried. This is for testing purposes only.
    </Warning>
  </Step>
</Steps>

### Verifying Your Test

<Steps>
  <Step title="Check Your Endpoint">
    Monitor your webhook endpoint logs to confirm the test event was received.
  </Step>

  <Step title="Verify Signature">
    Ensure your signature verification is working correctly with the test payload.
  </Step>

  <Step title="Test Response">
    Confirm your endpoint returns a `2xx` status code to acknowledge receipt.
  </Step>
</Steps>

### Implementation Example

Here's a complete Express.js implementation showing webhook verification and handling:

<CodeGroup>
  ```typescript Express.js Webhook Handler theme={null}
  import { Webhook } from "standardwebhooks";
  import express from "express";

  const app = express();
  app.use(express.json());

  const webhook = new Webhook(process.env.DODO_WEBHOOK_SECRET);

  app.post('/webhook/dodo-payments', async (req, res) => {
    try {
      // Extract webhook headers
      const webhookHeaders = {
        "webhook-id": req.headers["webhook-id"] as string,
        "webhook-signature": req.headers["webhook-signature"] as string,
        "webhook-timestamp": req.headers["webhook-timestamp"] as string,
      };

      // Verify the webhook signature
      const payload = JSON.stringify(req.body);
      await webhook.verify(payload, webhookHeaders);
      
      // Acknowledge receipt immediately
      res.status(200).json({ received: true });
      
      // Process webhook asynchronously
      processWebhookAsync(req.body).catch(console.error);
      
    } catch (error) {
      console.error('Webhook verification failed:', error);
      res.status(400).json({ error: 'Invalid signature' });
    }
  });

  async function processWebhookAsync(data: any) {
    // Handle the webhook event based on type
    switch (data.type) {
      case 'payment.succeeded':
        await handlePaymentSucceeded(data);
        break;
      case 'subscription.created':
        await handleSubscriptionCreated(data);
        break;
      // Add more event handlers...
    }
  }
  ```

  ```javascript Testing Webhooks Locally theme={null}
  const { Webhook } = require("standardwebhooks");
  const axios = require("axios");
  const crypto = require("crypto");

  // Generate test webhook
  const timestamp = new Date();
  const webhookId = crypto.randomUUID();
  const payload = {
    business_id: "biz_test123",
    type: "payment.succeeded",
    timestamp: timestamp.toISOString(),
    data: {
      payload_type: "Payment",
      payment_id: "pay_test456",
      amount: 2999
    }
  };

  // Sign the payload
  const webhookSecret = process.env.DODO_WEBHOOK_SECRET;
  const webhookInstance = new Webhook(webhookSecret);
  const payloadString = JSON.stringify(payload);
  const signature = webhookInstance.sign(webhookId, timestamp, payloadString);

  // Send test webhook
  const response = await axios.post('http://localhost:3000/webhook/dodo-payments', payload, {
    headers: {
      "webhook-id": webhookId,
      "webhook-timestamp": Math.floor(timestamp.getTime() / 1000),
      "webhook-signature": signature,
      "Content-Type": "application/json"
    }
  });

  console.log("Test webhook sent successfully:", response.data);
  ```
</CodeGroup>

<Tip>
  Test your webhook handler thoroughly using the dashboard testing interface before processing production events. This helps identify and fix issues early.
</Tip>

## Advanced Settings

The Advanced Settings tab provides additional configuration options for fine-tuning your webhook endpoint behavior.

### Rate Limiting (Throttling)

Control the rate at which webhook events are delivered to your endpoint to prevent overwhelming your system.

<Steps>
  <Step title="Access Rate Limit Settings">
    In the **Advanced** tab, locate the "Rate Limit (throttling)" section.
  </Step>

  <Step title="Configure Rate Limit">
    Click the **Edit** button to modify the rate limit settings.

    <Info>
      By default, webhooks have "No rate limit" applied, meaning events are delivered as soon as they occur.
    </Info>
  </Step>

  <Step title="Set Limits">
    Configure your desired rate limit to control webhook delivery frequency and prevent system overload.
  </Step>
</Steps>

<Tip>
  Use rate limiting when your webhook handler needs time to process events or when you want to batch multiple events together.
</Tip>

### Custom Headers

Add custom HTTP headers to all webhook requests sent to your endpoint. This is useful for authentication, routing, or adding metadata to your webhook requests.

<Steps>
  <Step title="Add Custom Header">
    In the "Custom Headers" section, enter a **Key** and **Value** for your custom header.
  </Step>

  <Step title="Add Multiple Headers">
    Click the **+** button to add additional custom headers as needed.
  </Step>

  <Step title="Save Configuration">
    Your custom headers will be included in all webhook requests to this endpoint.
  </Step>
</Steps>

### Transformations

Transformations allow you to modify a webhook's payload and redirect it to a different URL. This powerful feature enables you to:

* Modify the payload structure before processing
* Route webhooks to different endpoints based on content
* Add or remove fields from the payload
* Transform data formats

<Steps>
  <Step title="Enable Transformations">
    Toggle the **Enabled** switch to activate the transformation feature.
  </Step>

  <Step title="Configure Transformation">
    Click **Edit transformation** to define your transformation rules.

    <Info>
      You can use JavaScript to transform the webhook payload and specify a different target URL.
    </Info>
  </Step>

  <Step title="Test Transformation">
    Use the testing interface to verify your transformation works correctly before going live.
  </Step>
</Steps>

<Warning>
  Transformations can significantly impact webhook delivery performance. Test thoroughly and keep transformation logic simple and efficient.
</Warning>

<Tip>
  Transformations are particularly useful for:

  * Converting between different data formats
  * Filtering events based on specific criteria
  * Adding computed fields to the payload
  * Routing events to different microservices
</Tip>

## Monitoring Webhook Logs

The Logs tab provides comprehensive visibility into your webhook delivery status, allowing you to monitor, debug, and manage webhook events effectively.

<Frame>
  <img src="https://mintcdn.com/dodopayments/BHDbjXQkGsSXJEiK/images/webhooks/logs.png?fit=max&auto=format&n=BHDbjXQkGsSXJEiK&q=85&s=97555b00a8ed1ca89ae1246a987f853f" alt="Logs" data-og-width="2880" width="2880" data-og-height="1576" height="1576" data-path="images/webhooks/logs.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/BHDbjXQkGsSXJEiK/images/webhooks/logs.png?w=280&fit=max&auto=format&n=BHDbjXQkGsSXJEiK&q=85&s=09ead56bfe74ebb19dd8d2c5ce1e162e 280w, https://mintcdn.com/dodopayments/BHDbjXQkGsSXJEiK/images/webhooks/logs.png?w=560&fit=max&auto=format&n=BHDbjXQkGsSXJEiK&q=85&s=9ce2f0fdc740b8a190d4841d6cbe94c7 560w, https://mintcdn.com/dodopayments/BHDbjXQkGsSXJEiK/images/webhooks/logs.png?w=840&fit=max&auto=format&n=BHDbjXQkGsSXJEiK&q=85&s=1e3a2027a6540fc0b797698251eae1fd 840w, https://mintcdn.com/dodopayments/BHDbjXQkGsSXJEiK/images/webhooks/logs.png?w=1100&fit=max&auto=format&n=BHDbjXQkGsSXJEiK&q=85&s=a924fa13f129698934e910a6fcccbe7c 1100w, https://mintcdn.com/dodopayments/BHDbjXQkGsSXJEiK/images/webhooks/logs.png?w=1650&fit=max&auto=format&n=BHDbjXQkGsSXJEiK&q=85&s=ef12fd2a486b09ca3a3d4f3d5676dadb 1650w, https://mintcdn.com/dodopayments/BHDbjXQkGsSXJEiK/images/webhooks/logs.png?w=2500&fit=max&auto=format&n=BHDbjXQkGsSXJEiK&q=85&s=85805e3d15023ce66914a5e449158dac 2500w" />
</Frame>

## Activity Monitoring

The Activity tab provides real-time insights into your webhook delivery performance with visual analytics.

<Frame>
  <img src="https://mintcdn.com/dodopayments/kDL9h03D3wN164Ru/images/webhooks/activity.png?fit=max&auto=format&n=kDL9h03D3wN164Ru&q=85&s=7958b2bdfa5d516cca3bb263ae6a1ef5" alt="Activity" data-og-width="2876" width="2876" data-og-height="1570" height="1570" data-path="images/webhooks/activity.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/kDL9h03D3wN164Ru/images/webhooks/activity.png?w=280&fit=max&auto=format&n=kDL9h03D3wN164Ru&q=85&s=af6ec67849508a8d38b5e67308802ee4 280w, https://mintcdn.com/dodopayments/kDL9h03D3wN164Ru/images/webhooks/activity.png?w=560&fit=max&auto=format&n=kDL9h03D3wN164Ru&q=85&s=9e716f2609b1e0cc749cefb01e690ec5 560w, https://mintcdn.com/dodopayments/kDL9h03D3wN164Ru/images/webhooks/activity.png?w=840&fit=max&auto=format&n=kDL9h03D3wN164Ru&q=85&s=6a84a454e6e856138665828bf56b8b1e 840w, https://mintcdn.com/dodopayments/kDL9h03D3wN164Ru/images/webhooks/activity.png?w=1100&fit=max&auto=format&n=kDL9h03D3wN164Ru&q=85&s=d731f882c298b6d6e5b7707ee116c76b 1100w, https://mintcdn.com/dodopayments/kDL9h03D3wN164Ru/images/webhooks/activity.png?w=1650&fit=max&auto=format&n=kDL9h03D3wN164Ru&q=85&s=663069962158eceb1bb4f3de9519354d 1650w, https://mintcdn.com/dodopayments/kDL9h03D3wN164Ru/images/webhooks/activity.png?w=2500&fit=max&auto=format&n=kDL9h03D3wN164Ru&q=85&s=41a4079e8698e0903b262f85eca5e543 2500w" />
</Frame>

## Deploy to Cloud Platforms

Ready to deploy your webhook handler to production? We provide platform-specific guides to help you deploy webhooks to popular cloud providers with best practices for each platform.

<CardGroup cols={2}>
  <Card title="Vercel" icon="triangle" href="/developer-resources/webhooks/examples/vercel-example">
    Deploy webhooks to Vercel with serverless functions
  </Card>

  <Card title="Cloudflare Workers" icon="cloud" href="/developer-resources/webhooks/examples/cloudflare-example">
    Run webhooks on Cloudflare's edge network
  </Card>

  <Card title="Supabase Edge Functions" icon="database" href="/developer-resources/webhooks/examples/supabase-example">
    Integrate webhooks with Supabase
  </Card>

  <Card title="Netlify Functions" icon="circle-nodes" href="/developer-resources/webhooks/examples/netlify-example">
    Deploy webhooks as Netlify serverless functions
  </Card>
</CardGroup>

<Info>
  Each platform guide includes environment setup, signature verification, and deployment steps specific to that provider.
</Info>


# Cloudflare Workers
Source: https://docs.dodopayments.com/developer-resources/webhooks/examples/cloudflare-example

Deploy DodoPayments webhooks to Cloudflare Workers

<Card title="GitHub Repository" icon="github" href="https://github.com/dodopayments/cloud-functions/tree/main/cloudflare">
  Complete source code and setup guide
</Card>

## Quick Setup

### 1. Prerequisites

* [Cloudflare account](https://dash.cloudflare.com/sign-up)
* [Neon database](https://neon.tech) account
* DodoPayments API key and webhook key from [dashboard](https://app.dodopayments.com/)

### 2. Install & Deploy

```bash  theme={null}
npm install -g wrangler
wrangler login
git clone https://github.com/dodopayments/cloud-functions.git
cd cloud-functions/cloudflare
npm install
```

### 3. Database Setup

1. Sign up for [Neon](https://neon.tech)
2. Create a new project
3. Open the SQL Editor
4. Copy and paste the contents of [`schema.sql`](#database-schema)
5. Run the query
6. Get your connection string from Neon → Connection Details

### 4. Configure Secrets

```bash  theme={null}
# Set your Neon database URL
wrangler secret put DATABASE_URL

# Set your API key
wrangler secret put DODO_PAYMENTS_API_KEY

# Set your webhook signing key
wrangler secret put DODO_PAYMENTS_WEBHOOK_KEY
```

### 5. Update wrangler.toml

Edit `wrangler.toml` and set your worker name:

```toml  theme={null}
name = "my-dodo-webhook"
```

### 6. Deploy

```bash  theme={null}
npm run deploy
```

**Webhook URL:** `https://[worker-name].[subdomain].workers.dev`

## What It Does

Processes subscription events and stores them in PostgreSQL:

* **subscription.active** - Creates/updates customer and subscription records
* **subscription.cancelled** - Marks subscription as cancelled
* **subscription.renewed** - Updates next billing date

## Key Features

✅ **Signature verification** - Using the dodopayments library\
✅ **Idempotency** - Prevents duplicate processing with webhook IDs\
✅ **Event logging** - Complete audit trail in `webhook_events` table\
✅ **Error handling** - Logged and retryable

## Configuration Files

<CodeGroup>
  ```json package.json theme={null}
  {
    "name": "dodo-webhook-cloudflare",
    "version": "1.0.0",
    "type": "module",
    "description": "DodoPayments Webhook Handler for Cloudflare Workers",
    "main": "worker.ts",
    "scripts": {
      "dev": "wrangler dev",
      "deploy": "wrangler deploy",
      "tail": "wrangler tail"
    },
    "dependencies": {
      "@neondatabase/serverless": "^1.0.2",
      "dodopayments": "^2.4.1"
    },
    "devDependencies": {
      "@cloudflare/workers-types": "^4.0.0",
      "typescript": "^5.9.3",
      "wrangler": "^4.43.0"
    }
  }
  ```

  ```toml wrangler.toml expandable theme={null}
  # Cloudflare Workers Configuration
  name = "dodo-webhook"
  main = "worker.ts"
  compatibility_date = "2025-10-20"

  [observability]
  [observability.logs]
  enabled = true
  head_sampling_rate = 1
  invocation_logs = true
  persist = true
  ```

  ```json tsconfig.json theme={null}
  {
    "compilerOptions": {
      "target": "ES2022",
      "module": "ES2022",
      "lib": ["ES2022"],
      "moduleResolution": "bundler",
      "types": ["@cloudflare/workers-types"],
      "esModuleInterop": true,
      "strict": true,
      "skipLibCheck": true,
      "resolveJsonModule": true,
      "allowSyntheticDefaultImports": true,
      "forceConsistentCasingInFileNames": true,
      "isolatedModules": true
    },
    "include": ["*.ts"],
    "exclude": ["node_modules"]
  }
  ```
</CodeGroup>

## Database Schema

<CodeGroup>
  ```sql schema.sql expandable theme={null}
  -- DodoPayments Webhook Database Schema
  -- Compatible with PostgreSQL (Supabase, Neon, etc.)

  -- Enable UUID extension (if not already enabled)
  CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

  -- Customers table
  CREATE TABLE IF NOT EXISTS customers (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    email TEXT NOT NULL,
    name TEXT,
    dodo_customer_id TEXT UNIQUE NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
  );

  -- Subscriptions table
  CREATE TABLE IF NOT EXISTS subscriptions (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    customer_id UUID NOT NULL REFERENCES customers(id) ON DELETE CASCADE,
    dodo_subscription_id TEXT UNIQUE NOT NULL,
    product_id TEXT NOT NULL,
    status TEXT NOT NULL CHECK (status IN ('pending', 'active', 'cancelled', 'expired', 'paused')),
    billing_interval TEXT CHECK (billing_interval IN ('day', 'week', 'month', 'year')),
    amount NUMERIC(10, 2),
    currency TEXT DEFAULT 'USD',
    next_billing_date TIMESTAMP WITH TIME ZONE,
    cancelled_at TIMESTAMP WITH TIME ZONE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
  );

  -- Webhook events log
  CREATE TABLE IF NOT EXISTS webhook_events (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    webhook_id TEXT UNIQUE,
    event_type TEXT NOT NULL,
    data JSONB NOT NULL,
    processed BOOLEAN DEFAULT FALSE,
    error_message TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    processed_at TIMESTAMP WITH TIME ZONE,
    attempts INTEGER DEFAULT 0
  );

  -- Indexes for better query performance
  CREATE INDEX IF NOT EXISTS idx_customers_email ON customers(email);
  CREATE INDEX IF NOT EXISTS idx_customers_dodo_id ON customers(dodo_customer_id);
  CREATE INDEX IF NOT EXISTS idx_subscriptions_dodo_id ON subscriptions(dodo_subscription_id);
  CREATE INDEX IF NOT EXISTS idx_subscriptions_customer_id ON subscriptions(customer_id);
  CREATE INDEX IF NOT EXISTS idx_subscriptions_status ON subscriptions(status);
  CREATE INDEX IF NOT EXISTS idx_webhook_events_processed ON webhook_events(processed, created_at);
  CREATE INDEX IF NOT EXISTS idx_webhook_events_type ON webhook_events(event_type);
  CREATE INDEX IF NOT EXISTS idx_webhook_events_created_at ON webhook_events(created_at DESC);
  CREATE INDEX IF NOT EXISTS idx_webhook_events_webhook_id ON webhook_events(webhook_id);

  -- Function to automatically update updated_at timestamp
  CREATE OR REPLACE FUNCTION update_updated_at_column()
  RETURNS TRIGGER AS $$
  BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
  END;
  $$ LANGUAGE plpgsql;

  -- Triggers to automatically update updated_at
  CREATE TRIGGER update_customers_updated_at
    BEFORE UPDATE ON customers
    FOR EACH ROW
    EXECUTE FUNCTION update_updated_at_column();

  CREATE TRIGGER update_subscriptions_updated_at
    BEFORE UPDATE ON subscriptions
    FOR EACH ROW
    EXECUTE FUNCTION update_updated_at_column();

  -- Comments for documentation
  COMMENT ON TABLE customers IS 'Stores customer information from DodoPayments';
  COMMENT ON TABLE subscriptions IS 'Stores subscription data from DodoPayments';
  COMMENT ON TABLE webhook_events IS 'Logs all incoming webhook events for audit and retry purposes';

  COMMENT ON COLUMN customers.dodo_customer_id IS 'Unique customer ID from DodoPayments';
  COMMENT ON COLUMN subscriptions.dodo_subscription_id IS 'Unique subscription ID from DodoPayments';
  COMMENT ON COLUMN webhook_events.attempts IS 'Number of processing attempts for failed webhooks';
  COMMENT ON COLUMN webhook_events.data IS 'Full webhook payload as JSON';
  ```
</CodeGroup>

**Tables created:**

* **customers** - Email, name, dodo\_customer\_id
* **subscriptions** - Status, amount, next\_billing\_date, linked to customers
* **webhook\_events** - Event log with webhook\_id for idempotency

## Implementation Code

<CodeGroup>
  ```typescript worker.ts expandable theme={null}
  import { DodoPayments } from 'dodopayments';
  import { neon, NeonQueryFunction } from '@neondatabase/serverless';

  interface Env {
    DATABASE_URL: string;
    DODO_PAYMENTS_API_KEY: string;
    DODO_PAYMENTS_WEBHOOK_KEY: string;
  }

  interface WebhookPayload {
    business_id: string;
    type: string;
    timestamp: string;
    data: {
      payload_type: "Subscription" | "Refund" | "Dispute" | "LicenseKey";
      subscription_id?: string;
      customer: {
        customer_id: string;
        email: string;
        name: string;
      };
      product_id?: string;
      status?: string;
      recurring_pre_tax_amount?: number;
      payment_frequency_interval?: string;
      next_billing_date?: string;
      cancelled_at?: string;
      currency?: string;
    };
  }

  const corsHeaders = {
    'Access-Control-Allow-Origin': '*',
    'Access-Control-Allow-Headers': 'authorization, x-client-info, apikey, content-type, webhook-id, webhook-signature, webhook-timestamp',
    'Access-Control-Allow-Methods': 'POST, OPTIONS',
  };

  async function handleSubscriptionEvent(sql: NeonQueryFunction<false, false>, payload: WebhookPayload, status: string) {
    if (!payload.data.customer.customer_id || !payload.data.subscription_id) {
      throw new Error('Missing required fields: customer_id or subscription_id');
    }

    console.log('🔄 Processing subscription event:', JSON.stringify(payload, null, 2));

    const customer = payload.data.customer;

    // Upsert customer (create if doesn't exist, otherwise use existing)
    const customerResult = await sql`
      INSERT INTO customers (email, name, dodo_customer_id, created_at)
      VALUES (${customer.email}, ${customer.name || customer.email}, ${customer.customer_id}, ${new Date().toISOString()})
      ON CONFLICT (dodo_customer_id) 
      DO UPDATE SET 
        email = EXCLUDED.email,
        name = EXCLUDED.name,
        updated_at = ${new Date().toISOString()}
      RETURNING id
    `;

    const customerId = customerResult[0].id;
    console.log(`✅ Customer upserted with ID: ${customerId}`);

    // Upsert subscription
    await sql`
      INSERT INTO subscriptions (
        customer_id, dodo_subscription_id, product_id, status, 
        billing_interval, amount, currency, next_billing_date, cancelled_at, updated_at
      )
      VALUES (
        ${customerId}, ${payload.data.subscription_id},
        ${payload.data.product_id || 'unknown'}, ${status},
        ${payload.data.payment_frequency_interval?.toLowerCase() || 'month'}, ${payload.data.recurring_pre_tax_amount || 0},
        ${payload.data.currency || 'USD'}, ${payload.data.next_billing_date || null},
        ${payload.data.cancelled_at || null}, ${new Date().toISOString()}
      )
      ON CONFLICT (dodo_subscription_id) 
      DO UPDATE SET 
        customer_id = EXCLUDED.customer_id,
        product_id = EXCLUDED.product_id,
        status = EXCLUDED.status,
        billing_interval = EXCLUDED.billing_interval,
        amount = EXCLUDED.amount,
        currency = EXCLUDED.currency,
        next_billing_date = EXCLUDED.next_billing_date,
        cancelled_at = EXCLUDED.cancelled_at,
        updated_at = EXCLUDED.updated_at
    `;

    console.log(`✅ Subscription upserted with ${status} status`)
  }

  export default {
    async fetch(request: Request, env: Env): Promise<Response> {
      // Handle CORS preflight
      if (request.method === 'OPTIONS') {
        return new Response('ok', { headers: corsHeaders });
      }

      if (request.method !== 'POST') {
        return new Response(JSON.stringify({ error: 'Method not allowed' }), {
          status: 405,
          headers: { ...corsHeaders, 'Content-Type': 'application/json' }
        });
      }

      try {
        const rawBody = await request.text();
        console.log('📨 Webhook received');

        // Verify required environment variables
        if (!env.DODO_PAYMENTS_API_KEY) {
          console.error('❌ DODO_PAYMENTS_API_KEY is not configured');
          return new Response(
            JSON.stringify({ error: 'API key not configured' }),
            { status: 500, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }
          );
        }

        // Verify webhook signature (required for security)
        if (!env.DODO_PAYMENTS_WEBHOOK_KEY) {
          console.error('❌ DODO_PAYMENTS_WEBHOOK_KEY is not configured');
          return new Response(
            JSON.stringify({ error: 'Webhook verification key not configured' }),
            { status: 500, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }
          );
        }

        if (!env.DATABASE_URL) {
          console.error('❌ DATABASE_URL is not configured');
          return new Response(
            JSON.stringify({ error: 'Database URL not configured' }),
            { status: 500, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }
          );
        }

        const webhookHeaders = {
          'webhook-id': request.headers.get('webhook-id') || '',
          'webhook-signature': request.headers.get('webhook-signature') || '',
          'webhook-timestamp': request.headers.get('webhook-timestamp') || '',
        };

        try {
          const dodoPaymentsClient = new DodoPayments({
            bearerToken: env.DODO_PAYMENTS_API_KEY,
            webhookKey: env.DODO_PAYMENTS_WEBHOOK_KEY,
          });
          const unwrappedWebhook = dodoPaymentsClient.webhooks.unwrap(rawBody, {headers: webhookHeaders});
          console.log('Unwrapped webhook:', unwrappedWebhook);
          console.log('✅ Webhook signature verified');
        } catch (error) {
          console.error('❌ Webhook verification failed:', error);
          return new Response(
            JSON.stringify({ error: 'Webhook verification failed' }),
            { status: 401, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }
          );
        }

        // Initialize Neon client
        const sql = neon(env.DATABASE_URL);

        const payload: WebhookPayload = JSON.parse(rawBody);
        const eventType = payload.type;
        const eventData = payload.data;
        const webhookId = request.headers.get('webhook-id') || '';

        console.log(`📋 Webhook payload:`, JSON.stringify(payload, null, 2));

        // Check for duplicate webhook-id (idempotency)
        if (webhookId) {
          const existingEvent = await sql`
            SELECT id FROM webhook_events WHERE webhook_id = ${webhookId}
          `;

          if (existingEvent.length > 0) {
            console.log(`⚠️ Webhook ${webhookId} already processed, skipping (idempotency)`);
            return new Response(
              JSON.stringify({ success: true, message: 'Webhook already processed' }),
              { status: 200, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }
            );
          }
        }

        // Log webhook event with webhook_id for idempotency
        const logResult = await sql`
          INSERT INTO webhook_events (webhook_id, event_type, data, processed, created_at)
          VALUES (${webhookId || null}, ${eventType}, ${JSON.stringify(eventData)}, ${false}, ${new Date().toISOString()})
          RETURNING id
        `;

        const loggedEventId = logResult[0].id;
        console.log('📝 Webhook event logged with ID:', loggedEventId);

        console.log(`🔄 Processing: ${eventType} (${eventData.payload_type || 'unknown payload type'})`);

        try {
          switch (eventType) {
            case 'subscription.active':
              await handleSubscriptionEvent(sql, payload, 'active');
              break;
            case 'subscription.cancelled':
              await handleSubscriptionEvent(sql, payload, 'cancelled');
              break;
            case 'subscription.renewed':
              console.log('🔄 Subscription renewed - keeping active status and updating billing date');
              await handleSubscriptionEvent(sql, payload, 'active');
              break;
            default:
              console.log(`ℹ️ Event ${eventType} logged but not processed (no handler available)`);
          }

          await sql`
            UPDATE webhook_events 
            SET processed = ${true}, processed_at = ${new Date().toISOString()}
            WHERE id = ${loggedEventId}
          `;

          console.log('✅ Webhook marked as processed');
        } catch (processingError) {
          console.error('❌ Error processing webhook event:', processingError);

          await sql`
            UPDATE webhook_events 
            SET processed = ${false}, 
                error_message = ${processingError instanceof Error ? processingError.message : 'Unknown error'},
                processed_at = ${new Date().toISOString()}
            WHERE id = ${loggedEventId}
          `;

          throw processingError;
        }

        console.log('✅ Webhook processed successfully');

        return new Response(
          JSON.stringify({
            success: true,
            event_type: eventType,
            event_id: loggedEventId
          }),
          { status: 200, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }
        );

      } catch (error) {
        console.error('❌ Webhook processing failed:', error);
        return new Response(
          JSON.stringify({
            error: 'Webhook processing failed',
            details: error instanceof Error ? error.message : 'Unknown error'
          }),
          { status: 500, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }
        );
      }
    }
  };
  ```
</CodeGroup>

## How It Works

The webhook handler:

1. **Verifies the signature** - Ensures the request is from DodoPayments using HMAC-SHA256
2. **Checks for duplicates** - Uses webhook ID to prevent processing the same event twice
3. **Logs the event** - Stores raw webhook in `webhook_events` table for audit trail
4. **Processes the event** - Creates or updates customers and subscriptions
5. **Handles errors** - Logs failures and marks event as unprocessed for retry

## Testing

**Local development:**

```bash  theme={null}
npm run dev  # Available at http://localhost:8787
```

**Configure in DodoPayments Dashboard:**

1. Go to Developers → Webhooks
2. Add endpoint with your Worker URL
3. Enable: subscription.active, subscription.cancelled, subscription.renewed

## Common Issues

| Issue                     | Solution                                                 |
| ------------------------- | -------------------------------------------------------- |
| Verification failed       | Check webhook key is correct from DodoPayments dashboard |
| Database connection error | Verify Neon connection string                            |
| Worker not deploying      | Run `npm install`, check `wrangler.toml` syntax          |

## Resources

* [Cloudflare Workers Docs](https://developers.cloudflare.com/workers/)
* [Neon Docs](https://neon.tech/docs/)
* [Webhook Events Guide](/developer-resources/webhooks/intents/webhook-events-guide)
* [GitHub Repo](https://github.com/dodopayments/cloud-functions/tree/main/cloudflare)


# Netlify Functions
Source: https://docs.dodopayments.com/developer-resources/webhooks/examples/netlify-example

Deploy DodoPayments webhooks to Netlify Functions

<Card title="GitHub Repository" icon="github" href="https://github.com/dodopayments/cloud-functions/tree/main/netlify">
  Complete source code and setup guide
</Card>

## Quick Setup

### 1. Prerequisites

* [Netlify account](https://app.netlify.com/signup)
* [Neon database](https://neon.tech) account
* DodoPayments API key and webhook key from [dashboard](https://app.dodopayments.com/)

### 2. Install & Deploy

```bash  theme={null}
npm install -g netlify-cli
netlify login
git clone https://github.com/dodopayments/cloud-functions.git
cd cloud-functions/netlify
npm install
```

### 3. Database Setup

1. Sign up for [Neon](https://neon.tech)
2. Create a new project
3. Open the SQL Editor
4. Copy and paste the contents of [`schema.sql`](#database-schema)
5. Run the query
6. Get your connection string from Neon → Connection Details

### 4. Set Environment Variables

```bash  theme={null}
netlify env:set DATABASE_URL "your-neon-connection-string"
netlify env:set DODO_PAYMENTS_API_KEY "your-api-key"
netlify env:set DODO_PAYMENTS_WEBHOOK_KEY "your-webhook-key"
```

Or set them in [Netlify Dashboard](https://app.netlify.com) → Site Settings → Environment Variables

### 5. Initialize & Deploy

```bash  theme={null}
netlify init       # Link to your site (first time only)
npm run deploy
```

**Webhook URL:** `https://[your-site].netlify.app/.netlify/functions/webhook`

## What It Does

Processes subscription events and stores them in PostgreSQL:

* **subscription.active** - Creates/updates customer and subscription records
* **subscription.cancelled** - Marks subscription as cancelled
* **subscription.renewed** - Updates next billing date

## Key Features

✅ **Signature verification** - Using the dodopayments library\
✅ **Idempotency** - Prevents duplicate processing with webhook IDs\
✅ **Event logging** - Complete audit trail in `webhook_events` table\
✅ **Error handling** - Logged and retryable

## Configuration Files

<CodeGroup>
  ```json package.json theme={null}
  {
    "name": "dodo-webhook-netlify",
    "version": "1.0.0",
    "type": "module",
    "description": "DodoPayments Webhook Handler for Netlify",
    "scripts": {
      "dev": "netlify dev",
      "deploy": "netlify deploy --prod"
    },
    "dependencies": {
      "@neondatabase/serverless": "^1.0.2",
      "dodopayments": "^2.4.1"
    },
    "devDependencies": {
      "@netlify/functions": "^5.0.0",
      "netlify-cli": "^23.9.1",
      "typescript": "^5.9.3"
    }
  }
  ```

  ```json tsconfig.json theme={null}
  {
    "compilerOptions": {
      "target": "ES2022",
      "module": "ES2022",
      "lib": ["ES2022"],
      "moduleResolution": "node",
      "esModuleInterop": true,
      "strict": true,
      "skipLibCheck": true,
      "resolveJsonModule": true,
      "allowSyntheticDefaultImports": true,
      "forceConsistentCasingInFileNames": true,
      "isolatedModules": true,
      "types": ["node"]
    },
    "include": ["functions/*.ts"],
    "exclude": ["node_modules"]
  }
  ```

  ```toml netlify.toml theme={null}
  [build]
    functions = "functions"

  [build.environment]
    NODE_VERSION = "18"

  [functions]
    # Functions will be available at /.netlify/functions/[function-name]
    directory = "functions"
  ```
</CodeGroup>

## Database Schema

<CodeGroup>
  ```sql schema.sql expandable theme={null}
  -- DodoPayments Webhook Database Schema
  -- Compatible with PostgreSQL (Supabase, Neon, etc.)

  -- Enable UUID extension (if not already enabled)
  CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

  -- Customers table
  CREATE TABLE IF NOT EXISTS customers (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    email TEXT NOT NULL,
    name TEXT,
    dodo_customer_id TEXT UNIQUE NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
  );

  -- Subscriptions table
  CREATE TABLE IF NOT EXISTS subscriptions (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    customer_id UUID NOT NULL REFERENCES customers(id) ON DELETE CASCADE,
    dodo_subscription_id TEXT UNIQUE NOT NULL,
    product_id TEXT NOT NULL,
    status TEXT NOT NULL CHECK (status IN ('pending', 'active', 'cancelled', 'expired', 'paused')),
    billing_interval TEXT CHECK (billing_interval IN ('day', 'week', 'month', 'year')),
    amount NUMERIC(10, 2),
    currency TEXT DEFAULT 'USD',
    next_billing_date TIMESTAMP WITH TIME ZONE,
    cancelled_at TIMESTAMP WITH TIME ZONE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
  );

  -- Webhook events log
  CREATE TABLE IF NOT EXISTS webhook_events (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    webhook_id TEXT UNIQUE,
    event_type TEXT NOT NULL,
    data JSONB NOT NULL,
    processed BOOLEAN DEFAULT FALSE,
    error_message TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    processed_at TIMESTAMP WITH TIME ZONE,
    attempts INTEGER DEFAULT 0
  );

  -- Indexes for better query performance
  CREATE INDEX IF NOT EXISTS idx_customers_email ON customers(email);
  CREATE INDEX IF NOT EXISTS idx_customers_dodo_id ON customers(dodo_customer_id);
  CREATE INDEX IF NOT EXISTS idx_subscriptions_dodo_id ON subscriptions(dodo_subscription_id);
  CREATE INDEX IF NOT EXISTS idx_subscriptions_customer_id ON subscriptions(customer_id);
  CREATE INDEX IF NOT EXISTS idx_subscriptions_status ON subscriptions(status);
  CREATE INDEX IF NOT EXISTS idx_webhook_events_processed ON webhook_events(processed, created_at);
  CREATE INDEX IF NOT EXISTS idx_webhook_events_type ON webhook_events(event_type);
  CREATE INDEX IF NOT EXISTS idx_webhook_events_created_at ON webhook_events(created_at DESC);
  CREATE INDEX IF NOT EXISTS idx_webhook_events_webhook_id ON webhook_events(webhook_id);

  -- Function to automatically update updated_at timestamp
  CREATE OR REPLACE FUNCTION update_updated_at_column()
  RETURNS TRIGGER AS $$
  BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
  END;
  $$ LANGUAGE plpgsql;

  -- Triggers to automatically update updated_at
  CREATE TRIGGER update_customers_updated_at
    BEFORE UPDATE ON customers
    FOR EACH ROW
    EXECUTE FUNCTION update_updated_at_column();

  CREATE TRIGGER update_subscriptions_updated_at
    BEFORE UPDATE ON subscriptions
    FOR EACH ROW
    EXECUTE FUNCTION update_updated_at_column();

  -- Comments for documentation
  COMMENT ON TABLE customers IS 'Stores customer information from DodoPayments';
  COMMENT ON TABLE subscriptions IS 'Stores subscription data from DodoPayments';
  COMMENT ON TABLE webhook_events IS 'Logs all incoming webhook events for audit and retry purposes';

  COMMENT ON COLUMN customers.dodo_customer_id IS 'Unique customer ID from DodoPayments';
  COMMENT ON COLUMN subscriptions.dodo_subscription_id IS 'Unique subscription ID from DodoPayments';
  COMMENT ON COLUMN webhook_events.attempts IS 'Number of processing attempts for failed webhooks';
  COMMENT ON COLUMN webhook_events.data IS 'Full webhook payload as JSON';
  ```
</CodeGroup>

**Tables created:**

* **customers** - Email, name, dodo\_customer\_id
* **subscriptions** - Status, amount, next\_billing\_date, linked to customers
* **webhook\_events** - Event log with webhook\_id for idempotency

## Implementation Code

<CodeGroup>
  ```typescript functions/webhook.ts expandable theme={null}
  import { Handler, HandlerEvent, HandlerContext } from '@netlify/functions';
  import { neon, NeonQueryFunction } from '@neondatabase/serverless';
  import { DodoPayments } from 'dodopayments';

  interface WebhookPayload {
    business_id: string;
    type: string;
    timestamp: string;
    data: {
      payload_type: "Subscription" | "Refund" | "Dispute" | "LicenseKey";
      subscription_id?: string;
      customer: {
        customer_id: string;
        email: string;
        name: string;
      };
      product_id?: string;
      status?: string;
      recurring_pre_tax_amount?: number;
      payment_frequency_interval?: string;
      next_billing_date?: string;
      cancelled_at?: string;
      currency?: string;
    };
  }

  const corsHeaders = {
    'Access-Control-Allow-Origin': '*',
    'Access-Control-Allow-Headers': 'authorization, x-client-info, apikey, content-type, webhook-id, webhook-signature, webhook-timestamp',
    'Access-Control-Allow-Methods': 'POST, OPTIONS',
  };

  async function handleSubscriptionEvent(sql: NeonQueryFunction<false, false>, payload: WebhookPayload, status: string) {
    if (!payload.data.customer.customer_id || !payload.data.subscription_id) {
      throw new Error('Missing required fields: customer_id or subscription_id');
    }

    console.log('🔄 Processing subscription event:', JSON.stringify(payload, null, 2));

    const customer = payload.data.customer;

    // Upsert customer (create if doesn't exist, otherwise use existing)
    const customerResult = await sql`
      INSERT INTO customers (email, name, dodo_customer_id, created_at)
      VALUES (${customer.email}, ${customer.name || customer.email}, ${customer.customer_id}, ${new Date().toISOString()})
      ON CONFLICT (dodo_customer_id) 
      DO UPDATE SET 
        email = EXCLUDED.email,
        name = EXCLUDED.name,
        updated_at = ${new Date().toISOString()}
      RETURNING id
    `;

    const customerId = customerResult[0].id;
    console.log(`✅ Customer upserted with ID: ${customerId}`);

    // Upsert subscription
    await sql`
      INSERT INTO subscriptions (
        customer_id, dodo_subscription_id, product_id, status, 
        billing_interval, amount, currency, next_billing_date, cancelled_at, updated_at
      )
      VALUES (
        ${customerId}, ${payload.data.subscription_id},
        ${payload.data.product_id || 'unknown'}, ${status},
        ${payload.data.payment_frequency_interval?.toLowerCase() || 'month'}, ${payload.data.recurring_pre_tax_amount || 0},
        ${payload.data.currency || 'USD'}, ${payload.data.next_billing_date || null},
        ${payload.data.cancelled_at || null}, ${new Date().toISOString()}
      )
      ON CONFLICT (dodo_subscription_id) 
      DO UPDATE SET 
        customer_id = EXCLUDED.customer_id,
        product_id = EXCLUDED.product_id,
        status = EXCLUDED.status,
        billing_interval = EXCLUDED.billing_interval,
        amount = EXCLUDED.amount,
        currency = EXCLUDED.currency,
        next_billing_date = EXCLUDED.next_billing_date,
        cancelled_at = EXCLUDED.cancelled_at,
        updated_at = EXCLUDED.updated_at
    `;

    console.log(`✅ Subscription upserted with ${status} status`)
  }

  export const handler: Handler = async (event: HandlerEvent, context: HandlerContext) => {
    // Handle CORS preflight
    if (event.httpMethod === 'OPTIONS') {
      return {
        statusCode: 200,
        headers: corsHeaders,
        body: 'ok'
      };
    }

    if (event.httpMethod !== 'POST') {
      return {
        statusCode: 405,
        headers: { ...corsHeaders, 'Content-Type': 'application/json' },
        body: JSON.stringify({ error: 'Method not allowed' })
      };
    }

    try {
      const rawBody = event.body || '';
      console.log('📨 Webhook received');

      const DATABASE_URL = process.env.DATABASE_URL;
      const API_KEY = process.env.DODO_PAYMENTS_API_KEY;
      const WEBHOOK_KEY = process.env.DODO_PAYMENTS_WEBHOOK_KEY;

      if (!DATABASE_URL) {
        console.error('❌ Missing DATABASE_URL environment variable');
        return {
          statusCode: 500,
          headers: { ...corsHeaders, 'Content-Type': 'application/json' },
          body: JSON.stringify({ error: 'Server configuration error' })
        };
      }

      // Verify required environment variables
      if (!API_KEY) {
        console.error('❌ DODO_PAYMENTS_API_KEY is not configured');
        return {
          statusCode: 500,
          headers: { ...corsHeaders, 'Content-Type': 'application/json' },
          body: JSON.stringify({ error: 'API key not configured' })
        };
      }

      // Verify webhook signature (required for security)
      if (!WEBHOOK_KEY) {
        console.error('❌ DODO_PAYMENTS_WEBHOOK_KEY is not configured');
        return {
          statusCode: 500,
          headers: { ...corsHeaders, 'Content-Type': 'application/json' },
          body: JSON.stringify({ error: 'Webhook verification key not configured' })
        };
      }

      const webhookHeaders = {
        'webhook-id': event.headers['webhook-id'] || '',
        'webhook-signature': event.headers['webhook-signature'] || '',
        'webhook-timestamp': event.headers['webhook-timestamp'] || '',
      };

      try {
        const dodoPaymentsClient = new DodoPayments({
          bearerToken: API_KEY,
          webhookKey: WEBHOOK_KEY,
        });
        const unwrappedWebhook = dodoPaymentsClient.webhooks.unwrap(rawBody, {headers: webhookHeaders});
        console.log('Unwrapped webhook:', unwrappedWebhook);
        console.log('✅ Webhook signature verified');
      } catch (error) {
        console.error('❌ Webhook verification failed:', error);
        return {
          statusCode: 401,
          headers: { ...corsHeaders, 'Content-Type': 'application/json' },
          body: JSON.stringify({ error: 'Webhook verification failed' })
        };
      }

      // Initialize Neon client
      const sql = neon(DATABASE_URL);

      const payload: WebhookPayload = JSON.parse(rawBody);
      const eventType = payload.type;
      const eventData = payload.data;
      const webhookId = event.headers['webhook-id'] || '';

      console.log(`📋 Webhook payload:`, JSON.stringify(payload, null, 2));

      // Check for duplicate webhook-id (idempotency)
      if (webhookId) {
        const existingEvent = await sql`
          SELECT id FROM webhook_events WHERE webhook_id = ${webhookId}
        `;

        if (existingEvent.length > 0) {
          console.log(`⚠️ Webhook ${webhookId} already processed, skipping (idempotency)`);
          return {
            statusCode: 200,
            headers: { ...corsHeaders, 'Content-Type': 'application/json' },
            body: JSON.stringify({ success: true, message: 'Webhook already processed' })
          };
        }
      }

      // Log webhook event with webhook_id for idempotency
      const logResult = await sql`
        INSERT INTO webhook_events (webhook_id, event_type, data, processed, created_at)
        VALUES (${webhookId || null}, ${eventType}, ${JSON.stringify(eventData)}, ${false}, ${new Date().toISOString()})
        RETURNING id
      `;

      const loggedEventId = logResult[0].id;
      console.log('📝 Webhook event logged with ID:', loggedEventId);

      console.log(`🔄 Processing: ${eventType} (${eventData.payload_type || 'unknown payload type'})`);

      try {
        switch (eventType) {
          case 'subscription.active':
            await handleSubscriptionEvent(sql, payload, 'active');
            break;
          case 'subscription.cancelled':
            await handleSubscriptionEvent(sql, payload, 'cancelled');
            break;
          case 'subscription.renewed':
            console.log('🔄 Subscription renewed - keeping active status and updating billing date');
            await handleSubscriptionEvent(sql, payload, 'active');
            break;
          default:
            console.log(`ℹ️ Event ${eventType} logged but not processed (no handler available)`);
        }

        await sql`
          UPDATE webhook_events 
          SET processed = ${true}, processed_at = ${new Date().toISOString()}
          WHERE id = ${loggedEventId}
        `;

        console.log('✅ Webhook marked as processed');
      } catch (processingError) {
        console.error('❌ Error processing webhook event:', processingError);

        await sql`
          UPDATE webhook_events 
          SET processed = ${false}, 
              error_message = ${processingError instanceof Error ? processingError.message : 'Unknown error'},
              processed_at = ${new Date().toISOString()}
          WHERE id = ${loggedEventId}
        `;

        throw processingError;
      }

      console.log('✅ Webhook processed successfully');

      return {
        statusCode: 200,
        headers: { ...corsHeaders, 'Content-Type': 'application/json' },
        body: JSON.stringify({
          success: true,
          event_type: eventType,
          event_id: loggedEventId
        })
      };

    } catch (error) {
      console.error('❌ Webhook processing failed:', error);
      return {
        statusCode: 500,
        headers: { ...corsHeaders, 'Content-Type': 'application/json' },
        body: JSON.stringify({
          error: 'Webhook processing failed',
          details: error instanceof Error ? error.message : 'Unknown error'
        })
      };
    }
  };
  ```
</CodeGroup>

## How It Works

The webhook handler:

1. **Verifies the signature** - Ensures the request is from DodoPayments using HMAC-SHA256
2. **Checks for duplicates** - Uses webhook ID to prevent processing the same event twice
3. **Logs the event** - Stores raw webhook in `webhook_events` table for audit trail
4. **Processes the event** - Creates or updates customers and subscriptions in Neon
5. **Handles errors** - Logs failures and marks event as unprocessed for retry

## Testing

**Local development:**

```bash  theme={null}
npm run dev  # Available at http://localhost:8888/.netlify/functions/webhook
```

**View logs in Netlify Dashboard:**

1. Select your site → **Functions** tab
2. Click on the `webhook` function
3. View real-time logs and invocation history

**Configure in DodoPayments Dashboard:**

1. Go to Developers → Webhooks
2. Add endpoint with your Netlify Functions URL
3. Enable: subscription.active, subscription.cancelled, subscription.renewed

## Common Issues

| Issue                     | Solution                                                 |
| ------------------------- | -------------------------------------------------------- |
| Verification failed       | Check webhook key is correct from DodoPayments dashboard |
| Database connection error | Verify Neon connection string and use pooled connection  |
| Function not found (404)  | Run `netlify init` and `npm run deploy` again            |
| Env vars not available    | Set variables in CLI or dashboard, then redeploy         |

## Resources

* [Netlify Functions Docs](https://docs.netlify.com/functions/overview/)
* [Netlify CLI](https://docs.netlify.com/cli/get-started/)
* [Neon Docs](https://neon.tech/docs/)
* [Webhook Events Guide](/developer-resources/webhooks/intents/webhook-events-guide)
* [GitHub Repo](https://github.com/dodopayments/cloud-functions/tree/main/netlify)


# Supabase Edge Functions
Source: https://docs.dodopayments.com/developer-resources/webhooks/examples/supabase-example

Deploy DodoPayments webhooks to Supabase Edge Functions

<Card title="GitHub Repository" icon="github" href="https://github.com/dodopayments/cloud-functions/tree/main/supabase">
  Complete source code and setup guide
</Card>

<Tip>
  <strong>Checkout the complete starter kit for supabase</strong><br />
  A minimal subscription starter kit built with Next.js, Supabase, and Dodo Payments. This boilerplate helps you quickly set up a subscription-based SaaS with authentication, payments, and webhooks.

  <a href="https://github.com/dodopayments/dodo-supabase-subscription-starter" target="_blank" rel="noopener noreferrer">
    Dodo Payments Supabase Subscription Starter
  </a>
</Tip>

## Quick Setup

### 1. Prerequisites

* [Supabase account](https://supabase.com/dashboard)
* A Supabase project created
* DodoPayments API key and webhook key from [dashboard](https://app.dodopayments.com/)

### 2. Authenticate & Link

```bash  theme={null}
npx supabase login
git clone https://github.com/dodopayments/cloud-functions.git
cd cloud-functions/supabase
npx supabase link --project-ref your-project-ref
```

Get your project ref from [Supabase Dashboard](https://supabase.com/dashboard) → Project Settings

### 3. Database Setup

1. Go to your [Supabase Dashboard](https://supabase.com/dashboard)
2. Open the SQL Editor
3. Create a new query
4. Copy and paste the entire contents of [`schema.sql`](#database-schema)
5. Run the query

### 4. Set Environment Variables

Supabase automatically provides `SUPABASE_URL` and `SUPABASE_SERVICE_ROLE_KEY` at runtime.

Set your webhook key and API key:

```bash  theme={null}
npx supabase secrets set DODO_PAYMENTS_API_KEY=your-api-key
npx supabase secrets set DODO_PAYMENTS_WEBHOOK_KEY=your-webhook-key
```

### 5. Deploy

The function is already set up in `functions/webhook/index.ts` - just deploy it:

```bash  theme={null}
npm run deploy
```

**Webhook URL:** `https://[project-ref].supabase.co/functions/v1/webhook`

## What It Does

Processes subscription events and stores them in Supabase PostgreSQL:

* **subscription.active** - Creates/updates customer and subscription records
* **subscription.cancelled** - Marks subscription as cancelled
* **subscription.renewed** - Updates next billing date

## Key Features

✅ **Signature verification** - Using the dodopayments library\
✅ **Idempotency** - Prevents duplicate processing with webhook IDs\
✅ **Event logging** - Complete audit trail in `webhook_events` table\
✅ **Error handling** - Logged and retryable

## Configuration Files

<CodeGroup>
  ```json package.json theme={null}
  {
    "name": "dodo-webhook-supabase",
    "version": "1.0.0",
    "type": "module",
    "description": "DodoPayments Webhook Handler for Supabase Edge Functions",
    "scripts": {
      "dev": "npx supabase functions serve webhook --no-verify-jwt --workdir ..",
      "deploy": "npx supabase functions deploy webhook --no-verify-jwt --workdir .."
    }
  }
  ```

  ```json tsconfig.json theme={null}
  {
    "compilerOptions": {
      "target": "ES2022",
      "module": "ES2022",
      "lib": ["ES2022", "DOM"],
      "moduleResolution": "bundler",
      "esModuleInterop": true,
      "strict": true,
      "skipLibCheck": true,
      "resolveJsonModule": true,
      "allowSyntheticDefaultImports": true,
      "forceConsistentCasingInFileNames": true,
      "isolatedModules": true
    },
    "include": ["functions/webhook/*.ts"],
    "exclude": ["node_modules"]
  }
  ```
</CodeGroup>

## Database Schema

<CodeGroup>
  ```sql schema.sql expandable theme={null}
  -- DodoPayments Webhook Database Schema
  -- Compatible with PostgreSQL (Supabase, Neon, etc.)

  -- Enable UUID extension (if not already enabled)
  CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

  -- Customers table
  CREATE TABLE IF NOT EXISTS customers (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    email TEXT NOT NULL,
    name TEXT,
    dodo_customer_id TEXT UNIQUE NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
  );

  -- Subscriptions table
  CREATE TABLE IF NOT EXISTS subscriptions (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    customer_id UUID NOT NULL REFERENCES customers(id) ON DELETE CASCADE,
    dodo_subscription_id TEXT UNIQUE NOT NULL,
    product_id TEXT NOT NULL,
    status TEXT NOT NULL CHECK (status IN ('pending', 'active', 'cancelled', 'expired', 'paused')),
    billing_interval TEXT CHECK (billing_interval IN ('day', 'week', 'month', 'year')),
    amount NUMERIC(10, 2),
    currency TEXT DEFAULT 'USD',
    next_billing_date TIMESTAMP WITH TIME ZONE,
    cancelled_at TIMESTAMP WITH TIME ZONE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
  );

  -- Webhook events log
  CREATE TABLE IF NOT EXISTS webhook_events (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    webhook_id TEXT UNIQUE,
    event_type TEXT NOT NULL,
    data JSONB NOT NULL,
    processed BOOLEAN DEFAULT FALSE,
    error_message TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    processed_at TIMESTAMP WITH TIME ZONE,
    attempts INTEGER DEFAULT 0
  );

  -- Indexes for better query performance
  CREATE INDEX IF NOT EXISTS idx_customers_email ON customers(email);
  CREATE INDEX IF NOT EXISTS idx_customers_dodo_id ON customers(dodo_customer_id);
  CREATE INDEX IF NOT EXISTS idx_subscriptions_dodo_id ON subscriptions(dodo_subscription_id);
  CREATE INDEX IF NOT EXISTS idx_subscriptions_customer_id ON subscriptions(customer_id);
  CREATE INDEX IF NOT EXISTS idx_subscriptions_status ON subscriptions(status);
  CREATE INDEX IF NOT EXISTS idx_webhook_events_processed ON webhook_events(processed, created_at);
  CREATE INDEX IF NOT EXISTS idx_webhook_events_type ON webhook_events(event_type);
  CREATE INDEX IF NOT EXISTS idx_webhook_events_created_at ON webhook_events(created_at DESC);
  CREATE INDEX IF NOT EXISTS idx_webhook_events_webhook_id ON webhook_events(webhook_id);

  -- Function to automatically update updated_at timestamp
  CREATE OR REPLACE FUNCTION update_updated_at_column()
  RETURNS TRIGGER AS $$
  BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
  END;
  $$ LANGUAGE plpgsql;

  -- Triggers to automatically update updated_at
  CREATE TRIGGER update_customers_updated_at
    BEFORE UPDATE ON customers
    FOR EACH ROW
    EXECUTE FUNCTION update_updated_at_column();

  CREATE TRIGGER update_subscriptions_updated_at
    BEFORE UPDATE ON subscriptions
    FOR EACH ROW
    EXECUTE FUNCTION update_updated_at_column();

  -- Comments for documentation
  COMMENT ON TABLE customers IS 'Stores customer information from DodoPayments';
  COMMENT ON TABLE subscriptions IS 'Stores subscription data from DodoPayments';
  COMMENT ON TABLE webhook_events IS 'Logs all incoming webhook events for audit and retry purposes';

  COMMENT ON COLUMN customers.dodo_customer_id IS 'Unique customer ID from DodoPayments';
  COMMENT ON COLUMN subscriptions.dodo_subscription_id IS 'Unique subscription ID from DodoPayments';
  COMMENT ON COLUMN webhook_events.attempts IS 'Number of processing attempts for failed webhooks';
  COMMENT ON COLUMN webhook_events.data IS 'Full webhook payload as JSON';
  ```
</CodeGroup>

**Tables created:**

* **customers** - Email, name, dodo\_customer\_id
* **subscriptions** - Status, amount, next\_billing\_date, linked to customers
* **webhook\_events** - Event log with webhook\_id for idempotency

## Implementation Code

<CodeGroup>
  ```typescript functions/webhook/index.ts expandable theme={null}
  import { serve } from 'https://deno.land/std@0.208.0/http/server.ts';
  import { createClient, SupabaseClient } from 'https://esm.sh/@supabase/supabase-js@2.38.4';
  import { DodoPayments } from 'https://esm.sh/dodopayments@2.4.1';

  export const corsHeaders = {
    'Access-Control-Allow-Origin': '*',
    'Access-Control-Allow-Headers': 'authorization, x-client-info, apikey, content-type, webhook-id, webhook-signature, webhook-timestamp',
    'Access-Control-Allow-Methods': 'POST, OPTIONS',
  };

  interface WebhookPayload {
    business_id: string;
    type: string;
    timestamp: string;
    data: {
      payload_type: "Subscription" | "Refund" | "Dispute" | "LicenseKey";
      subscription_id?: string;
      customer: {
        customer_id: string;
        email: string;
        name: string;
      };
      product_id?: string;
      status?: string;
      recurring_pre_tax_amount?: number;
      payment_frequency_interval?: string;
      next_billing_date?: string;
      cancelled_at?: string;
      currency?: string;
    };
  }

  // Handle subscription events
  async function handleSubscriptionEvent(supabase: SupabaseClient, payload: WebhookPayload, status: string) {
    if (!payload.data.customer.customer_id || !payload.data.subscription_id) {
      throw new Error('Missing required fields: customer_id or subscription_id');
    }

    try {
      console.log('🔄 Processing subscription event:', JSON.stringify(payload, null, 2));
      
      const customer = payload.data.customer;
      
      // Upsert customer (create if doesn't exist, otherwise update)
      const customerResult = await supabase
        .from('customers')
        .upsert({
          email: customer.email,
          name: customer.name || customer.email,
          dodo_customer_id: customer.customer_id
        }, {
          onConflict: 'dodo_customer_id',
          ignoreDuplicates: false
        })
        .select('id')
        .single();

      if (customerResult.error) {
        console.error('❌ Failed to upsert customer:', customerResult.error);
        throw new Error(`Failed to upsert customer: ${customerResult.error.message}`);
      }

      const customerId = customerResult.data.id;
      console.log(`✅ Customer upserted with ID: ${customerId}`);

      // Upsert subscription
      const subscriptionResult = await supabase
        .from('subscriptions')
        .upsert({
          customer_id: customerId,
          dodo_subscription_id: payload.data.subscription_id,
          product_id: payload.data.product_id || 'unknown',
          status,
          billing_interval: payload.data.payment_frequency_interval?.toLowerCase() || 'month',
          amount: payload.data.recurring_pre_tax_amount || 0,
          currency: payload.data.currency || 'USD',
          next_billing_date: payload.data.next_billing_date || null,
          cancelled_at: payload.data.cancelled_at || null,
          updated_at: new Date().toISOString()
        }, {
          onConflict: 'dodo_subscription_id',
          ignoreDuplicates: false
        })
        .select();

      if (subscriptionResult.error) {
        console.error('❌ Failed to upsert subscription:', subscriptionResult.error);
        throw new Error(`Failed to upsert subscription: ${subscriptionResult.error.message}`);
      }

      console.log(`✅ Subscription upserted with ${status} status`);

    } catch (error) {
      console.error('❌ Error in handleSubscriptionEvent:', error);
      console.error('❌ Raw webhook data:', JSON.stringify(payload, null, 2));
      throw error;
    }
  }

  serve(async (req: Request) => {
    if (req.method === 'OPTIONS') {
      return new Response('ok', { headers: corsHeaders });
    }

    // Validate required environment variables
    try {
      const supabaseUrl = Deno.env.get('SUPABASE_URL');
      const supabaseServiceKey = Deno.env.get('SUPABASE_SERVICE_ROLE_KEY');
      
      if (!supabaseUrl || !supabaseServiceKey) {
        console.error('❌ Missing required environment variables');
        return new Response(
          JSON.stringify({ error: 'Server configuration error' }),
          { status: 500, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }
        );
      }

      const rawBody = await req.text();
      console.log('📨 Webhook received');

      // Verify webhook signature (required for security)
      const apiKey = Deno.env.get('DODO_PAYMENTS_API_KEY');
      const webhookKey = Deno.env.get('DODO_PAYMENTS_WEBHOOK_KEY');

      if (!apiKey) {
        console.error('❌ DODO_PAYMENTS_API_KEY is not configured');
        return new Response(
          JSON.stringify({ error: 'API key not configured' }),
          { status: 500, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }
        );
      }

      if (!webhookKey) {
        console.error('❌ DODO_PAYMENTS_WEBHOOK_KEY is not configured');
        return new Response(
          JSON.stringify({ error: 'Webhook verification key not configured' }),
          { status: 500, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }
        );
      }

      const webhookHeaders = {
        'webhook-id': req.headers.get('webhook-id') || '',
        'webhook-signature': req.headers.get('webhook-signature') || '',
        'webhook-timestamp': req.headers.get('webhook-timestamp') || '',
      };

      try {
        const dodoPaymentsClient = new DodoPayments({
          bearerToken: apiKey,
          webhookKey: webhookKey,
        });
        const unwrappedWebhook = dodoPaymentsClient.webhooks.unwrap(rawBody, {headers: webhookHeaders});
        console.log('Unwrapped webhook:', unwrappedWebhook);
        console.log('✅ Webhook signature verified');
      } catch (error) {
        console.error('❌ Webhook verification failed:', error);
        return new Response(
          JSON.stringify({ 
            error: 'Webhook verification failed',
            details: error instanceof Error ? error.message : 'Invalid signature'
          }),
          { status: 401, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }
        );
      }

      // Initialize Supabase client
      const supabase = createClient(supabaseUrl, supabaseServiceKey);

      let payload: WebhookPayload;
      try {
        payload = JSON.parse(rawBody) as WebhookPayload;
      } catch (parseError) {
        console.error('❌ Failed to parse webhook payload:', parseError);
        return new Response(
          JSON.stringify({ error: 'Invalid JSON payload' }),
          { status: 400, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }
        );
      }

      const eventType = payload.type;
      const eventData = payload.data;
      const webhookId = req.headers.get('webhook-id') || '';

      console.log(`📋 Webhook payload:`, JSON.stringify(payload, null, 2));

      // Check for duplicate webhook-id (idempotency)
      if (webhookId) {
        const { data: existingEvent } = await supabase
          .from('webhook_events')
          .select('id')
          .eq('webhook_id', webhookId)
          .single();

        if (existingEvent) {
          console.log(`⚠️ Webhook ${webhookId} already processed, skipping (idempotency)`);
          return new Response(
            JSON.stringify({ success: true, message: 'Webhook already processed' }),
            { status: 200, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }
          );
        }
      }

      // Log webhook event with webhook_id for idempotency
      const logResult = await supabase.from('webhook_events').insert([{
        webhook_id: webhookId || null,
        event_type: eventType,
        data: eventData,
        processed: false,
        created_at: new Date().toISOString()
      }]).select('id').single();

      if (logResult.error) {
        console.error('❌ Failed to log webhook event:', logResult.error);
        return new Response(
          JSON.stringify({ error: 'Failed to log webhook event' }),
          { status: 500, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }
        );
      }

      const loggedEventId = logResult.data.id;
      console.log('📝 Webhook event logged with ID:', loggedEventId);

      console.log(`🔄 Processing: ${eventType} (${eventData.payload_type || 'unknown payload type'})`);

      try {
        switch (eventType) {
          case 'subscription.active':
            await handleSubscriptionEvent(supabase, payload, 'active');
            break;
          case 'subscription.cancelled':
            await handleSubscriptionEvent(supabase, payload, 'cancelled');
            break;
          case 'subscription.renewed':
            console.log('🔄 Subscription renewed - keeping active status and updating billing date');
            await handleSubscriptionEvent(supabase, payload, 'active');
            break;
          default:
            console.log(`ℹ️ Event ${eventType} logged but not processed (no handler available)`);
        }
        
        const updateResult = await supabase
          .from('webhook_events')
          .update({ 
            processed: true, 
            processed_at: new Date().toISOString() 
          })
          .eq('id', loggedEventId);
        
        if (updateResult.error) {
          console.error('❌ Failed to mark webhook as processed:', updateResult.error);
        } else {
          console.log('✅ Webhook marked as processed');
        }
      } catch (processingError) {
        console.error('❌ Error processing webhook event:', processingError);
        
        await supabase
          .from('webhook_events')
          .update({ 
            processed: false,
            error_message: processingError instanceof Error ? processingError.message : 'Unknown error',
            processed_at: new Date().toISOString()
          })
          .eq('id', loggedEventId);
        
        throw processingError;
      }

      console.log('✅ Webhook processed successfully');

      return new Response(
        JSON.stringify({ 
          success: true, 
          event_type: eventType,
          event_id: loggedEventId
        }),
        { status: 200, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }
      );

    } catch (error) {
      console.error('❌ Webhook processing failed:', error);
      return new Response(
        JSON.stringify({ 
          error: 'Webhook processing failed',
          details: error instanceof Error ? error.message : 'Unknown error'
        }),
        { status: 500, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }
      );
    }
  });
  ```
</CodeGroup>

## How It Works

The Deno-based Edge Function:

1. **Verifies signature** - Uses dodopayments library for HMAC-SHA256 verification
2. **Checks idempotency** - Looks up webhook ID to prevent duplicate processing
3. **Logs the event** - Stores raw webhook data in `webhook_events` table
4. **Processes updates** - Creates or updates customers and subscriptions via Supabase client
5. **Handles errors** - Logs failures and marks event for retry

## Testing

**Local development:**

```bash  theme={null}
cd supabase
npm run dev
# Available at http://localhost:54321/functions/v1/webhook
```

<Note>
  The `--no-verify-jwt` flag is required because webhooks don't include JWT tokens. Security is provided by webhook signature verification.
</Note>

**View logs:**

```bash  theme={null}
npx supabase functions logs webhook
```

Or in [Supabase Dashboard](https://supabase.com/dashboard) → Edge Functions → webhook → Logs tab

**Configure in DodoPayments Dashboard:**

1. Go to Developers → Webhooks
2. Add endpoint with your Supabase URL
3. Enable: subscription.active, subscription.cancelled, subscription.renewed

## Common Issues

| Issue                     | Solution                                                 |
| ------------------------- | -------------------------------------------------------- |
| Verification failed       | Check webhook key is correct from DodoPayments dashboard |
| Database permission error | Ensure using Service Role Key                            |
| JWT verification error    | Deploy with `--no-verify-jwt` flag                       |
| Function not found        | Verify project ref is correct and function is deployed   |

## Resources

* [Supabase Edge Functions Docs](https://supabase.com/docs/guides/functions)
* [Supabase CLI](https://supabase.com/docs/reference/cli)
* [Deno Runtime](https://deno.land/)
* [Webhook Events Guide](/developer-resources/webhooks/intents/webhook-events-guide)
* [GitHub Repo](https://github.com/dodopayments/cloud-functions/tree/main/supabase)


# Vercel Functions
Source: https://docs.dodopayments.com/developer-resources/webhooks/examples/vercel-example

Deploy DodoPayments webhooks to Vercel

<Card title="GitHub Repository" icon="github" href="https://github.com/dodopayments/cloud-functions/tree/main/vercel">
  Complete source code and setup guide
</Card>

## Quick Setup

### 1. Prerequisites

* [Vercel account](https://vercel.com/signup)
* [Neon database](https://neon.tech) account
* DodoPayments API key and webhook key from [dashboard](https://app.dodopayments.com/)

### 2. Install & Deploy

```bash  theme={null}
npm install -g vercel
vercel login
git clone https://github.com/dodopayments/cloud-functions.git
cd cloud-functions/vercel
npm install
```

### 3. Database Setup

1. Sign up for [Neon](https://neon.tech)
2. Create a new project
3. Open the SQL Editor
4. Copy and paste the contents of [`schema.sql`](#database-schema)
5. Run the query
6. Get your connection string from Neon → Connection Details

### 4. Set Environment Variables

Via Vercel CLI:

```bash  theme={null}
vercel env add DATABASE_URL
vercel env add DODO_PAYMENTS_API_KEY
vercel env add DODO_PAYMENTS_WEBHOOK_KEY
```

Or via [Vercel Dashboard](https://vercel.com/dashboard) → Project Settings → Environment Variables

### 5. Deploy

```bash  theme={null}
npm run deploy
```

**Webhook URL:** `https://[your-project].vercel.app/api/webhook`

## What It Does

Processes subscription events and stores them in PostgreSQL:

* **subscription.active** - Creates/updates customer and subscription records
* **subscription.cancelled** - Marks subscription as cancelled
* **subscription.renewed** - Updates next billing date

## Key Features

✅ **Signature verification** - Using the dodopayments library\
✅ **Idempotency** - Prevents duplicate processing with webhook IDs\
✅ **Event logging** - Complete audit trail in `webhook_events` table\
✅ **Error handling** - Logged and retryable

## Configuration Files

<CodeGroup>
  ```json package.json theme={null}
  {
    "name": "dodo-webhook-vercel",
    "version": "1.0.0",
    "type": "module",
    "description": "DodoPayments Webhook Handler for Vercel",
    "scripts": {
      "start": "vercel dev",
      "deploy": "vercel --prod"
    },
    "dependencies": {
      "@neondatabase/serverless": "^1.0.2",
      "dodopayments": "^2.4.1"
    },
    "devDependencies": {
      "typescript": "^5.9.3",
      "vercel": "^48.4.1"
    }
  }
  ```

  ```json tsconfig.json theme={null}
  {
    "compilerOptions": {
      "target": "ES2022",
      "module": "ES2022",
      "lib": ["ES2022"],
      "moduleResolution": "node",
      "esModuleInterop": true,
      "strict": true,
      "skipLibCheck": true,
      "resolveJsonModule": true,
      "allowSyntheticDefaultImports": true,
      "forceConsistentCasingInFileNames": true,
      "isolatedModules": true,
      "types": ["node"]
    },
    "include": ["api/**/*.ts"],
    "exclude": ["node_modules"]
  }
  ```
</CodeGroup>

## Database Schema

<CodeGroup>
  ```sql schema.sql expandable theme={null}
  -- DodoPayments Webhook Database Schema
  -- Compatible with PostgreSQL (Supabase, Neon, etc.)

  -- Enable UUID extension (if not already enabled)
  CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

  -- Customers table
  CREATE TABLE IF NOT EXISTS customers (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    email TEXT NOT NULL,
    name TEXT,
    dodo_customer_id TEXT UNIQUE NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
  );

  -- Subscriptions table
  CREATE TABLE IF NOT EXISTS subscriptions (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    customer_id UUID NOT NULL REFERENCES customers(id) ON DELETE CASCADE,
    dodo_subscription_id TEXT UNIQUE NOT NULL,
    product_id TEXT NOT NULL,
    status TEXT NOT NULL CHECK (status IN ('pending', 'active', 'cancelled', 'expired', 'paused')),
    billing_interval TEXT CHECK (billing_interval IN ('day', 'week', 'month', 'year')),
    amount NUMERIC(10, 2),
    currency TEXT DEFAULT 'USD',
    next_billing_date TIMESTAMP WITH TIME ZONE,
    cancelled_at TIMESTAMP WITH TIME ZONE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
  );

  -- Webhook events log
  CREATE TABLE IF NOT EXISTS webhook_events (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    webhook_id TEXT UNIQUE,
    event_type TEXT NOT NULL,
    data JSONB NOT NULL,
    processed BOOLEAN DEFAULT FALSE,
    error_message TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    processed_at TIMESTAMP WITH TIME ZONE,
    attempts INTEGER DEFAULT 0
  );

  -- Indexes for better query performance
  CREATE INDEX IF NOT EXISTS idx_customers_email ON customers(email);
  CREATE INDEX IF NOT EXISTS idx_customers_dodo_id ON customers(dodo_customer_id);
  CREATE INDEX IF NOT EXISTS idx_subscriptions_dodo_id ON subscriptions(dodo_subscription_id);
  CREATE INDEX IF NOT EXISTS idx_subscriptions_customer_id ON subscriptions(customer_id);
  CREATE INDEX IF NOT EXISTS idx_subscriptions_status ON subscriptions(status);
  CREATE INDEX IF NOT EXISTS idx_webhook_events_processed ON webhook_events(processed, created_at);
  CREATE INDEX IF NOT EXISTS idx_webhook_events_type ON webhook_events(event_type);
  CREATE INDEX IF NOT EXISTS idx_webhook_events_created_at ON webhook_events(created_at DESC);
  CREATE INDEX IF NOT EXISTS idx_webhook_events_webhook_id ON webhook_events(webhook_id);

  -- Function to automatically update updated_at timestamp
  CREATE OR REPLACE FUNCTION update_updated_at_column()
  RETURNS TRIGGER AS $$
  BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
  END;
  $$ LANGUAGE plpgsql;

  -- Triggers to automatically update updated_at
  CREATE TRIGGER update_customers_updated_at
    BEFORE UPDATE ON customers
    FOR EACH ROW
    EXECUTE FUNCTION update_updated_at_column();

  CREATE TRIGGER update_subscriptions_updated_at
    BEFORE UPDATE ON subscriptions
    FOR EACH ROW
    EXECUTE FUNCTION update_updated_at_column();

  -- Comments for documentation
  COMMENT ON TABLE customers IS 'Stores customer information from DodoPayments';
  COMMENT ON TABLE subscriptions IS 'Stores subscription data from DodoPayments';
  COMMENT ON TABLE webhook_events IS 'Logs all incoming webhook events for audit and retry purposes';

  COMMENT ON COLUMN customers.dodo_customer_id IS 'Unique customer ID from DodoPayments';
  COMMENT ON COLUMN subscriptions.dodo_subscription_id IS 'Unique subscription ID from DodoPayments';
  COMMENT ON COLUMN webhook_events.attempts IS 'Number of processing attempts for failed webhooks';
  COMMENT ON COLUMN webhook_events.data IS 'Full webhook payload as JSON';
  ```
</CodeGroup>

**Tables created:**

* **customers** - Email, name, dodo\_customer\_id
* **subscriptions** - Status, amount, next\_billing\_date, linked to customers
* **webhook\_events** - Event log with webhook\_id for idempotency

## Implementation Code

<CodeGroup>
  ```typescript api/webhook/index.ts expandable theme={null}
  import { neon, NeonQueryFunction } from '@neondatabase/serverless';
  import { DodoPayments } from 'dodopayments';

  interface WebhookPayload {
    business_id: string;
    type: string;
    timestamp: string;
    data: {
      payload_type: "Subscription" | "Refund" | "Dispute" | "LicenseKey";
      subscription_id?: string;
      customer: {
        customer_id: string;
        email: string;
        name: string;
      };
      product_id?: string;
      status?: string;
      recurring_pre_tax_amount?: number;
      payment_frequency_interval?: string;
      next_billing_date?: string;
      cancelled_at?: string;
      currency?: string;
    };
  }

  // Disable body parsing to access raw body for webhook verification
  export const config = {
    api: {
      bodyParser: false,
    },
  };

  const corsHeaders = {
    'Access-Control-Allow-Origin': '*',
    'Access-Control-Allow-Headers': 'authorization, x-client-info, apikey, content-type, webhook-id, webhook-signature, webhook-timestamp',
    'Access-Control-Allow-Methods': 'POST, OPTIONS',
  };

  // Helper function for JSON responses
  function jsonResponse(data: unknown, status: number = 200) {
    return new Response(JSON.stringify(data), {
      status,
      headers: { ...corsHeaders, 'Content-Type': 'application/json' }
    });
  }

  // Handle subscription events
  async function handleSubscriptionEvent(sql: NeonQueryFunction<false, false>, payload: WebhookPayload, status: string) {
    if (!payload.data.customer.customer_id || !payload.data.subscription_id) {
      throw new Error('Missing required fields: customer_id or subscription_id');
    }

    console.log('🔄 Processing subscription event:', JSON.stringify(payload, null, 2));

    const customer = payload.data.customer;

    // Upsert customer (create if doesn't exist, otherwise use existing)
    const customerResult = await sql`
      INSERT INTO customers (email, name, dodo_customer_id, created_at)
      VALUES (${customer.email}, ${customer.name || customer.email}, ${customer.customer_id}, ${new Date().toISOString()})
      ON CONFLICT (dodo_customer_id) 
      DO UPDATE SET 
        email = EXCLUDED.email,
        name = EXCLUDED.name,
        updated_at = ${new Date().toISOString()}
      RETURNING id
    `;

    const customerId = customerResult[0].id;
    console.log(`✅ Customer upserted with ID: ${customerId}`);

    // Upsert subscription
    await sql`
      INSERT INTO subscriptions (
        customer_id, dodo_subscription_id, product_id, status, 
        billing_interval, amount, currency, next_billing_date, cancelled_at, updated_at
      )
      VALUES (
        ${customerId}, ${payload.data.subscription_id},
        ${payload.data.product_id || 'unknown'}, ${status},
        ${payload.data.payment_frequency_interval?.toLowerCase() || 'month'}, ${payload.data.recurring_pre_tax_amount || 0},
        ${payload.data.currency || 'USD'}, ${payload.data.next_billing_date || null},
        ${payload.data.cancelled_at || null}, ${new Date().toISOString()}
      )
      ON CONFLICT (dodo_subscription_id) 
      DO UPDATE SET 
        customer_id = EXCLUDED.customer_id,
        product_id = EXCLUDED.product_id,
        status = EXCLUDED.status,
        billing_interval = EXCLUDED.billing_interval,
        amount = EXCLUDED.amount,
        currency = EXCLUDED.currency,
        next_billing_date = EXCLUDED.next_billing_date,
        cancelled_at = EXCLUDED.cancelled_at,
        updated_at = EXCLUDED.updated_at
    `;

    console.log(`✅ Subscription upserted with ${status} status`)
  }

  // Handle CORS preflight
  export async function OPTIONS() {
    return new Response('ok', { 
      status: 200,
      headers: corsHeaders 
    });
  }

  // Handle webhook POST request
  export async function POST(req: Request) {
    try {
      // Get raw body for webhook signature verification
      const rawBody = await req.text();
      
      console.log('📨 Webhook received');

      const DATABASE_URL = process.env.DATABASE_URL;
      const API_KEY = process.env.DODO_PAYMENTS_API_KEY;
      const WEBHOOK_KEY = process.env.DODO_PAYMENTS_WEBHOOK_KEY;

      if (!DATABASE_URL) {
        console.error('❌ Missing DATABASE_URL environment variable');
        return jsonResponse({ error: 'Server configuration error' }, 500);
      }

      // Verify required environment variables
      if (!API_KEY) {
        console.error('❌ DODO_PAYMENTS_API_KEY is not configured');
        return jsonResponse({ error: 'API key not configured' }, 500);
      }

      // Verify webhook signature (required for security)
      if (!WEBHOOK_KEY) {
        console.error('❌ DODO_PAYMENTS_WEBHOOK_KEY is not configured');
        return jsonResponse({ error: 'Webhook verification key not configured' }, 500);
      }

      const webhookHeaders = {
        'webhook-id': req.headers.get('webhook-id') || '',
        'webhook-signature': req.headers.get('webhook-signature') || '',
        'webhook-timestamp': req.headers.get('webhook-timestamp') || '',
      };

      try {
        const dodoPaymentsClient = new DodoPayments({
          bearerToken: API_KEY,
          webhookKey: WEBHOOK_KEY,
        });
        const unwrappedWebhook = dodoPaymentsClient.webhooks.unwrap(rawBody, {headers: webhookHeaders});
        console.log('Unwrapped webhook:', unwrappedWebhook);
        console.log('✅ Webhook signature verified');
      } catch (error) {
        console.error('❌ Webhook verification failed:', error);
        return jsonResponse({ error: 'Webhook verification failed' }, 401);
      }

      // Initialize Neon client
      const sql = neon(DATABASE_URL);

      const payload: WebhookPayload = JSON.parse(rawBody);
      const eventType = payload.type;
      const eventData = payload.data;
      const webhookId = req.headers.get('webhook-id') || '';

      console.log(`📋 Webhook payload:`, JSON.stringify(payload, null, 2));

      // Check for duplicate webhook-id (idempotency)
      if (webhookId) {
        const existingEvent = await sql`
          SELECT id FROM webhook_events WHERE webhook_id = ${webhookId}
        `;

        if (existingEvent.length > 0) {
          console.log(`⚠️ Webhook ${webhookId} already processed, skipping (idempotency)`);
          return jsonResponse({ success: true, message: 'Webhook already processed' });
        }
      }

      // Log webhook event with webhook_id for idempotency
      const logResult = await sql`
        INSERT INTO webhook_events (webhook_id, event_type, data, processed, created_at)
        VALUES (${webhookId || null}, ${eventType}, ${JSON.stringify(eventData)}, ${false}, ${new Date().toISOString()})
        RETURNING id
      `;

      const loggedEventId = logResult[0].id;
      console.log('📝 Webhook event logged with ID:', loggedEventId);

      console.log(`🔄 Processing: ${eventType} (${eventData.payload_type || 'unknown payload type'})`);

      try {
        switch (eventType) {
          case 'subscription.active':
            await handleSubscriptionEvent(sql, payload, 'active');
            break;
          case 'subscription.cancelled':
            await handleSubscriptionEvent(sql, payload, 'cancelled');
            break;
          case 'subscription.renewed':
            console.log('🔄 Subscription renewed - keeping active status and updating billing date');
            await handleSubscriptionEvent(sql, payload, 'active');
            break;
          default:
            console.log(`ℹ️ Event ${eventType} logged but not processed (no handler available)`);
        }

        await sql`
          UPDATE webhook_events 
          SET processed = ${true}, processed_at = ${new Date().toISOString()}
          WHERE id = ${loggedEventId}
        `;

        console.log('✅ Webhook marked as processed');
      } catch (processingError) {
        console.error('❌ Error processing webhook event:', processingError);

        await sql`
          UPDATE webhook_events 
          SET processed = ${false}, 
              error_message = ${processingError instanceof Error ? processingError.message : 'Unknown error'},
              processed_at = ${new Date().toISOString()}
          WHERE id = ${loggedEventId}
        `;

        throw processingError;
      }

      console.log('✅ Webhook processed successfully');

      return jsonResponse({
        success: true,
        event_type: eventType,
        event_id: loggedEventId
      });

    } catch (error) {
      console.error('❌ Webhook processing failed:', error);
      return jsonResponse({
        error: 'Webhook processing failed',
        details: error instanceof Error ? error.message : 'Unknown error'
      }, 500);
    }
  }
  ```
</CodeGroup>

## How It Works

The webhook handler:

1. **Disables body parsing** - To access raw body for signature verification
2. **Verifies the signature** - Ensures the request is from DodoPayments using HMAC-SHA256
3. **Checks for duplicates** - Uses webhook ID to prevent processing the same event twice
4. **Logs the event** - Stores raw webhook in `webhook_events` table for audit trail
5. **Processes the event** - Creates or updates customers and subscriptions in Neon
6. **Handles errors** - Logs failures and marks event as unprocessed for retry

## Testing

**Local development:**

```bash  theme={null}
npm start
```

**View logs in Vercel Dashboard:**

1. Select your project
2. Go to **Deployments** → latest deployment
3. Click **Functions** → **Logs**

**Configure in DodoPayments Dashboard:**

1. Go to Developers → Webhooks
2. Add endpoint with your Vercel Functions URL
3. Enable: subscription.active, subscription.cancelled, subscription.renewed

## Common Issues

| Issue                     | Solution                                                            |
| ------------------------- | ------------------------------------------------------------------- |
| Verification failed       | Check webhook key is correct from DodoPayments dashboard            |
| Database connection error | Verify Neon connection string and use pooled connection             |
| Function timeout          | Optimize queries; Pro plan has longer timeout (60s)                 |
| Env vars not available    | Set in dashboard or CLI, ensure all environments selected, redeploy |

## Resources

* [Vercel Functions Docs](https://vercel.com/docs/functions)
* [Vercel CLI](https://vercel.com/docs/cli)
* [Neon Docs](https://neon.tech/docs/)
* [Webhook Events Guide](/developer-resources/webhooks/intents/webhook-events-guide)
* [GitHub Repo](https://github.com/dodopayments/cloud-functions/tree/main/vercel)


# Dispute
Source: https://docs.dodopayments.com/developer-resources/webhooks/intents/dispute

The payload sent to your webhook endpoint when a dispute is created or updated.



# License Key
Source: https://docs.dodopayments.com/developer-resources/webhooks/intents/license-key

The payload sent to your webhook endpoint when a license key is created or updated.



# Payment
Source: https://docs.dodopayments.com/developer-resources/webhooks/intents/payment

The payload sent to your webhook endpoint when a payment is created or updated.



# Refund
Source: https://docs.dodopayments.com/developer-resources/webhooks/intents/refund

The payload sent to your webhook endpoint when a refund is created or updated.



# Subscription
Source: https://docs.dodopayments.com/developer-resources/webhooks/intents/subscription

The payload sent to your webhook endpoint when a subscription is created or updated.



# Webhook Event Guide
Source: https://docs.dodopayments.com/developer-resources/webhooks/intents/webhook-events-guide

Understand the different webhook events triggered by Dodo Payments during payment, refund, subscription, dispute, and license key activities

Dodo Payments provides real-time webhook notifications to keep you informed about critical events related to transactions, subscriptions, refunds, disputes, and license key management. Below is a detailed guide to these events, categorized for clarity, along with implementation tips and considerations.

## **Payment Events**

| **Event Name**         | **Event Type**       | **Description**                                                                     |
| ---------------------- | -------------------- | ----------------------------------------------------------------------------------- |
| **Payment Succeeded**  | `payment.succeeded`  | Triggered when a payment is successfully processed.                                 |
| **Payment Failed**     | `payment.failed`     | Occurs when a payment attempt fails due to errors, declined cards, or other issues. |
| **Payment Processing** | `payment.processing` | Indicates that a payment is currently being processed.                              |
| **Payment Cancelled**  | `payment.cancelled`  | Triggered when a payment is cancelled before completion.                            |

## **Refund Events**

| **Event Name**       | **Event Type**     | **Description**                                                              |
| -------------------- | ------------------ | ---------------------------------------------------------------------------- |
| **Refund Succeeded** | `refund.succeeded` | Triggered when a refund is successfully processed.                           |
| **Refund Failed**    | `refund.failed`    | Occurs when a refund attempt fails due to processing errors or other issues. |

## **Dispute Events**

| **Event Name**         | **Event Type**       | **Description**                                               |
| ---------------------- | -------------------- | ------------------------------------------------------------- |
| **Dispute Opened**     | `dispute.opened`     | Triggered when a customer initiates a dispute.                |
| **Dispute Expired**    | `dispute.expired`    | Indicates that a dispute expired without resolution.          |
| **Dispute Accepted**   | `dispute.accepted`   | Triggered when a merchant accepts the dispute.                |
| **Dispute Cancelled**  | `dispute.cancelled`  | Occurs when a dispute is cancelled by the customer or system. |
| **Dispute Challenged** | `dispute.challenged` | Triggered when a merchant challenges a dispute.               |
| **Dispute Won**        | `dispute.won`        | Indicates that the merchant has successfully won a dispute.   |
| **Dispute Lost**       | `dispute.lost`       | Occurs when the merchant loses a dispute.                     |

## **Subscription Events**

| **Event Name**                | **Event Type**              | **Description**                                                                           |   |
| ----------------------------- | --------------------------- | ----------------------------------------------------------------------------------------- | - |
| **Subscription Active**       | `subscription.active`       | Indicates that a subscription is now active and recurring charges are scheduled.          |   |
| **Subscription On Hold**      | `subscription.on_hold`      | Triggered when a subscription is temporarily put on hold due to failed renewal.           |   |
| **Subscription Renewed**      | `subscription.renewed`      | Occurs when a subscription is successfully renewed.                                       |   |
| **Subscription Plan Changed** | `subscription.plan_changed` | Triggered when a subscription is upgraded, downgraded, or modified with different addons. |   |
| **Subscription Cancelled**    | `subscription.cancelled`    | Triggered when a subscription is cancelled by the merchant or customer.                   |   |
| **Subscription Failed**       | `subscription.failed`       | Indicates a failed subscription. This means that we were unable to create a mandate.      |   |
| **Subscription Expired**      | `subscription.expired`      | Triggered when a subscription reaches the end of its term and expires.                    |   |

## **License Key Events**

| **Event Name**          | **Event Type**        | **Description**                                            |
| ----------------------- | --------------------- | ---------------------------------------------------------- |
| **License Key Created** | `license_key.created` | Triggered when a new license key is created for a product. |

These webhook events are designed to provide merchants with critical updates to manage their operations effectively. Implement robust handlers for each relevant event in your webhook integration to ensure smooth and reliable functionality.


# Balances
Source: https://docs.dodopayments.com/features/account-summary-payout-wallet

Track your financial activity across multi-currency wallets with comprehensive transaction ledgers, including payments, refunds, fees, and payouts in USD, GBP, EUR, and INR.

## Introduction

The **Balances** section provides merchants with a comprehensive overview of their financial activity across all currencies. It includes every transaction type - payments, refunds, fees, taxes, and payouts - ensuring full visibility into both earnings and deductions.

## Key Details

<Frame>
  <img src="https://mintcdn.com/dodopayments/86riaeMBxlAcW9Bk/images/balances.png?fit=max&auto=format&n=86riaeMBxlAcW9Bk&q=85&s=d15b189037b8797e83c79d3f211638a5" alt="Balances dashboard showing wallet overview and transaction ledger" data-og-width="1884" width="1884" data-og-height="1058" height="1058" data-path="images/balances.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/86riaeMBxlAcW9Bk/images/balances.png?w=280&fit=max&auto=format&n=86riaeMBxlAcW9Bk&q=85&s=5ee9172d95644bd71f96efd13a5a90e9 280w, https://mintcdn.com/dodopayments/86riaeMBxlAcW9Bk/images/balances.png?w=560&fit=max&auto=format&n=86riaeMBxlAcW9Bk&q=85&s=767c6ec2376c9adf01f597c0be195149 560w, https://mintcdn.com/dodopayments/86riaeMBxlAcW9Bk/images/balances.png?w=840&fit=max&auto=format&n=86riaeMBxlAcW9Bk&q=85&s=6fd6c1abcb05937a5cf4324693b0b7e3 840w, https://mintcdn.com/dodopayments/86riaeMBxlAcW9Bk/images/balances.png?w=1100&fit=max&auto=format&n=86riaeMBxlAcW9Bk&q=85&s=96218310cc4efeca3f5ef3626d40c840 1100w, https://mintcdn.com/dodopayments/86riaeMBxlAcW9Bk/images/balances.png?w=1650&fit=max&auto=format&n=86riaeMBxlAcW9Bk&q=85&s=28c997367d72aa6d20f12b0e0f3a28cd 1650w, https://mintcdn.com/dodopayments/86riaeMBxlAcW9Bk/images/balances.png?w=2500&fit=max&auto=format&n=86riaeMBxlAcW9Bk&q=85&s=b4c56dc7bfc2d967961e146a2e120589 2500w" />
</Frame>

## Wallet Structure

Each business account maintains **four native wallets** based on supported payout currencies:

| Wallet     | Currency Code |
| ---------- | ------------- |
| USD Wallet | USD           |
| GBP Wallet | GBP           |
| EUR Wallet | EUR           |
| INR Wallet | INR           |

### Wallet Logic

* Merchant sales are **credited to the appropriate wallet** based on the **customer's payment currency** and **geographic location**.
* This system optimizes for **payment processor efficiency**, **reduced transaction fees** and **lower currency conversion charges**.

## Balance Ledger

Each wallet has an **independent ledger** recording all related financial activity - payments, refunds, fees, and payouts - in that specific wallet's currency.

A **Consolidated Ledger** combines all wallet data, offering a unified view of the merchant's entire financial history.

### Filters and Navigation

* **Currency Filter:** Allows merchants to view transactions by specific wallet (USD, INR, GBP, EUR).
* **All Transactions View:** Provides an aggregated view across all wallets with unified sorting, filtering, and search capabilities.

### Transaction Types

The following transaction types are recorded in the Balance ledger:

| Transaction Type     | Symbol     | Description                                       |
| -------------------- | ---------- | ------------------------------------------------- |
| **Payment**          | Credit (+) | Successful customer payment                       |
| **Refund**           | Debit (-)  | Returned amount to the customer                   |
| **Transaction Fees** | Debit (-)  | Processing fees applied to payments               |
| **Refund Fees**      | Debit (-)  | Fees deducted for processing refunds              |
| **Sales Tax**        | Debit (-)  | Tax amount charged on payments                    |
| **Sales Tax Refund** | Credit (+) | Refunded portion of sales tax on refunds          |
| **Payout**           | Debit (-)  | Amount transferred to the merchant's bank account |
| **Payout Fees**      | Debit (-)  | Transaction fees deducted from payouts            |

#### Additional Fields

* **Transaction Amount:** Total value associated with the transaction.
* **Transaction Timestamp:** Date and time of transaction completion.
* **Transaction ID:** Unique identifier for tracking and support purposes.

## Total Balance

The **Total Balance** section shows a **consolidated indicative amount** of all wallet balances - **USD, GBP, and EUR** - after conversion to USD.

<Note>
  **Indicative Display:** The displayed amount is **for reference only**. Final payout amounts may vary based on the actual exchange rate at the time of transfer.
</Note>

## Conclusion

The **Balances** aims to deliver **transparency, accuracy, and flexibility** in managing multi-currency funds.

By maintaining separate native wallets, providing currency-based filters, and enabling indicative consolidated views, Dodo Payments ensures merchants always have a clear understanding of their earnings and payout readiness.

<Tip>
  For any discrepancies or clarifications, please reach out to **[support@dodopayments.com](mailto:support@dodopayments.com)** with your **Transaction ID** and issue details.
</Tip>


# Adaptive Currency
Source: https://docs.dodopayments.com/features/adaptive-currency

Display prices in each customer's local currency to reduce friction and improve conversion. Automatic detection, conversion, and same‑currency refunds.

<Info>
  Adaptive Currency lets you show localized prices and accept payments in customers' local currencies. This reduces friction at checkout and builds trust.
</Info>

## What Is Adaptive Currency?

Adaptive Currency displays product prices in the customer's local currency instead of a fixed global currency (for example, USD). When enabled, checkout defaults to the detected local currency for supported countries, with the option to switch to USD.

## Key Benefits

* **Localized payment experience**: Prices appear in local currency by default.
* **More payment methods**: Unlocks payment methods available for the local currency.
* **Same‑currency refunds**: Refund the customer in the currency they paid with.

## Enable Adaptive Currency

<Steps>
  <Step title="Open Business Settings">
    Log in to your Merchant Dashboard and go to Business → Business Settings.
  </Step>

  <Step title="Toggle Adaptive Pricing">
    Enable the Adaptive Pricing toggle. You can disable it at any time.

    <Warning>
      Changes apply only to future transactions.
    </Warning>
  </Step>

  <Step title="Confirm and Save">
    Save your settings.

    <Check>
      Verify a test checkout shows prices in your local currency when supported.
    </Check>
  </Step>
</Steps>

<Frame>
  <img src="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/our-features/adaptive_currency.png?fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=14a6ae2a3c6d45833adc68d88e1f9ba8" alt="Adaptive Currency" data-og-width="1920" width="1920" data-og-height="1440" height="1440" data-path="images/our-features/adaptive_currency.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/our-features/adaptive_currency.png?w=280&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=c60539f87923dc93920c4624bf6f324e 280w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/our-features/adaptive_currency.png?w=560&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=55e7a57b03f02a5210effc3fea143276 560w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/our-features/adaptive_currency.png?w=840&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=9335607d2d1d6079c259762296683cec 840w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/our-features/adaptive_currency.png?w=1100&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=7574737072d2d64c335ef087b76fa556 1100w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/our-features/adaptive_currency.png?w=1650&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=48edb9407448e410cc6e9186156eae6b 1650w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/our-features/adaptive_currency.png?w=2500&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=d8c3b3abcd6bad723b36f822c20b5b0b 2500w" />
</Frame>

## Customer Experience

1. **Detection**: The system detects the customer's country based on the billing address.
2. **Currency selection**: If the country is supported, prices show in the local currency by default. Customers can switch to USD.
3. **Payment methods**: Localized payment methods appear where applicable.
4. **Checkout**: Payment is completed in the selected currency.

## Conversion and Fees

Adaptive Currency charges the customer in their local currency using the latest exchange rates.

* **You pay**: 0%
* **Your customers pay**: 2–4% based on order value

Tiered fees applied at checkout:

* 4% for orders under \$500
* 3% for 500 to \$1,500
* 2% for over \$1,500

<Info>
  Adaptive Currency fees are borne by the customer, not the merchant.
</Info>

## Supported Currencies

| Currency Code | Currency Name                       | Countries                                                                                                                                                                                                    | Minimum Amount |
| ------------- | ----------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------- |
| AED           | UAE Dirham                          | United Arab Emirates                                                                                                                                                                                         | 2.00 AED       |
| ALL           | Albanian Lek                        | Albania                                                                                                                                                                                                      | 50.00 ALL      |
| AMD           | Armenian Dram                       | Armenia                                                                                                                                                                                                      | 500.00 AMD     |
| ANG           | Netherlands Antillean Guilder       | Curaçao, Sint Maarten                                                                                                                                                                                        | 2.00 ANG       |
| ARS           | Argentine Peso                      | Argentina                                                                                                                                                                                                    | 1000.00 ARS    |
| AUD           | Australian Dollar                   | Australia, Nauru                                                                                                                                                                                             | 0.50 AUD       |
| AWG           | Aruban Florin                       | Aruba                                                                                                                                                                                                        | 2.00 AWG       |
| AZN           | Azerbaijani Manat                   | Azerbaijan                                                                                                                                                                                                   | 2.00 AZN       |
| BAM           | Bosnia-Herzegovina Convertible Mark | Bosnia and Herzegovina                                                                                                                                                                                       | 2.00 BAM       |
| BDT           | Bangladeshi Taka                    | Bangladesh                                                                                                                                                                                                   | 100.00 BDT     |
| BMD           | Bermudian Dollar                    | Bermuda                                                                                                                                                                                                      | 1.00 BMD       |
| BND           | Brunei Dollar                       | Brunei                                                                                                                                                                                                       | 1.00 BND       |
| BOB           | Bolivian Boliviano                  | Bolivia                                                                                                                                                                                                      | 5.00 BOB       |
| BRL           | Brazilian Real                      | Brazil                                                                                                                                                                                                       | 0.50 BRL       |
| BSD           | Bahamian Dollar                     | Bahamas                                                                                                                                                                                                      | 1.00 BSD       |
| BWP           | Botswanan Pula                      | Botswana                                                                                                                                                                                                     | 15.00 BWP      |
| BZD           | Belize Dollar                       | Belize                                                                                                                                                                                                       | 2.00 BZD       |
| CAD           | Canadian Dollar                     | Canada                                                                                                                                                                                                       | 0.50 CAD       |
| CHF           | Swiss Franc                         | Switzerland, Liechtenstein                                                                                                                                                                                   | 0.50 CHF       |
| CLP           | Chilean Peso                        | Chile                                                                                                                                                                                                        | 1000.00 CLP    |
| CNY           | Chinese Yuan                        | China                                                                                                                                                                                                        | 4.00 CNY       |
| CRC           | Costa Rican Colón                   | Costa Rica                                                                                                                                                                                                   | 500.00 CRC     |
| CZK           | Czech Koruna                        | Czech Republic                                                                                                                                                                                               | 15.00 CZK      |
| DKK           | Danish Krone                        | Denmark, Greenland                                                                                                                                                                                           | 2.50 DKK       |
| DOP           | Dominican Peso                      | Dominican Republic                                                                                                                                                                                           | 100.00 DOP     |
| EGP           | Egyptian Pound                      | Egypt                                                                                                                                                                                                        | 50.00 EGP      |
| ETB           | Ethiopian Birr                      | Ethiopia                                                                                                                                                                                                     | 100.00 ETB     |
| EUR           | Euro                                | Austria, Belgium, Cyprus, Estonia, Finland, France, Germany, Greece, Ireland, Italy, Latvia, Lithuania, Luxembourg, Malta, Netherlands, Portugal, Slovakia, Slovenia, Spain, Andorra, San Marino, Montenegro | 0.50 EUR       |
| FJD           | Fijian Dollar                       | Fiji                                                                                                                                                                                                         | 2.00 FJD       |
| GBP           | British Pound                       | United Kingdom                                                                                                                                                                                               | 0.30 GBP       |
| GEL           | Georgian Lari                       | Georgia                                                                                                                                                                                                      | 3.00 GEL       |
| GMD           | Gambian Dalasi                      | Gambia                                                                                                                                                                                                       | 100.00 GMD     |
| GTQ           | Guatemalan Quetzal                  | Guatemala                                                                                                                                                                                                    | 10.00 GTQ      |
| GYD           | Guyanese Dollar                     | Guyana                                                                                                                                                                                                       | 200.00 GYD     |
| HKD           | Hong Kong Dollar                    | Hong Kong                                                                                                                                                                                                    | 4.00 HKD       |
| HNL           | Honduran Lempira                    | Honduras                                                                                                                                                                                                     | 25.00 HNL      |
| HUF           | Hungarian Forint                    | Hungary                                                                                                                                                                                                      | 175.00 HUF     |
| IDR           | Indonesian Rupiah                   | Indonesia                                                                                                                                                                                                    | 8500.00 IDR    |
| ILS           | Israeli New Shekel                  | Israel                                                                                                                                                                                                       | 3.00 ILS       |
| INR           | Indian Rupee                        | India                                                                                                                                                                                                        | 5.00 INR       |
| KZT           | Kazakhstani Tenge                   | Kazakhstan                                                                                                                                                                                                   | 500.00 KZT     |
| LKR           | Sri Lankan Rupee                    | Sri Lanka                                                                                                                                                                                                    | 300.00 LKR     |
| LRD           | Liberian Dollar                     | Liberia                                                                                                                                                                                                      | 200.00 LRD     |
| LSL           | Lesotho Loti                        | Lesotho                                                                                                                                                                                                      | 20.00 LSL      |
| MAD           | Moroccan Dirham                     | Morocco                                                                                                                                                                                                      | 10.00 MAD      |
| MKD           | Macedonian Denar                    | North Macedonia                                                                                                                                                                                              | 50.00 MKD      |
| MOP           | Macanese Pataca                     | Macau                                                                                                                                                                                                        | 10.00 MOP      |
| MUR           | Mauritian Rupee                     | Mauritius                                                                                                                                                                                                    | 50.00 MUR      |
| MVR           | Maldivian Rufiyaa                   | Maldives                                                                                                                                                                                                     | 15.00 MVR      |
| MWK           | Malawian Kwacha                     | Malawi                                                                                                                                                                                                       | 2000.00 MWK    |
| MXN           | Mexican Peso                        | Mexico                                                                                                                                                                                                       | 10.00 MXN      |
| MYR           | Malaysian Ringgit                   | Malaysia                                                                                                                                                                                                     | 4.00 MYR       |
| NGN           | Nigerian Naira                      | Nigeria                                                                                                                                                                                                      | 2000.00 NGN    |
| NOK           | Norwegian Krone                     | Norway                                                                                                                                                                                                       | 3.00 NOK       |
| NPR           | Nepalese Rupee                      | Nepal                                                                                                                                                                                                        | 150.00 NPR     |
| NZD           | New Zealand Dollar                  | New Zealand                                                                                                                                                                                                  | 1.00 NZD       |
| PEN           | Peruvian Sol                        | Peru                                                                                                                                                                                                         | 3.00 PEN       |
| PGK           | Papua New Guinean Kina              | Papua New Guinea                                                                                                                                                                                             | 4.00 PGK       |
| PHP           | Philippine Peso                     | Philippines                                                                                                                                                                                                  | 50.00 PHP      |
| PLN           | Polish Zloty                        | Poland                                                                                                                                                                                                       | 2.00 PLN       |
| QAR           | Qatari Rial                         | Qatar                                                                                                                                                                                                        | 3.00 QAR       |
| RON           | Romanian Leu                        | Romania                                                                                                                                                                                                      | 2.00 RON       |
| RSD           | Serbian Dinar                       | Serbia                                                                                                                                                                                                       | 60.00 RSD      |
| SAR           | Saudi Riyal                         | Saudi Arabia                                                                                                                                                                                                 | 2.00 SAR       |
| SBD           | Solomon Islands Dollar              | Solomon Islands                                                                                                                                                                                              | 10.00 SBD      |
| SCR           | Seychellois Rupee                   | Seychelles                                                                                                                                                                                                   | 15.00 SCR      |
| SEK           | Swedish Krona                       | Sweden                                                                                                                                                                                                       | 3.00 SEK       |
| SGD           | Singapore Dollar                    | Singapore                                                                                                                                                                                                    | 0.50 SGD       |
| SRD           | Surinamese Dollar                   | Suriname                                                                                                                                                                                                     | 50.00 SRD      |
| SZL           | Swazi Lilangeni                     | Eswatini                                                                                                                                                                                                     | 20.00 SZL      |
| THB           | Thai Baht                           | Thailand                                                                                                                                                                                                     | 25.00 THB      |
| TOP           | Tongan Paʻanga                      | Tonga                                                                                                                                                                                                        | 2.00 TOP       |
| TRY           | Turkish Lira                        | Turkey                                                                                                                                                                                                       | 20.00 TRY      |
| TWD           | New Taiwan Dollar                   | Taiwan                                                                                                                                                                                                       | 20.00 TWD      |
| TZS           | Tanzanian Shilling                  | Tanzania                                                                                                                                                                                                     | 3000.00 TZS    |
| UYU           | Uruguayan Peso                      | Uruguay                                                                                                                                                                                                      | 50.00 UYU      |
| WST           | Samoan Tala                         | Samoa                                                                                                                                                                                                        | 2.00 WST       |
| ZAR           | South African Rand                  | South Africa                                                                                                                                                                                                 | 20.00 ZAR      |
| ZMW           | Zambian Kwacha                      | Zambia                                                                                                                                                                                                       | 30.00 ZMW      |

## Refunds and Adjustments

Dodo Payments issues refunds in the currency the customer originally paid, using the latest exchange rate. The global USD amount remains fixed on your dashboard, invoices, and in the refund. This means the customer may receive more or less than the original local‑currency amount depending on FX changes.

<Info>
  Adaptive Currency fees which are generally the FX fees are not refunded.
</Info>

**Example refund**

1. You sell a product for 100 USD with Adaptive Currency enabled.
2. A Canadian customer sees 137 CAD at an exchange rate of 1.37 CAD per 1 USD and completes the purchase.
3. We process the payment, converting 137 CAD to 100 USD for your settlement.
4. Later, the exchange rate changes to 1.40 CAD per 1 USD and you issue a full refund.
5. We deduct 100 USD and refund the customer 140 CAD.

## Invoices and Taxation

* Invoices show only the settlement currency amount.
* Taxes and platform fees are calculated on the settlement currency amount.
* Example: a \$10 sale converted to 36 AED still reflects as \$10 in the Dashboard and invoices.

<Info>
  All amounts are rounded according to Dodo Payments' internal rounding logic.
</Info>

## Integration Examples

**Checkout Sessions with billing currency**

Pass `billing_currency` to explicitly set the billing currency for the session.

<Info>
  When Adaptive Pricing is disabled, `billing_currency` is ignored.
</Info>

```typescript  theme={null}
const session = await client.checkoutSessions.create({
  product_cart: [
    {
      product_id: 'prod_one_time_or_subscription',
      quantity: 1
    }
  ],
  billing_currency: 'AED',
  return_url: 'https://example.com/return'
});
```

<Card title="Checkout Session" icon="code" href="/api-reference/checkout-sessions/create">
  Configure Billing Currency using our Checkout Session API.
</Card>


# Add-ons for Subscriptions
Source: https://docs.dodopayments.com/features/addons

Enhance your subscription products with flexible add-ons for seat-based billing, feature upgrades, and creative pricing models

<Info>
  Add-ons are additional products that can be attached to your main subscription products, enabling flexible pricing models and enhanced customer experiences. Whether you need seat-based billing, feature upgrades, or custom pricing structures, add-ons give you the power to create sophisticated subscription offerings.
</Info>

<CardGroup cols={2}>
  <Card title="Seat-Based Billing" icon="users" href="/developer-resources/seat-based-pricing">
    Create add-ons for additional team seats, user licenses, or capacity upgrades with per-seat pricing.
  </Card>

  <Card title="Usage Extensions" icon="bolt" href="/features/usage-based-billing">
    Extend usage limits, API calls, or data allowances with flexible add-on pricing.
  </Card>
</CardGroup>

## What Are Add-ons?

Add-ons are supplementary products that customers can purchase alongside their main subscription. They're perfect for:

* **Seat-based billing**: Additional team members, user licenses, or concurrent users
* **Feature upgrades**: Premium features, advanced analytics, or priority support
* **Usage extensions**: Extra storage, API calls, or bandwidth allowances
* **Service add-ons**: Professional services, training, or consultation hours

<Frame>
  <img src="https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons.png?fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=ea4ce0d437201c92590eea6c31a14e80" alt="Add-ons attached to subscription products in the dashboard" data-og-width="2338" width="2338" data-og-height="1196" height="1196" data-path="images/cookbooks/seat-based/seat-based-addons.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons.png?w=280&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=8c93d311c3442791f2481c3a2dff9e6c 280w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons.png?w=560&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=55639ef750b29eb146b763a275d39d7f 560w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons.png?w=840&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=5222c17eb09251c3783e58aff7d3ed31 840w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons.png?w=1100&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=d26f009d831e6ebfcb8b51f10223b1f9 1100w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons.png?w=1650&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=2069508f22f5c842014ffba54a963c10 1650w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons.png?w=2500&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=5a7995df4602d26e77e150ee537b9a9f 2500w" />
</Frame>

## Key Benefits

* **Flexible Pricing Models**: Offer base plans with optional add-ons to create sophisticated pricing structures. You can address diverse customer segments with upgrades that grow as your customers' needs change.
* **Revenue Optimization**: Boost your average revenue per user (ARPU) by presenting relevant add-ons. This enables natural upsell opportunities as customers add features over time.
* **Simplified Management**: Manage all pricing components from one dashboard. Add-ons are automatically included in both checkout sessions and subscription management.
* **Customer Choice**: Allow customers to customize their subscriptions by selecting only the add-ons they need, which enhances satisfaction and reduces churn.

## Creating Add-ons

Add-ons are created as separate products in your Dodo Payments dashboard and then attached to your main subscription products. This separation allows you to:

* Reuse add-ons across multiple subscription products
* Manage pricing independently
* Track add-on performance separately
* Update add-ons without affecting base subscriptions

<Frame>
  <img src="https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons-creation.png?fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=d2c17b4a9f2f9a1b19f537f0507656a4" alt="Creating add-ons in the dashboard interface" data-og-width="2348" width="2348" data-og-height="1606" height="1606" data-path="images/cookbooks/seat-based/seat-based-addons-creation.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons-creation.png?w=280&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=5751534a0a21b9ed88453f8d811032b7 280w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons-creation.png?w=560&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=4144c9cd57f21f1d48f9b4c9fd0fc705 560w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons-creation.png?w=840&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=df7ce792d4437726a2087a569e7d62e9 840w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons-creation.png?w=1100&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=fef77260f735f8bb16e11e9b88082771 1100w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons-creation.png?w=1650&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=f9cf9247cbc5f58771a380637faef0af 1650w, https://mintcdn.com/dodopayments/ajOhO6Du1yNsg0hy/images/cookbooks/seat-based/seat-based-addons-creation.png?w=2500&fit=max&auto=format&n=ajOhO6Du1yNsg0hy&q=85&s=ad6bea7122b008e67325e729704d663c 2500w" />
</Frame>

### Add-on Configuration

When creating add-ons, you can configure:

* **Pricing**: Set one-time or recurring pricing for the add-on
* **Billing cycle**: Match your subscription billing or use different cycles
* **Quantity limits**: Set minimum and maximum quantities per customer
* **Availability**: Control which subscription products can use the add-on
* **Tax settings**: Configure appropriate tax categories

### Getting Started

Ready to implement add-ons in your subscription business? Here's how to get started:

<Steps>
  <Step title="Plan Your Add-ons">
    Identify the additional features, services, or capacity that would benefit your customers as add-ons.

    Consider:

    * What do customers frequently request?
    * What features could be monetized separately?
    * What would create natural upgrade paths?
  </Step>

  <Step title="Create Your First Add-on">
    Use the Dodo Payments dashboard or API to create your first add-on product.

    <Card title="Dashboard Guide" icon="box" href="/developer-resources/seat-based-pricing">
      Follow our step-by-step guide to create add-ons in the dashboard.
    </Card>
  </Step>

  <Step title="Attach to Subscriptions">
    Connect your add-ons to the appropriate subscription products where they should be available.
  </Step>

  <Step title="Test Integration">
    Create test checkout sessions with different add-on combinations to ensure everything works correctly.
  </Step>

  <Step title="Monitor Performance">
    Track add-on adoption rates and revenue impact to optimize your pricing strategy.
  </Step>
</Steps>

## API Management

Dodo Payments provides a comprehensive API for managing add-ons programmatically:

<AccordionGroup>
  <Accordion title="Create Add-ons">
    Use the `POST /addons` endpoint to create new add-ons with custom pricing, descriptions, and configuration options.

    <Card title="API Reference" icon="code" href="/api-reference/addons/create-addon">
      View the complete API documentation for creating add-ons.
    </Card>
  </Accordion>

  <Accordion title="Update Add-ons">
    Modify existing add-ons using the `PATCH /addons/{id}` endpoint to update pricing, descriptions, or availability.

    <Card title="API Reference" icon="code" href="/api-reference/addons/update-addon">
      Learn how to update add-on details programmatically.
    </Card>
  </Accordion>

  <Accordion title="List and Retrieve">
    Use `GET /addons` to list all add-ons or `GET /addons/{id}` to retrieve specific add-on details.

    <Card title="API Reference" icon="code" href="/api-reference/addons/list-addons">
      Access the complete listing and retrieval API documentation.
    </Card>
  </Accordion>

  <Accordion title="Image Management">
    Update add-on images using the `PUT /addons/{id}/images` endpoint for better product presentation.

    <Card title="API Reference" icon="code" href="/api-reference/addons/update-addon-images">
      Learn how to manage add-on images via API.
    </Card>
  </Accordion>
</AccordionGroup>

## Common Use Cases

* **Seat-Based Billing**: Additional team members, user licenses, or concurrent users
* **Feature Upgrades**: Premium features, advanced analytics, or priority support
* **Usage Extensions**: Extra storage, API calls, or bandwidth allowances
* **Service Add-ons**: Professional services, training, or consultation hours

## Integration Examples

### Checkout Sessions with Add-ons

When creating checkout sessions, you can include add-ons with custom quantities:

```typescript  theme={null}
const session = await client.checkoutSessions.create({
  product_cart: [
    {
      product_id: 'your_subscription_id',
      quantity: 1,
      addons: [
        {
          addon_id: 'your_addon_id',
          quantity: 3 // 3 additional seats
        }
      ]
    }
  ],
  // ... other checkout options
});
```

### Plan Changes with Add-ons

Modify existing subscriptions to add, remove, or update add-ons:

```typescript  theme={null}
// Add add-ons to existing subscription
await client.subscriptions.changePlan('sub_123', {
  product_id: 'prod_new',
  quantity: 1,
  proration_billing_mode: 'difference_immediately',
  addons: [
    { addon_id: 'addon_123', quantity: 2 }
  ]
});

// Remove all existing add-ons
await client.subscriptions.changePlan('sub_123', {
  product_id: 'prod_new',
  quantity: 1,
  proration_billing_mode: 'difference_immediately',
  addons: [] // Empty array removes all existing add-ons
});
```

### Dynamic Pricing

Calculate total costs dynamically based on add-on selections:

```typescript  theme={null}
function calculateTotalCost(basePrice: number, addons: AddonSelection[]) {
  const addonTotal = addons.reduce((sum, addon) => 
    sum + (addon.price * addon.quantity), 0
  );
  return basePrice + addonTotal;
}
```

## Best Practices

* **Start simple**: Launch with 2-3 core add-ons and expand options based on customer feedback and usage.
* **Maintain pricing clarity**: Clearly communicate add-on pricing and value, so customers understand what they're getting for the extra cost.
* **Test thoroughly**: Validate add-on combinations to ensure pricing calculations remain accurate and checkout flows function smoothly.

### Design Considerations

* **Clear Value Proposition**: Each add-on should have a clear benefit that customers can easily understand
* **Logical Grouping**: Group related add-ons together in your checkout flow
* **Flexible Quantities**: Allow customers to adjust quantities of add-ons as needed
* **Transparent Pricing**: Show total costs clearly throughout the checkout process

<Info>
  Add-ons are a powerful way to create flexible, scalable pricing models that grow with your customers. Start with simple use cases and expand as you learn what works best for your business and customers.
</Info>


# Affiliates
Source: https://docs.dodopayments.com/features/affiliates

Launch and manage your affiliate program while processing transactions through Dodo Payments.

## Introduction

This guide walks you through how to track affiliate referrals, handle commission events, and grow your revenue with trusted affiliate partnerships via Dodo Payments.

## Key Features

<CardGroup cols={2}>
  <Card title="Automated Commission Attribution" icon="robot">
    No spreadsheets or manual tracking. Referrals are automatically attributed and logged when a purchase is made.
  </Card>

  <Card title="Real-Time Reporting" icon="chart-line">
    Both you and your affiliates can monitor performance and leads from dedicated dashboards.
  </Card>

  <Card title="Flexible Tracking Options" icon="code">
    Use tracking scripts, metadata fields, and webhook events to capture referral data across signups and transactions.
  </Card>

  <Card title="Fully Encrypted & Secure" icon="shield">
    All sensitive credentials and webhook data are securely exchanged and stored using best-in-class encryption.
  </Card>

  <Card title="Quick Setup" icon="bolt">
    Launch your affiliate program in minutes—no code changes required beyond copy-pasting script snippets and API tokens.
  </Card>

  <Card title="Seamless Integration" icon="plug">
    Plug affiliate tracking directly into your checkout flows using our integration with Affonso, a leading affiliate marketing platform.
  </Card>
</CardGroup>

<Frame>
  <iframe className="w-full aspect-video rounded-md" src="https://www.youtube.com/embed/8tw8o9yOjsA" title="Affiliate Integration | Dodo Payments" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen />
</Frame>

## Integration Steps

We have partnered with Affonso, a leading affiliate management platform to power your sales. Follow the steps below to connect your Dodo Payments account with Affonso and begin tracking affiliate-driven sales.

<Steps>
  <Step title="Connect with Dodo Payments">
    To get started, connect your Dodo Payments account by adding your API key.

    ### How to Get Your Dodo Payments API Key

    * Log in to your **Dodo Payments Dashboard**
    * Go to the **Developer** section in the left menu
    * Click on **API Keys**
    * Select **Add API Key**
    * Give it a name (e.g. "Affonso Integration")
    * Click **Create** and **copy** your API key

    ### Add Your API Key to Affonso

    * Open your **Affonso Dashboard via** [affonso.io](https://affonso.io/)
    * Go to **Program Details > Connect**
    * Click the **Dodo Payments integration** card
    * Paste your Dodo Payments API key
    * Click **Connect**

    <Callout type="info">
      Your API key will be securely encrypted by Affonso.
    </Callout>
  </Step>

  <Step title="Add Webhook to Dodo Payments">
    Once connected, you'll receive a unique webhook URL from Affonso. This enables payment tracking and affiliate commission triggering.

    ### Add Webhook URL in Dodo Payments

    * In your Dodo Payments Dashboard, go to **Developer → Webhooks**
    * Click **Add Webhook**
    * Paste your **Affonso webhook URL** (from your program settings)
    * Save the webhook

    ### Add Webhook Secret in Affonso

    * After saving the webhook in Dodo Payments, **copy the signing key** provided
    * Paste it back into Affonso under the **Dodo Payments webhook settings**

    <Callout type="info">
      This allows Affonso to securely verify incoming events from Dodo Payments.
    </Callout>
  </Step>

  <Step title="Add the Tracking Script">
    Place the Affonso pixel on your site to start tracking affiliate visits and conversions.

    ```html  theme={null}
    <!-- Place in <head> tag -->
    <script async defer
    src="https://affonso.io/js/pixel.min.js"
    data-affonso="YOUR_PUBLIC_PROGRAM_ID"
    data-cookie_duration="YOUR_COOKIE_DURATION">
    </script>
    ```

    This script:

    * Tracks affiliate visits
    * Sets a cookie with the referral ID (`affonso_referral`)
    * Enables signup and payment tracking

    <Callout type="info">
      Place this on all domains where users visit or convert (e.g. marketing site, app).
    </Callout>
  </Step>

  <Step title="Track User Signups">
    To gain funnel visibility and optimize affiliate performance, track user signups as leads.

    ```js  theme={null}
    // After successful registration
    window.Affonso.signup(userEmail);
    ```

    This will:

    * Log a new referral as a **LEAD** if the user came via an affiliate link
    * Display it in your dashboard and the affiliate's stats

    <Callout type="info">
      Best practice: Trigger this after successful registration or double opt-in (DOI).
    </Callout>
  </Step>

  <Step title="Pass Referral Data to Dodo Payments">
    To attribute commissions correctly, pass the referral ID from Affonso to Dodo Payments during checkout.

    ### Payments Integration

    ```js  theme={null}
    import DodoPayments from 'dodopayments';

    const referralId = window.affonso_referral;

    const client = new DodoPayments({
      bearerToken: process.env['DODO_PAYMENTS_API_KEY'],
    });

    async function main() {
      const payment = await client.payments.create({
        payment_link: true,
        billing: { city: 'city', country: 'AF', state: 'state', street: 'street', zipcode: 0 },
        customer: { email: 'email@email.com', name: 'name' },
        product_cart: [{ product_id: 'product_id', quantity: 0 }],
        metadata: {
          affonso_referral: referralId,
        },
      });

      console.log(payment.payment_id);
    }

    main();
    ```

    ### Subscription Integration

    ```js  theme={null}
    import DodoPayments from 'dodopayments';

    const referralId = window.affonso_referral;

    const client = new DodoPayments({
      bearerToken: process.env['DODO_PAYMENTS_API_KEY'],
    });

    async function main() {
      const subscription = await client.subscriptions.create({
        billing: { city: 'city', country: 'IN', state: 'state', street: 'street', zipcode: 89789 },
        customer: { customer_id: 'customer_id' },
        product_id: 'product_id',
        payment_link: true,
        return_url: 'https://example.com/success',
        quantity: 1,
        metadata: {
          affonso_referral: referralId,
        },
      });

      console.log(subscription.subscription_id);
    }

    main();
    ```

    ### Payment Links

    ```js  theme={null}
    // Original Dodo Payments Link
    const originalLink = 'https://checkout.dodopayments.com/buy/<YOUR_PRODUCT_ID>';

    // Append referral ID as reference_id
    const linkWithReferral = `${originalLink}?metadata_affonso_referral=${window.affonso_referral}`;
    ```

    <Callout type="info">
      For more details, see the [Dodo Payments API documentation](https://docs.dodopayments.com/api-reference/introduction)
    </Callout>
  </Step>

  <Step title="Testing Your Integration">
    Before launching publicly, test your setup with live affiliate links and test transactions.

    **Testing Checklist:**

    * ✅ Create an affiliate and generate a tracking link
    * ✅ Visit your website via the affiliate link
    * ✅ Ensure the Affonso script loads and the `affonso_referral` cookie is set
    * ✅ Complete a signup (optional)
    * ✅ Complete a payment via Dodo Payments
    * ✅ Confirm tracking and attribution in your Affonso dashboard
  </Step>
</Steps>

## Need Help?

If you face any issues or need support during integration:

<CardGroup cols={2}>
  <Card title="Affonso Support" icon="headset">
    * Chat with us via **live chat** on [affonso.io](https://affonso.io/)
    * Email us at **[support@affonso.io](mailto:support@affonso.io)**
  </Card>

  <Card title="Dodo Payments Support" icon="headset">
    For Dodo Payments-specific API queries, refer to docs.dodopayments.com or contact our support team.
  </Card>
</CardGroup>


# Analytics and Reporting
Source: https://docs.dodopayments.com/features/analytics-and-reporting

Gain actionable business insights with Dodo Payments' Analytics & Reporting dashboard. Learn to track revenue, customer trends, and transaction health, and download detailed reports.

<Frame>
  <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/cover-images/Analytics%20and%20Reporting.webp?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=bae83b093bf129bcab92988d2f85fbe2" alt="Analytics and Reporting dashboard overview" data-og-width="1200" width="1200" data-og-height="630" height="630" data-path="images/cover-images/Analytics and Reporting.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/cover-images/Analytics%20and%20Reporting.webp?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=89241852091571351540e183db2b321c 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/cover-images/Analytics%20and%20Reporting.webp?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=0056f0e2c6e110446fb15067d5815644 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/cover-images/Analytics%20and%20Reporting.webp?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=ee3455c3dec170ab01b2a08e2fa3271b 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/cover-images/Analytics%20and%20Reporting.webp?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=cc691eccca772716756e664e2528b392 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/cover-images/Analytics%20and%20Reporting.webp?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=a62adc9b4884dab81cc0cf3301b80d1b 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/cover-images/Analytics%20and%20Reporting.webp?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=0eac2fa2a375c3e2cafb15ac13215aab 2500w" />
</Frame>

## Introduction

Dodo Payments' **Analytics & Reporting** dashboard empowers you to monitor your business performance, understand customer behavior, and make data-driven decisions. Access real-time metrics, visualize trends, and export detailed reports—all from a single, intuitive interface.

<CardGroup cols={2}>
  <Card title="Revenue Insights" icon="chart-pie-simple">
    Track total revenue, growth trends, and top-performing products or countries.
  </Card>

  <Card title="Customer Analytics" icon="users">
    Analyze customer acquisition, retention, and average revenue per user (ARPU).
  </Card>

  <Card title="Transaction Health" icon="circle-check">
    Monitor payment and refund success rates, and identify failure reasons.
  </Card>

  <Card title="Exportable Reports" icon="file-csv">
    Download payments, refunds, and payouts reports for custom date ranges.
  </Card>
</CardGroup>

## Dashboard Overview

The Analytics dashboard provides comprehensive insights into three key areas of your business performance. Each section offers detailed metrics and visualizations to help you understand your revenue patterns, customer behavior, and transaction health.

## Revenue Analytics

Track your income and payment activity to understand revenue trends and identify your top-performing markets.

<Frame caption="Total revenue and 30-day trend">
  <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=f1e965377d8809d7e834fe81ebe43cb2" alt="Total revenue and revenue trend chart" data-og-width="2864" width="2864" data-og-height="1524" height="1524" data-path="images/analytics/revenue.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=cf27459d910bc62a4693cebf0bb2564b 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=323fd92817805702c8ad92e9be715067 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=14dcc78df5931fb3bd507a9ef44d232e 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=9ace32e3162076e6d2a386a956f543c8 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=03f55a9c3098c26966b8df60ec53f6b5 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=5089ad40a89005510d0a4a3d1063b77a 2500w" />
</Frame>

* **Total Revenue:** Instantly see your all-time revenue and recent trends.
* **Revenue Trend:** The 30-day chart helps you spot spikes or dips in income.

<Frame caption="Top 5 revenue-generating countries and growth rate">
  <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue-2.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=09d6d41c0e77497e29bcc06bc23e9c9f" alt="Top revenue countries and growth rate chart" data-og-width="1966" width="1966" data-og-height="1334" height="1334" data-path="images/analytics/revenue-2.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue-2.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=62eec43173d444d45923460a4a6bdefd 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue-2.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=24dcbce29aa73f4e5957fae46f7d7c50 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue-2.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=a89467a46889a55387b50a6a8fce6dce 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue-2.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=ed320b565b77691bab73ce81a6eb1b2b 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue-2.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=734c1a6d1f06fa1c6c803a764900f748 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue-2.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=623df340008204c221ab1fb23df40065 2500w" />
</Frame>

* **Growth Rate:** Track monthly revenue growth to measure business momentum.
* **Geographic Insights:** Visualize your top 5 revenue-generating countries.

<Tip>
  Use these insights to focus your marketing and product efforts on high-performing regions and periods of growth.
</Tip>

## Revenue Breakdown Analytics

Track your recurring revenue metrics with detailed breakdowns:

* **Projected ARR**: Annual Recurring Revenue projections with trend analysis
* **MRR Breakdown and Growth Rate**: Monthly Recurring Revenue analysis with month-over-month growth metrics
* **New MRR Chart**: Visual representation of new customer revenue acquisition
* **Expansion MRR Chart**: Tracking revenue growth from existing customer upgrades and expansions
* **Churn MRR Chart**: Monitoring revenue lost from customer cancellations and downgrades
* **Net New MRR Chart**: Net revenue impact combining new, expansion, and churn MRR

<Frame>
  <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue-breakdown.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=66d1c0d64e6a69e6e7f22ac26c89bed7" alt="Revenue Breakdown dashboard showing projected ARR, MRR breakdown, and growth rates" data-og-width="1267" width="1267" data-og-height="867" height="867" data-path="images/analytics/revenue-breakdown.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue-breakdown.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=657e48bcc7a359b18d62254d285881db 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue-breakdown.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=398191fbd09fa41d6db2ae7eacf265e6 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue-breakdown.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=130b488adf15fc23a3a4aa7b8ea00a4a 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue-breakdown.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=4a933e5fb3358463cba962d493d1914b 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue-breakdown.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=c4715fce0f87f42445a95bdb99fc43e3 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/revenue-breakdown.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=cffeec7feb2d1d72fc59a8c30b580560 2500w" />
</Frame>

## Retention Analytics

Monitor customer retention and churn patterns:

* **Customer Churn Rate**: Percentage of customers who cancel their subscriptions
* **Revenue Churn Rate**: Percentage of revenue lost from cancellations and downgrades
* **Churn Rate Trends**: Historical tracking of both customer and revenue churn patterns over time
* **User Retention Matrix**: Cohort analysis showing customer retention rates across different time periods

<Frame>
  <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/retention.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=daf77496683051cfd59db89c679fadea" alt="Retention Analytics dashboard showing customer churn rate, revenue churn rate, and churn rate trends" data-og-width="1299" width="1299" data-og-height="870" height="870" data-path="images/analytics/retention.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/retention.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=342744274649b984cf7ab8a352654c1e 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/retention.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=fcfd28314568d29759c87ac317252e6b 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/retention.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=ec74eb579b916e30cc80cf8537d0f052 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/retention.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=17fcb7d02c5d24cf2826f6e19b9e1169 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/retention.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=b4d0ec16eb37e244d0da006244ab43ca 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/retention.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=83251fbee51fb373d71c4c6d5d5a7fc7 2500w" />
</Frame>

## Customer Analytics

Analyze customer acquisition, retention, and spending patterns to optimize your customer strategy.

<Frame caption="ARPU, active customers, customer split, and top customers">
  <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/customer.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=311b8a18deb3967aeaf0eac17c5376c9" alt="Customer analytics: ARPU, active customers, customer split, top customers" data-og-width="2876" width="2876" data-og-height="1514" height="1514" data-path="images/analytics/customer.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/customer.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=1e162441cf113bf93d8ca78a39433171 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/customer.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=ae4e587045ba252ef6ea519fa296bb09 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/customer.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=5d8cb7aa46f1b8856e41e058ebb7d58c 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/customer.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=40acce18418619d9c360ab4b3c2c815b 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/customer.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=037ea83cb0bc623402c42d3a2bb073e5 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/customer.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=9c29003f21e6033c9aafb0da8a2d1953 2500w" />
</Frame>

* **ARPU (Average Revenue Per User):** Understand how much each customer contributes on average.
* **Active Customers:** See how many customers are engaging with your business.
* **Customer Split:** Instantly view the ratio of new vs. returning customers.
* **Top Customers:** Identify your highest spenders for targeted engagement.

<Tip>
  Monitor ARPU and customer split to refine your retention and acquisition strategies.
</Tip>

## Transaction Success & Failure Analytics

Monitor payment and refund success rates to identify and resolve transaction issues quickly.

<Frame caption="Payment/refund success rates, failure reasons, and payment breakdown">
  <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/success-rate.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=c266504fe6db71cd0641f4b26b527ec5" alt="Payment and refund success rates, failure reasons, and payment breakdown" data-og-width="2878" width="2878" data-og-height="1514" height="1514" data-path="images/analytics/success-rate.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/success-rate.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=f3f834e7ef8a44c1ed319c1451dc11cf 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/success-rate.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=073f1cbc78ff696da7225dcd00806303 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/success-rate.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=b4e79ad7f5013431c365782ea4825e1f 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/success-rate.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=e261e0b34601958b877365be9d19987a 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/success-rate.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=fc2c6d93b1a7a87d7d028d55e17f1f8c 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/success-rate.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=e7728c47881384aec4ae5ca83896bc92 2500w" />
</Frame>

* **Payment Success Rate:** Track the percentage of successful payment attempts.
* **Refund Success Rate:** Monitor how many refunds are processed successfully.
* **Failure Reasons:** Quickly identify common issues (e.g., expired cards, unsupported methods).

  <Card title="Transaction Failure Reference" icon="circle-exclamation" href="/api-reference/transaction-failures">
    Get all possible transaction failure codes and it's reasons.
  </Card>
* **Payments Breakdown:** Visualize the distribution of successful and failed transactions.

<Warning>
  If you notice a drop in success rates or a spike in failures, review the failure reasons and address them promptly to minimize revenue loss.
</Warning>

## Filtering & Customization

You can filter analytics data by:

* **Product Type** (one-time vs. subscription)
* **Date Range** (customizable)
* **Payment Method**

<Tip>
  Use filters to drill down into specific products, time periods, or payment methods for targeted insights.
</Tip>

## Reports

We've completely revamped the reports section with more comprehensive and detailed reporting capabilities. Navigate to **Business > Reports** to access the new reporting suite.

Available reports include:

* **Payment Report**: Detailed record of all processed payments with transaction status tracking
* **Refund Report**: Comprehensive log of all refund activities with detailed refund information
* **Payout Report**: Summary of payouts made to your account
* **Product-wise Sales Report**: Sales performance insights with revenue and business growth metrics
* **Payment Failure Report**: Summary of failed payment attempts with failure reasons
* **Customer Report**: Payment summary organized by customer
* **Disputes Report**: Payment disputes summary with resolution status
* **Account Summary Report**: Complete account overview and summary

<Frame>
  <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/reports.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=b2f16ff3401205461e70bb672c2e0dd1" alt="Reports 2.0 dashboard showing various report types" data-og-width="1481" width="1481" data-og-height="783" height="783" data-path="images/analytics/reports.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/reports.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=65e53ee9f7e464ba4296594cafbbbc23 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/reports.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=3f023812276906ef4b61e0ba2e52789f 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/reports.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=35eec5370bd7a2bc080a814c63a56077 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/reports.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=d0663e86dbd90c064df91d4b8ea792de 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/reports.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=1c7707cd6f5f9152bce3ef4e2a7b4941 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/reports.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=668935b4b6a7166c985987455c7f066f 2500w" />
</Frame>

## Enhanced Payout Reporting

We've added detailed payout reports that provide clear visibility into fees and transaction details for each payout you receive from Dodo Payments. Access these enhanced reports in **Business > Payouts**.

<Frame>
  <img src="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/payout.png?fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=e387ce347733bec1d1b57acdfbd1a6f2" alt="Payout Report dashboard showing detailed payout information" data-og-width="1058" width="1058" data-og-height="887" height="887" data-path="images/analytics/payout.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/payout.png?w=280&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=851c36ae8dea33bac1fd2a28a277023b 280w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/payout.png?w=560&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=76147da0d45b73f0b1c4a95ce603111a 560w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/payout.png?w=840&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=c130960bfcb92db470250ba11aa30311 840w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/payout.png?w=1100&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=6ee89bcdd13626568dc336eff7030992 1100w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/payout.png?w=1650&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=b048480e9da98d644f1f6c691e74dda5 1650w, https://mintcdn.com/dodopayments/r426DlzEVUSPZlYb/images/analytics/payout.png?w=2500&fit=max&auto=format&n=r426DlzEVUSPZlYb&q=85&s=59dc534307e199d8303dc07866d86cee 2500w" />
</Frame>

## Downloading & Exporting Reports

You can export detailed reports directly from the dashboard:

<Steps>
  <Step title="Open the Reports Section">
    Navigate to the <strong>Reports</strong> area in your dashboard.
  </Step>

  <Step title="Select Report Type & Date Range">
    Choose the report you need (Payments, Refunds, Payouts) and specify the date range.
  </Step>

  <Step title="Download the Report">
    Click <strong>Download</strong> to export your report in CSV format.

    <Check>
      Your report will be saved to your device.
    </Check>
  </Step>
</Steps>

## Best Practices & Troubleshooting

<Tip>
  * Regularly review your analytics to spot trends and anomalies early.
  * Use filters to compare performance across products, time periods, or geographies.
  * If data appears incorrect or missing, check your filters and date range settings first.
</Tip>

<Warning>
  If you notice persistent discrepancies or missing data, contact <a href="mailto:support@dodopayments.com">[support@dodopayments.com](mailto:support@dodopayments.com)</a> for assistance.
</Warning>

## Next Steps & Related Resources

<CardGroup cols={2}>
  <Card title="Account Summary & Payout Wallet" icon="wallet" href="/features/account-summary-payout-wallet">
    Understand your earnings, deductions, and payout cycles.
  </Card>

  <Card title="Payments" icon="money-bill-transfer" href="/features/transactions/payments">
    Track and manage all payment transactions.
  </Card>

  <Card title="Refunds" icon="rotate-left" href="/features/transactions/refunds">
    Initiate and monitor refunds, and export refund reports.
  </Card>

  <Card title="Disputes" icon="circle-exclamation" href="/features/transactions/disputes">
    Manage and respond to payment disputes.
  </Card>
</CardGroup>


# Selling Digital Goods on iOS
Source: https://docs.dodopayments.com/features/appstore-digital-goods

A comprehensive guide to selling digital goods and services on iOS apps using Dodo Payments

## Introduction

Dodo Payments empowers developers to sell digital goods and services in iOS apps, handling complex aspects like tax compliance, currency conversion, and payouts. This comprehensive guide details how to integrate Dodo Payments into your iOS app, specifically for SaaS tools, content subscriptions, and digital utilities.

## Overview

Dodo Payments serves as your **Merchant of Record (MoR)**, managing critical aspects of your digital business:

<Tabs>
  <Tab title="What We Handle">
    * Tax collection and remittance (VAT, GST, and other regional taxes)
    * Global payments as per policies and local payment methods
    * Currency conversion and foreign exchange
    * Chargebacks and fraud prevention
    * End-customer invoicing and receipts
    * Compliance with regional regulations
  </Tab>

  <Tab title="What You Get">
    * A unified API for web and mobile platforms
    * Support for in-app checkouts (UPI, cards, wallets, BNPL)
    * Global payout support (Payoneer, Wise, local bank transfers)
    * Analytics and reporting dashboard
    * Secure payment processing
  </Tab>
</Tabs>

## Use Cases

<CardGroup cols={2}>
  <Card title="Subscriptions" icon="repeat">
    * Premium content or feature access
    * Recurring billing with flexible options, Free trials, Proration, or Upgrades and downgrades
  </Card>

  <Card title="Courses and Learning" icon="graduation-cap">
    * Pay-per-course access
    * Bundled content packages
    * Lifetime or renewable licenses
    * Progress tracking integration
  </Card>

  <Card title="Digital Downloads" icon="download">
    * One-time purchases (PDFs, music, tools)
    * Digital asset delivery
    * License key management
  </Card>

  <Card title="SaaS Tools" icon="screwdriver-wrench">
    * Software-as-a-Service subscriptions
    * Usage-based billing
    * Team and enterprise plans
  </Card>
</CardGroup>

## Integration Flow

You can integrate Dodo Payments into your app using our hosted checkout or in-app browser solution.

```mermaid  theme={null}
flowchart LR
  A[Mobile App] -->|Create Payment Link| B(Dodo API)
  B -->|Checkout URL| A
  A -->|Open in WebView| C[Checkout Page]
  C -->|Redirects / Webhooks| D[Your Server]
  D -->|Grant Access| A
```

### Integration Steps

<Steps>
  <Step title="Mobile App to Dodo API">
    The process begins with the mobile app creating a payment link by interacting with the Dodo API.
  </Step>

  <Step title="Dodo API to Mobile App">
    The Dodo API responds by providing a checkout URL back to the mobile app.
  </Step>

  <Step title="Mobile App to Checkout Page">
    The mobile app then opens this checkout URL within a WebView, leading the user to the checkout page.
  </Step>

  <Step title="Checkout Page to Your Server">
    Upon completion of the checkout process, the checkout page communicates with your server through redirects or webhooks.
  </Step>

  <Step title="Your Server to Mobile App">
    Finally, your server grants access to the purchased content or service, completing the transaction cycle back in the mobile app.
  </Step>
</Steps>

<Card title="Mobile Integration Guide" icon="mobile" href="/developer-resources/mobile-integration">
  For a complete developer walkthrough, explore our Mobile Integration Guide.
</Card>

## Regional Availability

Dodo Payments enables alternative in-app purchase flows only in App Store regions where Apple explicitly allows external payments, or where a regulator or court order mandates it.

### Supported Regions

<AccordionGroup>
  <Accordion title="United States">
    Supported to the extent permitted by current court orders and Apple's updated guidelines.

    * Available under specific court-mandated provisions
    * Subject to Apple's compliance with legal requirements
    * Must follow Apple's implementation guidelines
  </Accordion>

  <Accordion title="European Union (EU) App Store">
    Supported via Apple's EU Alternative Terms and External Purchase Entitlement.

    * Enabled through Apple's EU Alternative Terms
    * Requires External Purchase Entitlement approval
    * Must comply with EU Digital Markets Act requirements
  </Accordion>

  <Accordion title="South Korea">
    Supported through the StoreKit External Purchase Entitlement for Korea-only binaries.

    * Available via StoreKit External Purchase Entitlement
    * Requires Korea-specific app binary
    * Must comply with Korean telecommunications law
  </Accordion>
</AccordionGroup>

<Warning>
  Always review and comply with Apple's region-specific entitlements and App Store Connect requirements before enabling Dodo Payments for any storefront. Using alternative payment flows in unsupported regions may result in app rejection or removal.
</Warning>

<Note>
  For some business models - such as services or certain categories of content - Apple may not require the use of in-app purchase (IAP) at all. Dodo Payments supports these models as well. Always verify your app's classification and Apple's latest guidelines to determine if IAP is mandatory for your use case.
</Note>

### Learn More

For a detailed breakdown of global policies, legal precedents, and strategic approaches to bypassing App Store fees, see our comprehensive guide:

<Card title="Bypassing App Store & Play Store Fees: A Strategic and Legal Playbook" icon="shield-check" href="/features/bypassing-app-store-fees">
  Learn where and how you can legally implement alternative payment flows, with up-to-date regional guidance and compliance tips.
</Card>


# Atlas Demo Product
Source: https://docs.dodopayments.com/features/atlas-demo-website

Explore Atlas, a fully functional AI art generation demo application showcasing usage-based billing, subscriptions, and one-time payments with Dodo Payments checkout integration.

<Frame>
  <img alt="Atlas Demo Product - AI art generation platform with integrated billing" src="https://mintcdn.com/dodopayments/kx9B5HGzBgLxFWey/images/atlas/atlas-demo-product.png?fit=max&auto=format&n=kx9B5HGzBgLxFWey&q=85&s=df07b04779a208c9e7a6a81e19c97f58" data-og-width="2880" width="2880" data-og-height="1556" height="1556" data-path="images/atlas/atlas-demo-product.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/kx9B5HGzBgLxFWey/images/atlas/atlas-demo-product.png?w=280&fit=max&auto=format&n=kx9B5HGzBgLxFWey&q=85&s=edaac89285c7288df134f1396e04ffa3 280w, https://mintcdn.com/dodopayments/kx9B5HGzBgLxFWey/images/atlas/atlas-demo-product.png?w=560&fit=max&auto=format&n=kx9B5HGzBgLxFWey&q=85&s=b012a5856e7188a666825bd454477f21 560w, https://mintcdn.com/dodopayments/kx9B5HGzBgLxFWey/images/atlas/atlas-demo-product.png?w=840&fit=max&auto=format&n=kx9B5HGzBgLxFWey&q=85&s=4c56f78b58e753c25f8d2a292705dcc5 840w, https://mintcdn.com/dodopayments/kx9B5HGzBgLxFWey/images/atlas/atlas-demo-product.png?w=1100&fit=max&auto=format&n=kx9B5HGzBgLxFWey&q=85&s=c641bab0aeee2850eec2cfdc1154e31e 1100w, https://mintcdn.com/dodopayments/kx9B5HGzBgLxFWey/images/atlas/atlas-demo-product.png?w=1650&fit=max&auto=format&n=kx9B5HGzBgLxFWey&q=85&s=33d3ae01e0951a9be933de24ddea2743 1650w, https://mintcdn.com/dodopayments/kx9B5HGzBgLxFWey/images/atlas/atlas-demo-product.png?w=2500&fit=max&auto=format&n=kx9B5HGzBgLxFWey&q=85&s=c122a05941721d87eb47ed1730867037 2500w" />
</Frame>

Atlas is a fully functional demo application by Dodo Payments that showcases an AI art generation platform. It demonstrates all three billing models—**usage-based billing**, **one-time payments**, and **subscriptions**—with integrated checkout flows.

<Info>
  **Live Demo**: Visit [atlas.dodopayments.com](https://atlas.dodopayments.com/) to explore the platform and test all billing flows.
</Info>

## Overview

Atlas simulates a real-world AI art generation platform where users create images from text prompts. The demo highlights three distinct purchase flows, each demonstrating different billing models and checkout experiences:

* **Usage-Based Billing**: Pay per image generated (\$0.75 per image)
* **Subscription**: Unlimited Pro plan (\$20/month)
* **One-Time Purchase**: Credit packs (\$7 for 10 credits)

After completing any purchase, users are redirected to the **Atlas Studio dashboard** where they can generate artwork and track their usage in real-time.

## Purchase Flows

Atlas demonstrates three separate billing flows. Each flow follows a similar pattern but showcases different checkout experiences and billing models.

<Tabs>
  <Tab title="Usage-Based Billing">
    <Steps>
      <Step title="Select pay-per-image pricing">
        Choose the **pay-per-image** option (\$0.75 per image) for AI art generation. This demonstrates usage-based billing where customers pay only for what they consume.
      </Step>

      <Step title="Generate artwork">
        Enter a text prompt and generate an image. The system automatically tracks usage for billing purposes.
      </Step>

      <Step title="Complete checkout">
        The checkout process includes:

        * **Branded checkout page**: Dodo Payments checkout page displays your merchant brand name and logo
        * **Customer information**: Enter user details and billing address
        * **Tax calculation**: Taxes are automatically calculated after address confirmation
        * **Payment**: Enter test card details to complete the transaction

        <Tip>
          Use test card `4242 4242 4242 4242` with any future expiry date and CVC to simulate successful transactions.
        </Tip>
      </Step>

      <Step title="View confirmation">
        After payment, Atlas displays a confirmation screen with usage details and remaining credits.
      </Step>

      <Step title="Access dashboard">
        Users are redirected back to the **Atlas Studio dashboard** where they can continue generating artwork and monitor their usage tracking.
      </Step>
    </Steps>
  </Tab>

  <Tab title="Subscription">
    <Steps>
      <Step title="Select subscription plan">
        Choose the **Unlimited Pro** subscription plan (\$20/month) for unlimited AI art generation.
      </Step>

      <Step title="Generate artwork">
        Enter a prompt and generate an image to test the platform before subscribing.
      </Step>

      <Step title="Complete checkout">
        The subscription checkout includes:

        * **Branded checkout page**: Merchant branding is visible throughout the checkout process
        * **Customer information**: Enter user details and billing address
        * **Tax calculation**: Automatic tax calculation based on billing address
        * **Payment**: Enter test card details to activate the subscription

        <Note>
          Subscriptions automatically renew monthly. Users can manage their subscription from the dashboard after purchase.
        </Note>
      </Step>

      <Step title="View confirmation">
        Post-payment, Atlas displays a confirmation screen with subscription activation details and next billing date.
      </Step>

      <Step title="Access dashboard">
        Users are redirected to the **Atlas Studio dashboard** with unlimited access to generate artwork.
      </Step>
    </Steps>
  </Tab>

  <Tab title="One-Time Purchase">
    <Steps>
      <Step title="Select credit pack">
        Choose a **Credit Pack** (\$7 for 10 credits) for AI art generation. This demonstrates one-time purchase transactions.
      </Step>

      <Step title="Generate artwork">
        Enter a prompt and generate an image to preview the platform before purchasing credits.
      </Step>

      <Step title="Complete checkout">
        The one-time purchase checkout includes:

        * **Branded checkout page**: Dodo Payments checkout with merchant branding
        * **Customer information**: Enter user details and billing address
        * **Tax calculation**: Automatic tax calculation after address confirmation
        * **Payment**: Enter test card details to complete the purchase
      </Step>

      <Step title="View confirmation">
        Post-payment, Atlas displays a confirmation screen with a "thank you" message and purchased credit details.
      </Step>

      <Step title="Access dashboard">
        Users are redirected to the **Atlas Studio dashboard** where their purchased credits are immediately available for generating artwork.
      </Step>
    </Steps>
  </Tab>
</Tabs>

## Post-Purchase Dashboard Experience

The Atlas Studio dashboard demonstrates how to implement billing-aware features and entitlement tracking after checkout completion.

### Dashboard Features

* **Immediate access**: Users can start generating artwork immediately after purchase
* **Usage tracking**: Real-time display of remaining credits, active subscriptions, and generation history
* **Billing management**: View purchase history, subscription status, and upcoming renewals
* **Seamless integration**: Showcases how to redirect users back to your application with proper entitlement tracking

<Check>
  The dashboard experience demonstrates best practices for post-purchase user flows, including entitlement verification and usage monitoring.
</Check>

## Technical Implementation

Atlas is built using the [Dodo Payments TypeScript SDK](/developer-resources/sdks/typescript), demonstrating how to integrate billing flows with just a few lines of code.

<CardGroup cols={2}>
  <Card title="Integration Guide" icon="book" href="/developer-resources/integration-guide">
    Learn how to integrate Dodo Payments checkout flows into your application.
  </Card>

  <Card title="TypeScript SDK" icon="code" href="/developer-resources/sdks/typescript">
    Explore the TypeScript SDK documentation and API reference.
  </Card>
</CardGroup>

## Open Source

Atlas is an open-source project. Explore the codebase to see how billing flows are implemented in a real application.

<Card title="View on GitHub" icon="github" href="https://github.com/dodopayments/dodo-checkout-demo.git">
  Browse the Atlas source code and learn from the implementation.
</Card>


# B2B Payments
Source: https://docs.dodopayments.com/features/b2b-payments

The B2B Payments feature ensures that merchants processing B2B transactions have their customer’s Tax IDs verified during checkout, ensuring accurate tax application based on the customer's country and applicable regulations. This validation helps determine whether input tax collection applies or if the transaction falls under a reverse charge mechanism.

## **Tax ID Validation for B2B Transactions**

* If a **valid Tax ID** is provided during checkout, the invoice will include:
  * The **customer’s Tax ID**.
* Tax deductions will be determined based on the applicable regulations for the customer’s country.
* The invoice will include **Dodo Payments’ tax details**, along with the tax applied to the transaction.

## **Tax Treatment for B2C Transactions**

* Transactions where a valid Tax ID is **not provided** will be treated as **B2C transactions**, and tax will be deducted as per the applicable tax regulations in the customer’s country.
* The invoice will include **Dodo Payments’ tax details**, along with the tax applied to the transaction.

## Reverse Charge Mechanism

Generally, the supplier of goods or services is liable to pay VAT/Service Tax/GST.
However, in specified cases like imports and other notified supplies, the liability is on the recipient (customer) under the reverse charge mechanism. Reverse Charge means the liability to pay tax is on the recipient of supply of goods or services instead of the supplier of such goods or services in respect of notified categories of supply.

## **Reverse Charge Applicability**

* In certain cases, where applicable by law, tax will **not be deducted** at checkout and the transaction will be subject to a **reverse charge mechanism**.
* The invoice will clearly indicate when a reverse charge applies, as per regulatory requirements.


# Bypassing App Store & Play Store Fees: A Strategic and Legal Playbook
Source: https://docs.dodopayments.com/features/bypassing-app-store-fees

Learn how to legally bypass Apple and Google's 30% app store fees using Merchant of Record solutions and compliant payment strategies

## The Platform Tollbooth Problem

For over a decade, Apple and Google have operated their app stores not just as marketplaces, but as powerful toll booths. Any developer or startup offering digital goods within an app was forced to route payments through their respective billing systems: Apple's In-App Purchase (IAP) and Google's Play Billing-while forfeiting up to 30% of revenue.

If that sounds like a steep cut, it's because it absolutely is.

This "store tax" drew widespread criticism, particularly from developers from large apps like Spotify, Epic Games, and Netflix, who found the commissions not only excessive but anti-competitive. Apps couldn't even inform users about cheaper options outside the app. These policies-especially Apple's "anti-steering" rules-made app stores de facto monopolies for digital distribution.

<Warning>
  The 30% app store commission represents a significant revenue drain for digital businesses, especially for subscription-based services and SaaS applications.
</Warning>

## The Epic Games Catalyst

Epic Games' CEO, Tim Sweeney, initiated Project Liberty as a strategic legal campaign to challenge the monopolistic practices of Apple and Google's app stores, particularly their 30% commission fees on in-app purchases. The project aimed to disrupt these platforms' control over app distribution and payments, advocating for a more open environment for developers.

Tim Sweeney knew Apple would contest this and laid a bait. Epic updated Fortnite with a hidden direct-pay option, bypassing Apple's IAP. Apple fell for the bait, swiftly banned Fortnite, and Epic sued.

The Epic Games v. Apple legal battle cracked open the conversation globally.

## The Epic v. Apple Verdict

In 2021, the U.S. District Judge ruled in a landmark decision:

* **Apple did not violate antitrust laws outright**, meaning it could continue to control app distribution on iOS
* **However, Apple's anti-steering policies were deemed anti-competitive**. The court issued a permanent injunction-Apple must allow developers to direct users to external payment methods

After delays and appeals, Apple finally updated its App Store guidelines in May 2025 to allow external purchase links in U.S. apps.

<Check>
  This U.S. ruling spurred similar regulatory pressure and legal action across South Korea, Japan, the EU, and other regions. Combined with the EU's Digital Markets Act (DMA)-the tide turned decisively in favor of developers.
</Check>

## Global Overview: Where Developers Can Legally Bypass Fees

| Region          | Apple Policy (2025)                   | Google Policy (2025)            |
| --------------- | ------------------------------------- | ------------------------------- |
| **USA**         | External links allowed (no Apple fee) | UCB allowed (reduced fee)       |
| **EU (EEA)**    | Alt payments/links allowed (10–17%)   | UCB allowed for non-games       |
| **South Korea** | Apple-approved PSPs (26% fee)         | UCB mandated (26% fee)          |
| **Netherlands** | Dating apps only                      | UCB allowed                     |
| **Japan**       | Reader apps can link out              | UCB allowed                     |
| **India**       | No change                             | UCB allowed (4% fee reduction)  |
| **Other**       | No change                             | UCB allowed in select countries |
| **China**       | No external billing allowed           | Google Play not relevant        |

<Info>
  UCB stands for User Choice Billing, Google's alternative billing system that allows developers to use third-party payment processors.
</Info>

## Pre-2025 Loopholes: How Apps Circumvented App Store Rules

Before regulations loosened their grip, some apps found "creative" ways to get around the 30% cut. These hacks were rarely compliant but undeniably clever.

### Reader App Loophole

One common tactic was the "reader app loophole," where apps like Kindle or Netflix claimed they were merely displaying previously purchased content. Apple couldn't fault apps for letting users access pre-purchased content. So as long as the app didn't explicitly link to external payment or prompt an in-app purchase, it was allowed to operate.

### Hidden Payment Redirections

Others experimented with code obfuscation, embedding hidden payment redirections. A few even used email notifications post-download to nudge users to pay outside the app.

<Note>
  Spotify was one such company that implemented this strategy. If you're in India and use Spotify, you've probably noticed that you can't buy the Premium plan inside the app. You have to pay on the web. This is why.
</Note>

All of this was risky, brittle, and usually led to takedowns once discovered. But it underscored one thing: developers were desperate to reclaim control over their margins and user data.

## The Payment Gateway Trap: What Developers Often Miss

At first glance, payment gateways (PGs) like Stripe or Razorpay seem like the obvious solution. But for in-app purchases, it's not that simple.

<Warning>
  If you're on iOS outside of allowed regions (like India or China), plugging in a PG directly into the app violates Apple's policies, risking an app takedown.
</Warning>

Even where it is legal, PGs come with limitations: they don't solve for tax compliance across geographies, invoicing, refund management, or regulatory filings.

That's where Merchant-of-Record (MoR) platforms like Dodo Payments come in. We handle the full stack: payments, taxes, documentation, customer support, and legal accountability.

It's not just about collecting money. It's about doing it cleanly, globally, and without risking your App Store listing.

## Two Legal Workarounds for Developers

### 1. App-to-Web Redirect (Link Out Flow)

**What it is:** The app links users to a web-based checkout (hosted by Dodo Payments or the developer). Payment is completed outside the app, then access is granted in-app.

**Legal Status:**

* **iOS:** Legal in US, EU, South Korea, Netherlands (only dating apps), Japan (only reader apps)
* **Android:** Legal in all UCB-supported markets

**Advantages:**

* Simple to implement
* Fully compliant
* No app-side PCI burden

**Drawbacks:**

* Slight friction - user leaves app to pay

### 2. In-App SDK Integration (Third-Party SDK)

**What it is:** Embed a payment UI - such as <a href="/developer-resources/react-native-integration">Dodo's React Native SDK</a> - directly in your app to enable seamless checkout without requiring users to leave the app.

**Legal Status:**

* **iOS:** Legal only in EU (under DMA terms); elsewhere it's still a violation
* **Android:** Legal in UCB markets, if proper UX and reporting are followed

**Advantages:**

* Smooth UX
* User stays in app
* Can match IAP experience

**Drawbacks:**

* Integration complexity
* Compliance risk outside allowed regions

## Developer Strategy: Combine Legal Compliance with Revenue Efficiency

An effective global rollout strategy could look like this:

<Steps>
  <Step title="U.S. Users">
    Use App-to-Web (no Apple cut)
  </Step>

  <Step title="EU Users">
    Use In-App SDK or App-to-Web (10–17% Apple cut)
  </Step>

  <Step title="Android Users in UCB Markets">
    Use In-App SDK with Google-compliant UX
  </Step>

  <Step title="Other iOS Markets">
    Use Apple IAP (or omit in-app purchases)
  </Step>

  <Step title="Other Android Markets">
    Use Google Play billing or distribute via alt app stores
  </Step>
</Steps>

## The Biggest Opportunity

Among all the regulatory changes, the U.S. App Store presents the single largest opportunity for developers. With the 2025 guideline update following the Epic v. Apple ruling, developers can now legally include external links in their iOS apps that direct users to a web-based checkout.

This means: **no mandatory Apple IAP, no 30% fee, and full control over customer relationships and revenue.**

Given that the U.S. is the largest app revenue market globally, this change alone can significantly improve margins for any digital product business from subscriptions and SaaS tools to media and learning apps. For many, it's a 30% revenue unlock in their most lucrative geography.

<Tip>
  The U.S. market represents the largest opportunity for revenue recovery, with developers able to bypass the full 30% Apple commission through compliant external payment links.
</Tip>

## How Dodo Payments Enables This

Dodo Payments acts as a Merchant of Record, handling:

* **Global tax compliance** (VAT/GST)
* **Payment processing** (cards, UPI, wallets)
* **Invoicing, refunds, fraud prevention**
* **SDK & hosted checkout integration**

This simplifies compliance and operational load while offering fee-saving alternatives that are 100% legal in supported regions.

<CardGroup cols={2}>
  <Card title="Get Started" icon="rocket" href="/quickstart">
    Begin your integration with Dodo Payments
  </Card>

  <Card title="Mobile Integration" icon="mobile" href="/developer-resources/mobile-integration">
    Learn how to integrate payments in your mobile app
  </Card>
</CardGroup>

## Conclusion: A Developer-Friendly Future Is Here

For years, the 30% store tax was a take-it-or-leave-it ultimatum. Thanks to landmark cases like Epic v. Apple, regulatory pushback, and public pressure, that model is no longer universally enforceable.

In 2025, developers finally have choices.

By combining compliant workarounds like App-to-Web flows or SDK integrations with services like Merchant-of-Record platforms like Dodo Payments, it's now practically and legally feasible to retain more revenue and control.

The app stores haven't opened the gates willingly but the gates are opening. And for developers, it's time to walk through.

<Check>
  The future of app monetization is here-one where developers can legally bypass excessive platform fees while maintaining compliance and user experience.
</Check>


# Customer Credits
Source: https://docs.dodopayments.com/features/customer-credit

Learn how to manage customer credit balances, issue service credits, and handle billing adjustments seamlessly with Dodo Payments.

<CardGroup cols={1}>
  <Card title="API Reference - Customer Credits" icon="code" href="/api-reference/customers/get-customer-wallets">
    Access the complete API documentation for managing customer credits and test credit operations interactively.
  </Card>
</CardGroup>

## What is Customer Credit?

Customer Credits provide a flexible way to manage customer balances and enhance billing relationships. With customer credits, you can:

* **Reward loyal customers** with account credits for exceptional service or loyalty programs
* **Issue service credits** to compensate for service interruptions or billing adjustments
* **Handle manual adjustments** without disrupting existing billing cycles
* **Provide refunds** that customers can use for future purchases

<Info>
  Customer credits create a positive balance in a customer's account that automatically applies to future subscription payments, reducing the amount charged to their payment method.
</Info>

## How Customer Credits Work

Customer credits operate on a simple principle: available credit is automatically applied to subscription payments before charging the customer's payment method.

### Automatic Credit Application

When a subscription payment is due, Dodo Payments follows this payment sequence:

<Steps>
  <Step title="Check Credit Balance">
    The system checks if the customer has available credit in their account.
  </Step>

  <Step title="Apply Available Credit">
    If credit is available, it's automatically applied to reduce the payment amount.
  </Step>

  <Step title="Calculate Remaining Balance">
    Any remaining amount after credit application is charged to the customer's payment method.
  </Step>

  <Step title="Process Payment">
    The final payment is processed for the remaining balance, if any.
  </Step>
</Steps>

<Info>
  Dodo Payments supports separate credit wallets for INR and USD. Credits added to an INR wallet can only be used for INR subscriptions, while USD wallet credits apply exclusively to USD subscriptions. You cannot use credits from one currency wallet to pay for subscriptions in another currency.
</Info>

### Payment Scenarios

<Tabs>
  <Tab title="Full Credit Coverage">
    **Scenario**: Customer has 60 USD credit, subscription costs 20 USD

    **Result**:

    * \$20 deducted from credit balance
    * \$0 charged to payment method
    * Remaining credit: \$40

    <Check>
      No payment method charge required when credit fully covers the subscription cost.
    </Check>
  </Tab>

  <Tab title="Partial Credit Coverage">
    **Scenario**: Customer has 60 USD credit, subscription costs 100 USD

    **Result**:

    * \$60 deducted from credit balance
    * \$40 charged to payment method
    * Remaining credit: \$0

    <Info>
      Credits are always applied first, minimizing the charge to the customer's payment method.
    </Info>
  </Tab>

  <Tab title="No Credit Available">
    **Scenario**: Customer has 0 USD credit, subscription costs 50 USD

    **Result**:

    * \$0 deducted from credit balance
    * \$50 charged to payment method
    * Remaining credit: \$0
  </Tab>
</Tabs>

## Managing Customer Credits

Effectively manage customer credit balances through the Dodo Payments dashboard with comprehensive credit and debit operations.

### Adding Credits to Customer Accounts

Increase customer account balances by adding credits for various business scenarios:

<Steps>
  <Step title="Navigate to Customer Details">
    Go to **Customers** in your dashboard and select the specific customer you want to manage.
  </Step>

  <Step title="Access Credit Ledger">
    Navigate to the **Credit Ledger** section on the customer detail page.

    <Info>
      The Credit Ledger provides a complete transaction history and current balance overview for the customer.
    </Info>
  </Step>

  <Step title="Initiate Credit Application">
    Click **Apply Credit** to open the credit management interface.
  </Step>

  <Step title="Configure Credit Details">
    Set up the credit transaction with the following information:

    <ParamField path="Transaction Type" type="string" required>
      Select **Credit** to add funds to the customer's account balance.
    </ParamField>

    <ParamField path="Amount" type="number" required>
      Enter the credit amount to add to the customer's account.
    </ParamField>

    <ParamField path="Currency" type="string" required>
      Choose the currency for the credit transaction:

      * **USD** - US Dollars
      * **INR** - Indian Rupees
    </ParamField>

    <ParamField path="Reason" type="string">
      Provide an optional explanation for the credit application, such as "Service compensation" or "Loyalty reward".
    </ParamField>
  </Step>

  <Step title="Apply Credit">
    Review the credit details and click **Apply** to add the credit to the customer's account.

    <Check>
      The credit is immediately available for use on the customer's next subscription payment.
    </Check>
  </Step>
</Steps>

### Removing Credits (Debit Operations)

Remove funds from customer accounts when adjustments or corrections are needed:

<Steps>
  <Step title="Access Credit Management">
    Follow the same navigation path: **Customers** → **Customer Detail Page** → **Credit Ledger** → **Apply Credit**.
  </Step>

  <Step title="Configure Debit Transaction">
    Set up the debit operation:

    <ParamField path="Transaction Type" type="string" required>
      Select **Debit** to remove funds from the customer's account balance.
    </ParamField>

    <ParamField path="Amount" type="number" required>
      Enter the amount to deduct from the customer's credit balance.
    </ParamField>

    <ParamField path="Currency" type="string" required>
      Choose the appropriate currency (USD or INR).
    </ParamField>

    <ParamField path="Reason" type="string">
      Provide an explanation for the debit, such as "Billing correction" or "Credit adjustment".
    </ParamField>

    <Warning>
      Ensure the customer has sufficient credit balance before applying a debit. Negative balances are not supported.
    </Warning>
  </Step>

  <Step title="Apply Debit">
    Review and confirm the debit transaction to remove the specified amount from the customer's account.
  </Step>
</Steps>

## Understanding the Credit Ledger

The Credit Ledger provides comprehensive tracking and transparency for all customer credit transactions.

### Available Credit Balance

The customer's available credit balance is prominently displayed at the top of the Credit Ledger interface, providing immediate visibility into their current credit status.

**Total Balance Overview**\
The main balance display shows the combined credit amount across all supported currencies, converted to a single currency for easy reference. This unified view helps you quickly assess the customer's total available credit without needing to calculate across multiple currencies.

<Tip>
  The total balance is automatically calculated using current exchange rates to provide an accurate combined view of multi-currency credits.
</Tip>

**Currency Breakdown**
Click the "View Breakdown" button to expand the detailed view and see individual balances for each currency:

* **USD Balance**: Shows the exact amount available in US Dollars
* **INR Balance**: Shows the exact amount available in Indian Rupees
* **Additional Currencies**: Any other currencies with available credit balances

<Note>
  The breakdown view is particularly useful when managing customers who make payments in multiple currencies or when you need to verify specific currency allocations.
</Note>

### Ledger Entry Components

Each transaction in the Credit Ledger contains the following information:

<ResponseField name="Entry ID" type="string">
  Unique identifier for each credit transaction, ensuring complete auditability.
</ResponseField>

<ResponseField name="Reference ID" type="string">
  Payment ID when the transaction is linked to a specific payment or billing event.
</ResponseField>

<ResponseField name="Event Type" type="string">
  The type of transaction that created this ledger entry:

  * **Payment** - Credit used for subscription payment
  * **PaymentReversal** - Payment reversal creating credit
  * **Refund** - Refund processed as credit
  * **RefundReversal** - Refund reversal removing credit
  * **Dispute** - Dispute-related credit adjustment
  * **DisputeReversal** - Dispute resolution adjustment
  * **MerchantAdjustment** - Manual credit/debit by merchant
</ResponseField>

<ResponseField name="Amount" type="number">
  The transaction amount, showing positive values for credits and negative values for debits.
</ResponseField>

<ResponseField name="Before Balance" type="number">
  Customer's credit balance before this transaction was processed.
</ResponseField>

<ResponseField name="After Balance" type="number">
  Customer's credit balance after this transaction was completed.
</ResponseField>

<ResponseField name="Reason" type="string">
  Optional explanation provided when the transaction was created.
</ResponseField>

<ResponseField name="Created At" type="timestamp">
  When the transaction was processed, in ISO 8601 format.
</ResponseField>

## Real-World Credit Scenarios

Understanding practical applications helps you leverage customer credits effectively for business growth and customer satisfaction.

### Scenario Examples

<AccordionGroup>
  <Accordion title="Service Credit for Downtime">
    **Situation**: Your service experienced a 2-hour outage affecting a premium customer.

    **Action**: Apply a 25 USD service credit with reason "Compensation for service downtime on \[date]"

    **Result**: Customer receives credit that automatically applies to their next USD 50 subscription, reducing their charge to \$25.

    **Business Impact**: Maintains customer satisfaction and demonstrates commitment to service quality.
  </Accordion>

  <Accordion title="Loyalty Reward Program">
    **Situation**: A customer has been subscribed for 12 consecutive months.

    **Action**: Apply a \$10 loyalty credit with reason "Annual loyalty reward - Thank you for being with us!"

    **Result**: Customer receives unexpected value, strengthening retention and brand loyalty.

    **Business Impact**: Proactive customer appreciation that encourages continued subscription.
  </Accordion>
</AccordionGroup>

## Current Limitations

<Warning>
  The following features are planned for Phase 2 release and are not currently available:
</Warning>

### Checkout Integration

Customer credits cannot currently be applied during the checkout process. Customers cannot view or use their available credit balance when making new purchases through payment pages.

**Planned Enhancement**: Future releases will include credit balance display and application options in checkout flows.

### One-Time Payment Products

Credits are currently only applicable to recurring subscription payments. They cannot be used for one-time payment products or single purchases.


# Customer Portal
Source: https://docs.dodopayments.com/features/customer-portal

Empower customers to self-serve and manage their subscriptions, billing history, license keys, and profile securely.

<Info>
  The Customer Portal is a secure, hosted area where your customers can manage subscriptions, view invoices and access license keys details—without contacting support.
</Info>

<CardGroup cols={2}>
  <Card title="Create Portal Session (API)" icon="code" href="/api-reference/customers/create-customer-portal-session">
    Programmatically create secure, time‑bound portal sessions.
  </Card>

  <Card title="Subscriptions" icon="repeat" href="/features/subscription">
    Manage recurring plans, upgrades, downgrades, and add‑ons.
  </Card>
</CardGroup>

## What Is the Customer Portal?

The portal provides a trusted, branded self‑service experience for customers to:

* **Access billing history**: View invoices and download.
* **Manage subscriptions**: Cancel a subscription.
* **Retrieve license keys**: Access all keys tied to purchases

## Key Benefits

* **Lower support volume**: Customers resolve common billing requests on their own
* **Faster time‑to‑value**: Immediate access to invoices and keys
* **Reduced churn risk**: Clear visibility into renewals and plan details
* **Secure by design**: Tokenized access with expiring links

## Access Methods

Customers can reach the portal using either a static link or a one‑time dynamic link.

### Static link (email‑based access)

Customers can request portal access by entering their email at a static link that never expires.

The static portal link format varies by environment:

**Test Mode** (for testing and development):

```bash  theme={null}
https://test.customer.dodopayments.com/login/{business_id}
```

**Live Mode** (for production with real transactions):

```bash  theme={null}
https://customer.dodopayments.com/login/{business_id}
```

Replace `{business_id}` with your actual business identifier, then share the appropriate link with customers so they can enter their email and receive secure access to the portal.

<Steps>
  <Step title="Merchant flow">
    1. Go to Sales → Customer.
    2. Click <i>Share invite</i>.
    3. Copy the <i>Static link</i> and share it with your customer.
  </Step>

  <Step title="Customer flow">
    1. Open the static link.
    2. Enter the email used at purchase.
    3. Receive a secure login link to access the portal.

    <Check>
      Existing customers are recognized automatically.
    </Check>
  </Step>
</Steps>

### Dynamic link (magic link)

A personalized, one‑time magic link that sends customers directly into the portal. The link expires in 24 hours.

<Warning>
  Dynamic links expire after 24 hours. If it expires, generate and send a new link.
</Warning>

<Steps>
  <Step title="Merchant flow">
    1. Go to Sales → Customer.
    2. Click <i>Share invite</i>.
    3. Copy the <i>Dynamic link</i> and share it with your customer.
  </Step>

  <Step title="Customer flow">
    1. Open the dynamic link.
    2. Access the Customer Portal directly without entering an email.
  </Step>
</Steps>

## Portal Features

<AccordionGroup>
  <Accordion title="Billing history">
    <Frame>
      <img src="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/billinghistory.png?fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=e0be2aa56112c41eae77f551a9bbd338" alt="Billing history" data-og-width="1920" width="1920" data-og-height="1440" height="1440" data-path="images/customer-portal/billinghistory.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/billinghistory.png?w=280&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=b8c4f598eb08eec30d0dd1d564799339 280w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/billinghistory.png?w=560&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=9921091bec722fc06e8388e073af317b 560w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/billinghistory.png?w=840&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=1588bf2421f0f8af944701ca52a0a981 840w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/billinghistory.png?w=1100&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=7bb34b54c41b20fd1a0af2551675484e 1100w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/billinghistory.png?w=1650&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=05a6117df80bff0a199ab91152b0e205 1650w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/billinghistory.png?w=2500&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=7beb2f9fd08dc6ff8967c9b0ccadfb0e 2500w" />
    </Frame>

    * See all historical transactions and invoice details
    * View and Download invoices.
  </Accordion>

  <Accordion title="Subscriptions">
    <Frame>
      <img src="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/subscriptions.png?fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=8c381b4fba972be91263fd8247524531" alt="Subscriptions management" data-og-width="1920" width="1920" data-og-height="1440" height="1440" data-path="images/customer-portal/subscriptions.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/subscriptions.png?w=280&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=a88ed6187e65f1e22d5bc81ed1dbfad0 280w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/subscriptions.png?w=560&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=9b3b3f0f555609d65c391ffefecea595 560w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/subscriptions.png?w=840&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=023060e038422819c266f47b6b1b260a 840w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/subscriptions.png?w=1100&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=6250854a8793943db9df4211e12786f8 1100w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/subscriptions.png?w=1650&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=edb81b4e030be512f52ee340d70c423c 1650w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/subscriptions.png?w=2500&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=a75625c52102ed2ba4b8fd7890a3ec0d 2500w" />
    </Frame>

    * List active and past subscriptions
    * Cancel a plan
  </Accordion>

  <Accordion title="License keys">
    <Frame>
      <img src="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/licensekeys.png?fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=df35bc2efc5908b2f7a01214a302c512" alt="License keys" data-og-width="1920" width="1920" data-og-height="1440" height="1440" data-path="images/customer-portal/licensekeys.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/licensekeys.png?w=280&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=5c54b2f6ed0a769e216b54e9e8b82392 280w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/licensekeys.png?w=560&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=39decdc9aa9ddcf7a85f4efbe200b525 560w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/licensekeys.png?w=840&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=45ce419c656e6eff0c1bf338ba385909 840w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/licensekeys.png?w=1100&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=15707635502464a2dcca8de2802ed623 1100w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/licensekeys.png?w=1650&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=ca721543c56a267b84e5d6aec74c035f 1650w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/licensekeys.png?w=2500&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=abb869bc3722779f05a236002fb75eda 2500w" />
    </Frame>

    * View all license keys issued.
  </Accordion>

  <Accordion title="Profile">
    <Frame>
      <img src="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/profile.png?fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=8ca3d827922f780f7fb4af01c762abec" alt="Profile" data-og-width="1920" width="1920" data-og-height="1440" height="1440" data-path="images/customer-portal/profile.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/profile.png?w=280&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=25e926e85db9764ba71ca6612b5ae33e 280w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/profile.png?w=560&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=1605979c217fc7cdacb081bfc3d05f36 560w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/profile.png?w=840&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=5d07399730262048446f4dfc78cb351b 840w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/profile.png?w=1100&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=d5198d6cab59d80149c7ff936cce4bde 1100w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/profile.png?w=1650&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=04d48582cb048a6c171b629528c1492e 1650w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/customer-portal/profile.png?w=2500&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=b5dc0bf08f37917bf31561d1ed25f91b 2500w" />
    </Frame>

    * View and update name, email, and phone number
  </Accordion>
</AccordionGroup>

## Integration Examples

Create a time‑bound Customer Portal session for a specific customer via API, then redirect the user to the session URL.

<CodeGroup>
  ```typescript Node.js theme={null}
  const session = await client.customers.customerPortal.create('cus_123');

  // Redirect the user to the hosted Customer Portal
  window.location.href = session.link;
  ```
</CodeGroup>

## Troubleshooting

* **Link expired**: Generate and send a new dynamic link.
* **Email not recognized**: Ask the customer to use the email associated with their purchase


# Customer Wallets
Source: https://docs.dodopayments.com/features/customer-wallet

Build credit-based billing systems like OpenAI or Claude with customer wallets. Track balances, manage credits, and create sophisticated financial workflows.

<CardGroup cols={3}>
  <Card title="Get Customer Wallets" icon="code" href="/api-reference/customers/get-customer-wallets">
    Check customer wallet balances across currencies.
  </Card>

  <Card title="Create Ledger Entry" icon="plus" href="/api-reference/customers/post-customer-wallets-ledger-entries">
    Add or remove credits from customer wallets.
  </Card>

  <Card title="List Ledger Entries" icon="list" href="/api-reference/customers/get-customer-wallets-ledger-entries">
    View complete transaction history with pagination.
  </Card>
</CardGroup>

## What are Customer Wallets?

Think of customer wallets as digital piggy banks for your users. Every customer gets one automatically when you create their account. You can use these wallets to:

* **Track credit balances** in USD and INR
* **Build API credit systems** like OpenAI or Claude
* **Create prepaid billing** where customers buy credits upfront
* **Handle refunds** as wallet credits instead of cash
* **Manage complex billing** with detailed transaction history

<Info>
  Every customer automatically gets a wallet when you create their account. Wallets support USD and INR currencies with separate balances for each.
</Info>

<Frame>
  <img src="https://mintcdn.com/dodopayments/9oQrV7vsGpxeyDkL/images/customer/customer-wallet.png?fit=max&auto=format&n=9oQrV7vsGpxeyDkL&q=85&s=a4a7ff3c89f4074f37e19b8d99d49ef5" alt="Customer Wallets" data-og-width="2860" width="2860" data-og-height="1492" height="1492" data-path="images/customer/customer-wallet.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/9oQrV7vsGpxeyDkL/images/customer/customer-wallet.png?w=280&fit=max&auto=format&n=9oQrV7vsGpxeyDkL&q=85&s=5de571bd9128655c329924adc861cfcd 280w, https://mintcdn.com/dodopayments/9oQrV7vsGpxeyDkL/images/customer/customer-wallet.png?w=560&fit=max&auto=format&n=9oQrV7vsGpxeyDkL&q=85&s=343e5cf64b26f1a591dda80af564e017 560w, https://mintcdn.com/dodopayments/9oQrV7vsGpxeyDkL/images/customer/customer-wallet.png?w=840&fit=max&auto=format&n=9oQrV7vsGpxeyDkL&q=85&s=073bcc1abb395e4b7e890c1775d31edb 840w, https://mintcdn.com/dodopayments/9oQrV7vsGpxeyDkL/images/customer/customer-wallet.png?w=1100&fit=max&auto=format&n=9oQrV7vsGpxeyDkL&q=85&s=ae7ff7000a188fdf23a048c0305d48be 1100w, https://mintcdn.com/dodopayments/9oQrV7vsGpxeyDkL/images/customer/customer-wallet.png?w=1650&fit=max&auto=format&n=9oQrV7vsGpxeyDkL&q=85&s=e78170f205e6434c3e2e6a5af1c08213 1650w, https://mintcdn.com/dodopayments/9oQrV7vsGpxeyDkL/images/customer/customer-wallet.png?w=2500&fit=max&auto=format&n=9oQrV7vsGpxeyDkL&q=85&s=933cdc0694117d85433fd58ea6a53d93 2500w" />
</Frame>

## How It Works

Customer wallets are simple: they hold money (credits) that customers can spend on your services. When a customer makes a purchase, their wallet balance is checked first, and any available credits are used before charging their payment method.

### Automatic Setup

When you create a new customer, Dodo Payments automatically creates a wallet with zero balance. It's ready to use immediately through our API.

### Multi-Currency Support

Each wallet can hold balances in different currencies:

<ResponseField name="USD Balance" type="integer">
  Balance in US Dollars (stored in cents)
</ResponseField>

<ResponseField name="INR Balance" type="integer">
  Balance in Indian Rupees (stored in paise)
</ResponseField>

<Info>
  Currently, only <strong>USD</strong> and <strong>INR</strong> balances are available. More currencies coming soon.
</Info>

## Working with Wallets

### Check Customer Balances

See how much credit a customer has across all currencies. Perfect for checking if they have enough funds before processing a purchase.

<Card title="Get Customer Wallet Balances" icon="wallet" href="/api-reference/customers/get-customer-wallets">
  Check a customer’s wallet credit balances in all supported currencies.
</Card>

### Add or Remove Credits

Give customers credits (like welcome bonuses) or deduct credits (like usage charges). You can add reasons for each transaction to keep track of what happened.

<Card title="Create Customer Wallet Ledger Entry" icon="plus" href="/api-reference/customers/post-customer-wallets-ledger-entries">
  Add or remove credits from a customer’s wallet.
</Card>

### View Transaction History

See every credit and debit transaction for a customer. Great for debugging billing issues or showing customers their spending history.

<Card title="List Customer Wallet Ledger Entries" icon="list" href="/api-reference/customers/get-customer-wallets-ledger-entries">
  View every credit and debit transaction for a customer.
</Card>

## Real-World Examples

### API Credit System (Like OpenAI)

Build a system where customers buy credits and spend them on API calls:

```javascript  theme={null}
// Give new customers welcome credits
async function giveWelcomeCredits(customerId) {
  await client.customers.wallets.ledgerEntries.create(customerId, {
    amount: 10000, // $100 in cents
    currency: 'USD',
    entry_type: 'credit',
    reason: 'Welcome bonus - 100 API credits',
    idempotency_key: `welcome_${customerId}_${Date.now()}`
  });
}

// Charge customers for API usage
async function chargeForApiUsage(customerId, usageCost) {
  try {
    await client.customers.wallets.ledgerEntries.create(customerId, {
      amount: usageCost, // Cost in cents
      currency: 'USD',
      entry_type: 'debit',
      reason: `API usage - ${usageCost} credits consumed`,
      idempotency_key: `usage_${customerId}_${Date.now()}`
    });
  } catch (error) {
    if (error.status === 400) {
      console.log('Customer needs to buy more credits');
    }
  }
}
```

### Prepaid Billing System

Let customers buy credits upfront and spend them over time:

<Steps>
  <Step title="Welcome New Customers">
    Give new customers some free credits to get started.

    ```javascript  theme={null}
    await client.customers.wallets.ledgerEntries.create(customerId, {
      amount: 5000, // $50 welcome bonus
      currency: 'USD',
      entry_type: 'credit',
      reason: 'Welcome bonus for new customer',
      idempotency_key: `welcome_${customerId}`
    });
    ```
  </Step>

  <Step title="Handle Credit Purchases">
    When customers buy credits, add them to their wallet.

    ```javascript  theme={null}
    await client.customers.wallets.ledgerEntries.create(customerId, {
      amount: purchaseAmount, // Amount paid in cents
      currency: 'USD',
      entry_type: 'credit',
      reason: `Credit purchase - ${purchaseAmount} credits`,
      idempotency_key: `purchase_${paymentId}`
    });
    ```
  </Step>

  <Step title="Charge for Usage">
    Deduct credits when customers use your service.

    ```javascript  theme={null}
    await client.customers.wallets.ledgerEntries.create(customerId, {
      amount: usageCost,
      currency: 'USD', 
      entry_type: 'debit',
      reason: `Service usage - ${usageCost} credits`,
      idempotency_key: `usage_${usageId}`
    });
    ```
  </Step>

  <Step title="Monitor Balances">
    Check if customers are running low on credits.

    ```javascript  theme={null}
    const wallets = await client.customers.wallets.list(customerId);
    const usdWallet = wallets.items.find(w => w.currency === 'USD');
    const balance = usdWallet.balance;

    if (balance < 1000) { // Less than $10
      // Send low balance notification
      await sendLowBalanceNotification(customerId, balance);
    }
    ```
  </Step>
</Steps>

### Multi-Currency Support

Handle customers in different countries:

<AccordionGroup>
  <Accordion title="US Customers">
    Give USD credits to US-based customers.

    ```javascript  theme={null}
    await client.customers.wallets.ledgerEntries.create(customerId, {
      amount: 20000, // $200 in cents
      currency: 'USD',
      entry_type: 'credit',
      reason: 'USD credit purchase',
      idempotency_key: `usd_purchase_${paymentId}`
    });
    ```
  </Accordion>

  <Accordion title="Indian Customers">
    Give INR credits to Indian customers.

    ```javascript  theme={null}
    await client.customers.wallets.ledgerEntries.create(customerId, {
      amount: 1500000, // ₹15,000 in paise
      currency: 'INR',
      entry_type: 'credit',
      reason: 'INR credit purchase',
      idempotency_key: `inr_purchase_${paymentId}`
    });
    ```
  </Accordion>
</AccordionGroup>

## Best Practices

### Prevent Duplicate Transactions

Use idempotency keys to make sure you don't accidentally charge customers twice for the same thing:

```javascript  theme={null}
async function addCreditsSafely(customerId, amount, reason) {
  const idempotencyKey = `${reason}_${customerId}_${Date.now()}`;
  
  try {
    const result = await client.customers.wallets.ledgerEntries.create(customerId, {
      amount: amount,
      currency: 'USD',
      entry_type: 'credit',
      reason: reason,
      idempotency_key: idempotencyKey
    });
    
    return { success: true, wallet: result };
  } catch (error) {
    if (error.status === 400 && error.message.includes('Insufficient balance')) {
      return { success: false, error: 'INSUFFICIENT_BALANCE' };
    }
    
    if (error.status === 409) {
      // Transaction already processed
      return { success: true, wallet: null, duplicate: true };
    }
    
    throw error;
  }
}
```

### Check Balances Before Charging

Always verify customers have enough credits before processing expensive operations:

```javascript  theme={null}
async function checkBalanceBeforeOperation(customerId, requiredAmount) {
  const wallets = await client.customers.wallets.list(customerId);
  const usdWallet = wallets.items.find(w => w.currency === 'USD');
  
  if (!usdWallet || usdWallet.balance < requiredAmount) {
    throw new Error('Not enough credits for this operation');
  }
  
  return usdWallet.balance;
}
```

## What's Coming Next

<Warning>
  These features are planned for future releases:
</Warning>

* **Credit Expiration**: Set credits to expire after a certain time
* **Better Analytics**: Detailed spending reports and usage insights
* **More Webhooks**: Real-time notifications for balance changes and low credits

<Tip>
  Start simple with basic credit/debit operations, then add more complex features as your business grows.
</Tip>


# Customer Management
Source: https://docs.dodopayments.com/features/customers

Manage customer relationships, track purchase history, and provide self-service options through the Dodo Payments dashboard and API.

## Overview

The Customers feature in Dodo Payments provides a centralized hub for managing all your customer relationships. Track every customer interaction, view purchase history, manage subscriptions, access wallet credit ledgers, and enable self-service options - all from a single dashboard.

<CardGroup cols={2}>
  <Card title="Customer Dashboard" icon="table-columns">
    View and manage all customers in one place with search and filtering capabilities.
  </Card>

  <Card title="Customer Wallets" icon="wallet">
    Build credit-based billing systems with prepaid balances and transaction tracking.
  </Card>

  <Card title="Customer Portal" icon="id-card">
    Empower customers to self-manage subscriptions, invoices, and license keys.
  </Card>

  <Card title="API Management" icon="code">
    Programmatically create, update, and retrieve customer data via API.
  </Card>
</CardGroup>

## Accessing the Customers Page

<Steps>
  <Step title="Navigate to Customers">
    From the dashboard, click on **Sales > Customers** in the navigation menu.
  </Step>

  <Step title="View Customer List">
    The Customers Page will display a list of all current and past customers who have interacted with your business.
  </Step>
</Steps>

<Frame>
  <img src="https://mintcdn.com/dodopayments/IKECEhkZu9f1KFmK/images/customer/customers-list.png?fit=max&auto=format&n=IKECEhkZu9f1KFmK&q=85&s=d110d27ad8c3fa8e623241b62d47601c" alt="Customers list page showing all customers with their details" data-og-width="1662" width="1662" data-og-height="782" height="782" data-path="images/customer/customers-list.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/IKECEhkZu9f1KFmK/images/customer/customers-list.png?w=280&fit=max&auto=format&n=IKECEhkZu9f1KFmK&q=85&s=6c22c35b5d87e891a6195ab2de072f7c 280w, https://mintcdn.com/dodopayments/IKECEhkZu9f1KFmK/images/customer/customers-list.png?w=560&fit=max&auto=format&n=IKECEhkZu9f1KFmK&q=85&s=76733cd127b342b41dd1115972bb5dce 560w, https://mintcdn.com/dodopayments/IKECEhkZu9f1KFmK/images/customer/customers-list.png?w=840&fit=max&auto=format&n=IKECEhkZu9f1KFmK&q=85&s=bce641f90fd3395301437d2fb84a14a8 840w, https://mintcdn.com/dodopayments/IKECEhkZu9f1KFmK/images/customer/customers-list.png?w=1100&fit=max&auto=format&n=IKECEhkZu9f1KFmK&q=85&s=5a56e52168f094cd6705eb7806477910 1100w, https://mintcdn.com/dodopayments/IKECEhkZu9f1KFmK/images/customer/customers-list.png?w=1650&fit=max&auto=format&n=IKECEhkZu9f1KFmK&q=85&s=e09594217790e616ec99623013cce348 1650w, https://mintcdn.com/dodopayments/IKECEhkZu9f1KFmK/images/customer/customers-list.png?w=2500&fit=max&auto=format&n=IKECEhkZu9f1KFmK&q=85&s=589120ad297f6f5e4743db7062b489e5 2500w" />
</Frame>

## Customer Information

On the **Customers Page**, you can see a comprehensive overview of your entire customer base. The table displays all customers with the following information:

### Customer List Columns

* **Customer Name**: The full name of the customer with an avatar indicator.
* **Customer Id**: A unique identifier (e.g., `cus_5fpsWAa...`) for each customer.
* **Email**: The customer's email address for communication and portal access.
* **Phone Number**: The customer's phone number (if provided).
* **Created At (UTC)**: The date and time when the customer account was created.
* **Invite**: Quick action button to share Customer Portal invites.

### Page Features

* **Edit Columns**: Customize which columns are displayed in the customer table.
* **Build Report**: Generate custom reports based on your customer data.
* **Search**: Quickly find specific customers by name, email, or customer ID.
* **Pagination**: Navigate through your customer list with adjustable rows per page.

<Tip>
  Use the "Edit Columns" feature to customize your view and show only the information most relevant to your workflow.
</Tip>

## Customer Details Page

Click on any customer to view their detailed information page, which includes:

<Frame>
  <img src="https://mintcdn.com/dodopayments/IKECEhkZu9f1KFmK/images/customer/customer-details.png?fit=max&auto=format&n=IKECEhkZu9f1KFmK&q=85&s=4f1d97a2d31f5e64fb4a075dde6239ff" alt="Customer details page showing customer information and transaction history" data-og-width="1657" width="1657" data-og-height="931" height="931" data-path="images/customer/customer-details.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/IKECEhkZu9f1KFmK/images/customer/customer-details.png?w=280&fit=max&auto=format&n=IKECEhkZu9f1KFmK&q=85&s=705e3e4d7ddf73cd384b013575fdf7b7 280w, https://mintcdn.com/dodopayments/IKECEhkZu9f1KFmK/images/customer/customer-details.png?w=560&fit=max&auto=format&n=IKECEhkZu9f1KFmK&q=85&s=74e7aaaedaab3055196ee0470245f2a8 560w, https://mintcdn.com/dodopayments/IKECEhkZu9f1KFmK/images/customer/customer-details.png?w=840&fit=max&auto=format&n=IKECEhkZu9f1KFmK&q=85&s=fe27a6b0f185561d3cfdae3dea18d745 840w, https://mintcdn.com/dodopayments/IKECEhkZu9f1KFmK/images/customer/customer-details.png?w=1100&fit=max&auto=format&n=IKECEhkZu9f1KFmK&q=85&s=4cd12f91aba6050db730ef016d9eef5a 1100w, https://mintcdn.com/dodopayments/IKECEhkZu9f1KFmK/images/customer/customer-details.png?w=1650&fit=max&auto=format&n=IKECEhkZu9f1KFmK&q=85&s=a48e69b788d8ae53038b2001906cd082 1650w, https://mintcdn.com/dodopayments/IKECEhkZu9f1KFmK/images/customer/customer-details.png?w=2500&fit=max&auto=format&n=IKECEhkZu9f1KFmK&q=85&s=e8a47964842097d1679b146c6de145e9 2500w" />
</Frame>

### About Section

The About section displays core customer information:

* **Name**: Customer's full name
* **Email**: Customer's email address
* **Customer ID**: Unique identifier for API and tracking purposes
* **Created At**: Timestamp of when the customer account was created

### Customer Activity Tabs

The customer details page includes three tabs for viewing different aspects of customer activity:

<Tabs>
  <Tab title="Transactions History">
    View all payment transactions for this customer including:

    * **Payment ID**: Unique transaction identifier
    * **Status**: Payment status (Successful, Failed, Pending, Refunded)
    * **Amount**: Transaction amount
    * **Date (UTC)**: When the transaction occurred
    * **Pricing Type**: Whether it's a one-time purchase or subscription
    * **Payment Method**: Payment method used (Card, UPI, etc.)
    * **Customer Email**: Email associated with the transaction
    * **Refund**: Quick action to initiate refunds
    * **Actions**: Additional options for managing the transaction
  </Tab>

  <Tab title="Active Subscriptions">
    View all active subscriptions for this customer:

    * Subscription plan details
    * Billing cycle and next renewal date
    * Subscription status
    * Options to manage or cancel subscriptions
  </Tab>

  <Tab title="Credit Ledger">
    View the customer's wallet credit ledger showing:

    * All credit and debit transactions
    * Current wallet balance in each currency
    * Transaction reasons and timestamps
    * Detailed transaction history for reconciliation
  </Tab>
</Tabs>

<Note>
  The Credit Ledger tab provides complete transparency into customer wallet transactions, making it easy to track credits, debits, and current balances.
</Note>

## Customer Portal

The Customer Portal is a secure, hosted self-service area where your customers can manage their subscriptions, view billing history, access license keys, and update their profile—without contacting support.

### Portal Capabilities

Customers can access the portal to:

* **View Billing History**: See all past transactions and download invoices.
* **Manage Subscriptions**: Cancel or view subscription details.
* **Retrieve License Keys**: Access all license keys tied to their purchases.
* **Update Profile**: Change name, email, or phone number.

<Card title="Learn More About Customer Portal" icon="id-card" href="/features/customer-portal">
  Explore detailed documentation on portal features, access methods, and integration examples.
</Card>

## Customer Wallets

Customer Wallets enable you to build credit-based billing systems similar to OpenAI or Claude. Each customer automatically receives a wallet that can hold prepaid credits in multiple currencies.

### Key Features

* **Multi-Currency Support**: Track balances in USD and INR separately.
* **Credit-Based Billing**: Allow customers to purchase credits upfront and spend them on your services.
* **Transaction History**: View complete ledger of all credits and debits.
* **API-First Design**: Programmatically add, remove, and check wallet balances.

<Card title="Learn More About Customer Wallets" icon="wallet" href="/features/customer-wallet">
  Explore detailed documentation, code examples, and best practices for implementing customer wallets.
</Card>

## API Management

Dodo Payments provides a comprehensive REST API for programmatic customer management. You can create, retrieve, update, and manage customers entirely through the API.

### Available API Endpoints

<CardGroup cols={2}>
  <Card title="Create Customer" icon="user-plus" href="/api-reference/customers/create-customer">
    Create a new customer in your Dodo Payments account with their details.
  </Card>

  <Card title="List Customers" icon="list" href="/api-reference/customers/get-customers">
    Retrieve a paginated list of all customers associated with your account.
  </Card>

  <Card title="Get Customer Details" icon="user" href="/api-reference/customers/get-customers-1">
    Get detailed information about a specific customer by their ID.
  </Card>

  <Card title="Update Customer" icon="pen" href="/api-reference/customers/patch-customer">
    Update a customer's information such as name, email, or metadata.
  </Card>

  <Card title="Create Portal Session" icon="arrow-up-right-from-square" href="/api-reference/customers/create-customer-portal-session">
    Generate a secure Customer Portal session link for a specific customer.
  </Card>
</CardGroup>

<Note>
  All API endpoints require authentication using your API key. Always use your secret key on the server-side and never expose it in client-side code.
</Note>


# Digital Product Delivery
Source: https://docs.dodopayments.com/features/digital-product-delivery

The Digital Product Delivery feature in Dodo Payments allows merchants to deliver digital products to their customers.

## Overview

The **Digital Product Delivery** feature enables merchants to automatically deliver digital files to customers after successful purchases. Whether you're selling e-books, design templates, software, or media packs, you can attach downloadable content to your products, providing instant access via email and the customer portal.

This feature supports both hosted file uploads and external download links, offering flexibility for various use cases.

## Key Features

<CardGroup cols={2}>
  <Card title="File Upload" icon="upload">
    Upload and deliver digital files (PDF, ZIP, images, videos, etc.) directly to your customers.
  </Card>

  <Card title="Multiple Files" icon="files">
    Attach up to 10 files per product for comprehensive digital product delivery.
  </Card>

  <Card title="External Links" icon="link">
    Provide external download links (Dropbox, Google Drive, etc.) as an alternative to file uploads.
  </Card>

  <Card title="Automatic Delivery" icon="download">
    Customers automatically receive download instructions via email upon successful payment.
  </Card>
</CardGroup>

## Setup Process

<Steps>
  <Step title="Navigate to Products">
    Go to your dashboard and select **Products > Create New** or edit an existing product. Navigate to **Advanced Settings → Digital Product Delivery**.
  </Step>

  <Step title="Configure File Delivery">
    Choose one of the following options:

    * **Upload File(s)**: Add up to 10 files directly to your product
    * **External Download Link**: Paste a secure link hosted externally (e.g., Dropbox, Google Drive)

    <Frame>
      <img src="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/1.png?fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=cef4c6587998b8b7ee00bfb314002571" alt="Digital product delivery configuration interface showing file upload and external link options" data-og-width="1920" width="1920" data-og-height="1080" height="1080" data-path="images/digital-product-delivery/1.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/1.png?w=280&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=9d7e8424e5ac1a17955e949d87b57d12 280w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/1.png?w=560&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=f03ce39ea2bd6dac97eae3e52e6ac8e1 560w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/1.png?w=840&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=b4dc8e83004c799bf8020a14b883cc23 840w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/1.png?w=1100&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=d53bb0617e0f7ce4b860281d56bd6753 1100w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/1.png?w=1650&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=e4c5131d3b8504c5e7c4a547daf64db9 1650w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/1.png?w=2500&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=1847ee99a10d2936cfcbfbc772d5f3b8 2500w" />
    </Frame>
  </Step>

  <Step title="Save Configuration">
    Click **Update Product** to make your digital product delivery settings live.

    <Warning>
      Uploaded files are served via static URLs — anyone with the link can access the file. Consider external services with authentication for sensitive content.
    </Warning>
  </Step>
</Steps>

## Customer Experience

### Purchase Confirmation

After a successful transaction, customers receive a purchase confirmation email containing download links for their digital products.

<Frame>
  <img src="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/2.png?fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=54f5247f6d67fe5bb48736682995e23e" alt="Purchase confirmation email showing download links for digital products" data-og-width="1920" width="1920" data-og-height="1080" height="1080" data-path="images/digital-product-delivery/2.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/2.png?w=280&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=1f371a4ddfeb72f5541981a10e190b14 280w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/2.png?w=560&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=8983987bdfc12a399432b27f9ab7bd1a 560w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/2.png?w=840&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=15e6bd4ac2e1975ef270c277ab0675b2 840w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/2.png?w=1100&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=f98f76fab3e776c9140a0853dd29e33c 1100w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/2.png?w=1650&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=9d9f443c0b2c8be841a620e281c730a3 1650w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/2.png?w=2500&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=9ec90731f8c3e4389c9d3b1a9ebcf4d2 2500w" />
</Frame>

### Customer Portal Access

Customers can access their digital products through the Customer Portal:

* Log in to view all past purchases
* Download files or access external links for each product
* Persistent access to purchased digital content

<Frame>
  <img src="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/3.png?fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=490c6755474c1f00a93f7adde7dabb63" alt="Customer portal interface showing available digital products for download" data-og-width="1920" width="1920" data-og-height="1080" height="1080" data-path="images/digital-product-delivery/3.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/3.png?w=280&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=6f7f328b4d7e3d598de647f33ff8816f 280w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/3.png?w=560&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=479ce69b7fd49d241b55713384b3be4b 560w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/3.png?w=840&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=abe3e3c29774c4b4a8dba8006e0d4df7 840w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/3.png?w=1100&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=23a84d29538be3918477087aa9840e7f 1100w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/3.png?w=1650&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=ade2d7287d06faaa7cc607a90e06a723 1650w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/digital-product-delivery/3.png?w=2500&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=decfdceb499772f9d16dbc46fdb95ed1 2500w" />
</Frame>

<Check>
  Customers can download files directly from confirmation emails or access them anytime through their portal.
</Check>

## Important Considerations

* **Security**: Static download links are not order-authenticated. Customers with the link can re-share the same link with other parties. For secure or licensed content, consider integrating with external services that support gated or authenticated access.
* **File Updates**: Updating a file or external link will affect all future purchases only. Past purchases will not be affected and customers can still access those files
* **Refunds**: Issuing a refund does not revoke access to files. Customers who already downloaded a file will still have it on their device.
* **Best Practice**: For version control or limited-time access, consider delivering your content via expiring or signed URLs hosted externally.


# Discounts
Source: https://docs.dodopayments.com/features/discount-codes

Create promotional codes to drive conversions, run campaigns, and reward customers with fixed or percentage discounts across one‑time and subscription purchases.

<Frame>
  <img src="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/discount-codes/discount-code-cover.png?fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=57f1a644801ddc5efc506b50541eaaba" alt="Discount codes overview cover" data-og-width="1200" width="1200" data-og-height="630" height="630" data-path="images/discount-codes/discount-code-cover.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/discount-codes/discount-code-cover.png?w=280&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=4d5c44eb8543a1d46dc53a7adedf50d8 280w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/discount-codes/discount-code-cover.png?w=560&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=8c0b0731745c40f5d8a996e5f03e70cd 560w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/discount-codes/discount-code-cover.png?w=840&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=d587e0289999b87aca605f8716c2536b 840w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/discount-codes/discount-code-cover.png?w=1100&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=dd9163655f7aec8fb2922bb2d7d53daa 1100w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/discount-codes/discount-code-cover.png?w=1650&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=757ed030e06e972b3d547f5ad4b5f2da 1650w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/discount-codes/discount-code-cover.png?w=2500&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=81e4b9b5a2cc2719abdbf6a396ffdbd6 2500w" />
</Frame>

Discount codes let you run targeted promotions and incentives. Create percentage or fixed-amount discounts, set limits and expirations, restrict to products, and apply them seamlessly in checkout.

<CardGroup cols={2}>
  <Card title="Checkout Sessions" icon="cart-shopping" href="/developer-resources/checkout-session">
    Apply codes during hosted checkout with `discount_code` and UI controls.
  </Card>

  <Card title="Validate Discount" icon="code" href="/api-reference/discounts/validate-discount">
    Check if a code is valid and applicable before applying.
  </Card>

  <Card title="Create Discount (API)" icon="code" href="/api-reference/discounts/create-discount">
    Programmatically create new discount codes.
  </Card>

  <Card title="List & Update Discounts" icon="code" href="/api-reference/discounts/list-discounts">
    Browse and manage existing discounts; update or delete as needed.
  </Card>
</CardGroup>

## What Are Discount Codes?

Discount codes are promotional tokens that reduce order totals at checkout. They’re ideal for:

* **Seasonal campaigns**: Black Friday, product launches, or anniversaries
* **Acquisition offers**: First‑purchase incentives or referral rewards
* **Retention**: Win‑back or loyalty rewards for existing customers
* **B2B deals**: Contracted or negotiated pricing via private codes

## Key Benefits

* **Flexible discounts**: Percentage or fixed amount off
* **Targeted control**: Restrict by product and subscription cycles
* **Campaign governance**: Expiration dates and usage limits
* **Seamless checkout**: UI field and API support via checkout sessions

## Creating Discount Codes

Create discount codes in your Dodo Payments dashboard, then apply them in hosted checkout or via API.

### Dashboard setup

* **Discount Name** (required): Internal and dashboard display name
* **Code** (required): The string customers enter at checkout
* **Type & Amount** (required): Set a percentage or fixed‑amount value, or generate a random code using the button provided
* **Expiration Date** (optional): Date after which the code becomes invalid
* **Usage Limit** (optional): Max total redemptions across all customers
* **Product Restriction** (optional): Limit applicability to selected products
* **Subscription Cycle Limit** (optional): Number of billing cycles the discount applies to

<Tip>
  Use cycle limits for introductory pricing on subscriptions (e.g., "50% off for 3 months").
</Tip>

## Checkout Experience

1. Shoppers enter the code in the checkout field.
2. Eligible discounts are applied and totals update immediately.

<Info>
  In Checkout Sessions, pass `discount_code` to pre‑apply a code, and set `feature_flags.allow_discount_code` to show the input field.
</Info>

## API Management

<AccordionGroup>
  <Accordion title="Create discounts">
    Create discount codes programmatically with type and amount.

    <Card title="API Reference" icon="code" href="/api-reference/discounts/create-discount">
      View the create discount API.
    </Card>
  </Accordion>

  <Accordion title="List and retrieve">
    List all discounts or retrieve details for management and auditing.

    <Card title="API Reference" icon="code" href="/api-reference/discounts/list-discounts">
      Browse listing and retrieval APIs.
    </Card>
  </Accordion>

  <Accordion title="Update discounts">
    Modify discount configuration such as amount, expiration, or restrictions.

    <Card title="API Reference" icon="code" href="/api-reference/discounts/update-discount">
      Learn how to update discount details.
    </Card>
  </Accordion>

  <Accordion title="Validate discounts">
    Check whether a discount is valid and applicable before applying.

    <Card title="API Reference" icon="code" href="/api-reference/discounts/validate-discount">
      Validate discount usage.
    </Card>
  </Accordion>

  <Accordion title="Delete discounts">
    Deactivate or remove discounts that are no longer needed.

    <Card title="API Reference" icon="code" href="/api-reference/discounts/delete-discount">
      Delete a discount.
    </Card>
  </Accordion>
</AccordionGroup>

## Common Use Cases

* **Intro offers**: Limited‑time launch promotions for new products
* **Bulk or B2B**: Contracted discounts for select product sets
* **Retention plays**: Win‑back codes in churn‑prevention workflows
* **Seasonal campaigns**: Holiday or event‑based promotions

## Integration Examples

### Apply a discount in Checkout Sessions

Pre‑apply a discount and show the code input UI.

```typescript  theme={null}
const session = await client.checkoutSessions.create({
  product_cart: [
    { product_id: 'prod_abc', quantity: 1 }
  ],
  discount_code: 'BLACKFRIDAY2024',
  customer: { email: 'user@example.com', name: 'Jane Doe' },
  return_url: 'https://yoursite.com/return'
});
```

### Enable discount entry without pre‑applying

Let customers enter a code at checkout without passing one upfront.

```typescript  theme={null}
const session = await client.checkoutSessions.create({
  product_cart: [
    { product_id: 'prod_abc', quantity: 1 }
  ],
  feature_flags: {
    allow_discount_code: true
  },
  return_url: 'https://yoursite.com/return'
});
```

## Best Practices

* **Name clearly**: Use recognizable codes that match campaign names
* **Time‑box**: Add expirations to drive urgency and prevent misuse
* **Scope wisely**: Limit to specific products to avoid margin leakage
* **Validate early**: Check code applicability before confirming checkout
* **Monitor impact**: Track usage and conversion by campaign

<Info>
  Discount codes are powerful levers for acquisition and retention. Start with simple, well‑named offers, validate thoroughly, and iterate based on performance.
</Info>


# Feature Request and Roadmap
Source: https://docs.dodopayments.com/features/feature-request

We value feedback from our merchants and aim to continuously improve Dodo Payments to meet your business needs. The **Feature Request and Roadmap** section allows you to directly contribute to our product development by suggesting new features, voting on existing requests, and staying informed about upcoming updates.

## **Request a New Feature**

If you have an idea for a feature that would enhance your experience with Dodo Payments, you can submit a feature request.

<img src="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/feature-request/Feature.webp?fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=9c0dfedecf84a0a609f80e6d0cd97d2e" alt="Feature Request" data-og-width="1000" width="1000" data-og-height="609" height="609" data-path="images/feature-request/Feature.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/feature-request/Feature.webp?w=280&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=1aea2de3d342699d003e77fd22836bd4 280w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/feature-request/Feature.webp?w=560&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=91cc121ca7ac8c33fd8275f1016d74ac 560w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/feature-request/Feature.webp?w=840&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=37d489dce11b827b99b08b6f27c5a6f4 840w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/feature-request/Feature.webp?w=1100&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=14b8fe3b4b6a6e26e9b6c34b1f5d7bdb 1100w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/feature-request/Feature.webp?w=1650&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=e0a12bc4857e3592c95ffdb5b9c6660c 1650w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/feature-request/Feature.webp?w=2500&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=c4ea78a8c2e05097e1762d4977e36dd9 2500w" />

* **How to Request a Feature**:
  1. Navigate to the **Feature Request** section on the dashboard.
  2. Click on **"Request a New Feature"**.
  3. Provide the following details:
     * **Feature Name**: A concise title for your feature idea.
     * **Feature Description**: A brief explanation of the feature, including why it’s important and how it will help your business.
  4. Submit the request.
* **Tips for Effective Requests**:
  * Be clear and concise.
  * Highlight the business impact of the feature.
  * Provide examples, if applicable.

## **Vote for Existing Feature Requests**

We prioritize features that benefit the most merchants. You can browse existing feature requests and vote for those you find valuable.

* **How to Vote**:
  1. Go to the **Feature Request** section.
  2. Scroll through the list of submitted requests.
  3. Click the **"Upvote"** button next to the feature(s) you support.
* **Benefits of Voting**:
  * Influence the development priority for features you care about.
  * Help our team identify features that have widespread demand.

## **View the Product Roadmap**

Stay informed about the status of feature development through the **Roadmap** section.

* **Roadmap Features**:
  * **Planned**: Features that have been approved and are scheduled for development.
  * **In Progress**: Features currently being worked on by our team.
  * **Completed**: Features that have been successfully implemented and are live.
* **How to Access**:
  * Navigate to the **Roadmap** tab within the Feature Request section.
  * Browse the feature categories and their current statuses.


# Invoice Management
Source: https://docs.dodopayments.com/features/invoice-generation

Automatically generate and deliver professional invoices for every successful payment, with customizable branding and seamless email delivery.

<Frame>
  <img src="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Invoice%20Generation.webp?fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=d51414d96f53014f6374ddcce586559d" alt="Invoice Generation Cover Image" data-og-width="1200" width="1200" data-og-height="630" height="630" data-path="images/cover-images/Invoice Generation.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Invoice%20Generation.webp?w=280&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=a9f185b85911a66959f19c7181360dbf 280w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Invoice%20Generation.webp?w=560&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=76e66e5569febcab592dc496830dab36 560w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Invoice%20Generation.webp?w=840&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=4436692a7e8dea43d3950073daa2f1f6 840w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Invoice%20Generation.webp?w=1100&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=34812296acd2ff51a270c88c29f8e0ed 1100w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Invoice%20Generation.webp?w=1650&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=08c383b282b78482f324277662dac511 1650w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Invoice%20Generation.webp?w=2500&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=4702e5320faea9b7383a17dde355e464 2500w" />
</Frame>

## Overview

Dodo Payments automatically generates professional invoices for every successful transaction, eliminating manual invoice creation and ensuring consistent documentation for your business. Invoices are instantly delivered to both you and your customers via email after each payment.

<Info>
  Invoices are generated automatically for both one-time purchases and recurring subscription payments.
</Info>

## Key Features

<CardGroup cols={2}>
  <Card title="Automatic Generation" icon="wand-magic-sparkles">
    Invoices are created instantly after successful payment processing without manual intervention.
  </Card>

  <Card title="Custom Branding" icon="palette">
    Add your business logo and name to maintain brand consistency across all customer touchpoints.
  </Card>

  <Card title="Email Delivery" icon="envelope">
    Invoices are automatically sent to customers and merchants immediately after generation.
  </Card>

  <Card title="Dashboard Management" icon="table-columns">
    Access and download invoices from a centralized dashboard view.
  </Card>
</CardGroup>

## Setting Up Invoice Branding

<Steps>
  <Step title="Navigate to Business Profile">
    Open the Dodo Payments dashboard and go to **Settings** → **Business Profile**.
  </Step>

  <Step title="Configure Branding">
    Upload your business logo and enter your business name. These details will appear on all generated invoices.

    <Tip>
      Use a high-resolution logo (minimum 300x300px) in PNG format for the best print quality.
    </Tip>
  </Step>

  <Step title="Save Configuration">
    Click **Save** to apply your branding settings. All future invoices will automatically use these details.

    <Check>
      Your invoice branding is now configured and will be applied to all new invoices.
    </Check>
  </Step>
</Steps>

## What's Included in Invoices

Every generated invoice contains comprehensive transaction details:

* **Business Information**: Your business name, logo, and contact details
* **Customer Details**: Customer name and email address
* **Invoice Number**: Unique identifier for tracking and reference
* **Transaction Date**: When the payment was processed
* **Payment Details**: Amount paid, currency, and payment method
* **Product/Service Description**: Itemized list of purchased products or subscriptions
* **Tax Information**: Applicable taxes and tax identification numbers
* **Payment Status**: Confirmation of successful payment

<Note>
  Invoice numbers are automatically generated and follow a sequential format for easy tracking.
</Note>

## How Invoice Generation Works

<Tabs>
  <Tab title="One-Time Purchases">
    When a customer completes a one-time purchase:

    1. Payment is processed successfully
    2. Invoice is automatically generated with transaction details
    3. Invoice is emailed to both customer and merchant
    4. Invoice appears in your dashboard **Invoices** section

    All one-time purchase invoices include product details, pricing, and payment confirmation.
  </Tab>

  <Tab title="Subscription Renewals">
    For recurring subscription payments:

    1. Subscription renewal payment is processed automatically
    2. Invoice is generated for the billing period
    3. Invoice is emailed to customer with subscription details
    4. Invoice is stored in your dashboard for records

    Subscription invoices include the billing period, subscription plan details, and next renewal date.
  </Tab>
</Tabs>

## Managing Invoices

### Accessing Your Invoices

Navigate to the **Invoices** section in your Dodo Payments dashboard to view all generated invoices. You can:

* **View Invoice Details**: Click any invoice to see complete transaction information
* **Download PDF**: Export invoices in PDF format for your records
* **Resend to Customer**: Email the invoice again if needed
* **Filter and Search**: Find specific invoices by date, customer, or invoice number

<Tip>
  Use the search and filter options to quickly locate invoices for accounting or customer support purposes.
</Tip>

## Invoice Template Preview

Here's what your branded invoices will look like:

<Frame caption="Example of a generated invoice with custom branding">
  <img src="https://mintcdn.com/dodopayments/OWlOkbdK5mDdUO5r/images/invoice-generation/image.png?fit=max&auto=format&n=OWlOkbdK5mDdUO5r&q=85&s=8fc207d1dd2f0cce16c315c5bf0d2a18" alt="Invoice template showing business branding, transaction details, and professional layout" data-og-width="575" width="575" data-og-height="813" height="813" data-path="images/invoice-generation/image.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/OWlOkbdK5mDdUO5r/images/invoice-generation/image.png?w=280&fit=max&auto=format&n=OWlOkbdK5mDdUO5r&q=85&s=8e12780850e8c2df5b1d9b5de608037b 280w, https://mintcdn.com/dodopayments/OWlOkbdK5mDdUO5r/images/invoice-generation/image.png?w=560&fit=max&auto=format&n=OWlOkbdK5mDdUO5r&q=85&s=623fff08e47c2552aadd014c8a44146e 560w, https://mintcdn.com/dodopayments/OWlOkbdK5mDdUO5r/images/invoice-generation/image.png?w=840&fit=max&auto=format&n=OWlOkbdK5mDdUO5r&q=85&s=ac6b34c57838b735761230769d4780ba 840w, https://mintcdn.com/dodopayments/OWlOkbdK5mDdUO5r/images/invoice-generation/image.png?w=1100&fit=max&auto=format&n=OWlOkbdK5mDdUO5r&q=85&s=a4ad800b726ee6f74eea5edc26237594 1100w, https://mintcdn.com/dodopayments/OWlOkbdK5mDdUO5r/images/invoice-generation/image.png?w=1650&fit=max&auto=format&n=OWlOkbdK5mDdUO5r&q=85&s=a666476a9ca28ea1b3136d93e93a5ce5 1650w, https://mintcdn.com/dodopayments/OWlOkbdK5mDdUO5r/images/invoice-generation/image.png?w=2500&fit=max&auto=format&n=OWlOkbdK5mDdUO5r&q=85&s=5b9819eaf075fb12d14f3b95f4f616bd 2500w" />
</Frame>

## Related Features

<CardGroup cols={2}>
  <Card title="Subscription Management" icon="calendar-days" href="/features/subscription">
    Learn how subscriptions work with automatic recurring invoices.
  </Card>

  <Card title="Multi-Brand Support" icon="layer-group" href="/features/multi-brands">
    Manage multiple brands with separate invoice branding for each.
  </Card>

  <Card title="Customer Portal" icon="user" href="/features/customer-portal">
    Allow customers to access their invoice history through the customer portal.
  </Card>

  <Card title="Tax Configuration" icon="percent" href="/features/tax-inclusive-pricing">
    Configure tax settings to ensure invoices display correct tax information.
  </Card>
</CardGroup>


# License Keys
Source: https://docs.dodopayments.com/features/license-keys

Securely generate, manage, and track license keys for your digital products with advanced access control and revocation.

<Frame>
  <iframe className="w-full aspect-video rounded-md" src="https://www.youtube.com/embed/BNuLTXok8dQ" title="License Keys | Dodo Payments" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen />
</Frame>

<Info>
  Issue unique keys for your software or digital goods, control activations, and revoke access when needed. License keys pair well with subscriptions and one-time purchases.
</Info>

## What Are License Keys?

License keys are unique tokens that authorize access to your product. They're ideal for:

* **Software licensing**: Desktop apps, plugins, and CLIs
* **Per-seat controls**: Limit activations per user or device
* **Digital goods**: Gate downloads, updates, or premium features

## Key Benefits

* **Access control**: Define expiry and activation limits
* **Operational visibility**: Track usage, devices, and history
* **Security and support**: Disable, re-enable, and audit quickly

## Creating License Keys

<Steps>
  <Step title="Create a License Key">
    Go to your Dodo Payments dashboard and open the License Keys section. Select the option to create a new license key.
  </Step>

  <Step title="Configure License Key Settings">
    Set how your license keys will be issued and used by specifying these fields:

    * **License Key Expiry Date**: Define how long the key stays valid. Choose a specific duration (for example, 30 days or 1 year), or select "no expiry" for a perpetual key.
    * **Activation Limit**: Set the maximum number of concurrent activations per key. Use a specific number for scenarios like single-user (1) or team licenses (5), or select "unlimited" for no activation cap.
    * **Activation Instructions**: Provide clear activation steps for your customers, which will also be emailed with the license key. Examples: "Paste the key in Settings → License" or "Run: `mycli activate <key>`".
  </Step>

  <Step title="Review and Save">
    Check all entered details. When ready, save the license key configuration to finish key creation.

    <Tip>
      Use realistic instructions and include support links to reduce activation tickets.
    </Tip>
  </Step>
</Steps>

<Frame>
  <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/license-keys/1.webp?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=9a61b2750ee7fe68f39374ecdd4ccd58" alt="Creating a license key in Dodo Payments dashboard" data-og-width="1000" width="1000" data-og-height="609" height="609" data-path="images/license-keys/1.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/license-keys/1.webp?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=fba7c96c742c6f49ff2a3a9b5f51354a 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/license-keys/1.webp?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=0eb759f4716fdc44147b48084464991f 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/license-keys/1.webp?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=dd367919b7e43914540922b0370acd56 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/license-keys/1.webp?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=c7787039bcb3604d287bd828f99fa009 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/license-keys/1.webp?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=d7b87cdd5c5749bdd3b50493ee14dc1a 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/license-keys/1.webp?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=d3f0e2262d03d01310ada87027511ef3 2500w" />
</Frame>

## Manage & Monitor

The **License Keys Section** provides a comprehensive view of all license key activity and enables you to manage and monitor licenses effectively.

### Key Information

View detailed information for each license key:

* **Key Details**: License key value, associated product name, customer details (customer\_id), and purchase date
* **Usage Activity**: Number of activations, activation dates and times, and status (active, expired, disabled)
* **Expiry and Limits**: Key expiry date, remaining activation count, and current activation instances

<Frame>
  <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/license-keys/3.webp?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=77e03df7942d8ff0ff538b6f1d894b29" alt="License key details" data-og-width="1000" width="1000" data-og-height="609" height="609" data-path="images/license-keys/3.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/license-keys/3.webp?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=47496e80c77913cf6b0bfe1a9c1e7a68 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/license-keys/3.webp?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=2ddc3ed295f15aad9694915cb4799933 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/license-keys/3.webp?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=8fcdb7327cf0072bdee95d267a5a1e3c 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/license-keys/3.webp?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=f498311bb2ee8ba50ef8de9325635765 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/license-keys/3.webp?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=4ed6164603142cc37cc2f4c4f7f0834d 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/license-keys/3.webp?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=d2aa37a13777be4899411c4d4119b7c0 2500w" />
</Frame>

### Available Actions

You can perform the following actions on license keys:

* **Disable License Key**: Immediately disable a key to prevent further usage
* **Enable Key**: Re-enable a previously disabled license key
* **View Activation Instances**: See all associated activation instances for a particular license key

<Frame>
  <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/license-keys/2.webp?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=0f5a435d4160ffb96e93ff83861905d1" alt="License key actions" data-og-width="1000" width="1000" data-og-height="609" height="609" data-path="images/license-keys/2.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/license-keys/2.webp?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=4bed8007f144eba7d0a3b686b7e1a8c8 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/license-keys/2.webp?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=dc48b738b6c81233c65c1b0eb30f1618 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/license-keys/2.webp?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=19a47ef684f73dbd254fa3fb6206bef3 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/license-keys/2.webp?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=07c92f2b4644c2bb0979fbbd538bb846 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/license-keys/2.webp?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=c5a569dfdd145cbdf7e3938ddc20f26e 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/license-keys/2.webp?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=a6b19431c0dd91f7f82662dd42dd2587 2500w" />
</Frame>

### Benefits

* Track license key activity in real-time
* Identify potential misuse or unauthorized activations
* Simplify customer support by providing detailed usage records in case of discrepancy

## API Management

Use these APIs to activate, validate, list, and update license keys and their activation instances.

<Info>
  **Public Endpoints**: The activate, deactivate, and validate license endpoints are **public** and do **not require an API key**. This allows you to call them directly from your client applications, desktop software, or CLIs without exposing your API credentials.
</Info>

<AccordionGroup>
  <Accordion title="Lifecycle Operations">
    Trigger activation, deactivation, and validation actions on license keys.

    <CardGroup cols={3}>
      <Card title="Activate License" icon="code" href="/api-reference/licenses/activate-license">
        Create or record an activation instance for a license key.
      </Card>

      <Card title="Deactivate License" icon="code" href="/api-reference/licenses/deactivate-license">
        Revoke a prior activation to free up capacity.
      </Card>

      <Card title="Validate License" icon="code" href="/api-reference/licenses/validate-license">
        Check authenticity, status, and constraints before granting access.
      </Card>
    </CardGroup>
  </Accordion>

  <Accordion title="License Key Management">
    List, retrieve, and update license keys with their settings and status.

    <CardGroup cols={3}>
      <Card title="List License Keys" icon="code" href="/api-reference/licenses/get-license-keys">
        Browse all keys with status and usage details.
      </Card>

      <Card title="Get License Key" icon="code" href="/api-reference/licenses/get-license-key">
        Retrieve a specific key and its metadata.
      </Card>

      <Card title="Update License Key" icon="code" href="/api-reference/licenses/update-license-key">
        Modify expiry, activation limits, or enable/disable a key.
      </Card>
    </CardGroup>
  </Accordion>

  <Accordion title="Activation Instances">
    Work with individual device activations for each key.

    <CardGroup cols={3}>
      <Card title="List Instances" icon="code" href="/api-reference/licenses/get-license-key-instances">
        Return all activation instances for a specific key.
      </Card>

      <Card title="Get Instance" icon="code" href="/api-reference/licenses/get-license-key-instance">
        Fetch details for a single activation instance.
      </Card>

      <Card title="Update Instance" icon="code" href="/api-reference/licenses/update-license-key-instance">
        Revoke or update device information for an instance.
      </Card>
    </CardGroup>
  </Accordion>
</AccordionGroup>

## Integration Examples

### Activate a license

<Note>
  These endpoints do not require an API key and can be called directly from your client applications.
</Note>

<CodeGroup>
  ```typescript TypeScript/Node.js theme={null}
  import DodoPayments from 'dodopayments';

  // No API key needed for public license endpoints
  const client = new DodoPayments();

  const response = await client.licenses.activate({ 
    license_key: 'license_key', 
    name: 'Device Name' 
  });

  console.log(response.id);
  ```

  ```bash cURL theme={null}
  curl -X POST https://api.dodopayments.com/licenses/activate \
    -H "Content-Type: application/json" \
    -d '{
      "license_key": "your_license_key",
      "name": "Device Name"
    }'
  ```
</CodeGroup>

### Validate a license

<CodeGroup>
  ```typescript TypeScript/Node.js theme={null}
  import DodoPayments from 'dodopayments';

  // No API key needed for public license endpoints
  const client = new DodoPayments();

  const response = await client.licenses.validate({ 
    license_key: '2b1f8e2d-c41e-4e8f-b2d3-d9fd61c38f43' 
  });

  console.log(response.valid);
  ```

  ```bash cURL theme={null}
  curl -X POST https://api.dodopayments.com/licenses/validate \
    -H "Content-Type: application/json" \
    -d '{
      "license_key": "2b1f8e2d-c41e-4e8f-b2d3-d9fd61c38f43"
    }'
  ```
</CodeGroup>

## Best Practices

* **Keep limits clear**: Choose sensible defaults for expiry and activations
* **Guide users**: Provide precise activation instructions and self-serve documentation
* **Automate checks**: Validate keys server-side before granting access
* **Monitor events**: Use webhooks to detect abuse and automate revocations


# Android & iOS Mobile App
Source: https://docs.dodopayments.com/features/mobile-app

Manage your Dodo Payments business on the go with our mobile app, available on Google Play and Apple App Store. Monitor transactions, receive real-time notifications, and access your dashboard anywhere.

## Introduction

<Frame>
  <iframe className="w-full aspect-video rounded-md" src="https://www.youtube.com/embed/EWhkIUf36_Y" title="Mobile App | Dodo Payments" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen />
</Frame>

Manage your payments, subscriptions, and business activity — anytime, anywhere. The **Dodo Payments Mobile App** brings the power of the Dodo Dashboard to your fingertips, allowing you to stay connected to your revenue, customers, and activity in real time.

Whether you're commuting, traveling, or just away from your desk, you'll never miss an important update again.

## Key Features

<CardGroup cols={2}>
  <Card title="Real-time Notifications" icon="bell">
    Get instant alerts for new transactions, payouts, subscription renewals, and verification status updates
  </Card>

  <Card title="Dashboard on the Go" icon="chart-line">
    View your revenue, transaction history, customer statistics, and visual performance graphs
  </Card>

  <Card title="Subscription Management" icon="repeat">
    Monitor all active subscriptions and check individual customer details
  </Card>

  <Card title="Product Management" icon="box">
    Create and manage products directly from your mobile device
  </Card>
</CardGroup>

## Parity with Desktop Dashboard

All the features of the desktop version are fully available in the mobile app, including:

* Test Mode and Live Mode switching
* Verification progress and submission
* Developer settings and API key visibility
* Pricing and Discount configuration

## Download Now

<CardGroup cols={2}>
  <Card title="Android" icon="google-play" href="https://play.google.com/store/apps/details?id=com.dodopayments.app">
    Download from Google Play Store
  </Card>

  <Card title="iOS" icon="apple" href="https://apps.apple.com/in/app/dodo-payments/id6743651329">
    Download from Apple App Store
  </Card>
</CardGroup>


# MoR vs PG
Source: https://docs.dodopayments.com/features/mor-vs-pg

When it comes to processing payments globally, digital businesses and SaaS companies are often torn between two models: Merchant of Record (MoR) and Payment Gateway (PG). At Dodo Payments, we believe in simplifying global payments while taking care of compliance, taxes, and local laws - and that's why we operate as a Merchant of Record.

## Introduction

This guide compares the MoR model with the traditional Payment Gateway approach, helping you understand the advantages Dodo Payments brings to your business.

## The Core Difference

| Feature                        | MoR (Dodo Payments)                      | Payment Gateway (Traditional PG)              |
| ------------------------------ | ---------------------------------------- | --------------------------------------------- |
| Legal Seller                   | Dodo Payments (MoR)                      | Your Company                                  |
| Tax Collection & Remittance    | Handled by Dodo                          | You are responsible                           |
| Compliance & Regulatory Burden | Dodo assumes liability                   | You handle local laws and chargebacks         |
| Settlement Currency            | USD, EUR, INR, and 25+ others supported  | Depends on your merchant account              |
| Risk Management                | Built-in fraud and chargeback protection | You set up your own tools (e.g. Stripe Radar) |
| Payouts                        | Aggregated and simplified global payouts | Direct from PG to you, with bank setup        |

## What It Means For You

With **Dodo as MoR**, we become the legal seller to your customers, allowing you to:

* Skip setting up local entities
* Avoid handling VAT, GST, or sales tax
* Offer more payment methods globally
* Reduce legal risk
* Launch faster in new markets

<Note>
  Imagine selling a digital subscription to a user in France. With Dodo Payments, we collect the payment, file VAT with French authorities, and send you the net revenue. No tax headaches. No lawyers. Just growth.
</Note>

Additionally, the MoR model simplifies your entire back office. As your MoR, Dodo handles PCI compliance, fraud detection, currency conversion, and even customer billing support, freeing your team to focus on product and growth.

## Visual Comparison

**Revenue Flow: Payment Gateway**

```mermaid  theme={null}
flowchart LR
    A[Customer] --> B[Your Website]
    B --> C["Payment Gateway (e.g. Stripe)"]
    C --> D[Your Bank]
    D -.-> E["You handle: tax, support, refunds, fraud"]
```

**Revenue Flow: Merchant of Record (Dodo)**

```mermaid  theme={null}
flowchart LR
    A[Customer] --> B[Dodo Checkout]
    B --> C[Dodo Payments]
    C --> D[Your Wallet]
    C -.-> E["Dodo handles: Tax, Compliance, FX, Fraud, Invoicing"]
```

## Why It Matters for SaaS & Digital Businesses

As your business scales, managing taxes, compliance, and global payment preferences can become overwhelming. With a payment gateway, you're responsible for:

* VAT/GST registration and filing in multiple jurisdictions
* Managing currency conversion and chargebacks
* Providing localized checkout and payment methods

With Dodo Payments as your MoR:

* You expand globally without setting up local entities
* Taxes are calculated, collected, and remitted on your behalf
* You gain access to a library of payment methods tailored to your customers
* We act as your legal buffer and operational partner

<Tip>
  "Think of a payment gateway as a tunnel. Now imagine the Merchant of Record as a tunnel, train, driver, and ticketing staff all-in-one."
</Tip>

## Who Should Use MoR?

Dodo Payments is perfect for:

* SaaS & digital product companies
* Indie creators and solopreneurs
* Global businesses with customers across 100+ countries
* Companies who don't want to manage taxes & compliance in-house

If you're expanding internationally, selling subscriptions, or just want to reduce operational headaches, MoR is the smarter choice.

## When to Use a Payment Gateway Instead

There are cases where using just a payment gateway might make sense:

* Your business operates only in one country
* You already have internal finance and compliance resources
* You require complete control over customer billing experience
* You are highly cost-sensitive with thin margins at scale

<Note>
  For many startups, using a gateway may suffice initially - but as complexity grows, switching to an MoR can save time, reduce risk, and accelerate international growth.
</Note>

## Why Choose Dodo Payments

Dodo Payments offers:

* All-in-one payments, tax, and compliance stack
* Real-time FX and multi-currency support
* Access to 30+ payment methods
* Seat-based billing, subscriptions, and one-time payments
* Automated tax handling in 150+ countries
* Built-in fraud prevention and PCI compliance

Whether you're a solo founder or a scaling SaaS team, Dodo simplifies the complexities of selling globally.

## Learn More

<CardGroup cols={2}>
  <Card title="Adaptive Currency Support" icon="money-bill-wave" href="/features/adaptive-currency">
    Learn how Dodo automatically presents prices in your customers' local currencies
  </Card>

  <Card title="Supported Payment Methods" icon="credit-card" href="/features/payment-methods">
    Discover the 30+ payment methods available through Dodo Payments
  </Card>
</CardGroup>

## Ready to Switch?

Join 3,000+ digital businesses using Dodo Payments to sell globally, without borders or bottlenecks.

<CardGroup cols={2}>
  <Card title="Sign Up Free" icon="user-plus" href="https://app.dodopayments.com/signup">
    Create your Dodo Payments account and start selling globally today
  </Card>

  <Card title="Talk to Sales" icon="envelope" href="mailto:founders@dodopayments.com">
    Get personalized guidance from our team
  </Card>
</CardGroup>

<Tip>
  Let Dodo handle the hard stuff - so you can focus on building a great product.
</Tip>


# Multi-Brand Setup
Source: https://docs.dodopayments.com/features/multi-brands

Learn how to set up multi-brand in Dodo Payments.

## Introduction

Multi-Brand lets you attach several brands—each with its own logo, descriptor, and website URL—to **one verified business**. Your payout account, fees, and KYC stay exactly the same, while every Product, Payment Link, Subscription, Invoice, and Transaction can now be filed under a specific brand. Use it to test new niches, localise a site, or separate B2B and B2C lines without opening extra business accounts.

## Merchant Dashboard Flow

<Steps>
  <Step title="Open Business Settings → Brands">
    The Brands page lists your Primary brand and any Secondary brands.
  </Step>

  <Step title="Click 'Add Brand'">
    A Brand Verification form opens up.
  </Step>

  <Step title="Fill the form">
    Enter Brand Name, Website URL (or social profile), Description and Submit the form.
  </Step>

  <Step title="Upload Logo and Set Details">
    Upload Logo, set Statement Descriptor, and Support Email for each brand.
  </Step>

  <Step title="Approval">
    Once our compliance team marks the website "Verified", live mode will be enabled for this brand. Products can now be tagged to this brand and live payment links will display its branding.
  </Step>

  <Step title="Brand Selector">
    A Brand filter is now visible on Product creation.
  </Step>

  <Step title="Brand ID in Transactions">
    Transactions and Subscriptions have a Brand ID to help you identify which brand the transaction belongs to.
  </Step>
</Steps>

## Additional Points

* **No payout changes:** All funds, payout cycles and fees still flow to the business-level wallet and merchant bank account.
* **Suspensions:** If a brand is suspended, only its payment links stop—other brands under the same business keep transacting.
* No changes to Storefront, Invoices, License Keys, Discount Codes, Payout Settings and any other business level features.


# One‑Time Payments
Source: https://docs.dodopayments.com/features/one-time-payment-products

Sell fixed‑price digital goods or services with a single upfront charge, no renewals.

<Info>
  One‑time payments let you sell lifetime access, downloads, or single‑use services with a single charge. There are no renewals, proration rules, or billing cycles. Just a clean, instant purchase experience.
</Info>

<CardGroup cols={2}>
  <Card title="License Keys" icon="code" href="/features/license-keys">
    Issue unique license keys after purchase.
  </Card>

  <Card title="Digital Delivery" icon="code" href="/features/digital-product-delivery">
    Automatically deliver files and content after payment.
  </Card>

  <Card title="Payment Webhooks" icon="code" href="/developer-resources/webhooks/intents/payment">
    React to payment succeeded/failed and receipt events.
  </Card>

  <Card title="Refunds API" icon="code" href="/api-reference/refunds/post-refunds">
    Create full or partial refunds programmatically.
  </Card>
</CardGroup>

## What Are One‑Time Payments?

One‑time payments are fixed, up‑front purchases - ideal for:

* **Software licenses**: Lifetime or major‑version unlocks
* **Digital downloads**: E‑books, templates, graphics, or plugins
* **Services**: Audits, onboarding packages, or one‑off consulting
* **Courses and tickets**: Courses, workshops, or live sessions

## Key Benefits

* **Simple checkout**: No renewals or proration logic
* **Instant fulfillment**: Deliver licenses or files right away
* **Flexible pricing**: Discounts and taxes supported
* **Developer‑first**: Clear APIs for creation, refunds, and webhooks

## Creating One‑Time Products

Create products in your Dodo Payments dashboard, then sell them via hosted checkout, payment links, or your API.

<Frame>
  <img src="https://mintcdn.com/dodopayments/r-ndtvzx3WhKqwER/images/products.png?fit=max&auto=format&n=r-ndtvzx3WhKqwER&q=85&s=fb41221c4f2af4de0155e71de1ac6904" alt="One-Time Payment Products" data-og-width="1911" width="1911" data-og-height="927" height="927" data-path="images/products.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r-ndtvzx3WhKqwER/images/products.png?w=280&fit=max&auto=format&n=r-ndtvzx3WhKqwER&q=85&s=6fc4d1bf0c31dc0ccebfca09150577a5 280w, https://mintcdn.com/dodopayments/r-ndtvzx3WhKqwER/images/products.png?w=560&fit=max&auto=format&n=r-ndtvzx3WhKqwER&q=85&s=4eb3456ebb3b4cdcbe38a1fbafb42acc 560w, https://mintcdn.com/dodopayments/r-ndtvzx3WhKqwER/images/products.png?w=840&fit=max&auto=format&n=r-ndtvzx3WhKqwER&q=85&s=61bf43aa862c47e57a0793692c72a807 840w, https://mintcdn.com/dodopayments/r-ndtvzx3WhKqwER/images/products.png?w=1100&fit=max&auto=format&n=r-ndtvzx3WhKqwER&q=85&s=f16c04010332033411f9dc0d0d0b513c 1100w, https://mintcdn.com/dodopayments/r-ndtvzx3WhKqwER/images/products.png?w=1650&fit=max&auto=format&n=r-ndtvzx3WhKqwER&q=85&s=4826558f298f6ed39854d430626aa5a3 1650w, https://mintcdn.com/dodopayments/r-ndtvzx3WhKqwER/images/products.png?w=2500&fit=max&auto=format&n=r-ndtvzx3WhKqwER&q=85&s=2ef2a63a54968daa60c4426dd8fae206 2500w" />
</Frame>

### Product configuration

Configure the fields in the dashboard to define how your product appears and sells.

#### Product details

* **Product Name** (required): Display name shown in checkout and invoices
* **Product Description** (required): Clear value statement customers see before paying
* **Product Image** (required): PNG/JPG/WebP up to 3 MB
* **Brand**: Associate the product with a specific brand for theming and emails
* **Tax Category** (required): Choose the correct category to determine tax rules

<Tip>
  Pick the most accurate tax category to ensure correct tax collection per region.
</Tip>

#### Pricing

* **Pricing Type**: Choose <b>Single Payment</b>
* **Price** (required): Fixed charge with currency
* **Discount Applicable (%)**: Optional percentage discount displayed in checkout and invoices

<Warning>
  Changing product pricing affects only new purchases. Existing customers aren’t impacted.
</Warning>

#### Advanced settings

* **Tax Inclusive Pricing**: Display prices inclusive of applicable taxes
* **Generate license keys**: Issue a unique key after purchase. See <a href="/features/license-keys">License Keys</a>
* **Digital Product Delivery**: Deliver files or content automatically. See <a href="/features/digital-product-delivery">Digital Product Delivery</a>
* **Metadata**: Attach custom key–value pairs for internal tagging or integrations. See <a href="/api-reference/metadata">Metadata</a>

<Tip>
  Use metadata to store identifiers from your system (e.g., orderId) to reconcile events and receipts later.
</Tip>

## API Management

<AccordionGroup>
  <Accordion title="Create payments">
    Use `POST /checkout-sessions/create` to create one‑time charges from products.

    <Card title="API Reference" icon="code" href="/api-reference/checkout-sessions/create">
      View the create payment API.
    </Card>
  </Accordion>

  <Accordion title="Refund payments">
    Use `POST /refunds` to create full or partial refunds.

    <Card title="API Reference" icon="code" href="/api-reference/refunds/post-refunds">
      Learn how to refund a payment.
    </Card>
  </Accordion>

  <Accordion title="List and retrieve payments">
    Use `GET /payments` to list payments and `GET /payments/{payment_id}` to retrieve one. Retrieve line items with `GET /payments/{payment_id}/line-items`.

    <Card title="List Payments" icon="code" href="/api-reference/payments/get-payments">
      Browse the listing API.
    </Card>

    <Card title="Get Payment Detail" icon="code" href="/api-reference/payments/get-payments-1">
      See the retrieval API.
    </Card>

    <Card title="Retrieve Line Items" icon="code" href="/api-reference/payments/retrieve-line-items">
      Inspect purchased items for a payment.
    </Card>
  </Accordion>

  <Accordion title="Payment webhooks">
    React to events like payment.succeeded or payment.failed in your backend.

    <Card title="Webhook Guide" icon="code" href="/developer-resources/webhooks/intents/payment">
      Handle payment lifecycle events.
    </Card>
  </Accordion>
</AccordionGroup>

## Common Use Cases

* **License‑based tools**: Unlock features with a one‑time key
* **Digital assets**: Themes, templates, icon sets, or media
* **Professional services**: Fixed‑fee implementation or setup
* **Education**: Course tickets and one‑off workshops

## Integration Examples

### Checkout Sessions (single payment)

Create a checkout session with a one‑time product in the cart:

```typescript  theme={null}
const session = await client.checkoutSessions.create({
  product_cart: [
    { product_id: 'prod_one_time', quantity: 1 }
  ]
});
```

## Best Practices

* **Clarify deliverables**: Tell buyers exactly what they get and how it’s delivered
* **Deliver instantly**: Use license keys or digital delivery for immediate access
* **Track with metadata**: Store your IDs for easy reconciliation

<Info>
  One‑time payments are the fastest path to selling fixed‑price products. Start simple, verify delivery, and iterate your offer based on conversion and feedback.
</Info>


# Pay What You Want Pricing
Source: https://docs.dodopayments.com/features/pay-what-you-want

Let customers choose their price above a minimum. Optionally show a suggested price. Optimized for one‑time purchases.

**Pay What You Want (PWYW)** lets customers decide how much they pay—at or above a merchant‑defined minimum. It increases engagement, encourages community support, and provides flexible pricing for digital products.

<Frame>
  <iframe className="w-full aspect-video rounded-md" src="https://www.youtube.com/embed/Lh0Q01b33NY" title="Pay What You Want Pricing | Dodo Payments" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen />
</Frame>

## What Is Pay What You Want?

PWYW is a pricing model where customers set their own price within guardrails you define. It’s ideal for:

* **Digital products and media**: Templates, e‑books, courses, plugins
* **Experimental launches**: Early access, beta releases, time‑boxed promos
* **Bundles and extras**: Add a PWYW tier to boost participation

## Key Benefits

* **Customer‑driven pricing**: Buyers choose what they pay
* **Revenue floor**: Enforce a minimum to protect margins
* **Anchored expectations**: Optional suggested price to guide choices
* **Seamless checkout**: Hosted checkout and receipts handled for you
* **Developer‑first**: Clear APIs for creation, refunds, and webhooks

<Warning>
  PWYW is available only for **Single Payment** (one‑time) products.
</Warning>

## Creating Pay What You Want

Create a one‑time product and enable PWYW in your Dodo Payments dashboard. The sections below map directly to the creation form.

### Product creation

#### Product details

* **Product Name** (required): Display name shown in checkout and invoices
* **Product Description** (required): Clear value statement customers see before paying
* **Product Image** (required): PNG/JPG/WebP up to 3 MB
* **Brand**: Associate the product with a specific brand for theming and emails
* **Tax Category** (required): Choose the correct category to determine tax rules

<Tip>
  Pick the most accurate tax category to ensure correct tax collection per region.
</Tip>

#### Pricing

* **Pricing Type**: Choose <b>Single Payment</b>
* **Pay What You Want** (toggle): Enable to let buyers choose the amount
* **Minimum Price** (required): Lowest allowed amount a customer can pay
* **Suggested Price** (optional): Recommended amount shown on the product page

<Tip>
  Use metadata to store identifiers from your system (e.g., orderId) so you can reconcile events and receipts later.
</Tip>

## API Management

<AccordionGroup>
  <Accordion title="Create checkout sessions (PWYW)">
    Use `POST /checkout-sessions/create` to create one‑time checkout sessions from products. Checkout will prompt buyers to enter an amount that meets your PWYW minimum.

    <Card title="API Reference" icon="code" href="/api-reference/checkout-sessions/create">
      View the create checkout session API.
    </Card>
  </Accordion>

  <Accordion title="Refund payments">
    Use `POST /refunds` to create full or partial refunds. Customers are refunded the exact amount they paid.

    <Card title="API Reference" icon="code" href="/api-reference/refunds/post-refunds">
      Learn how to refund a payment.
    </Card>
  </Accordion>

  <Accordion title="List and retrieve">
    Use `GET /payments` to list payments and `GET /payments/{payment_id}` to retrieve one. Retrieve line items with `GET /payments/{payment_id}/line-items`.

    <Card title="List Payments" icon="code" href="/api-reference/payments/get-payments">
      Browse the listing API.
    </Card>

    <Card title="Get Payment Detail" icon="code" href="/api-reference/payments/get-payments-1">
      See the retrieval API.
    </Card>

    <Card title="Retrieve Line Items" icon="code" href="/api-reference/payments/retrieve-line-items">
      Inspect purchased items for a payment.
    </Card>
  </Accordion>

  <Accordion title="Payment webhooks">
    React to events like payment.succeeded or payment.failed in your backend.

    <Card title="Webhook Guide" icon="code" href="/developer-resources/webhooks/intents/payment">
      Handle payment lifecycle events.
    </Card>
  </Accordion>
</AccordionGroup>

## Common Use Cases

* **Digital assets**: Themes, templates, icon sets, media, or plugins
* **Content and education**: E‑books, courses, workshops with supporter pricing
* **Community & donations**: Fundraisers, open‑source sponsorships, creator support
* **Launch experiments**: Beta access and time‑boxed campaigns to gauge demand

## Integration Examples

### Checkout Sessions (single payment, PWYW)

Add a PWYW product to the cart. Checkout collects the buyer’s amount (respecting your minimum) — no extra fields are required.

```typescript  theme={null}
const session = await client.checkoutSessions.create({
  product_cart: [
    { product_id: 'prod_pwyw_demo', quantity: 1 }
  ],
  return_url: 'https://yoursite.com/checkout/success'
});
```

## Best Practices

* **Choose a sensible minimum**: Cover costs while keeping participation easy
* **Use a suggested price**: Anchor expectations to improve average order value
* **Explain value clearly**: Tell buyers what their contribution unlocks
* **A/B test campaigns**: Time‑box offers and experiment with messaging
* **Monitor distribution**: Track paid amounts to refine minimum and suggested price

<Info>
  PWYW is a flexible way to invite more customers in while preserving a revenue floor. Start simple, test thoroughly, and iterate based on conversion, contribution distribution, and refund rates.
</Info>


# Payment Methods
Source: https://docs.dodopayments.com/features/payment-methods

Complete guide to payment methods supported by Dodo Payments, including credit/debit cards, digital wallets, BNPL, Paypal, UPI/Rupay, European options, and how to configure them for your checkout.

Dodo Payments supports a wide range of payment methods to help you serve customers globally. All listed payment methods become available automatically once your merchant account is verified and live mode is enabled.

<Info>
  **Automatic Activation:** No additional configuration is needed from your side. All payment methods are pre-configured and managed by Dodo Payments. You can optionally restrict which methods appear at checkout using the API configuration described below.
</Info>

## Supported Payment Methods

The following table provides a quick reference for all available payment methods, their regional availability, and key limitations:

| Payment Method           | Supported Countries | Supported Currencies                             | Supports Subscription |
| :----------------------- | :------------------ | :----------------------------------------------- | :-------------------- |
| **Credit Cards**         | Global              | All currencies                                   | Yes                   |
| **Debit Cards**          | Global              | All currencies                                   | Yes                   |
| **Apple Pay**            | Global (Excl. IN)   | All currencies                                   | Yes                   |
| **Google Pay**           | Global (Excl. IN)   | All currencies                                   | Yes                   |
| **Amazon Pay**           | Global (Excl. IN)   | USD                                              | No                    |
| **Cash App Pay**         | US                  | USD                                              | No                    |
| **Afterpay (BNPL)**      | US, UK              | USD, GBP                                         | No                    |
| **Klarna (BNPL)**        | US, Europe\*        | USD, EUR, GBP, DKK, NOK, SEK, CZK, RON, PLN, CHF | No                    |
| **PayPal**               | Global              | EUR, GBP                                         | No                    |
| **UPI**                  | India               | INR                                              | Yes\*                 |
| **Rupay (Credit/Debit)** | India               | INR                                              | Yes\*                 |
| **Bancontact**           | Belgium             | EUR                                              | No                    |
| **EPS**                  | Austria             | EUR                                              | No                    |
| **iDEAL**                | Netherlands         | EUR                                              | No                    |
| **Multibanco**           | Portugal            | EUR                                              | No                    |

<Note>
  Each transaction must meet the <strong>minimum amount required for each currency</strong>. For USD, the minimum is <strong>0.50 USD</strong>. Minimums for other currencies vary by region.
  [See Supported Currencies & Minimums](/features/adaptive-currency#supported-currencies)
</Note>

<Note>
  Klarna and Afterpay require a minimum transaction amount of <strong>50.01 USD</strong> (or equivalent in supported currencies) for eligibility at checkout. Transactions below this threshold will not be eligible for these BNPL payment options.

  For details on Klarna's supported countries, refer to the <a href="#buy-now-pay-later-bnpl">BNPL section</a> below.
</Note>

<Note>
  <strong>Indian Payment Methods:</strong> UPI and Rupay subscriptions are supported with RBI-compliant mandates. See the <a href="#upi-and-rupay-india">UPI and Rupay section</a> for important details about one-time payment restrictions, mandate limits, and processing delays.
</Note>

## Payment Method Details

<AccordionGroup>
  <Accordion title="Credit and Debit Cards">
    Dodo Payments accepts all major credit and debit card networks globally. You can accept:

    * **Visa** – Reliable, widely accepted global network
    * **Mastercard** – Robust, secure network with global reach
    * **American Express** – Premium benefits and strong customer service
    * **Discover** – Competitive rewards, strong US presence
    * **JCB** – Leading Asian card network with expanding reach
    * **UnionPay** – Dominant in China and Asia, with growing global acceptance
    * **Interac** – Canada's secure debit payment network
    * **Cartes Bancaires** – Widely used across France
    * **Diners Club** – Premium international card with exclusive benefits
    * **Korean Local Cards** – Support for Korean domestic card networks
  </Accordion>

  <Accordion title="Digital Wallets">
    Offer customers a fast and secure checkout using digital wallets:

    * **Apple Pay** – Pay easily on iOS, macOS, and watchOS
    * **Google Pay** – Secure payments on Android, web, and in-store
    * **PayPal** – Global payments in EUR and GBP (not available for subscriptions)
    * **Cash App Pay** – Mobile payments for US customers (not available for subscriptions)
    * **Amazon Pay** – Use Amazon credentials for a simple checkout (not available for subscriptions)
  </Accordion>

  <Accordion title="Buy Now Pay Later (BNPL)">
    Increase conversion by offering flexible installment options:

    * **Klarna** – Enable flexible payments with Klarna’s options: pay in 4 installments, pay in 30 days, or finance your purchase. Klarna is available in the US and 19 European countries, including Austria, Belgium, Czech Republic, Denmark, Finland, France, Germany, Greece, Ireland, Italy, Netherlands, Norway, Poland, Portugal, Romania, Spain, Sweden, Switzerland, and the United Kingdom. Supported currencies include USD, EUR, GBP, DKK, NOK, SEK, CZK, RON, PLN, and CHF.
    * **Afterpay** – Allow customers to split purchases into four interest-free payments. Afterpay is available in the US and UK, supporting payments in USD and GBP.
  </Accordion>

  <Accordion title="UPI and Rupay (India)" id="upi-and-rupay-india">
    Accept leading Indian payment options:

    * **UPI** – Customers scan a QR code or use apps (Google Pay, PhonePe, Paytm, CRED) for instant, contactless bank transfers
    * **Rupay Cards** – Secure credit and debit payments via India's domestic card network

    ### Subscriptions with RBI-Compliant Mandates

    UPI and Indian card subscriptions operate under RBI (Reserve Bank of India) regulations with specific mandate requirements:

    #### Mandate Limits

    The mandate type and amount depend on your subscription's recurring charge:

    * **Charges below ₹15,000:** We create an on-demand mandate for ₹15,000 INR. The subscription amount is charged periodically according to your subscription frequency, up to the mandate limit.
    * **Charges ₹15,000 or above:** We create a subscription mandate (or on-demand mandate) for the exact subscription amount.

    #### Upgrade and Downgrade Considerations

    <Warning>
      **Important:** When upgrading or downgrading subscriptions, carefully consider the mandate limits:

      * If an upgrade/downgrade results in a charge amount that exceeds ₹15,000 and goes beyond the existing on-demand payment limit, the transaction charge may fail.
      * In such cases, the customer may need to update their payment method or change the subscription again to establish a new mandate with the correct limit.
    </Warning>

    #### Authorization for High-Value Charges

    For subscription charges of ₹15,000 or more:

    * The customer will be prompted by their bank to authorize the transaction.
    * If the customer fails to authorize the transaction, the transaction will fail and the subscription will be put on hold.

    #### 48-Hour Processing Delay

    <Info>
      **Processing Timeline:** Recurring charges on Indian cards and UPI subscriptions follow a unique processing pattern:

      * Charges are **initiated** on the scheduled date according to your subscription frequency.
      * The actual **deduction** from the customer's account occurs only after **48 hours** from payment initiation.
      * This 48-hour window may extend up to **2-3 additional hours** depending on bank API responses.
    </Info>

    #### Mandate Cancellation Window

    During the 48-hour processing window:

    * Customers can cancel the mandate via their banking apps.
    * If a customer cancels the mandate during this period, the subscription will remain **active** (this is an edge case specific to Indian card and UPI AutoPay subscriptions).
    * However, the actual deduction may fail, and in that case, we will put the subscription **on hold**.

    <Warning>
      **Edge Case Handling:** If you provide benefits, credits, or subscription usage to customers immediately upon charge initiation, you need to handle this 48-hour window appropriately in your application. Consider:

      * Delaying benefit activation until payment confirmation
      * Implementing grace periods or temporary access
      * Monitoring subscription status for mandate cancellations
      * Handling subscription hold states in your application logic
    </Warning>

    <Tip>
      Monitor subscription webhooks to track payment status changes and handle edge cases where mandates are cancelled during the 48-hour window.
    </Tip>
  </Accordion>

  <Accordion title="European Payment Methods">
    Offer localized European options to increase conversions:

    * **iDEAL** (Netherlands) – Instant Dutch online bank payments
    * **Bancontact** (Belgium) – Belgium's trusted debit card method
    * **Multibanco** (Portugal) – Portuguese payment method for bank transfers and ATM payments
    * **EPS** (Austria) – Direct online banking payments in Austria
  </Accordion>
</AccordionGroup>

## Configuring Payment Methods

While all payment methods are automatically available based on customer location and currency, you can optionally restrict which payment options appear during checkout using the `allowed_payment_method_types` parameter.

### When to Configure Payment Methods

You may want to configure allowed payment methods to:

* Control which payment options appear to customers based on your business requirements
* Restrict payment methods for specific product types or transaction flows
* Maintain consistency across different payment experiences
* Optimize checkout experience for your target audience

### Implementation

<Steps>
  <Step title="Add parameter to API request">
    Include the `allowed_payment_method_types` field in your payment or subscription creation request:

    ```json  theme={null}
    {
      "allowed_payment_method_types": [
        "credit",
        "debit",
        "apple_pay"
      ]
    }
    ```
  </Step>

  <Step title="Test the configuration">
    Verify that only the specified payment methods appear at checkout.

    <Tip>
      Test payment method availability with different customer locations and currencies to ensure the configuration works as expected.
    </Tip>
  </Step>
</Steps>

### API Endpoints

This configuration is supported by the following endpoints:

<CardGroup cols={3}>
  <Card title="Create Checkout Session" icon="cart-shopping" href="/api-reference/checkout-sessions/create">
    Create checkout sessions with allowed payment methods.
  </Card>

  <Card title="Create Payment" icon="credit-card" href="/api-reference/payments/post-payments">
    One-time payments with allowed methods.
  </Card>

  <Card title="Create Subscription" icon="repeat" href="/api-reference/subscriptions/post-subscriptions">
    Subscription payments with recurring methods.
  </Card>
</CardGroup>

### Implementation Examples

<Tabs>
  <Tab title="One-Time Payment">
    ```json  theme={null}
    {
      "amount": 1000,
      "currency": "usd",
      "allowed_payment_method_types": [
        "credit",
        "debit",
        "apple_pay",
        "google_pay"
      ]
    }
    ```
  </Tab>

  <Tab title="Subscription">
    ```json  theme={null}
    {
      "product_id": "prod_123",
      "customer_id": "cust_456",
      "allowed_payment_method_types": [
        "credit",
        "debit"
      ]
    }
    ```
  </Tab>

  <Tab title="Regional Focus">
    ```json  theme={null}
    {
      "amount": 5000,
      "currency": "eur",
      "allowed_payment_method_types": [
        "credit",
        "debit",
        "ideal",
        "bancontact",
        "sepa"
      ]
    }
    ```
  </Tab>
</Tabs>

### Best Practices

<AccordionGroup>
  <Accordion title="Default behavior">
    If `allowed_payment_method_types` is not specified, all eligible payment methods will be available based on customer location, currency, and transaction type. Only use this parameter when you need to restrict payment methods.
  </Accordion>

  <Accordion title="Regional considerations">
    Consider your target market when selecting payment methods. Including region-specific options (like UPI for India or iDEAL for Netherlands) can significantly improve conversion rates in those markets.
  </Accordion>

  <Accordion title="Monitor and optimize">
    Track which payment methods your customers use most frequently and adjust your allowed methods based on actual usage patterns and conversion data.
  </Accordion>
</AccordionGroup>

### Important Considerations

Payment method availability depends on multiple factors:

* **Customer Location**: Some payment methods are region-specific
* **Merchant Settings**: Your account configuration and capabilities
* **Currency**: Supported payment methods vary by currency
* **Transaction Type**: Some methods don't support subscriptions or have minimum amounts

<Note>
  Adding a payment method to `allowed_payment_method_types` doesn't guarantee it will appear - it must also be eligible based on these factors.
</Note>

## Troubleshooting

<AccordionGroup>
  <Accordion title="Payment method not appearing at checkout">
    **Possible causes:**

    * The payment method is not included in `allowed_payment_method_types`
    * The payment method is not supported for the customer's location
    * The payment method doesn't support the transaction currency
    * For subscriptions: the payment method doesn't support recurring payments
    * The transaction amount is below the minimum threshold (e.g., BNPL methods)

    **Solution:** Verify all eligibility requirements are met and check your API request configuration.
  </Accordion>

  <Accordion title="Unexpected payment methods appearing">
    **Possible causes:**

    * The `allowed_payment_method_types` parameter is not being passed correctly
    * There may be conflicting configurations in your merchant dashboard

    **Solution:** Review your API request payload and ensure the parameter is properly formatted as an array of strings.
  </Accordion>

  <Accordion title="Regional payment method not available">
    **Possible causes:**

    * The customer's location doesn't match the payment method's supported region
    * The currency is not supported by the regional payment method
    * Your merchant account may not be enabled for that specific payment method

    **Solution:** Verify regional and currency compatibility, and contact support if you believe the method should be available.
  </Accordion>

  <Accordion title="Indian payment method subscription issues">
    **Subscription charge failed after upgrade/downgrade:**

    * The new charge amount may exceed the existing mandate limit (₹15,000 threshold)
    * Customer may need to update their payment method to establish a new mandate

    **Solution:** Prompt the customer to update their payment method or adjust the subscription amount to stay within mandate limits.

    **Subscription on hold after charge initiation:**

    * Customer may have cancelled the mandate during the 48-hour processing window
    * Customer may have failed to authorize a high-value charge (≥₹15,000)

    **Solution:** Monitor webhook events for mandate cancellations and payment failures. Implement retry logic or prompt customers to re-establish their payment method.

    **Payment deduction delayed:**

    * Normal behavior: Indian card and UPI subscriptions have a 48-hour delay between charge initiation and actual deduction
    * This delay may extend up to 2-3 additional hours depending on bank APIs

    **Solution:** This is expected behavior. Do not activate benefits or credits until payment confirmation is received via webhooks.
  </Accordion>
</AccordionGroup>

## Expanding Payment Options

We continuously add new payment methods to Dodo Payments. This page will be updated as more options become available. If you require a specific payment method not listed here, please contact us at [support@dodopayments.com](mailto:support@dodopayments.com), and we'll consider adding it to our roadmap.


# Payouts
Source: https://docs.dodopayments.com/features/payouts/payout-structure

Consolidate your eligible earnings and manage your payout threshold directly from the dashboard.

## Introduction

The **Payouts Section** consolidates all eligible earnings that can be disbursed in the next payout cycle. It provides transparency on the net available balance after accounting for all fees, refunds, and taxes.

<Frame>
  <img src="https://mintcdn.com/dodopayments/gpNQlDmLuPOhJg3M/images/payouts/payout-section.png?fit=max&auto=format&n=gpNQlDmLuPOhJg3M&q=85&s=c400fc4f24f406e3a032d33d1eb2a506" alt="Payouts section showing balance eligible for payout" data-og-width="1883" width="1883" data-og-height="1058" height="1058" data-path="images/payouts/payout-section.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/gpNQlDmLuPOhJg3M/images/payouts/payout-section.png?w=280&fit=max&auto=format&n=gpNQlDmLuPOhJg3M&q=85&s=3270bbff8cd25ddeee0e45e632a34257 280w, https://mintcdn.com/dodopayments/gpNQlDmLuPOhJg3M/images/payouts/payout-section.png?w=560&fit=max&auto=format&n=gpNQlDmLuPOhJg3M&q=85&s=605dddd01b11ee3d4295ff06322e27a9 560w, https://mintcdn.com/dodopayments/gpNQlDmLuPOhJg3M/images/payouts/payout-section.png?w=840&fit=max&auto=format&n=gpNQlDmLuPOhJg3M&q=85&s=24ef2cdbb2efdb2942a7c50ef0e9bd72 840w, https://mintcdn.com/dodopayments/gpNQlDmLuPOhJg3M/images/payouts/payout-section.png?w=1100&fit=max&auto=format&n=gpNQlDmLuPOhJg3M&q=85&s=eebabfa03e6f9e6c239badbc88f79fbf 1100w, https://mintcdn.com/dodopayments/gpNQlDmLuPOhJg3M/images/payouts/payout-section.png?w=1650&fit=max&auto=format&n=gpNQlDmLuPOhJg3M&q=85&s=432cda4cd6d4b8c898bd94cdb7bd8043 1650w, https://mintcdn.com/dodopayments/gpNQlDmLuPOhJg3M/images/payouts/payout-section.png?w=2500&fit=max&auto=format&n=gpNQlDmLuPOhJg3M&q=85&s=386f21f19f63e85f28f4bbb449a6856f 2500w" />
</Frame>

## Key Features

* Displays the total balance eligible for payout in the upcoming cycle in USD
* Automatically applies FX conversion for non-USD currencies
* Lets businesses **set or modify their payout threshold** directly from the wallet settings

<Info>
  The displayed amount is **for reference only**. Final payout amounts may vary based on the actual exchange rate at the time of transfer.
</Info>

## Payout Cycles

We support the following payout cycles:

<Steps>
  <Step title="Bi-Monthly (Default)">
    **Billing Period 1:** 1st to 15th of the month\
    **Payout Date 1:** 18th of the same month

    **Billing Period 2:** 16th to the end of the month\
    **Payout Date 2:** 4th of the following month
  </Step>

  <Step title="Weekly">
    **Billing Period 1:** 1st to 7th\
    **Payout Date 1:** 11th of the same month

    **Billing Period 2:** 8th to 14th\
    **Payout Date 2:** 18th of the same month

    **Billing Period 3:** 15th to 21st\
    **Payout Date 3:** 25th of the same month

    **Billing Period 4:** 22nd to the end of the month\
    **Payout Date 4:** 4th of the following month
  </Step>

  <Step title="Monthly">
    **Billing Period:** 1st to the end of the month\
    **Payout Date:** 11th of the following month
  </Step>
</Steps>

**Note:**

* Payouts will only be initiated if all verifications are successful and Payout Threshold is crossed in the billing period.
* The default payout cycle for all businesses is **bi-monthly**.
* Businesses with higher transaction volumes may request **weekly** payouts by contacting [support@dodopayments.com](mailto:support@dodopayments.com).
* Certain high-risk businesses may be placed on a **monthly** payout cycle at our discretion.

## Payout Processing and Bank Timelines

1. The dates provided above are the **initiation dates** for payouts.
2. It typically takes **1-2 business days** for the amount to appear in your bank account.
3. Delays may occur if payout processing dates fall on weekends or bank holidays.

## Minimum Payout Threshold

| Currency | Minimum Threshold |
| -------- | ----------------- |
| USD      | \$50              |
| INR      | ₹1,000            |

<Info>
  If your balance does not meet the threshold, it will carry forward to the next payout cycle.
</Info>

## Flexible Minimum Payout Threshold

You can customize the balance that must build up in your USD wallet before Dodo Payments triggers a payout.

**Configuration:**

* **Allowed values:** \$50 or any higher amount
* **Effective from:** Your current payout cycle
* **Note:** Payouts already scheduled (if entry is created in the payout table) remain unchanged

### How to Edit Your Threshold

<Frame>
  <img src="https://mintcdn.com/dodopayments/gpNQlDmLuPOhJg3M/images/payouts/payout-threshold-edit.png?fit=max&auto=format&n=gpNQlDmLuPOhJg3M&q=85&s=15bd6e9bf986041b486f5872b3fcfdc7" alt="Edit payout threshold in dashboard" data-og-width="1878" width="1878" data-og-height="1058" height="1058" data-path="images/payouts/payout-threshold-edit.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/gpNQlDmLuPOhJg3M/images/payouts/payout-threshold-edit.png?w=280&fit=max&auto=format&n=gpNQlDmLuPOhJg3M&q=85&s=c2e5339df1549ef0559d53512bc56384 280w, https://mintcdn.com/dodopayments/gpNQlDmLuPOhJg3M/images/payouts/payout-threshold-edit.png?w=560&fit=max&auto=format&n=gpNQlDmLuPOhJg3M&q=85&s=2cc29c468e5cfdcfe2dc7b7fcea322ed 560w, https://mintcdn.com/dodopayments/gpNQlDmLuPOhJg3M/images/payouts/payout-threshold-edit.png?w=840&fit=max&auto=format&n=gpNQlDmLuPOhJg3M&q=85&s=31820d696f7e0a5093e8f633ff7e1e42 840w, https://mintcdn.com/dodopayments/gpNQlDmLuPOhJg3M/images/payouts/payout-threshold-edit.png?w=1100&fit=max&auto=format&n=gpNQlDmLuPOhJg3M&q=85&s=16eac17cd95b90fd440bd3b9f356de38 1100w, https://mintcdn.com/dodopayments/gpNQlDmLuPOhJg3M/images/payouts/payout-threshold-edit.png?w=1650&fit=max&auto=format&n=gpNQlDmLuPOhJg3M&q=85&s=71e676093c580d9d8aef8a25cf697666 1650w, https://mintcdn.com/dodopayments/gpNQlDmLuPOhJg3M/images/payouts/payout-threshold-edit.png?w=2500&fit=max&auto=format&n=gpNQlDmLuPOhJg3M&q=85&s=f8766c4577658a6d33a2564cffcf999e 2500w" />
</Frame>

<Steps>
  <Step title="Navigate to Payout Settings">
    Go to **Payouts → Payouts Page → Minimum Threshold**
  </Step>

  <Step title="Enter New Threshold">
    Choose edit threshold and enter a number **≥ 50** (e.g., "250")
  </Step>

  <Step title="Confirm Changes">
    Click **Confirm** to save your new threshold
  </Step>

  <Step title="Verify Update">
    You will see the updated amount in the Minimum Payout Threshold field
  </Step>
</Steps>

<Note>
  This feature is only applicable to the USD/EUR/GBP Wallet as of now. The INR wallet will have no changes.
</Note>

## Payout Deductions

The following amounts are deducted from your sales before payout:

**Taxes:**
All applicable taxes as per the Tax Calculator will be deducted from the sales amount before payout.

**Fees:**
Dodo Payment Fees and Payout Fees will be deducted before sending the payout.

<Tip>
  For detailed fee information, check out our [Pricing Page](https://dodopayments.com/pricing).
</Tip>

## Payout Status

Track the progress of your payouts through the following status indicators:

| Status        | Description                                                                              |
| ------------- | ---------------------------------------------------------------------------------------- |
| Not Initiated | Payout due date has not yet arrived hence it has not been initiated                      |
| In Progress   | Payout due date has arrived and payout is in progress                                    |
| On Hold       | Payout is put on hold by the Payout Team (by backend until admin dashboard is available) |
| Successful    | Payout to the business account is processed successfully                                 |
| Failed        | Payout to the business account has failed                                                |

## Payout Invoice

A reverse invoice is generated to indicate the amount paid by Dodo Payments to the business.

### Invoice Structure

<Frame>
  <img src="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/payouts/payout-process/Invoice%20-%20Payout.png?fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=03746005d9b9e88a63c83d1c392ebe78" alt="Payout invoice structure example" width="60%" data-og-width="595" data-og-height="742" data-path="images/payouts/payout-process/Invoice - Payout.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/payouts/payout-process/Invoice%20-%20Payout.png?w=280&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=0aca29dca1c772812e734382074d4fe6 280w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/payouts/payout-process/Invoice%20-%20Payout.png?w=560&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=b48fdcbc9d52c5f0fc2cca6ca6dd45bd 560w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/payouts/payout-process/Invoice%20-%20Payout.png?w=840&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=5106646229a072c3125e38d28e175352 840w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/payouts/payout-process/Invoice%20-%20Payout.png?w=1100&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=2d23097ee81c81a69039682f13d39096 1100w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/payouts/payout-process/Invoice%20-%20Payout.png?w=1650&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=144cbf91196d159ebde85485cb66e0ed 1650w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/payouts/payout-process/Invoice%20-%20Payout.png?w=2500&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=61f9907a6e2b0bdce6f215e274729675 2500w" />
</Frame>

## Important Disclaimer for Indian Businesses

* **INR Payouts to businesses in India are handled independently** and are **not part of the consolidated USD/GBP/EUR payout cycle**.
* Businesses with Indian bank accounts will receive **two separate payouts** per cycle:
  * One for INR Wallet (domestic payout)
  * One for global currencies (USD/GBP/EUR consolidated payout)
* Each payout will generate a separate invoice and entry in the balance ledger.

<Card title="Balances & Wallets" icon="file-invoice-dollar" href="/features/account-summary-payout-wallet">
  Get a comprehensive overview of all your USD, GBP, EUR, and INR wallet balances, transaction ledgers, and payout-related financial activity.
</Card>


# Products
Source: https://docs.dodopayments.com/features/products

Create one-time, subscription, or usage-based products in minutes. Manage pricing, media, fields, and automated entitlements - all in one place.

<Info>
  Products are the foundation of Dodo Payments. Whether you sell a one‑time download, a recurring subscription, or usage‑based access, you start by creating a product. Each product defines how it’s priced, presented at checkout, and fulfilled after purchase.
</Info>

<CardGroup cols={3}>
  <Card title="One‑Time" icon="credit-card" href="/features/one-time-payment-products">
    Charge once for lifetime access or a single deliverable.
  </Card>

  <Card title="Subscriptions" icon="repeat" href="/features/subscription">
    Bill on a schedule with trials, proration, and add‑ons.
  </Card>

  <Card title="Usage‑Based" icon="arrow-trend-up" href="/features/usage-based-billing">
    Meter consumption and bill by actual usage.
  </Card>
</CardGroup>

## Create a product

You can create products from the dashboard or via API. Choose the pricing model up‑front, One‑Time, Subscription, or Usage‑Based and then configure details. The pricing model can’t be changed later; create a new product if you need a different model.

<Steps>
  <Step title="Name & description">
    Provide a clear title and a concise value‑oriented description. Markdown is supported in descriptions.

    <Tip>
      Keep the first sentence customer‑facing and outcome‑oriented; it appears prominently in checkout.
    </Tip>

    <Frame>
      <img src="https://mintcdn.com/dodopayments/r-ndtvzx3WhKqwER/images/products.png?fit=max&auto=format&n=r-ndtvzx3WhKqwER&q=85&s=fb41221c4f2af4de0155e71de1ac6904" alt="Products" data-og-width="1911" width="1911" data-og-height="927" height="927" data-path="images/products.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/r-ndtvzx3WhKqwER/images/products.png?w=280&fit=max&auto=format&n=r-ndtvzx3WhKqwER&q=85&s=6fc4d1bf0c31dc0ccebfca09150577a5 280w, https://mintcdn.com/dodopayments/r-ndtvzx3WhKqwER/images/products.png?w=560&fit=max&auto=format&n=r-ndtvzx3WhKqwER&q=85&s=4eb3456ebb3b4cdcbe38a1fbafb42acc 560w, https://mintcdn.com/dodopayments/r-ndtvzx3WhKqwER/images/products.png?w=840&fit=max&auto=format&n=r-ndtvzx3WhKqwER&q=85&s=61bf43aa862c47e57a0793692c72a807 840w, https://mintcdn.com/dodopayments/r-ndtvzx3WhKqwER/images/products.png?w=1100&fit=max&auto=format&n=r-ndtvzx3WhKqwER&q=85&s=f16c04010332033411f9dc0d0d0b513c 1100w, https://mintcdn.com/dodopayments/r-ndtvzx3WhKqwER/images/products.png?w=1650&fit=max&auto=format&n=r-ndtvzx3WhKqwER&q=85&s=4826558f298f6ed39854d430626aa5a3 1650w, https://mintcdn.com/dodopayments/r-ndtvzx3WhKqwER/images/products.png?w=2500&fit=max&auto=format&n=r-ndtvzx3WhKqwER&q=85&s=2ef2a63a54968daa60c4426dd8fae206 2500w" />
    </Frame>
  </Step>

  <Step title="Pricing model & price">
    Select the pricing model:

    * **One‑Time**: Fixed price paid once.
    * **Subscription**: Recurring price with interval and optional trial.
    * **Usage‑Based**: Price derived from metered events.

    Then set pricing:

    * **Price**: Base amount and currency.
    * **Discount (%)**: Optional inline discount shown in checkout and invoices.
    * For subscriptions, set **Repeat every** (e.g., 1 month or 1 year) and **Trial days** if needed.

    <Warning>
      Changing price affects only new purchases. Existing subscriptions follow plan‑change rules.
    </Warning>
  </Step>

  <Step title="Product media">
    Upload images to showcase the product on checkout and invoices. Supported PNG/JPG/WebP up to 3 MB. Reorder or replace any time.
  </Step>

  <Step title="Automated entitlements (Under Advanced Settings)">
    Attach fulfillment that activates automatically after payment:

    * **License Keys**: Issue and validate unique keys
    * **File Downloads**: Grant secure file access
    * **Custom**: Trigger your own entitlement logic via webhooks

    Add or remove benefits as your offer evolves. Existing subscribers gain or lose access accordingly.
  </Step>
</Steps>

## Variants and pricing options

Instead of variants under one product, create separate products for each pricing option (for example, Monthly and Yearly). You can present multiple products side‑by‑side in the same checkout and let customers switch between them.

<Info>
  This keeps APIs predictable and simplifies reporting. Each product has a single pricing model.
</Info>

## Managing products

You can manage products through the dashboard or programmatically via API. The API provides full control over product creation, updates, retrieval, image uploads, and archiving.

### Dashboard Management

* **Update**: Edit name, description, images, price, fields, and benefits at any time (pricing model is immutable).
* **Archive**: Hide a product from new purchases without disrupting existing customers. You can unarchive later.

### API Management

The following instructions allow you to create, update, manage, and retrieve products, including uploading images.

<AccordionGroup>
  <Accordion title="Creating a Product">
    A product can be a one-time item or a subscription-based service. To create a new product, send a `POST` request to the `/products` endpoint with details such as name, description, price, currency, and whether it is a recurring product.

    For recurring products, set `recurring: true` and specify a `billing_cycle` (`daily`, `weekly`, `monthly`, `yearly`).

    <Card title="Create Product API" icon="code" href="/api-reference/products/post-products">
      View detailed request and response structure in the Create Product API documentation.
    </Card>
  </Accordion>

  <Accordion title="Updating a Product">
    To modify an existing product, send a `PATCH` request to the `/products/{product_id}` endpoint. You can update properties such as name, price, and description while keeping other details unchanged.

    Ensure that the `product_id` in the endpoint matches an existing product.

    <Card title="Update Product API" icon="code" href="/api-reference/products/patch-products">
      View detailed request and response structure in the Update Product API documentation.
    </Card>
  </Accordion>

  <Accordion title="Retrieving Products">
    You can fetch a list of products stored in your account using a `GET` request to the `/products` endpoint. This allows you to retrieve product details, including active and archived products.

    <Card title="Retrieve Products API" icon="code" href="/api-reference/products/get-products">
      View detailed request and response structure in the Retrieve Products API documentation.
    </Card>
  </Accordion>

  <Accordion title="Uploading Product Images">
    You can associate an image with a product by uploading it to AWS S3 using a pre-signed URL provided by the API. First, request an image upload URL from the `/products/{product_id}/images` endpoint, then use the provided URL to upload the image within 60 seconds.

    <Warning>
      The pre-signed URL expires in 60 seconds, so the image must be uploaded within that timeframe.
    </Warning>

    Once the pre-signed URL is received from the API, upload the image using the `PUT` method. This ensures secure and temporary access to AWS S3 for uploading the image.

    **Supported libraries for uploading to S3:**

    * **Node.js**: `axios`, `node-fetch`
    * **Python**: `requests`, `boto3`
    * **Go**: `net/http`
    * **PHP**: `GuzzleHttp`
    * **Ruby**: `rest-client`

    If the upload is successful, AWS S3 will return a `200 OK` status, indicating that the image has been stored successfully.

    <Card title="Upload Product Image API" icon="code" href="/api-reference/products/put-products-images">
      View detailed request and response structure in the Upload Product Image API documentation.
    </Card>
  </Accordion>

  <Accordion title="Archiving a Product">
    If you no longer wish to display or use a product, you can archive it using a `POST` request to the `/products/{product_id}/archive` endpoint. This action hides the product but does not delete it permanently.

    <Card title="Archive Product API" icon="code" href="/api-reference/products/archive-product">
      View detailed request and response structure in the Archive Product API documentation.
    </Card>
  </Accordion>

  <Accordion title="Unarchiving a Product">
    If you need to restore an archived product, send a `POST` request to the `/products/{product_id}/unarchive` endpoint. This will reactivate the product and make it available for use again.

    <Card title="Unarchive Product API" icon="code" href="/api-reference/products/unarchive-product">
      View detailed request and response structure in the Unarchive Product API documentation.
    </Card>
  </Accordion>

  <Accordion title="Checkout & fulfillment">
    Create payment or subscription flows from products, and fulfill automatically via benefits and webhooks.

    <CardGroup cols={3}>
      <Card title="Checkout Sessions" icon="code" href="/developer-resources/checkout-session">
        Create checkout sessions for one‑time or subscription purchases.
      </Card>

      <Card title="Payment Webhooks" icon="code" href="/developer-resources/webhooks/intents/payment">
        React to payment lifecycle events.
      </Card>

      <Card title="Subscription Webhooks" icon="code" href="/developer-resources/webhooks/intents/subscription">
        Handle subscription created, renewed, and canceled events.
      </Card>
    </CardGroup>
  </Accordion>
</AccordionGroup>

## Best practices

* **Start with clarity**: Separate products for each pricing option (Monthly vs Yearly)
* **Use trials thoughtfully**: Pair trials with onboarding to drive activation
* **Automate fulfillment**: Use benefits and webhooks to deliver instantly
* **Tag with metadata**: Store your system IDs for reconciliation

<Check>
  You’re ready to create products and start selling - one‑time, recurring, or by usage.
</Check>


# Purchasing Power Parity
Source: https://docs.dodopayments.com/features/purchasing-power-parity

Learn how to implement Purchasing Power Parity pricing with ParityDeals integration to offer location-based discounts for your customers on Dodo Payments

## Introduction

[ParityDeals](https://www.paritydeals.com/) is a platform that enables automatic pricing optimization based on a customer's geographical location, commonly known as "purchasing power parity" pricing.

With ParityDeals, you can also offer [automatic time-based discounts](https://www.paritydeals.com/features/time-based-discounts/) and [holiday-based promotions](https://www.paritydeals.com/features/holiday-based-discounts/) throughout the year.

<Info>
  While you can't directly embed the ParityDeals banner on a Dodo Payments storefront (as custom scripts aren't supported), you can still implement ParityDeals effectively on your own website or application.
</Info>

## How It Works

When ParityDeals is integrated into your website, eligible visitors will see a banner that includes a location-based discount code they can use at checkout.

<Frame>
  <img src="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/1.png?fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=17713c509bbe73af91ab322b26bce518" alt="ParityDeals discount banner example" data-og-width="1920" width="1920" data-og-height="1440" height="1440" data-path="images/ppp/1.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/1.png?w=280&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=1740c6f45376abeb77a1333d7078e358 280w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/1.png?w=560&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=7b60cabdffe1c22f89f15e4dd7c58561 560w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/1.png?w=840&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=6ec994e59641cd0d4eb0f5d1172ff16c 840w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/1.png?w=1100&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=cb65efe6725cd4b58edfad7cffd6712d 1100w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/1.png?w=1650&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=a9fd86bd94d58dfba67ecb3fc51e9672 1650w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/1.png?w=2500&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=ceff2ad940456dab71886515c261a8fb 2500w" />
</Frame>

These discount codes are automatically created and managed by ParityDeals and will appear in your **Dodo Payments Dashboard** under **Sales → Discounts**.

## Step-by-Step Setup Guide

### 1. Sign up on ParityDeals

Visit [app.paritydeals.com](https://app.paritydeals.com/) and create an account.

### 2. Create Deals

After signing in, locate the option to create deals. From the dropdown menu, select:

**→ "Create Deals via Dodo Payments"**

<Frame>
  <img src="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/2.png?fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=b3c30692322ab6ccf44210dd906800c4" alt="Creating deals via Dodo Payments" data-og-width="1920" width="1920" data-og-height="1440" height="1440" data-path="images/ppp/2.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/2.png?w=280&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=858b269c3089ef78b85fe81975f24acb 280w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/2.png?w=560&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=5692c4630fec06e14e5d7b111196df51 560w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/2.png?w=840&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=e436f98f9ece9e9b08fefa0187d93088 840w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/2.png?w=1100&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=9ff56afff2d57678ef612a20f0e20baa 1100w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/2.png?w=1650&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=2306be2c364dcb558fe7444e0718bd84 1650w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/2.png?w=2500&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=adb9acfe192278047e8732d2c819aecf 2500w" />
</Frame>

### 3. Generate a Dodo Payments API Key

Log in to your **Dodo Payments dashboard** and navigate to:

**Developers → API Keys**

Click **"Create New API"** and name it something descriptive like "ParityDeals".

<Frame>
  <img src="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/3.png?fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=33d72db98f026942edfc9938d6862029" alt="Creating a new API key in Dodo Payments" data-og-width="1920" width="1920" data-og-height="1440" height="1440" data-path="images/ppp/3.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/3.png?w=280&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=b57a410af00eac88d087469a9ec49026 280w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/3.png?w=560&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=b485d7f61144baecf76f7a6b504c7f5c 560w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/3.png?w=840&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=c2d076cca6aef4b3de7ba73e7bfddfd8 840w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/3.png?w=1100&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=6d8f0ce3a41c0d408f11529e02f44c13 1100w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/3.png?w=1650&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=0289fb5754e60c7f6a754b2906c7d6f2 1650w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/3.png?w=2500&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=ed650dc56151b3c3d90a06a449b8b4f4 2500w" />
</Frame>

### 4. Connect Your API Key to ParityDeals

Copy the API key you created and paste it into the ParityDeals interface to establish the connection with your Dodo Payments account.

<Frame>
  <img src="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/4.png?fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=54bb27e15a66252a47a29a057bf2d31d" alt="Connecting API key to ParityDeals" data-og-width="1920" width="1920" data-og-height="1440" height="1440" data-path="images/ppp/4.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/4.png?w=280&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=f871eac5f0d2c785f026c1d801169381 280w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/4.png?w=560&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=a34f28ed90cafeb3028da08d250919de 560w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/4.png?w=840&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=8b41369756f5decfdc5c930db6ddd2cd 840w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/4.png?w=1100&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=4ca35605f258770b88eeb5f645fbcad7 1100w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/4.png?w=1650&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=9fc3c21beb4100ab20dfc291a1584635 1650w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/4.png?w=2500&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=8f95c9639a58eecd2ed608013b242669 2500w" />
</Frame>

### 5. Select Products

Once connected, ParityDeals will fetch your Dodo Payments product catalog. Select the products you want to associate with your deals.

<Frame>
  <img src="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/5.png?fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=5c0c5d0813260df6532f202ca015fe18" alt="Selecting products for ParityDeals" data-og-width="1920" width="1920" data-og-height="1440" height="1440" data-path="images/ppp/5.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/5.png?w=280&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=ef258d828564e5c447b414773529344b 280w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/5.png?w=560&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=d416dc25f6a52a9a3015f233316b7b56 560w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/5.png?w=840&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=d931e816fdb0b78a0130610f1084d82a 840w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/5.png?w=1100&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=9a79babdb8831ddc5d7117bd97c2df91 1100w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/5.png?w=1650&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=007ccba7f75bc222db43c99be730e10c 1650w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/5.png?w=2500&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=7764dbc497f0d5436c547eecb0c474e9 2500w" />
</Frame>

### 6. Configure Deal Settings

Enter your website URL and optionally select specific target pages where the discount banner should appear.

Then choose your preferred deal type:

* Location-based deals
* Holiday deals
* Time-based flash deals

<Frame>
  <img src="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/6.png?fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=294dea1d0e003ee017337180b6d6361b" alt="Configuring deal settings" data-og-width="1920" width="1920" data-og-height="1440" height="1440" data-path="images/ppp/6.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/6.png?w=280&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=33a66ae178124325640af41e2e86441e 280w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/6.png?w=560&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=c60529e574cc609c1ad522cc6e476461 560w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/6.png?w=840&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=7b07d20b67b5a76ba546b607215ed711 840w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/6.png?w=1100&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=f148b1976b89f4630acc64be300bef1b 1100w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/6.png?w=1650&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=6c3834e9a32317fa4b12737b9f4da097 1650w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/6.png?w=2500&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=8ec60731dc69c4609ad31db24fec5a03 2500w" />
</Frame>

### 7. Set Country-Based Rules

Select the countries you want to offer localized discounts to and define the discount percentage for each. ParityDeals provides recommended defaults that you can adjust as needed.

<Frame>
  <img src="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/7.png?fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=9ec4d84c4efd3abbe02461ef741f93ff" alt="Setting country-based discount rules" data-og-width="1920" width="1920" data-og-height="1440" height="1440" data-path="images/ppp/7.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/7.png?w=280&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=1c20c792b8d83f73386c8c404f8d4fae 280w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/7.png?w=560&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=76573d38ca78a97ad0e21b31a002a411 560w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/7.png?w=840&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=97ecbd25f3d7be4df032e4fcba32677d 840w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/7.png?w=1100&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=eb308e7770fae3bb40d91e0ed8c68314 1100w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/7.png?w=1650&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=3041d3e50e30aeacc74bb44be77e55aa 1650w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/7.png?w=2500&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=77566ed3efb818e6563199a19e42be25 2500w" />
</Frame>

### 8. Customize the Banner

Design your discount banner by:

* Customizing the text
* Selecting colors and layout
* Choosing the banner position (top or bottom of page)

This banner will be displayed to eligible visitors based on your configured rules.

<Frame>
  <img src="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/8.png?fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=fa082e5ece00f51c782350cec008a4eb" alt="Customizing the discount banner" data-og-width="1920" width="1920" data-og-height="1440" height="1440" data-path="images/ppp/8.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/8.png?w=280&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=5e476806f59f7f2296a236f5b0b14a2e 280w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/8.png?w=560&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=d0ec31c4fac44125eb17994d59871138 560w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/8.png?w=840&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=d80be84f637902f4a8266a61f2361179 840w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/8.png?w=1100&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=6c05c6614636574fbe6fc1b3e39fe1ac 1100w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/8.png?w=1650&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=1e218abe84877a299778bbaeafb62fd6 1650w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/8.png?w=2500&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=a43c32ad8eea65306165bc4c97fef23e 2500w" />
</Frame>

### 9. Add the ParityDeals Script to Your Website

After saving your deal, ParityDeals will generate a script. Add this script to your website code (typically in the `<head>` section).

This script automatically detects visitor locations and displays the appropriate discount banner.

<Frame>
  <img src="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/9.png?fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=e4341697ecfbbbb112abd44b04d908f5" alt="ParityDeals integration script" data-og-width="1920" width="1920" data-og-height="1440" height="1440" data-path="images/ppp/9.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/9.png?w=280&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=8079f3af69cd91d75e073612c395cd26 280w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/9.png?w=560&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=13ea7442142d5ec5c6c6eadaf9bcbe8f 560w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/9.png?w=840&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=e7445c733d9f96196bc5f0b07c85fb68 840w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/9.png?w=1100&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=3805d73e9253c0ad7c2ceff54e962109 1100w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/9.png?w=1650&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=48c359011a34ca65cb9cae8312997712 1650w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/ppp/9.png?w=2500&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=454af78159322d672f314ba08caf109c 2500w" />
</Frame>

## All Set!

You're now ready to offer:

* **Location-based deals** - Adjust pricing based on purchasing power
* **Countdown/time-sensitive discounts** - Create urgency with limited-time offers
* **Holiday promotions** - Capitalize on seasonal shopping trends

All of these are automated through ParityDeals and work seamlessly with Dodo Payments.

For more detailed information, refer to the [ParityDeals Documentation](https://www.paritydeals.com/docs/) or contact their support team.


# Storefront
Source: https://docs.dodopayments.com/features/storefront

The Storefront Feature allows you to create a simple, branded, and mobile-friendly online store where you can showcase both One-Time Payment products and Subscription products. This feature eliminates the complexity of building an entire website, enabling you to quickly offer your products or services online without additional web development efforts.

<Frame>
  <img src="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Storefront.png?fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=01a8c507034e9c40fd4bd7c2afd51226" alt="Storefront Cover Image" data-og-width="1200" width="1200" data-og-height="630" height="630" data-path="images/cover-images/Storefront.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Storefront.png?w=280&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=d4e6d6da0b6d642f0fb40469264f9dd9 280w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Storefront.png?w=560&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=9e3f9481f805782a4a20c2913ea170ee 560w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Storefront.png?w=840&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=d4cf0c493c5438dd2d3d4a362cfb35b2 840w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Storefront.png?w=1100&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=bc82075c8d3ea65cf5c06834e6c13031 1100w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Storefront.png?w=1650&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=bc18bcfb1ff1bf9ba8d1de1548b5b58d 1650w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Storefront.png?w=2500&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=6f602bfb6fee5c99d3221e68d207db67 2500w" />
</Frame>

## Key Highlights of the Feature

1. **Branded Storefront**
   * Customize your store with a Store Name, Logo, and Cover Image.
   * Easily share your store URL (e.g., `store.dodopayments.com/your-store`).
2. **Product Segregation**
   * Automatically organizes your products into One-Time Payment and Subscription sections.
3. **Simple Checkout Flow**
   * Customers can select a product & quantity and click **“Buy Now”** to be redirected to Dodopayments checkout.
4. **Publish/Unpublish**
   * Control which products appear on your store: quickly publish or unpublish within the Merchant Dashboard.
5. **No Extra Setup**
   * You don’t need a separate CMS; all product management happens in your Merchant Dashboard, where you already manage pricing, descriptions, and subscription details.
6. **Mobile-Friendly**
   * The storefront layout is responsive, ensuring a seamless shopping experience on phones, tablets, and desktops.

## Store Front Setup

Below is the step-by-step process for merchants to set up and manage their storefront:

<img src="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-1.png?fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=085dab26f05d5f0ea48cb31fd6e8e0f9" data-og-width="1920" width="1920" data-og-height="1440" height="1440" data-path="images/store-front/sf-1.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-1.png?w=280&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=d11f6cfa8610c22bcc97e8ec400a637f 280w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-1.png?w=560&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=6ed970489b81e2bbff794bc911ce2271 560w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-1.png?w=840&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=98ff19e1d971ccd426c5e65ca3aba007 840w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-1.png?w=1100&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=958339f3a23d725df0911db75c84d630 1100w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-1.png?w=1650&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=9e178086e696e0363ea07829cd042d86 1650w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-1.png?w=2500&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=e33702a6f59ab155f083fd4902d58403 2500w" />

### Accessing Your Storefront Settings

1. Open Business Section → Select Store Front

### Store Branding

1. **Store Name**: Enter the public-facing name of your store. This appears prominently at the top of your storefront.
2. **Logo**: Upload an image (e.g., PNG or JPG) for your brand logo.
3. **Cover Image**: Select or upload a banner/cover image that appear on the storefront homepage.
4. **Store URL**:
   * Typically auto-generated based on your business name (e.g., `business.dodopayments.com/my-store`).
   * You can edit this URL if the system supports custom slugs.
5. **Products:** You can select the Products you want to display on your storefront

### Saving & Viewing Your Store

<img src="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-2.png?fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=b0b3e18d91f835b0812ee708ee7a8d8b" data-og-width="1920" width="1920" data-og-height="1440" height="1440" data-path="images/store-front/sf-2.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-2.png?w=280&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=b8d293a56a45fe9bec96e23568cbc32d 280w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-2.png?w=560&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=aa273e644385d67bda2b6e6fde11deeb 560w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-2.png?w=840&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=759631cbd1dbd079ca9c12ef6f6cb575 840w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-2.png?w=1100&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=a847aeb484f6c8006a575f6949b04cd5 1100w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-2.png?w=1650&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=e5fd9a6b085df49aa1c43518a04c6b6a 1650w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-2.png?w=2500&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=037552e1ebb5256b7705bad9c7c0bc86 2500w" />

1. **Click Publish**: Click Publish to confirm your storefront setup and product publishing decisions.
2. **Preview Store**: You can preview your storefront at the generated URL.
3. **Share URL**: Once satisfied, share the link with your customers via email, social media, or your website.

### Test Mode

<img src="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-3.png?fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=01545a337bee2e0d3914af1712d0710c" data-og-width="1920" width="1920" data-og-height="1440" height="1440" data-path="images/store-front/sf-3.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-3.png?w=280&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=636f4b5ed9fbb148f40ef65b3a1508b2 280w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-3.png?w=560&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=ec4d11ac0817790b49aefa60298f7629 560w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-3.png?w=840&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=6b53763bfb46c9cd3f86545f2000b439 840w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-3.png?w=1100&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=2f6b2655715612a7724a9109504bff21 1100w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-3.png?w=1650&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=8dad892779e4e6fa70b5a4f0db4df559 1650w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-3.png?w=2500&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=baf737e31d8d273344c3d8e0dfe7ee73 2500w" />

Test Mode and Live Mode have separate storefronts. You can see the test mode indicator on the top of your website and store front generated through test mode as well.

Test Mode is for you try out the user flow and purchase experience on the store. Please share the live mode Store link with your users to facilitate real purchases

## Customer Experience

<img src="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-4.png?fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=4acd4e306ff344645e8cb218fd6876e8" data-og-width="1920" width="1920" data-og-height="1440" height="1440" data-path="images/store-front/sf-4.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-4.png?w=280&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=7b30e78b26b3e7d84ef59d18e9abff86 280w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-4.png?w=560&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=b6bc5c0a940a0002e7df0fed99bee012 560w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-4.png?w=840&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=e3a220d515caee97f1d1a23c7c0ac86e 840w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-4.png?w=1100&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=c0aedccb40ec039e798741527b65c04f 1100w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-4.png?w=1650&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=59b776824572b2351e81e40e7e6f7c7f 1650w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-4.png?w=2500&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=347fe0432025fcb42b11f0c7737fb795 2500w" />

### Landing on the Storefront

* **Visual Branding**: Customers see your store name, logo, and cover image immediately.
* **Organized Products**: Two categories are displayed: One-Time Payment and Subscription.

### Browsing Products

* **Product Cards**: Each product shows a name, description, and price. Description can be viewed by clicking the i icon on the bottom right of the card.
* **Quantity Selection**: Customers can pick how many items they want to buy.
* **Subscription Frequency & Trial**: Subscription products explicitly state billing frequency (e.g., monthly) and if a trial is available (e.g., 7-day free trial).

<img src="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-5.png?fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=38357ae5c9893b01d684a01eb1c106d4" data-og-width="1920" width="1920" data-og-height="1440" height="1440" data-path="images/store-front/sf-5.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-5.png?w=280&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=1d2b90ff1892001cf261d29ed29e20a6 280w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-5.png?w=560&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=a97a650e04821a34198bfea1cf144e91 560w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-5.png?w=840&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=83c72771012c7f50e75cc48f948c6e05 840w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-5.png?w=1100&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=dedad52bdf202c7b1a111aba0f4e9a8f 1100w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-5.png?w=1650&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=c8fb396475d0038f0c3ccdf3b9d22fca 1650w, https://mintcdn.com/dodopayments/5D2vY2CKcFOZLLyz/images/store-front/sf-5.png?w=2500&fit=max&auto=format&n=5D2vY2CKcFOZLLyz&q=85&s=e0bd57b1e7bfa8622613eb0d7a544b77 2500w" />

### Buying Process

1. **Select “Buy Now”**: Once ready, the customer clicks “Purchase” for the desired product, selects quantity and clicks “Buy Now”
2. **Redirect to Dodopayments checkout**:
   * The customer will be taken to the dodo payments checkout
   * The customer completes the secure checkout flow on Dodopayments.
3. **Confirmation**:
   * After successful payment, Dodopayments shows a confirmation.
   * Optionally, the customer may be redirected back to a “Thank You” page on your storefront based on the redirect URL entered.


# Subscriptions
Source: https://docs.dodopayments.com/features/subscription

Offer recurring billing for memberships, SaaS, or services with flexible cycles, trials, proration, add-ons, and on‑demand charges.

<Info>
  Subscriptions let you sell ongoing access with automated renewals. Use flexible billing cycles, free trials, plan changes, and add‑ons to tailor pricing for each customer.
</Info>

<CardGroup cols={2}>
  <Card title="Upgrade & Downgrade" icon="repeat" href="/developer-resources/subscription-upgrade-downgrade">
    Control plan changes with proration and quantity updates.
  </Card>

  <Card title="On‑Demand Subscriptions" icon="bolt" href="/developer-resources/ondemand-subscriptions">
    Authorize a mandate now and charge later with custom amounts.
  </Card>

  <Card title="Customer Portal" icon="id-card" href="/features/customer-portal">
    Let customers manage plans, billing, and cancellations.
  </Card>

  <Card title="Subscription Webhooks" icon="code" href="/developer-resources/webhooks/intents/subscription">
    React to lifecycle events like created, renewed, and canceled.
  </Card>
</CardGroup>

## What Are Subscriptions?

Subscriptions are recurring products customers purchase on a schedule. They’re ideal for:

* **SaaS licenses**: Apps, APIs, or platform access
* **Memberships**: Communities, programs, or clubs
* **Digital content**: Courses, media, or premium content
* **Support plans**: SLAs, success packages, or maintenance

## Key Benefits

* **Predictable revenue**: Recurring billing with automated renewals
* **Flexible cycles**: Monthly, annual, custom intervals, and trials
* **Plan agility**: Proration for upgrades and downgrades
* **Add‑ons and seats**: Attach optional, quantifiable upgrades
* **Seamless checkout**: Hosted checkout and customer portal
* **Developer-first**: Clear APIs for creation, changes, and usage tracking

## Creating Subscriptions

Create subscription products in your Dodo Payments dashboard, then sell them through checkout or your API. Separating products from active subscriptions lets you version pricing, attach add‑ons, and track performance independently.

### Subscription product creation

Configure the fields in the dashboard to define how your subscription sells, renews, and bills. The sections below map directly to what you see in the creation form.

#### Product details

* **Product Name** (required): The display name shown in checkout, customer portal, and invoices.
* **Product Description** (required): A clear value statement that appears in checkout and invoices.
* **Product Image** (required): PNG/JPG/WebP up to 3 MB. Used on checkout and invoices.
* **Brand**: Associate the product with a specific brand for theming and emails.
* **Tax Category** (required): Choose the category (for example, SaaS) to determine tax rules.

<Tip>
  Pick the most accurate tax category to ensure correct tax collection per region.
</Tip>

#### Pricing

* **Pricing Type**: Choose <b>Subscription</b> (this guide). Alternatives are Single Payment and Usage Based Billing.
* **Price** (required): Base recurring price with currency.
* **Discount Applicable (%)**: Optional percentage discount applied to the base price; reflected in checkout and invoices.
* **Repeat payment every** (required): Interval for renewals, e.g., every 1 Month. Select the cadence (months or years) and quantity.
* **Subscription Period** (required): Total term for which the subscription remains active (e.g., 10 Years). After this period ends, renewals stop unless extended.
* **Trial Period Days** (required): Set trial length in days. Use 0 to disable trials. The first charge occurs automatically when the trial ends.
* **Select add‑on**: Attach up to 3 add‑ons that customers can purchase alongside the base plan.

<Warning>
  Changing pricing on an active product affects new purchases. Existing subscriptions follow your plan‑change and proration settings.
</Warning>

<Info>
  Add‑ons are ideal for quantifiable extras such as seats or storage. You can control allowed quantities and proration behavior when customers change them.
</Info>

#### Advanced settings

* **Tax Inclusive Pricing**: Display prices inclusive of applicable taxes. Final tax calculation still varies by customer location.
* **Generate license keys**: Issue a unique key to each customer after purchase. See the <a href="/features/license-keys">License Keys</a> guide.
* **Digital Product Delivery**: Deliver files or content automatically after purchase. Learn more in <a href="/features/digital-product-delivery">Digital Product Delivery</a>.
* **Metadata**: Attach custom key–value pairs for internal tagging or client integrations. See <a href="/api-reference/metadata">Metadata</a>.

<Tip>
  Use metadata to store identifiers from your system (e.g., accountId) so you can reconcile events and invoices later.
</Tip>

## Subscription Trials

Trials let customers access subscriptions without immediate payment. The first charge occurs automatically when the trial ends.

### Configuring Trials

Set **Trial Period Days** in the product pricing section (use `0` to disable). You can override this when creating subscriptions:

```typescript  theme={null}
// Via subscription creation
const subscription = await client.subscriptions.create({
  customer_id: 'cus_123',
  product_id: 'prod_monthly',
  trial_period_days: 14  // Overrides product's trial period
});

// Via checkout session
const session = await client.checkoutSessions.create({
  product_cart: [{ product_id: 'prod_monthly', quantity: 1 }],
  subscription_data: { trial_period_days: 14 }
});
```

<Warning>
  The `trial_period_days` value must be between 0 and 10,000 days.
</Warning>

### Detecting Trial Status

<Warning>
  Currently, there is no direct field to detect trial status. The following is a workaround that requires querying payments, which is inefficient. We are working on a more efficient solution.
</Warning>

To determine if a subscription is in trial, retrieve the list of payments for the subscription. If there is exactly one payment with amount 0, the subscription is in trial period:

```typescript  theme={null}
const subscription = await client.subscriptions.retrieve('sub_123');
const payments = await client.payments.list({
  subscription_id: subscription.subscription_id
});

// Check if subscription is in trial
const isInTrial = payments.items.length === 1 && 
                  payments.items[0].total_amount === 0;
```

### Updating Trial Period

Extend the trial by updating `next_billing_date`:

```typescript  theme={null}
await client.subscriptions.update('sub_123', {
  next_billing_date: '2025-02-15T00:00:00Z'  // New trial end date
});
```

<Warning>
  You cannot set `next_billing_date` to a past time. The date must be in the future.
</Warning>

## Subscription Plan Changes

Plan changes let you upgrade or downgrade subscriptions, adjust quantities, or migrate to different products. Each change triggers an immediate charge based on the proration mode you select.

### Proration Modes

Choose how customers are billed when changing plans:

#### `prorated_immediately`

Charges prorated amount based on remaining time in the current billing cycle. Best for fair billing that accounts for unused time.

```typescript  theme={null}
await client.subscriptions.changePlan('sub_123', {
  product_id: 'prod_pro',
  quantity: 1,
  proration_billing_mode: 'prorated_immediately'
});
```

#### `difference_immediately`

Charges the price difference immediately (upgrade) or adds credit for future renewals (downgrade). Best for simple upgrade/downgrade scenarios.

```typescript  theme={null}
// Upgrade: charges $50 (difference between $30 and $80)
// Downgrade: credits remaining value, auto-applied to renewals
await client.subscriptions.changePlan('sub_123', {
  product_id: 'prod_pro',
  quantity: 1,
  proration_billing_mode: 'difference_immediately'
});
```

<Info>
  Credits from downgrades using `difference_immediately` are subscription-scoped and auto-applied to future renewals. They're distinct from <a href="/features/customer-credit">Customer Credits</a>.
</Info>

#### `full_immediately`

Charges full new plan amount immediately, ignoring remaining time. Best for resetting billing cycles.

```typescript  theme={null}
await client.subscriptions.changePlan('sub_123', {
  product_id: 'prod_monthly',
  quantity: 1,
  proration_billing_mode: 'full_immediately'
});
```

### Changing Plans with Add-ons

Modify add-ons when changing plans. Add-ons are included in proration calculations:

```typescript  theme={null}
await client.subscriptions.changePlan('sub_123', {
  product_id: 'prod_pro',
  quantity: 1,
  proration_billing_mode: 'difference_immediately',
  addons: [{ addon_id: 'addon_extra_seats', quantity: 2 }]  // Add add-ons
  // addons: []  // Empty array removes all existing add-ons
});
```

<Info>
  Plan changes trigger immediate charges. Failed charges may move the subscription to `on_hold` status. Track changes via `subscription.plan_changed` webhook events.
</Info>

## API Management

<AccordionGroup>
  <Accordion title="Create subscriptions">
    Use `POST /subscriptions` to create subscriptions programmatically from products, with optional trials and add‑ons.

    <Card title="API Reference" icon="code" href="/api-reference/subscriptions/post-subscriptions">
      View the create subscription API.
    </Card>
  </Accordion>

  <Accordion title="Update subscriptions">
    Use `PATCH /subscriptions/{id}` to update quantities, cancel at period end, or modify metadata.

    <Card title="API Reference" icon="code" href="/api-reference/subscriptions/patch-subscriptions">
      Learn how to update subscription details.
    </Card>
  </Accordion>

  <Accordion title="Change plans (proration)">
    Change the active product and quantities with proration controls.

    <Card title="API Reference" icon="code" href="/api-reference/subscriptions/change-plan">
      Review plan change options.
    </Card>
  </Accordion>

  <Accordion title="On‑demand charges">
    For on‑demand subscriptions, charge specific amounts on demand.

    <Card title="API Reference" icon="code" href="/api-reference/subscriptions/create-charge">
      Charge an on‑demand subscription.
    </Card>
  </Accordion>

  <Accordion title="List and retrieve">
    Use `GET /subscriptions` to list all subscriptions and `GET /subscriptions/{id}` to retrieve one.

    <Card title="API Reference" icon="code" href="/api-reference/subscriptions/get-subscriptions">
      Browse listing and retrieval APIs.
    </Card>
  </Accordion>

  <Accordion title="Usage history">
    Fetch recorded usage for metered or hybrid pricing models.

    <Card title="API Reference" icon="code" href="/api-reference/subscriptions/get-usage-history">
      See usage history API.
    </Card>
  </Accordion>
</AccordionGroup>

## Common Use Cases

* **SaaS and APIs**: Tiered access with add‑ons for seats or usage
* **Content and media**: Monthly access with introductory trials
* **B2B support plans**: Annual contracts with premium support add‑ons
* **Tools and plugins**: License keys and versioned releases

## Integration Examples

### Checkout Sessions (subscriptions)

When creating checkout sessions, include your subscription product and optional add‑ons:

```typescript  theme={null}
const session = await client.checkoutSessions.create({
  product_cart: [
    {
      product_id: 'prod_subscription',
      quantity: 1
    }
  ]
});
```

### Plan changes with proration

Upgrade or downgrade a subscription and control proration behavior:

```typescript  theme={null}
await client.subscriptions.changePlan('sub_123', {
  product_id: 'prod_new',
  quantity: 1,
  proration_billing_mode: 'difference_immediately'
});
```

### Cancel at period end

Schedule a cancellation without immediate termination of access:

```typescript  theme={null}
await client.subscriptions.update('sub_123', {
  cancel_at_period_end: true
});
```

### On‑demand subscriptions

Create an on‑demand subscription and charge later as needed:

```typescript  theme={null}
const onDemand = await client.subscriptions.create({
  customer_id: 'cus_123',
  product_id: 'prod_on_demand',
  on_demand: true
});

await client.subscriptions.createCharge(onDemand.id, {
  amount: 4900,
  currency: 'USD',
  description: 'Extra usage for September'
});
```

## Best Practices

* **Start with clear tiers**: 2–3 plans with obvious differences
* **Communicate pricing**: Show totals, proration, and next renewal
* **Use trials thoughtfully**: Convert with onboarding, not just time
* **Leverage add‑ons**: Keep base plans simple and upsell extras
* **Test changes**: Validate plan changes and proration in test mode

<Info>
  Subscriptions are a flexible foundation for recurring revenue. Start simple, test thoroughly, and iterate based on adoption, churn, and expansion metrics.
</Info>


# Tax Inclusive Pricing
Source: https://docs.dodopayments.com/features/tax-inclusive-pricing

Show final, tax‑inclusive prices upfront. Dodo calculates tax by location and clearly breaks it out at checkout and on invoices.

## What Is Tax Inclusive Pricing?

Tax Inclusive Pricing lets you embed applicable taxes directly in your displayed product price. Customers see one final amount upfront for a more transparent, conversion‑friendly experience. At checkout, Dodo calculates the tax‑exclusive portion and tax amount from the displayed price based on customer location, and clearly breaks them out on the invoice.

<Info>
  Final tax still varies by customer location and tax category. Checkout and invoices show the calculated tax portion derived from the displayed price.
</Info>

## Key Benefits

* **Clarity for customers**: One final price displayed upfront
* **Compliance by region**: Tax is calculated per location and broken out
* **Accurate invoicing**: Invoices show net amount and tax derived from price
* **Conversion friendly**: Reduced surprises at checkout

## Product Setup

Create or edit a product in your dashboard, then enable tax‑inclusive pricing under pricing settings.

#### Pricing

* **Price** (required): Base price that is displayed to the customer.
* **Tax Inclusive Pricing**: Toggle on to treat the displayed price as tax inclusive. Dodo will compute the net (pre‑tax) amount and tax portion at checkout based on customer location and tax category.

<Warning>
  Only future purchases reflect updated tax‑inclusive settings. Existing purchases and active subscriptions are not retroactively changed.
</Warning>

<Tip>
  Use consistent product copy such as “Tax inclusive” so customers understand totals at a glance.
</Tip>

## API Management

<AccordionGroup>
  <Accordion title="Create products (tax inclusive)">
    Use `POST /products` to create products with `tax_inclusive` set to `true`.

    <Card title="API Reference" icon="code" href="/api-reference/products/post-products">
      Create product via API
    </Card>
  </Accordion>

  <Accordion title="Update products">
    Use `PATCH /products/{id}` to toggle `tax_inclusive` on existing products.

    <Card title="API Reference" icon="code" href="/api-reference/products/patch-products">
      Update product via API
    </Card>
  </Accordion>

  <Accordion title="Checkout Sessions">
    Use `POST /checkout-sessions/create` to sell products marked as tax inclusive. The displayed price remains the same; checkout derives net amount and tax.

    <Card title="API Reference" icon="code" href="/api-reference/checkout-sessions/create">
      Create checkout session
    </Card>
  </Accordion>

  <Accordion title="Refunds (tax handling)">
    Use `POST /refunds` to issue refunds. You can specify whether the refund is tax inclusive using the `tax_inclusive` flag when applicable.

    <Card title="API Reference" icon="code" href="/api-reference/refunds/post-refunds">
      Create a refund
    </Card>
  </Accordion>
</AccordionGroup>

## Integration Examples

### Create a product with tax‑inclusive pricing

```typescript  theme={null}
const product = await client.products.create({
  name: 'Pro Plan',
  description: 'All features included',
  price: {
    currency: 'USD',
    price: 10000
    tax_inclusive: true
  }
});
```

### Update an existing product to toggle tax inclusive

```typescript  theme={null}
await client.products.update(product.id, {
  price: {
    tax_inclusive: true
  }
});
```

## Best Practices

* **Choose the right tax category** to ensure correct calculation per region.
* **Communicate totals** clearly with “Tax Inclusive” labels in product copy.
* **Test in sandbox** to validate.

## Related

<CardGroup cols={2}>
  <Card title="Product Pricing" icon="dollar-sign" href="/features/pricing">
    Manage pricing options across products.
  </Card>

  <Card title="Subscriptions" icon="repeat" href="/features/subscription">
    Configure recurring products with advanced settings.
  </Card>

  <Card title="Discount Codes" icon="percent" href="/features/discount-codes">
    Offer promotions while keeping invoice clarity.
  </Card>
</CardGroup>


# Team Members
Source: https://docs.dodopayments.com/features/team

The Team feature enables you to add teammates to your Dodo Payments dashboard, granting them access based on customizable permissions. You can allow full modification rights or restrict access to view-only mode, ensuring secure and flexible collaboration.

<Frame>
  <img src="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Team.png?fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=092966bd8d046d553e08cb1fa82f6b7f" alt="Team Cover Image" data-og-width="1200" width="1200" data-og-height="630" height="630" data-path="images/cover-images/Team.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Team.png?w=280&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=41371b0d75d91aebd2e79fca98be2bad 280w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Team.png?w=560&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=7a089e7836647de2155fb5c172215da7 560w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Team.png?w=840&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=00c5f937a4097db831798ecc12aac29b 840w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Team.png?w=1100&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=96f02e0c7b8ab865afdce1a4e65f2603 1100w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Team.png?w=1650&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=8ff121076d45bb4a07e5124f30a8c8d6 1650w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/cover-images/Team.png?w=2500&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=2799a450f5f4d24f479ccb2b7ff60b91 2500w" />
</Frame>

## How to add a teammate?

<img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-1.png?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=2c2bd94706a053f6986ff0de060b9dde" data-og-width="1920" width="1920" data-og-height="1440" height="1440" data-path="images/team/team-1.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-1.png?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=ef1dde187af9076edb51856a8a9be89a 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-1.png?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=8fb40f4b8d025f06199482433f7a9dd3 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-1.png?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=33f4b5b33916cbe87f3f5ff5ff4cfc63 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-1.png?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=e09d118b2da75a56a1f9b9cc74cf9f31 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-1.png?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=15e4c2da9ff17eed31b90dcdc73a7036 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-1.png?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=a85cdb73fac2ae3fa70087dedac94630 2500w" />

1. Go to Business → Team.
2. Click on +**invite** button on the top right corner.

<img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-2.png?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=2fb4cde414dac4f80772786bfb4c0029" data-og-width="1920" width="1920" data-og-height="1440" height="1440" data-path="images/team/team-2.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-2.png?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=1d40542b7f3c4eeb8f7d59a7760fad54 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-2.png?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=eb834c758cb9bbbc8943040e14f0a10f 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-2.png?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=b557946f0202e2d471fa82e0666dddd9 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-2.png?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=8020b16e37e65cc22c672cbc922c919f 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-2.png?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=ad55570f8f4b2a212234642e70681f67 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-2.png?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=e13cdbe309af57860eb2b3b39513cb99 2500w" />

3. Provide the teammates email and assign a role to them.
4. Click on **Send Invite**.

## How can a teammate access the dashboard?

<img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-3.png?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=d7dd76129fb019db0afbf97bdfd8abfc" data-og-width="1920" width="1920" data-og-height="1440" height="1440" data-path="images/team/team-3.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-3.png?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=6f952a93ccebfdf2b597f30a2bb0f082 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-3.png?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=e5ea657de93bcdead4506a763400018d 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-3.png?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=c6bc1dc2facec8ec0113d77afb95a2fd 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-3.png?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=bc2a21458fdd1f682818083971edad94 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-3.png?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=38c5ee1f5acc3c58e2836712d21ef359 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-3.png?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=201b175c1049db51984dd2194fb56cc6 2500w" />

1. The teammate receives an invitation link via email and clicks on it.
2. If they do not have a Dodo Payments account, they are directed to the signup page where they need to provide the required details. If they already have a Dodo Payments account they can access the business through the business toggle on the bottom left.
3. After completing the signup process, they gain access to the dashboard.

## Roles and Permissions

<img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-4.png?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=3786c6f59e32ba4fb9caab942bbca5ae" data-og-width="1920" width="1920" data-og-height="1440" height="1440" data-path="images/team/team-4.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-4.png?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=c526062f2a0ef851e3b86fb1ee9e512c 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-4.png?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=bc683fdcd4bde622b802e814a2d16fed 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-4.png?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=a46db13cdd11e3c4b5f6a3939cc698b6 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-4.png?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=5010c62be46037319895eee6ec58f576 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-4.png?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=7c5986bebcaffe1a351ffa1eb2efde85 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/team/team-4.png?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=de0ccc4d9e96c85c29accc06f2cf7ee8 2500w" />

The Dodo Dashboard has three types of user roles, each with different levels of access. The role icon of the user can be seen in the bottom left of the dashboard.

### 1. Owner

The **Owner** has the highest level of access and full control over the account. Only the account owner holds this role and has the exclusive ability to invite new users. The ownership of the account cannot be transferred.

### 2. Editor

Editors have almost the same permissions as the Owner, except they cannot invite new Editors. However, they can invite and remove users with the Viewer role. Additionally, they can create, edit, and delete products and make other modifications within the dashboard.

### 3. Viewer

Viewers have read-only access to the dashboard. They can view all information, including products, transactions, and reports, but cannot add, edit, or delete products or make any modifications.


# Disputes
Source: https://docs.dodopayments.com/features/transactions/disputes

The Disputes section is dedicated to managing customer disputes related to payments. Merchants can view and manage disputes from the Transactions page, including tracking the status of chargebacks and responding to disputes.

## Introduction

The disputes section provides a detailed view of all the disputes raised along with the current status of these disputes. You will have to manage the dispute resolution at your end but the dashboard will provide a visibility into the status, reason for dispute, dispute ID for convenience of access to information.

## Viewing and Understanding Disputes

<Steps>
  <Step title="Open the Transactions Page">
    Go to the <strong>Transactions</strong> page in your dashboard and select the <strong>Disputes</strong> tab. This displays a list of all disputes associated with your account.
  </Step>

  <Step title="View Dispute Details">
    Click the <strong>eye icon</strong> next to any dispute entry to open a detailed view. Here, you can review the dispute reason, status, dispute ID, and other relevant information.
  </Step>

  <Step title="Access Associated Payment Information">
    In the dispute details, locate the <strong>Associated Payment</strong> field. Click the <strong>eye icon</strong> here to view the full payment details related to the dispute.
  </Step>
</Steps>

## Responding to a Dispute

When a dispute is raised against your transaction, follow these steps to respond effectively:

1. **Check Your Dashboard**
   * Navigate to the transactions → disputes section
   * Look for the new dispute entry

2. **Review Email Notification**
   * Check your registered email for dispute creation notification

3. **Choose Your Response**
   * You can either accept or counter the dispute
   <Frame>
     <img src="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/disputes/1.png?fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=27063993592af91e6ac1464956aaa3a7" alt="Dispute Creation" data-og-width="1920" width="1920" data-og-height="1080" height="1080" data-path="images/disputes/1.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/disputes/1.png?w=280&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=ff7efd7efb76aa31481bbdfaa0ec53c3 280w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/disputes/1.png?w=560&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=f8642fe136270a778e25d64fa88b971e 560w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/disputes/1.png?w=840&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=2fd69ebf7791107b056e28e81d03b451 840w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/disputes/1.png?w=1100&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=139e643f5e6b88db61921161547cc5f3 1100w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/disputes/1.png?w=1650&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=7fded5e628035257d4e5c64da9a02d9f 1650w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/disputes/1.png?w=2500&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=22b2ef20124d97639e3e1aa21a453050 2500w" />
   </Frame>

4. **If Accepting**
   * No further action required
   * You will lose the dispute

5. **If Countering**

   * Prepare to submit evidence
   * Follow the best practices below

   <Frame>
     <img src="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/disputes/2.png?fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=7712b07bf6246c34bc59a7f27d0d03c3" alt="Dispute Creation" data-og-width="1920" width="1920" data-og-height="1080" height="1080" data-path="images/disputes/2.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/disputes/2.png?w=280&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=9c9ae0ec83378cac96c2a1b42d8256f1 280w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/disputes/2.png?w=560&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=efe3eb1a8c3ce1dd47779060e130dac0 560w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/disputes/2.png?w=840&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=f51e50b86ad0c45d82948b2e766a7a88 840w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/disputes/2.png?w=1100&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=0d69aa0d924b06279c05618ac0ed56d0 1100w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/disputes/2.png?w=1650&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=c1eb90c5f693d8eb090d11a235ff23a8 1650w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/disputes/2.png?w=2500&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=129a4115b631cfe528af2eaa3f34b39a 2500w" />
   </Frame>

   <Frame>
     <img src="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/disputes/3.png?fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=a2415d76c609768b7550ab08b80614dc" alt="Dispute Creation" data-og-width="1920" width="1920" data-og-height="1080" height="1080" data-path="images/disputes/3.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/disputes/3.png?w=280&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=7ba94ca9463fe5a189f5a1f2ec408222 280w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/disputes/3.png?w=560&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=69671e8a748f92a82be07536639d3624 560w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/disputes/3.png?w=840&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=625bebcfcea34f4c9e4ae0bcfe603141 840w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/disputes/3.png?w=1100&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=08ee4b664920d5984e1ae177a8459129 1100w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/disputes/3.png?w=1650&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=dee83f3f475a2d39103bdf7b11481d4f 1650w, https://mintcdn.com/dodopayments/mOQO5ej_lx0yH9p-/images/disputes/3.png?w=2500&fit=max&auto=format&n=mOQO5ej_lx0yH9p-&q=85&s=6849ec81cc2cabd31eae9eec3d15fa50 2500w" />
   </Frame>

<Info>
  You have 4 days to respond to a dispute after creation
</Info>

## Dispute Response Best Practices

<Steps>
  <Step title="Understand the Dispute Reason">
    Review the dispute reason carefully. Common reasons include:

    <CardGroup cols={3}>
      <Card title="Fraudulent Transaction">
        The customer claims they did not authorize the transaction
      </Card>

      <Card title="Product/Service Not Received">
        The customer claims they did not receive the product/service after payment
      </Card>

      <Card title="Not as Described">
        The customer claims the product/service differs from what was advertised
      </Card>
    </CardGroup>

    <Info>
      Your response must directly address the specific reason. Avoid submitting generic or unrelated evidence.
    </Info>
  </Step>

  <Step title="Gather the Right Evidence">
    Focus on customer identity, access, and usage evidence.

    <Tabs>
      <Tab title="Fraudulent Transaction">
        <Card title="Required Evidence">
          * **Invoice** of the purchase
          * **IP address, device, and location** details at time of purchase
          * **Login timestamps** showing access to your platform or service
          * **Browser/device fingerprint** or account activity logs
          * Previous successful transactions from the same customer or account
          * Terms of Service and Refund Policy accepted at time of purchase
        </Card>
      </Tab>

      <Tab title="Product/Service Not Received">
        <Card title="Required Evidence">
          * **Invoice** of the purchase
          * Screenshot or logs showing **successful login**
          * Timestamped activity (downloads, content viewed, sessions started)
          * Emails or support messages confirming access was granted
          * Welcome emails or onboarding steps completed by the customer
          * Internal logs showing product/service was delivered as promised
        </Card>
      </Tab>

      <Tab title="Not as Described">
        <Card title="Required Evidence">
          * **Invoice** of the purchase
          * Product/service description from your website at time of purchase
          * Comparison of what was promised vs. what was delivered
          * Documentation or screenshots of what was accessed
          * Any customer communication acknowledging receipt or usage
          * Refund policy and support options made available to the customer
        </Card>
      </Tab>
    </Tabs>
  </Step>

  <Step title="Craft a Clear Description">
    <Card title="Focus Points">
      * What the customer purchased
      * When and how they accessed it
      * Why the dispute claim is inaccurate
    </Card>

    <Info>
      Keep your language factual and professional. Avoid emotional or accusatory statements.
    </Info>

    <Card title="Example Response">
      "We offer a digital image generation from text service using AI. The customer purchased a monthly subscription on March 5 and accessed the product multiple times from March 5–10 and generated 4 images in the duration. Please see attached access logs and the accepted terms showing our no-refund policy."
    </Card>
  </Step>

  <Step title="Format & Submit Evidence">
    <Card title="Submission Guidelines">
      * Use **PDF, JPG, or PNG** formats only
      * Clearly **label each file** (e.g., `Login_Log_March_5.pdf`)
      * Submit only **relevant** and **organized** files
      * Keep files under 5 MB each
      * Do **not include links or URLs**
    </Card>
  </Step>
</Steps>

<AccordionGroup>
  <Accordion title="Common Mistakes to Avoid">
    <Card title="Avoid These Errors">
      * Ignoring the actual dispute reason
      * Using vague or emotional statements
      * Uploading unrelated or unstructured files
      * Providing links instead of files
    </Card>
  </Accordion>

  <Accordion title="Bonus Tips">
    <Card title="Strengthen Your Case">
      * Include **timestamps with timezone** to prove access timelines
      * Highlight any **two-factor authentication** or verification steps
      * Share **refund refusal communication** if it aligns with your policy
      * Keep your policies clearly visible and easy to prove were accepted
    </Card>
  </Accordion>
</AccordionGroup>


# Payments
Source: https://docs.dodopayments.com/features/transactions/payments

The Payments section provides merchants with a detailed overview of all payment transactions. Merchants can track payment statuses, initiate refunds, and access payment details for each transaction.

<Frame>
  <iframe className="w-full aspect-video rounded-md" src="https://www.youtube.com/embed/9sJSIzbU0Z0 " title="Checkout Experience | Dodo Payments" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen />
</Frame>

## **Payments Listing Page**

The Payments listing page provides a record of all the payments that have taken place and includes important information about the payment like the transaction amount, payment status and payment method along with the invoice for reference to the purchase associated with the payment.&#x20;

* The following Payment statuses are shown:

  * **In Progress**: The payment is currently being processed.

  * **Failed**: The payment attempt was unsuccessful.

  * **Successful**: The payment was completed successfully.

<Info>The payment method and timestamp are updated once the payment is completed.</Info>

***

## **Payment Details Page**

Upon clicking a payment in the listing, merchants are directed to the **Payment Details Page**, which provides a comprehensive breakdown of the transaction

## **Important Information**

* **Automatic Activation**: All the payment methods listed above will become available to customers automatically once the merchant's account is verified and live mode is enabled.

* **No Additional Configuration Required**: Merchants do not need to configure these payment options, as they are pre-defined and managed by Dodo Payments.

* **Additional Payment Methods**: We are constantly adding more payment methods to our roster. We will keep updating this page as and when we add more methods. If you have a requirement for any particular payment method, please write to us at [support@dodopayments.com](mailto:support@dodopayments.com) and we will add this to our roadmap if not present.

## How to Navigate and Use the Payments Page

<Steps>
  <Step title="Navigate to the Payments section">
    Open the **Transactions** page and click on the **Payments** tab to view all payment transactions.
  </Step>

  <Step title="Filter and search payments">
    Use the available filters to narrow down your payment list:

    * **Status filter**: View payments by status.
    * **Date range**: Select custom date ranges to view payments from specific periods
  </Step>

  <Step title="View payment details">
    Click on the **Array icon** next to any payment to access the detailed payment information.
  </Step>

  <Step title="Review payment information">
    On the payment details page, you can view:

    * **Transaction details**: Amount, currency, payment method, and timestamp
    * **Customer information**: Name, email, and billing details
    * **Payment status**: Current status with timestamp of status changes
  </Step>

  <Step title="Download invoice">
    To download the associated invoice, click the **download Invoice** (📥) on the invoice preview section.
  </Step>
</Steps>


# Refunds
Source: https://docs.dodopayments.com/features/transactions/refunds

The Refunds section allows merchants to manage and initiate refunds for transactions. Merchants can initiate full or partial refunds directly from the transaction details view, with built-in rules ensuring compliance and protecting against errors.

## Initiate Refund

You can initiate two types of refunds from the Payment Details Page:

* **Full refund**: Refunds the entire payment amount to the customer.
* **Partial refund**: Refunds only a portion of the payment amount, as specified by you.

To begin, click the **Initiate Refund** button. The refund will only proceed if all refund rules are met.

<Frame>
  <img src="https://mintcdn.com/dodopayments/dz2Gi9UIs-kX4kio/images/guides/refund/Refund%202.webp?fit=max&auto=format&n=dz2Gi9UIs-kX4kio&q=85&s=891f118731be40b4c63c46e7cedfdb51" style={{ borderRadius: '0.5rem' }} data-og-width="1000" width="1000" data-og-height="609" height="609" data-path="images/guides/refund/Refund 2.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/dz2Gi9UIs-kX4kio/images/guides/refund/Refund%202.webp?w=280&fit=max&auto=format&n=dz2Gi9UIs-kX4kio&q=85&s=3f9a7715119aa4ac66ba51ce9a880120 280w, https://mintcdn.com/dodopayments/dz2Gi9UIs-kX4kio/images/guides/refund/Refund%202.webp?w=560&fit=max&auto=format&n=dz2Gi9UIs-kX4kio&q=85&s=df9368d67ef493661b2d50e362a9ecdb 560w, https://mintcdn.com/dodopayments/dz2Gi9UIs-kX4kio/images/guides/refund/Refund%202.webp?w=840&fit=max&auto=format&n=dz2Gi9UIs-kX4kio&q=85&s=8ef16ca736f9a577af99e6a6ddad7db0 840w, https://mintcdn.com/dodopayments/dz2Gi9UIs-kX4kio/images/guides/refund/Refund%202.webp?w=1100&fit=max&auto=format&n=dz2Gi9UIs-kX4kio&q=85&s=fcd9d1d65a25f549d74517bbfab28362 1100w, https://mintcdn.com/dodopayments/dz2Gi9UIs-kX4kio/images/guides/refund/Refund%202.webp?w=1650&fit=max&auto=format&n=dz2Gi9UIs-kX4kio&q=85&s=a0d7b691b56cf411d1836f58437b5000 1650w, https://mintcdn.com/dodopayments/dz2Gi9UIs-kX4kio/images/guides/refund/Refund%202.webp?w=2500&fit=max&auto=format&n=dz2Gi9UIs-kX4kio&q=85&s=854180c5116d9a5483e42e471778cb1d 2500w" />
</Frame>

<Tip>
  Partial refunds are useful when only a portion of the order needs to be refunded.
</Tip>

### Details Required for Refund

* **Refund Amount**: The amount to be refunded. For partial refunds, enter the specific amount you wish to return to the customer. The system will prevent you from refunding more than the original payment.

* **Refund Reason**: The reason for the refund, to be recorded in the system.

### Refund Rules

1. The payment must have been successful.

2. Refunds (full or partial) must be initiated within 30 days of the transaction date. Initiating refunds will not be allowed post that.

3. Refunds are issued to the original payment method used by the customer.

If any rule is violated, the refund request will be denied. Please reach out to support for assistance if needed.

## Refunds Page

The **Refunds Page** provides a detailed view of all refund transactions:&#x20;

* Clicking the **Associated Payment ID** will take the merchant to the **Payment Details Page** for that transaction.

* Merchants can export the refund report in CSV format for a specified date range.

## Refund Receipt

Once a refund is successfully processed, a **Refund Receipt** is automatically sent to the customer.

**Refund Receipt Template:**

<Frame>
  <img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/transactions/refunds/Refund%20receipt.png?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=38c7faf58c0708ddeafa75785397442e" data-og-width="608" width="608" data-og-height="857" height="857" data-path="images/transactions/refunds/Refund receipt.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/transactions/refunds/Refund%20receipt.png?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=cfba3882291db058241947467f8e34aa 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/transactions/refunds/Refund%20receipt.png?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=42d4888214e16236f55f6e2619c3423c 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/transactions/refunds/Refund%20receipt.png?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=fb19cc49acaf6251f5522bd140a12d78 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/transactions/refunds/Refund%20receipt.png?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=a7a23123ea6bb0ae29662aedb8ca7873 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/transactions/refunds/Refund%20receipt.png?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=dc045979a7b55b504117f25e895e8218 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/transactions/refunds/Refund%20receipt.png?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=6de38968a0cd0f79e6b36a2cec852b2f 2500w" />
</Frame>


# Event Ingestion
Source: https://docs.dodopayments.com/features/usage-based-billing/event-ingestion

Send usage events from your application to track customer consumption and power billing.

Events are the foundation of usage-based billing. Send events when billable actions occur, and meters aggregate them into charges.

<Card title="API Reference - Events Ingestion" icon="code" href="/api-reference/usage-events/ingest-events">
  Complete API documentation with examples and response codes.
</Card>

## Event Structure

<Accordion title="Required Fields">
  <ParamField body="event_id" type="string" required>
    Unique identifier. Use UUIDs or combine customer ID + timestamp + action.
  </ParamField>

  <ParamField body="customer_id" type="string" required>
    Dodo Payments customer ID. Must be a valid existing customer.
  </ParamField>

  <ParamField body="event_name" type="string" required>
    Event type that matches your meter's event name (case-sensitive). Examples: `api.call`, `image.generated`
  </ParamField>
</Accordion>

<Accordion title="Optional Fields">
  <ParamField body="timestamp" type="string">
    ISO 8601 timestamp. Defaults to server time if omitted. Include for accurate billing with delayed/batch events.
  </ParamField>

  <ParamField body="metadata" type="object">
    Additional properties for aggregation and filtering:

    * Numeric values: `bytes`, `tokens`, `duration_ms`
    * Filters: `endpoint`, `method`, `quality`

    ```javascript  theme={null}
    metadata: {
      endpoint: "/v1/orders",
      method: "POST",
      tokens: 1024
    }
    ```
  </ParamField>
</Accordion>

## Sending Events

<CodeGroup>
  ```javascript Single Event theme={null}
  await fetch('https://test.dodopayments.com/events/ingest', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${process.env.DODO_API_KEY}`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      events: [{
        event_id: "api_call_1234",
        customer_id: "cus_abc123",
        event_name: "api.call",
        metadata: { endpoint: "/v1/orders" }
      }]
    })
  });
  ```

  ```javascript Batch Events theme={null}
  await fetch('https://test.dodopayments.com/events/ingest', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${process.env.DODO_API_KEY}`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      events: [
        { event_id: "call_1", customer_id: "cus_abc", event_name: "api.call" },
        { event_id: "call_2", customer_id: "cus_abc", event_name: "api.call" },
        { event_id: "call_3", customer_id: "cus_abc", event_name: "api.call" }
      ]
    })
  });
  ```

  ```python Python theme={null}
  import requests

  requests.post(
      'https://test.dodopayments.com/events/ingest',
      headers={'Authorization': f'Bearer {api_key}', 'Content-Type': 'application/json'},
      json={'events': [{'event_id': 'call_1', 'customer_id': 'cus_abc', 'event_name': 'api.call'}]}
  )
  ```

  ```curl cURL theme={null}
  curl -X POST 'https://test.dodopayments.com/events/ingest' \
    -H 'Authorization: Bearer YOUR_API_KEY' \
    -H 'Content-Type: application/json' \
    -d '{"events": [{"event_id": "call_1", "customer_id": "cus_abc", "event_name": "api.call"}]}'
  ```
</CodeGroup>

<Tip>
  Batch up to 100 events per request for better performance.
</Tip>

## Ingestion Blueprints

Ready-made event patterns for common use cases. Start with a proven blueprint instead of building from scratch.

<CardGroup cols={2}>
  <Card title="LLM Blueprint" icon="brain-circuit" href="/developer-resources/ingestion-blueprints/llm">
    Track AI token usage across OpenAI, Anthropic, Groq, Gemini, and more.
  </Card>

  <Card title="API Gateway Blueprint" icon="cloud" href="/developer-resources/ingestion-blueprints/api-gateway">
    Meter API requests with endpoint filtering and rate limiting support.
  </Card>

  <Card title="Object Storage Blueprint" icon="box-archive" href="/developer-resources/ingestion-blueprints/object-storage">
    Track file uploads and storage consumption for cloud storage services.
  </Card>

  <Card title="Stream Blueprint" icon="tower-broadcast" href="/developer-resources/ingestion-blueprints/stream">
    Measure streaming bandwidth for video, audio, and real-time data.
  </Card>

  <Card title="Time Range Blueprint" icon="clock" href="/developer-resources/ingestion-blueprints/time-range">
    Bill by elapsed time for serverless functions and compute instances.
  </Card>

  <Card title="View All Blueprints" icon="copy" href="/features/usage-based-billing/ingestion-blueprints">
    See all available blueprints with detailed implementation guides.
  </Card>
</CardGroup>

## Best Practices

<AccordionGroup>
  <Accordion title="Use Unique Event IDs">
    Use deterministic IDs to prevent duplicates: `${customerId}_${action}_${timestamp}`
  </Accordion>

  <Accordion title="Implement Retries">
    Retry on 5xx errors with exponential backoff. Don't retry 4xx errors.
  </Accordion>

  <Accordion title="Include Timestamps">
    Omit for real-time events. Include for delayed/batch events for accuracy.
  </Accordion>

  <Accordion title="Monitor Delivery">
    Track success rates and queue failed events for retry.
  </Accordion>
</AccordionGroup>

## Troubleshooting

<AccordionGroup>
  <Accordion title="Events not appearing">
    * Event name must exactly match meter (case-sensitive)
    * Customer ID must exist
    * Check meter filters aren't excluding events
    * Verify timestamps are recent
  </Accordion>

  <Accordion title="Authentication errors (401)">
    Verify API key is correct and use format: `Bearer YOUR_API_KEY`
  </Accordion>

  <Accordion title="Validation errors (400)">
    Ensure all required fields are present: `event_id`, `customer_id`, `event_name`
  </Accordion>

  <Accordion title="Metadata not aggregating">
    * Metadata keys must match meter's "Over Property" exactly
    * Use numbers, not strings: `tokens: 150` not `tokens: "150"`
  </Accordion>
</AccordionGroup>

## Next Steps

<CardGroup cols={2}>
  <Card title="Create Meters" icon="sliders" href="/features/usage-based-billing/meters">
    Define how your events are aggregated into billable quantities with filters and aggregation functions.
  </Card>

  <Card title="Ingestion Blueprints" icon="copy" href="/features/usage-based-billing/ingestion-blueprints">
    Use ready-made blueprints for common use cases like LLM tracking, API gateways, and storage.
  </Card>

  <Card title="Complete Tutorial" icon="code" href="/developer-resources/usage-based-billing-build-ai-image-generator">
    Build a full AI image generator with usage-based billing from scratch.
  </Card>

  <Card title="API Reference" icon="terminal" href="/api-reference/usage-events/ingest-events">
    Complete API documentation with all parameters, response codes, and interactive testing.
  </Card>
</CardGroup>


# Ingestion Blueprints
Source: https://docs.dodopayments.com/features/usage-based-billing/ingestion-blueprints

Ready-made event ingestion patterns for common use cases with sample code.

Ingestion blueprints are pre-built patterns for tracking usage in common scenarios. Instead of figuring out event structures and meter configurations from scratch, start with a proven blueprint and customize it for your needs.

## What Are Blueprints?

Each blueprint includes:

* **Event structure recommendations**: Optimal event naming and metadata design
* **Meter configuration**: Suggested aggregation types and filters
* **Sample code**: Working implementation examples in multiple languages
* **Best practices**: Tips for accuracy, performance, and cost optimization

<Tip>
  Blueprints save hours of setup time and help you avoid common pitfalls. Start with a blueprint, then adapt it to your specific requirements.
</Tip>

## Why Use Blueprints?

<CardGroup cols={3}>
  <Card title="Faster Setup" icon="rocket">
    Get usage tracking working in minutes instead of hours. Copy proven patterns instead of designing from scratch.
  </Card>

  <Card title="Best Practices Built In" icon="shield-check">
    Avoid common mistakes with tested event structures, proper metadata, and optimal aggregation choices.
  </Card>

  <Card title="Production Ready" icon="code">
    Sample code is based on real-world implementations. Just add your API keys and go.
  </Card>
</CardGroup>

## Available Blueprints

Choose the blueprint that matches your use case:

<CardGroup cols={1}>
  <Card title="LLM Blueprint" icon="brain-circuit" href="/developer-resources/ingestion-blueprints/llm">
    Track AI token usage across OpenAI, Anthropic, Groq, Gemini, Vercel AI SDK, and more.

    **Perfect for**: AI chatbots, code generators, content creation tools, AI-powered apps.

    **What you'll track**: Input tokens, output tokens, model usage, request counts.
  </Card>

  <Card title="API Gateway Blueprint" icon="cloud" href="/developer-resources/ingestion-blueprints/api-gateway">
    Meter API requests at the gateway level with endpoint filtering and rate limiting support.

    **Perfect for**: REST APIs, GraphQL services, webhook providers, API-first platforms.

    **What you'll track**: Request counts, endpoint usage, HTTP methods, response times.
  </Card>

  <Card title="Object Storage Blueprint" icon="box-archive" href="/developer-resources/ingestion-blueprints/object-storage">
    Track file uploads, storage consumption, and bandwidth for cloud storage services.

    **Perfect for**: File hosting, media platforms, backup services, document management.

    **What you'll track**: Bytes stored, file uploads, downloads, storage snapshots.
  </Card>

  <Card title="Stream Blueprint" icon="tower-broadcast" href="/developer-resources/ingestion-blueprints/stream">
    Measure streaming bandwidth for video, audio, and real-time data delivery.

    **Perfect for**: Video streaming, audio platforms, live broadcasts, real-time data feeds.

    **What you'll track**: Bandwidth consumed, stream duration, quality levels, concurrent streams.
  </Card>

  <Card title="Time Range Blueprint" icon="clock" href="/developer-resources/ingestion-blueprints/time-range">
    Bill by elapsed time for compute resources, serverless functions, and long-running jobs.

    **Perfect for**: Serverless platforms, container hosting, compute instances, batch processing.

    **What you'll track**: Execution time, compute hours, function invocations, job duration.
  </Card>
</CardGroup>

## How to Use a Blueprint

<Steps>
  <Step title="Choose your blueprint">
    Select the blueprint that best matches your billing scenario. Each blueprint page includes detailed implementation guides.
  </Step>

  <Step title="Review the event structure">
    Understand the recommended event naming and metadata design. Copy the event structure for your use case.
  </Step>

  <Step title="Create the meter">
    Follow the blueprint's meter configuration instructions. Use the suggested aggregation type and filters.
  </Step>

  <Step title="Implement event sending">
    Copy the sample code for your language/framework. Replace placeholder values with your actual API keys and customer IDs.
  </Step>

  <Step title="Test and verify">
    Send test events and verify they appear in your meter dashboard with correct aggregation.
  </Step>

  <Step title="Customize as needed">
    Adapt the blueprint to your specific requirements—add custom metadata, adjust filters, or modify pricing.
  </Step>
</Steps>

## Blueprint Comparison

Not sure which blueprint fits your needs? Here's a quick comparison:

| Use Case       | Blueprint      | Aggregation     | Common Metadata                      |
| -------------- | -------------- | --------------- | ------------------------------------ |
| AI chat app    | LLM            | Sum (tokens)    | model, input\_tokens, output\_tokens |
| REST API       | API Gateway    | Count           | endpoint, method, status\_code       |
| File storage   | Object Storage | Sum (bytes)     | file\_size, file\_type, operation    |
| Video platform | Stream         | Sum (bandwidth) | duration, quality, bitrate           |
| Serverless     | Time Range     | Sum (duration)  | function\_name, execution\_time\_ms  |

## Custom Implementations

Don't see a blueprint for your exact use case? No problem:

1. **Start with the closest blueprint**: Pick the one most similar to your needs
2. **Adapt the event structure**: Modify metadata fields to match your requirements
3. **Adjust meter configuration**: Change aggregation type or filters as needed
4. **Test thoroughly**: Verify billing calculations with sample usage

<Info>
  All blueprints are starting points. Feel free to mix concepts from different blueprints or create entirely custom implementations.
</Info>

## Need Help?

If you're unsure which blueprint to use or need help customizing:

<CardGroup cols={2}>
  <Card title="Complete Tutorial" icon="code" href="/developer-resources/usage-based-billing-build-ai-image-generator">
    Follow our end-to-end tutorial building an AI image generator with usage billing.
  </Card>

  <Card title="Integration Guide" icon="book" href="/developer-resources/usage-based-billing-guide">
    Comprehensive guide covering all aspects of usage-based billing implementation.
  </Card>
</CardGroup>


# Usage Based Billing
Source: https://docs.dodopayments.com/features/usage-based-billing/introduction

Charge customers based on what they actually use with flexible metering and automated billing.

Usage-based billing lets you charge customers for what they actually use—API calls, storage, AI tokens, or any metric you define. Customers pay for consumption, not fixed fees.

<Info>
  **Perfect for**: APIs, AI services, infrastructure platforms, and any product where value scales with usage.
</Info>

## How It Works

<Steps>
  <Step title="Send Usage Events">
    Your application sends events when billable actions occur.

    ```javascript  theme={null}
    {
      "event_id": "evt_123",
      "customer_id": "cus_abc",
      "event_name": "api.call",
      "metadata": { "endpoint": "/v1/users" }
    }
    ```
  </Step>

  <Step title="Meters Aggregate Usage">
    Meters aggregate events into billable quantities using Count, Sum, Max, or Last aggregation.
  </Step>

  <Step title="Automatic Billing">
    Set pricing per unit and free thresholds. Customers are billed automatically each cycle.
  </Step>
</Steps>

## Core Concepts

### Events

Events represent usage actions in your application. Each event includes:

* **Event Name**: Type of usage (e.g., `api.call`)
* **Customer ID**: Who used it
* **Metadata**: Additional properties for aggregation

### Meters

Meters aggregate events into billable quantities:

* **Count**: Total events (API calls)
* **Sum**: Add values (total bytes)
* **Max**: Highest value (peak users)
* **Last**: Most recent value

<Frame>
  <img src="https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-2.png?fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=f9d85a463fba231437151db3d4a2052a" alt="Create meter interface" data-og-width="2324" width="2324" data-og-height="1600" height="1600" data-path="images/usage-based/UBB-2.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-2.png?w=280&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=18fdbbf75ab4df7ede6c45f6e248b783 280w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-2.png?w=560&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=e404194a942a1276de7148f9b8eff36d 560w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-2.png?w=840&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=1bec71463cb2e00acd0841b9968f2b7e 840w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-2.png?w=1100&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=746ef8eb5f8bb76a355122d8253e9cba 1100w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-2.png?w=1650&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=8f10a20590e5c9056b9c7f285b827217 1650w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-2.png?w=2500&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=a503c04b328416b03f7e20dc6c4c0a28 2500w" />
</Frame>

### Products with Usage Pricing

Set pricing per unit and optional free thresholds:

<Frame>
  <img src="https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-4.png?fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=b2d07bb408fd79e1b788c1b7092b8bca" alt="Pricing configuration" data-og-width="732" width="732" data-og-height="712" height="712" data-path="images/usage-based/UBB-4.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-4.png?w=280&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=6e7232a5f0aa56db64527de0835fa7c8 280w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-4.png?w=560&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=943121c2ccc1ea9fea93cc7ed4a98696 560w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-4.png?w=840&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=d5916bede0ca8665a93ace24fc2dff4a 840w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-4.png?w=1100&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=351bff3e883b3c5b45885234aa341af8 1100w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-4.png?w=1650&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=7228b5b070c8c29c2db885e80f83e86e 1650w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-4.png?w=2500&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=e303322fb1fa22bd9fa44960077d3d5d 2500w" />
</Frame>

**Example**: 2,500 calls - 1,000 free = 1,500 × $0.02 = $30.00

### Customer Credits

Give customers included usage credits that refresh each billing cycle. Credits apply before paid usage.

## Quick Start

<Steps>
  <Step title="Create a Meter">
    In your dashboard: **Meters** → **Create Meter**

    1. Set event name (e.g., `api.call`)
    2. Choose aggregation (Count, Sum, Max, Last)
    3. Add optional filters
  </Step>

  <Step title="Add to Product">
    Link meter to a product with pricing:

    <Frame>
      <img src="https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-5.png?fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=fd3851a1a070714baf0aec01cff717b8" alt="Adding meter to product" data-og-width="2272" width="2272" data-og-height="1422" height="1422" data-path="images/usage-based/UBB-5.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-5.png?w=280&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=b70c4d68d07dee708d03505582aa3977 280w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-5.png?w=560&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=5ef40e99e35c0cf09f8082d4ab83cbd1 560w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-5.png?w=840&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=3d4eaab132b20d49db9770c1db4084cc 840w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-5.png?w=1100&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=4f9a3ac2cc1d5c8a1db7ff1985fae45c 1100w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-5.png?w=1650&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=caba70b37cc0205430be9a88e6f77a57 1650w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-5.png?w=2500&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=8c875cc6e5d080f96d3efdba724cdf0c 2500w" />
    </Frame>

    1. Select **Usage-Based Billing**
    2. Choose your meter
    3. Set price per unit and free threshold
  </Step>

  <Step title="Send Events">
    ```javascript  theme={null}
    await fetch('https://test.dodopayments.com/events/ingest', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${process.env.DODO_API_KEY}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        events: [{
          event_id: "unique_event_id",
          customer_id: "cus_abc123",
          event_name: "api.call",
          metadata: { endpoint: "/v1/users" }
        }]
      })
    });
    ```
  </Step>

  <Step title="Monitor Usage">
    <Frame>
      <img src="https://mintcdn.com/dodopayments/16r81mgDWvSgYER7/images/guides/usage-based-billing/meter-quantities-chart.png?fit=max&auto=format&n=16r81mgDWvSgYER7&q=85&s=1a8a39547bd0259a53d4591d7928c8ea" alt="Meter dashboard" data-og-width="1602" width="1602" data-og-height="888" height="888" data-path="images/guides/usage-based-billing/meter-quantities-chart.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/16r81mgDWvSgYER7/images/guides/usage-based-billing/meter-quantities-chart.png?w=280&fit=max&auto=format&n=16r81mgDWvSgYER7&q=85&s=b0e55e646843d7ae4168b4f28f47ebc8 280w, https://mintcdn.com/dodopayments/16r81mgDWvSgYER7/images/guides/usage-based-billing/meter-quantities-chart.png?w=560&fit=max&auto=format&n=16r81mgDWvSgYER7&q=85&s=ff70ffc8739eebbb1169605524ae8b26 560w, https://mintcdn.com/dodopayments/16r81mgDWvSgYER7/images/guides/usage-based-billing/meter-quantities-chart.png?w=840&fit=max&auto=format&n=16r81mgDWvSgYER7&q=85&s=4259db84b487d654d4891d65747da271 840w, https://mintcdn.com/dodopayments/16r81mgDWvSgYER7/images/guides/usage-based-billing/meter-quantities-chart.png?w=1100&fit=max&auto=format&n=16r81mgDWvSgYER7&q=85&s=9e7e0a7c207ef6bc7300740b8ed5368f 1100w, https://mintcdn.com/dodopayments/16r81mgDWvSgYER7/images/guides/usage-based-billing/meter-quantities-chart.png?w=1650&fit=max&auto=format&n=16r81mgDWvSgYER7&q=85&s=eda3fade188934b182b0b539115473e2 1650w, https://mintcdn.com/dodopayments/16r81mgDWvSgYER7/images/guides/usage-based-billing/meter-quantities-chart.png?w=2500&fit=max&auto=format&n=16r81mgDWvSgYER7&q=85&s=2345f13682183ecf726bc8f0eb6d7178 2500w" />
    </Frame>

    Check your meter's dashboard to see events and usage aggregation. Customers are billed automatically each cycle.
  </Step>
</Steps>

## Use Cases

<CardGroup cols={2}>
  <Card title="APIs & Infrastructure" icon="cloud">
    Track API calls, compute hours, bandwidth, storage. Example: \$0.001 per call after 10,000 free.
  </Card>

  <Card title="AI Usage Tracking" icon="brain">
    Track tokens, generations, processing time. Example: \$0.04 per standard image, \$0.08 per HD.
  </Card>

  <Card title="Data & Analytics" icon="chart-line">
    Bill by data processed, queries run, records analyzed. Example: \$5 per GB after 10 GB free.
  </Card>

  <Card title="Communication" icon="message">
    Count messages, minutes, data transferred. Example: \$0.01 per SMS sent.
  </Card>
</CardGroup>

## Next Steps

<CardGroup cols={2}>
  <Card title="Event Ingestion" icon="bolt" href="/features/usage-based-billing/event-ingestion">
    Learn how to structure and send usage events from your application.
  </Card>

  <Card title="Meters Guide" icon="sliders" href="/features/usage-based-billing/meters">
    Master meter configuration, aggregation types, and event filtering.
  </Card>

  <Card title="Complete Tutorial" icon="code" href="/developer-resources/usage-based-billing-build-ai-image-generator">
    Build a complete AI image generator with usage-based billing from scratch.
  </Card>

  <Card title="Integration Guide" icon="book" href="/developer-resources/usage-based-billing-guide">
    Comprehensive guide to implementing usage-based billing in your application.
  </Card>
</CardGroup>


# Meters
Source: https://docs.dodopayments.com/features/usage-based-billing/meters

Transform raw usage events into billable quantities with aggregation and filtering.

<Info>
  Meters convert raw events into billable quantities. They filter events and apply aggregation functions (Count, Sum, Max, Last) to calculate usage per customer.
</Info>

<Frame>
  <img src="https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-2.png?fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=f9d85a463fba231437151db3d4a2052a" alt="Meter creation interface showing event name, aggregation type, and filtering options" data-og-width="2324" width="2324" data-og-height="1600" height="1600" data-path="images/usage-based/UBB-2.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-2.png?w=280&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=18fdbbf75ab4df7ede6c45f6e248b783 280w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-2.png?w=560&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=e404194a942a1276de7148f9b8eff36d 560w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-2.png?w=840&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=1bec71463cb2e00acd0841b9968f2b7e 840w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-2.png?w=1100&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=746ef8eb5f8bb76a355122d8253e9cba 1100w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-2.png?w=1650&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=8f10a20590e5c9056b9c7f285b827217 1650w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-2.png?w=2500&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=a503c04b328416b03f7e20dc6c4c0a28 2500w" />
</Frame>

## API Resources

<AccordionGroup>
  <Accordion title="View Meter API References">
    <CardGroup cols={2}>
      <Card title="Create Meter" icon="plus" href="/api-reference/meters/create-meter">
        Create meters programmatically via API.
      </Card>

      <Card title="List Meters" icon="list" href="/api-reference/meters/get-meters">
        Retrieve all meters in your account.
      </Card>

      <Card title="Get Meter" icon="eye" href="/api-reference/meters/retrieve-meter">
        Fetch details for a specific meter by ID.
      </Card>

      <Card title="Archive Meter" icon="arrow-rotate-right" href="/api-reference/meters/archive-meter">
        Archive a meter to stop tracking usage.
      </Card>

      <Card title="Unarchive Meter" icon="arrow-rotate-left" href="/api-reference/meters/unarchive-meter">
        Restore an archived meter to resume tracking.
      </Card>
    </CardGroup>
  </Accordion>
</AccordionGroup>

## Creating a Meter

<Steps>
  <Step title="Basic Information">
    <ParamField path="Meter Name" type="string" required>
      Descriptive name (e.g., "API Requests", "Token Usage")
    </ParamField>

    <ParamField path="Event Name" type="string" required>
      Exact event name to match (case-sensitive). Examples: `api.call`, `image.generated`
    </ParamField>
  </Step>

  <Step title="Aggregation">
    <ParamField path="Aggregation Type" type="string" required>
      Choose how events are aggregated:

      * **Count**: Total number of events (API calls, uploads)
      * **Sum**: Add numeric values (tokens, bytes)
      * **Max**: Highest value in period (peak users)
      * **Last**: Most recent value
    </ParamField>

    <ParamField path="Over Property" type="string">
      Metadata key to aggregate (required for all types except Count). Examples: `tokens`, `bytes`, `duration_ms`
    </ParamField>

    <ParamField path="Measurement Unit" type="string" required>
      Unit label for invoices. Examples: `calls`, `tokens`, `GB`, `hours`
    </ParamField>
  </Step>

  <Step title="Filtering (Optional)">
    <Frame>
      <img src="https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-3.png?fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=ce231b0559d31723bc12c22cd9ff9d64" alt="Event filtering" data-og-width="1558" width="1558" data-og-height="942" height="942" data-path="images/usage-based/UBB-3.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-3.png?w=280&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=2cd814d88c0043f59bd0809f62a70932 280w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-3.png?w=560&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=6346cf2daf9635f53f9280701b1fefc2 560w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-3.png?w=840&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=d5b459ab63581aa80b9ddcd6a2d9be25 840w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-3.png?w=1100&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=95c547968201d65d65981b0dc6271c0a 1100w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-3.png?w=1650&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=52e270bd88d839ea0c148fcfadbbf7dd 1650w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-3.png?w=2500&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=f737d26f50ab2a4cc45cc03927936d4e 2500w" />
    </Frame>

    Add conditions to filter which events are counted:

    * **AND logic**: All conditions must match
    * **OR logic**: Any condition can match

    **Comparators**: equals, not equals, greater than, less than, contains

    Enable filtering, choose logic, add conditions with property key, comparator, and value.
  </Step>

  <Step title="Create">
    Review configuration and click **Create Meter**.
  </Step>
</Steps>

## Viewing Analytics

<Frame>
  <img src="https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-1.png?fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=7fb86a266b5aa84f281b680601bd998e" alt="Meter analytics" data-og-width="1536" width="1536" data-og-height="1252" height="1252" data-path="images/usage-based/UBB-1.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-1.png?w=280&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=23a2bbb81a88052bec92772f03254690 280w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-1.png?w=560&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=b9ebba13d62c1e5e0470097382319a8c 560w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-1.png?w=840&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=2cb2348f913ebdc8175d07c533553d74 840w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-1.png?w=1100&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=84b14f137b8f737d8e269cb9c2213915 1100w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-1.png?w=1650&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=9059aafa1890c7a834a0acbd2a115567 1650w, https://mintcdn.com/dodopayments/w9oVTi6CzZMAOQA3/images/usage-based/UBB-1.png?w=2500&fit=max&auto=format&n=w9oVTi6CzZMAOQA3&q=85&s=7a1008d882d31dc4699b07353c4121f6 2500w" />
</Frame>

Your meter dashboard shows:

* **Overview**: Total usage and usage chart
* **Events**: Individual events received
* **Customers**: Per-customer usage and charges

## Troubleshooting

<AccordionGroup>
  <Accordion title="Events not appearing">
    * Event name must match exactly (case-sensitive)
    * Check meter filters aren't excluding events
    * Verify customer IDs exist
    * Temporarily disable filters to test
  </Accordion>

  <Accordion title="Aggregation not working">
    * Verify Over Property matches metadata key exactly
    * Use numbers, not strings: `tokens: 150` not `"150"`
    * Include required properties in all events
  </Accordion>

  <Accordion title="Filters not working">
    * Match case exactly
    * Use correct operators for data type
    * Ensure events include filtered properties
  </Accordion>

  <Accordion title="Wrong usage totals">
    * Check Events tab to count actual events received
    * Verify aggregation type (Count vs Sum)
    * Ensure values are numeric for Sum/Max
  </Accordion>
</AccordionGroup>

## Next Steps

<CardGroup cols={2}>
  <Card title="Send Events" icon="bolt" href="/features/usage-based-billing/event-ingestion">
    Start sending usage events from your application to your meters.
  </Card>

  <Card title="View Blueprints" icon="copy" href="/features/usage-based-billing/ingestion-blueprints">
    Use ready-made meter configurations for common use cases.
  </Card>
</CardGroup>


# Close CRM
Source: https://docs.dodopayments.com/integrations/close-crm

Sync Dodo Payments data with Close CRM to track leads and manage sales pipeline.

## Introduction

Connect your payment data directly to Close CRM for seamless lead management and sales tracking. Automatically create contacts and opportunities from successful payments, keeping your sales team informed of revenue-generating activities.

<Info>
  This integration requires a Close CRM API key with appropriate permissions.
</Info>

## Getting Started

<Steps>
  <Step title="Open the Webhook Section">
    In your Dodo Payments dashboard, navigate to <b>Webhooks → + Add Endpoint</b> and expand the integrations dropdown.

    <Frame>
      <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/close-crm.png?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=bd462e078ea95d7853eb066cdbaebb0f" alt="Add Endpoint and integrations dropdown" data-og-width="1710" width="1710" data-og-height="948" height="948" data-path="images/integrations/close-crm.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/close-crm.png?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=7a692373eb1d4e0ccf047320f8ff1fe5 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/close-crm.png?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=69c366972dc09b09f84c5d925f1a0987 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/close-crm.png?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=a994876209732621c610c33191793ab7 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/close-crm.png?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=c9c10208ddc6403509c977fe00812c12 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/close-crm.png?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=38d695b03eb9a3bb45bb76ad6804bc02 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/close-crm.png?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=5d6c3ca07c1bc10d4a2396a21725565a 2500w" />
    </Frame>
  </Step>

  <Step title="Select Close CRM">
    Choose the <b>Close CRM</b> integration card.
  </Step>

  <Step title="Enter API Key">
    Provide your Close CRM API key in the configuration.
  </Step>

  <Step title="Configure Transformation">
    Edit the transformation code to map payment data to Close CRM objects.
  </Step>

  <Step title="Test & Create">
    Test with sample payloads and click <b>Create</b> to activate the sync.
  </Step>

  <Step title="Done!">
    🎉 Payment events will now automatically create/update records in Close CRM.
  </Step>
</Steps>

## Transformation Code Examples

### Create Contact from Payment

```javascript create_contact.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType === "payment.succeeded") {
    const p = webhook.payload.data;
    webhook.url = "https://api.close.com/api/v1/contact/";
    webhook.payload = {
      name: p.customer.name,
      emails: [p.customer.email],
      phones: [p.customer.phone || ''],
      custom: {
        payment_amount: (p.total_amount / 100).toFixed(2),
        payment_method: p.payment_method || '',
        dodo_customer_id: p.customer.customer_id
      }
    };
  }
  return webhook;
}
```

### Create Opportunity from Subscription

```javascript create_opportunity.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType === "subscription.active") {
    const s = webhook.payload.data;
    webhook.url = "https://api.close.com/api/v1/opportunity/";
    webhook.payload = {
      lead_id: s.customer.customer_id,
      value: (s.recurring_pre_tax_amount / 100).toFixed(2),
      value_period: s.payment_frequency_interval,
      title: `Subscription - ${s.product_id}`,
      custom: {
        subscription_id: s.subscription_id,
        billing_frequency: s.payment_frequency_interval,
        next_billing: s.next_billing_date
      }
    };
  }
  return webhook;
}
```

## Tips

* Use Close CRM's API documentation to understand field mappings
* Include custom fields for payment-specific data
* Map subscription amounts to opportunity values
* Use customer IDs for proper lead associations

## Troubleshooting

<AccordionGroup>
  <Accordion title="Records not created in Close CRM">
    * Verify API key has write permissions
    * Check that required fields are included
    * Ensure email format is valid
    * Review Close CRM API rate limits
  </Accordion>

  <Accordion title="Transformation errors">
    * Validate JSON structure matches Close CRM API format
    * Check that all required fields are present
    * Ensure field names match Close CRM schema exactly
  </Accordion>
</AccordionGroup>


# Customer.io
Source: https://docs.dodopayments.com/integrations/customer-io

Send Dodo Payments events to Customer.io to trigger email automations and customer journeys.

## Introduction

Trigger personalized email campaigns and customer journeys based on payment events. Send welcome emails for new customers, subscription updates, and payment failure notifications automatically through Customer.io.

<Info>
  This integration requires your Customer.io Site ID and API Key.
</Info>

## Getting Started

<Steps>
  <Step title="Open the Webhook Section">
    In your Dodo Payments dashboard, navigate to <b>Webhooks → + Add Endpoint</b> and expand the integrations dropdown.

    <Frame>
      <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/customer-io.png?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=fb4d96b67438c2eb178b2482475903db" alt="Add Endpoint and integrations dropdown" data-og-width="1644" width="1644" data-og-height="952" height="952" data-path="images/integrations/customer-io.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/customer-io.png?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=a299938b6098ef3b8a4c92cea80317b3 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/customer-io.png?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=1785cb88a817ecef1ee2c4b248872c8c 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/customer-io.png?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=edfa146ba37db4c1ac660b5b2d09a294 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/customer-io.png?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=143e0549c84485782030a9e403422a3b 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/customer-io.png?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=adb6c818b6756361b41860ed17ba7af3 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/customer-io.png?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=436baa2190e88834431f5328dde8c9cc 2500w" />
    </Frame>
  </Step>

  <Step title="Select Customer.io">
    Choose the <b>Customer.io</b> integration card.
  </Step>

  <Step title="Enter Credentials">
    Provide your Customer.io Site ID and API Key in the configuration.
  </Step>

  <Step title="Configure Transformation">
    Edit the transformation code to format events for Customer.io's Track API.
  </Step>

  <Step title="Test & Create">
    Test with sample payloads and click <b>Create</b> to activate the sync.
  </Step>

  <Step title="Done!">
    🎉 Payment events will now trigger Customer.io email automations.
  </Step>
</Steps>

## Transformation Code Examples

### Track Payment Events

```javascript track_payments.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType === "payment.succeeded") {
    const p = webhook.payload.data;
    webhook.url = "https://track.customer.io/api/v2/entity";
    webhook.payload = {
      type: "person",
      identifiers: {
        id: p.customer.customer_id
      },
      action: "payment_completed",
      name: "Payment Completed",
      attributes: {
        email: p.customer.email,
        name: p.customer.name,
        payment_amount: (p.total_amount / 100).toFixed(2),
        payment_method: p.payment_method || "unknown",
        payment_id: p.payment_id,
        currency: p.currency || "USD"
      }
    };
  }
  return webhook;
}
```

### Track Subscription Lifecycle

```javascript track_subscriptions.js icon="js" expandable theme={null}
function handler(webhook) {
  const s = webhook.payload.data;
  switch (webhook.eventType) {
    case "subscription.active":
      webhook.url = "https://track.customer.io/api/v2/entity";
      webhook.payload = {
        type: "person",
        identifiers: {
          id: s.customer.customer_id
        },
        action: "subscription_started",
        name: "Subscription Started",
        attributes: {
          email: s.customer.email,
          subscription_id: s.subscription_id,
          product_id: s.product_id,
          amount: (s.recurring_pre_tax_amount / 100).toFixed(2),
          frequency: s.payment_frequency_interval,
          next_billing: s.next_billing_date
        }
      };
      break;
    case "subscription.cancelled":
      webhook.url = "https://track.customer.io/api/v2/entity";
      webhook.payload = {
        type: "person",
        identifiers: {
          id: s.customer.customer_id
        },
        action: "subscription_cancelled",
        name: "Subscription Cancelled",
        attributes: {
          email: s.customer.email,
          subscription_id: s.subscription_id,
          cancelled_at: s.cancelled_at,
          cancel_at_next_billing: s.cancel_at_next_billing_date
        }
      };
      break;
  }
  return webhook;
}
```

### Track Customer Attributes

```javascript track_attributes.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType === "payment.succeeded") {
    const p = webhook.payload.data;
    webhook.url = "https://track.customer.io/api/v2/entity";
    webhook.payload = {
      type: "person",
      identifiers: {
        id: p.customer.customer_id
      },
      action: "identify",
      name: "Customer Identified",
      attributes: {
        email: p.customer.email,
        name: p.customer.name,
        total_spent: (p.total_amount / 100).toFixed(2),
        payment_method: p.payment_method || "unknown",
        last_payment_date: webhook.payload.timestamp,
        customer_since: webhook.payload.timestamp
      }
    };
  }
  return webhook;
}
```

## Tips

* Use consistent event names that match your Customer.io campaigns
* Include relevant attributes for personalization
* Set proper customer identifiers for accurate tracking
* Use meaningful event names for campaign triggers

## Troubleshooting

<AccordionGroup>
  <Accordion title="Events not triggering campaigns">
    * Verify Site ID and API Key are correct
    * Check that event names match your Customer.io campaigns
    * Ensure customer identifiers are properly set
    * Review Customer.io API rate limits
  </Accordion>

  <Accordion title="Transformation errors">
    * Validate JSON structure matches Customer.io API format
    * Check that all required fields are present
    * Ensure event names and attributes are properly formatted
  </Accordion>
</AccordionGroup>


# Discord
Source: https://docs.dodopayments.com/integrations/discord

Send real-time Dodo Payments notifications to your Discord channels.

## Introduction

Keep your team informed where they already collaborate. The Discord integration delivers payment, subscription, dispute, and other important events directly to any channel you choose—no polling or dashboards required.

<Info>
  This guide assumes you have access to the Integrations section of the Dodo Payments dashboard.
</Info>

## Getting Started

<Steps>
  <Step title="Open the Webhook Section">
    In your Dodo Payments dashboard, open <b>Webhooks → + Add Endpoint</b> and expand the dropdown to reveal integrations.

    <Frame>
      <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/discord.png?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=dd9359ae214e43ca779c1c0a522f055b" alt="Add Endpoint and integrations dropdown" data-og-width="1808" width="1808" data-og-height="938" height="938" data-path="images/integrations/discord.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/discord.png?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=199227e2d7f6397f385b6aa4b2c80306 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/discord.png?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=16958e8197cc6e6e695c6245fcc65fe0 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/discord.png?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=14a77afa6b6b13bcd7505a1552232431 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/discord.png?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=bc9c273385d44376520364df01606608 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/discord.png?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=24d6035a16ce5de355ea53686605c051 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/discord.png?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=cac50c44477007e53b6d3d5f79312079 2500w" />
    </Frame>
  </Step>

  <Step title="Select Discord">
    Choose the <b>Discord</b> card then click <b>Connect your Discord workspace</b>.
  </Step>

  <Step title="Authorize the Bot">
    Grant the requested permissions so the bot can post messages in your selected channel.
  </Step>

  <Step title="Edit Transformation Code">
    Tailor the payload → embed mapping to your needs—or start with the templates below.
  </Step>

  <Step title="Test & Create">
    Use sample payloads to preview the embed, then hit <b>Create</b>.
  </Step>

  <Step title="Done!">
    🎉 Your Discord channel will now receive live Dodo Payments updates.
  </Step>
</Steps>

## Transformation Code Examples

### Minimal Payment Embed

```javascript payment_embed.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType === "payment.succeeded") {
    const p = webhook.payload.data;
    webhook.payload = {
      embeds: [{
        title: "✅ Payment Successful",
        description: `**Amount:** $${(p.total_amount / 100).toFixed(2)}\n**Customer:** ${p.customer.email}`,
        color: 0x2ecc71 // green
      }]
    };
  }
  return webhook;
}
```

### Subscription Events

```javascript subscription_embed.js icon="js" expandable theme={null}
function handler(webhook) {
  const s = webhook.payload.data;
  switch (webhook.eventType) {
    case "subscription.active":
      webhook.payload = {
        embeds: [{
          title: "📄 Subscription Activated",
          fields: [
            { name: "Customer", value: s.customer.email, inline: true },
            { name: "Product", value: s.product_id, inline: true },
            { name: "Next Billing", value: new Date(s.next_billing_date).toLocaleDateString(), inline: true }
          ],
          color: 0x2ecc71
        }]
      };
      break;
    case "subscription.cancelled":
      webhook.payload = {
        embeds: [{
          title: "⚠️ Subscription Cancelled",
          fields: [
            { name: "Customer", value: s.customer.email, inline: true },
            { name: "Product", value: s.product_id, inline: true }
          ],
          color: 0xf1c40f
        }]
      };
      break;
  }
  return webhook;
}
```

### Dispute Alerts

```javascript dispute_embed.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType.startsWith("dispute.")) {
    const d = webhook.payload.data;
    webhook.payload = {
      embeds: [{
        title: d.dispute_status === "won" ? "🏆 Dispute Won" : d.dispute_status === "lost" ? "❌ Dispute Lost" : "🚨 Dispute Update",
        fields: [
          { name: "Payment ID", value: d.payment_id, inline: true },
          { name: "Amount", value: `$${(d.amount / 100).toFixed(2)}`, inline: true },
          { name: "Status", value: d.dispute_status, inline: true }
        ],
        color: d.dispute_status === "won" ? 0x2ecc71 : d.dispute_status === "lost" ? 0xe74c3c : 0xe67e22
      }]
    };
  }
  return webhook;
}
```

## Tips

* Prefer embeds for rich formatting and colors.
* Keep titles short; put details in fields.
* Use intuitive colors: green (success), red (failure), orange (warnings).

## Troubleshooting

<AccordionGroup>
  <Accordion title="No messages in Discord">
    * Confirm the bot has access to the channel.
    * Check that the transformation returns a JSON object with `embeds`.
  </Accordion>

  <Accordion title="Transformation errors">
    * Validate your code in the editor – syntax errors will block delivery.
    * Ensure field names match the webhook payload structure.
  </Accordion>
</AccordionGroup>


# Figma Plugin Boilerplate
Source: https://docs.dodopayments.com/integrations/figma-plugin

Build Figma plugins with Dodo Payments license key validation and activation

This is an example implementation and boilerplate designed as a starting point for Figma plugin developers who want to integrate Dodo Payments license key API to grant access to their plugins. The template demonstrates complete license key validation and activation functionality, providing everything you need to create premium Figma plugins with built-in licensing.

## Features

* **License Key Validation**: Validates license keys against the Dodo Payments API
* **License Key Activation**: Activates license keys with user identification
* **Environment Support**: Configurable for both test and live environments
* **CORS Proxy**: Uses a Cloudflare Worker proxy to handle CORS restrictions
* **TypeScript Support**: Fully typed implementation with proper error handling

## Getting Started

<Steps>
  <Step title="Create Base Plugin">
    Create your own Figma plugin project using [Figma's plugin quickstart guide](https://www.figma.com/plugin-docs/plugin-quickstart-guide/). This will generate a scaffold with a `manifest.json` file.

    <Tip>
      This step is just to get a unique name and ID for your plugin. You can discard the generated files after committing the ID and name to your git repository in the next step.
    </Tip>
  </Step>

  <Step title="Clone the Example Implementation">
    Clone the [dodopayments-figma repository](https://github.com/dodopayments/dodopayments-figma) and update its `manifest.json` with the name and ID from your generated plugin folder.

    ```bash  theme={null}
    git clone https://github.com/dodopayments/dodopayments-figma.git
    cd dodopayments-figma
    ```

    This example serves as your starting point for integration.

    <Tip>
      You need to change the remote origin URL to your own repository for version control.
    </Tip>
  </Step>

  <Step title="Install Dependencies">
    Run the following command in your project root:

    ```bash  theme={null}
    npm install
    ```
  </Step>

  <Step title="Configure Environment">
    Set the `API_MODE` in `src/ui/api.ts`:

    ```typescript  theme={null}
    const API_MODE = "test_mode"; // for development
    // const API_MODE = "live_mode"; // for production
    ```

    <Warning>
      Always use `test_mode` during development to avoid processing real payments.
    </Warning>
  </Step>

  <Step title="Customize Components">
    Customize the plugin components to match your needs:

    * Update `Authenticated.tsx` to expose functionality for users with valid license keys
    * Customize `LicenseKeyInput.tsx` to match your design preferences

    <Note>
      The `Authenticated.tsx` component is where you'll add your plugin's premium features that require a valid license.
    </Note>
  </Step>
</Steps>

## Configuration

<Steps>
  <Step title="Configure Network Access">
    The plugin needs network access to communicate with the CORS proxy. Add the following to your `manifest.json`:

    ```json  theme={null}
    {
      "networkAccess": {
        "allowedDomains": ["https://dodo-payments-proxy.aagarwal9782.workers.dev"]
      }
    }
    ```

    This allows the plugin to validate and activate license keys using the Dodo Payments API.

    <Info>
      The CORS proxy is necessary because Dodo Payments API doesn't allow API calls from browser-based applications as of now.
    </Info>
  </Step>

  <Step title="Configure API Mode">
    In `src/ui/api.ts`, configure the API mode:

    ```typescript  theme={null}
    const API_MODE = "test_mode"; // or "live_mode"
    ```

    <Tip>
      Switch to `live_mode` only when you're ready for production and have tested thoroughly in test mode.
    </Tip>
  </Step>
</Steps>

## Development

<Steps>
  <Step title="Import Plugin">
    Import the plugin into Figma using "Import Manifest" from the Figma desktop app.

    <Note>
      You'll need to have the Figma desktop app installed to develop and test plugins locally.
    </Note>
  </Step>

  <Step title="Start Development Server">
    ```bash  theme={null}
    npm run dev
    ```

    This starts the development server with file watching for automatic rebuilds.

    <Check>
      Your plugin will automatically rebuild when you make changes to the source code.
    </Check>
  </Step>
</Steps>

## Build Commands

| Command          | Description                                 |
| ---------------- | ------------------------------------------- |
| `npm run build`  | Build the plugin for production             |
| `npm run dev`    | Start development server with file watching |
| `npm run lint`   | Check code style and errors                 |
| `npm run format` | Format code with Prettier                   |

## License Key Integration

The example implementation includes complete license key validation and activation that you can customize for your plugin:

1. **User Input**: Users enter their license key in the plugin UI
2. **Validation**: The plugin validates the key against Dodo Payments API
3. **Activation**: Valid keys are activated with user identification
4. **Access Control**: Plugin functionality is unlocked for valid license holders

## Publishing

Once your plugin is ready:

1. Build for production: `npm run build`
2. Test thoroughly in both test and live modes
3. Follow [Figma's plugin publishing guidelines](https://www.figma.com/plugin-docs/publishing-plugins/)
4. Submit for review through the Figma Community

## Repository

The complete example implementation is available at: [github.com/dodopayments/dodopayments-figma](https://github.com/dodopayments/dodopayments-figma)

Use this as your starting point to build your own premium Figma plugin with Dodo Payments license key integration.


# Framer Plugin
Source: https://docs.dodopayments.com/integrations/framer-plugin

Integrate Dodo Payments checkout functionality into your Framer projects with our powerful plugin. Accept payments with customizable checkout experiences.

## Overview

The Dodo Payments Framer Plugin seamlessly integrates payment processing into your Framer websites. Create customizable checkout experiences with support for both test and production environments.

<Card title="Official Plugin" icon="link" href="https://www.framer.com/marketplace/plugins/dodo-payments">
  Access the official Dodo Payments plugin on the Framer marketplace.
</Card>

## Features

<CardGroup cols={2}>
  <Card title="Hosted or Overlay Checkout" icon="credit-card">
    Choose a full-page flow or an inline overlay that feels native to your site.
  </Card>

  <Card title="Drag-and-Drop Setup" icon="hand-pointer">
    Add the component, paste your keys, publish.
  </Card>

  <Card title="Instant Digital Delivery" icon="envelope">
    Secure download links or license keys emailed the moment payment clears.
  </Card>

  <Card title="Worldwide Coverage" icon="globe">
    Bank-level acquiring on six continents, local methods built-in.
  </Card>

  <Card title="Automatic Tax & Invoicing" icon="receipt">
    VAT, GST, sales tax, and receipts handled for every order.
  </Card>

  <Card title="No-Code Subscriptions" icon="toggle-on">
    Flip a switch to sell subscription plans for your products.
  </Card>
</CardGroup>

## Setup Guide

<Steps>
  <Step title="Generate API Key">
    Visit the [Dodo Payments Dashboard](https://app.dodopayments.com/developer/api-keys) and create a new API key.

    <Tabs>
      <Tab title="Live Mode">
        For production use with real payment processing.
      </Tab>

      <Tab title="Test Mode">
        Perfect for development and testing with no real charges.
      </Tab>
    </Tabs>

    <Check>
      Copy your API key securely - you'll need it for the next step.
    </Check>
  </Step>

  <Step title="Authenticate Plugin">
    1. Open the Dodo Payments plugin in Framer
    2. Navigate to the Authentication page
    3. Paste your API key
    4. Select the appropriate mode (Test or Live)
    5. Click **Continue** to authenticate

    <Warning>
      Keep your API keys secure and never share them publicly.
    </Warning>
  </Step>

  <Step title="Manage Products">
    After authentication, you'll see your products list:

    * **Existing products**: Displayed automatically
    * **No products**: Click the **Plus (+)** button next to 'Products'

    <Info>
      You'll be redirected to the Dodo Payments Dashboard to create products with pricing, descriptions, and settings.
    </Info>
  </Step>

  <Step title="Add Buy Buttons">
    1. Select a product from your available list
    2. Click the `Add Buy Button` button
    3. A buy button with the text 'Buy \{product\_name}' will be added to your canvas

    <Warning>
      The Add Buy Button will be disabled if you don't have the correct project permissions.
    </Warning>
  </Step>
</Steps>

## Customization

<Steps>
  <Step title="Select Checkout Experience">
    Choose your preferred checkout experience:

    * **Overlay (Embedded)**: Checkout appears as an overlay within your Framer project, keeping users on your site.
    * **Hosted**: Users are redirected to a Dodo Payments hosted checkout page for a streamlined experience.
  </Step>

  <Step title="Customize Appearance Options">
    Customize your checkout experience with the following appearance settings:

    * **Checkout Theme**: Choose between light or dark themes to match your brand aesthetic.
    * **Button Label**: Customize text (e.g., 'Buy Now', 'Purchase', 'Get Started').
    * **Button Styles**: Adjust colors, fonts, sizes, and other styling properties.
    * **Return URL**: Set a Framer page for the user to return to after checkout.
  </Step>
</Steps>

## Troubleshooting

<AccordionGroup>
  <Accordion title="Authentication Issues">
    **Problem**: Plugin won't authenticate

    **Solutions**:

    * Verify your API key is correct
    * Ensure you're using the right mode (Test/Live)
    * Check your internet connection
  </Accordion>

  <Accordion title="Button Creation Issues">
    **Problem**: Add Buy Button is disabled

    **Solutions**:

    * Verify you have the correct permissions in your Framer project
    * Ensure you're authenticated properly
    * Try refreshing the plugin
  </Accordion>

  <Accordion title="Product Display Issues">
    **Problem**: Products not showing

    **Solutions**:

    * Make sure you have products created in your Dodo Payments dashboard
    * Check that your API key has the correct permissions
    * Try re-authenticating
  </Accordion>
</AccordionGroup>


# HubSpot
Source: https://docs.dodopayments.com/integrations/hubspot

Automatically create and update contacts, companies, and deals in HubSpot from Dodo Payments events.

## Introduction

Sync your payment data directly to HubSpot CRM. Create contacts from successful payments, track subscription lifecycle, and build comprehensive customer profiles—all automatically triggered by Dodo Payments events.

<Info>
  This integration requires HubSpot admin access to configure OAuth scopes and API permissions.
</Info>

## Getting Started

<Steps>
  <Step title="Open the Webhook Section">
    In your Dodo Payments dashboard, go to <b>Webhooks → + Add Endpoint</b> and expand the integrations dropdown.

    <Frame>
      <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/hubspot.png?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=73c4881df63edfb05bd24d804f01caab" alt="Add Endpoint and integrations dropdown" data-og-width="1724" width="1724" data-og-height="942" height="942" data-path="images/integrations/hubspot.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/hubspot.png?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=400fd16354eae467db1323bf22fa9923 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/hubspot.png?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=aea55b9aa14b24d7a011cd3c8e717e6e 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/hubspot.png?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=8ed8962841666a1f59143edabe66409b 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/hubspot.png?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=774a0c873da2d59a51a2fd72b6e60486 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/hubspot.png?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=a50c009ed068fba4ad2c01ae55203bd5 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/hubspot.png?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=5efb97b270ec276ea9cecf0d3d3bfb03 2500w" />
    </Frame>
  </Step>

  <Step title="Select HubSpot">
    Choose the <b>HubSpot</b> integration card.
  </Step>

  <Step title="Connect HubSpot">
    Click <b>Connect to HubSpot</b> and authorize the required OAuth scopes.
  </Step>

  <Step title="Configure Transformation">
    Edit the transformation code to map payment data to HubSpot CRM objects.
  </Step>

  <Step title="Test & Create">
    Test with sample payloads and click <b>Create</b> to activate the sync.
  </Step>

  <Step title="Done!">
    🎉 Payment events will now automatically create/update records in your HubSpot CRM.
  </Step>
</Steps>

## Transformation Code Examples

### Create Contact from Payment

```javascript create_contact.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType === "payment.succeeded") {
    const p = webhook.payload.data;
    webhook.url = "https://api.hubapi.com/crm/v3/objects/contacts";
    webhook.payload = {
      properties: {
        email: p.customer.email,
        firstname: p.customer.name.split(' ')[0] || '',
        lastname: p.customer.name.split(' ').slice(1).join(' ') || '',
        phone: p.customer.phone || '',
        company: p.customer.company || '',
        amount: (p.total_amount / 100).toString(),
        payment_method: p.payment_method || '',
        currency: p.currency || 'USD'
      }
    };
  }
  return webhook;
}
```

### Update Contact with Subscription

```javascript update_contact.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType === "subscription.active") {
    const s = webhook.payload.data;
    webhook.url = `https://api.hubapi.com/crm/v3/objects/contacts/${s.customer.customer_id}`;
    webhook.method = "PATCH";
    webhook.payload = {
      properties: {
        subscription_status: "active",
        subscription_amount: (s.recurring_pre_tax_amount / 100).toString(),
        subscription_frequency: s.payment_frequency_interval,
        next_billing_date: s.next_billing_date,
        product_id: s.product_id
      }
    };
  }
  return webhook;
}
```

### Create Deal from Payment

```javascript create_deal.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType === "payment.succeeded") {
    const p = webhook.payload.data;
    webhook.url = "https://api.hubapi.com/crm/v3/objects/deals";
    webhook.payload = {
      properties: {
        dealname: `Payment - ${p.customer.email}`,
        amount: (p.total_amount / 100).toString(),
        dealstage: "closedwon",
        closedate: new Date().toISOString(),
        hs_currency: p.currency || "USD"
      },
      associations: [
        {
          to: {
            id: p.customer.customer_id
          },
          types: [
            {
              associationCategory: "HUBSPOT_DEFINED",
              associationTypeId: 3
            }
          ]
        }
      ]
    };
  }
  return webhook;
}
```

## Tips

* Use HubSpot's API explorer to test object creation
* Map payment amounts to HubSpot currency fields
* Include customer IDs for proper associations
* Set appropriate deal stages based on payment status

## Troubleshooting

<AccordionGroup>
  <Accordion title="Records not created in HubSpot">
    * Verify OAuth scopes include write permissions
    * Check that required HubSpot properties exist
    * Ensure customer email is valid and unique
    * Review HubSpot API rate limits
  </Accordion>

  <Accordion title="Transformation errors">
    * Validate JSON structure matches HubSpot API format
    * Check that all required properties are included
    * Ensure property names match HubSpot field names exactly
  </Accordion>
</AccordionGroup>


# Inngest
Source: https://docs.dodopayments.com/integrations/inngest

Trigger serverless functions and background jobs in Inngest based on Dodo Payments events.

## Introduction

Execute serverless functions and background jobs automatically when payment events occur. Process payments, send notifications, update databases, and run complex workflows with Inngest's reliable function execution platform.

<Info>
  This integration requires your Inngest webhook URL from your function configuration.
</Info>

## Getting Started

<Steps>
  <Step title="Open the Webhook Section">
    In your Dodo Payments dashboard, navigate to <b>Webhooks → + Add Endpoint</b> and expand the integrations dropdown.

    <Frame>
      <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/inngest.png?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=b160678c00ceed38439160b4b253c8f3" alt="Add Endpoint and integrations dropdown" data-og-width="1646" width="1646" data-og-height="944" height="944" data-path="images/integrations/inngest.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/inngest.png?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=e396fabdbd7c4a44fd154fcde2120c09 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/inngest.png?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=b274d6ea944ca574504f0a4910ae1888 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/inngest.png?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=c48e64825f33b19f42cc510d1448fa22 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/inngest.png?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=1cb8d4dca2dcaebb02aeb88f2833aef7 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/inngest.png?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=15b8c2192069a466ca047c01a4c62ec4 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/inngest.png?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=871a64b035cf9d3187857a43f488b449 2500w" />
    </Frame>
  </Step>

  <Step title="Select Inngest">
    Choose the <b>Inngest</b> integration card.
  </Step>

  <Step title="Create Inngest Function">
    In Inngest, create a new function and copy the webhook URL from the function configuration.
  </Step>

  <Step title="Paste Webhook URL">
    Paste the Inngest webhook URL into the endpoint configuration.
  </Step>

  <Step title="Configure Transformation">
    Edit the transformation code to format events for your Inngest function.
  </Step>

  <Step title="Test & Create">
    Test with sample payloads and click <b>Create</b> to activate the integration.
  </Step>

  <Step title="Done!">
    🎉 Payment events will now trigger your Inngest functions automatically.
  </Step>
</Steps>

## Transformation Code Examples

### Basic Event Payload

```javascript basic_event.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType === "payment.succeeded") {
    const p = webhook.payload.data;
    webhook.payload = {
      name: "payment.succeeded",
      data: {
        payment_id: p.payment_id,
        amount: (p.total_amount / 100).toFixed(2),
        currency: p.currency || "USD",
        customer_email: p.customer.email,
        customer_name: p.customer.name,
        payment_method: p.payment_method || "unknown"
      },
      user: {
        email: p.customer.email
      },
      ts: Math.floor(new Date(webhook.payload.timestamp).getTime() / 1000)
    };
  }
  return webhook;
}
```

### Subscription Event Handler

```javascript subscription_event.js icon="js" expandable theme={null}
function handler(webhook) {
  const s = webhook.payload.data;
  switch (webhook.eventType) {
    case "subscription.active":
      webhook.payload = {
        name: "subscription.started",
        data: {
          subscription_id: s.subscription_id,
          customer_email: s.customer.email,
          customer_name: s.customer.name,
          product_id: s.product_id,
          amount: (s.recurring_pre_tax_amount / 100).toFixed(2),
          frequency: s.payment_frequency_interval,
          next_billing: s.next_billing_date
        },
        user: {
          email: s.customer.email
        },
        ts: Math.floor(new Date(webhook.payload.timestamp).getTime() / 1000)
      };
      break;
    case "subscription.cancelled":
      webhook.payload = {
        name: "subscription.cancelled",
        data: {
          subscription_id: s.subscription_id,
          customer_email: s.customer.email,
          cancelled_at: s.cancelled_at,
          cancel_at_next_billing: s.cancel_at_next_billing_date
        },
        user: {
          email: s.customer.email
        },
        ts: Math.floor(new Date(webhook.payload.timestamp).getTime() / 1000)
      };
      break;
  }
  return webhook;
}
```

### Dispute Event Handler

```javascript dispute_event.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType.startsWith("dispute.")) {
    const d = webhook.payload.data;
    webhook.payload = {
      name: webhook.eventType,
      data: {
        dispute_id: d.dispute_id,
        payment_id: d.payment_id,
        amount: (d.amount / 100).toFixed(2),
        status: d.dispute_status,
        stage: d.dispute_stage,
        remarks: d.remarks || "",
        urgent: webhook.eventType === "dispute.opened"
      },
      user: {
        email: d.customer?.email || "unknown"
      },
      ts: Math.floor(new Date(webhook.payload.timestamp).getTime() / 1000)
    };
  }
  return webhook;
}
```

## Common Inngest Use Cases

<AccordionGroup>
  <Accordion title="Payment Processing">
    * Send confirmation emails
    * Update customer records
    * Process refunds
    * Generate invoices
    * Update inventory
  </Accordion>

  <Accordion title="Subscription Management">
    * Welcome new subscribers
    * Process cancellations
    * Send renewal reminders
    * Update billing cycles
    * Handle failed payments
  </Accordion>

  <Accordion title="Analytics & Reporting">
    * Update revenue metrics
    * Track customer behavior
    * Generate reports
    * Sync data to analytics platforms
    * Calculate churn rates
  </Accordion>
</AccordionGroup>

## Tips

* Use descriptive event names for better function organization
* Include user context for function execution
* Set proper timestamps for event ordering
* Structure data consistently across events
* Use Inngest's retry and error handling features

## Troubleshooting

<AccordionGroup>
  <Accordion title="Functions not triggering">
    * Verify webhook URL is correct and active
    * Check that Inngest function is deployed and active
    * Ensure event names match function triggers
    * Review Inngest function logs for errors
  </Accordion>

  <Accordion title="Data not received correctly">
    * Check payload structure matches Inngest expectations
    * Verify event names are properly formatted
    * Ensure all required fields are included
    * Test with Inngest's webhook testing tool
  </Accordion>
</AccordionGroup>


# External Integrations
Source: https://docs.dodopayments.com/integrations/introduction

Connect Dodo Payments with your favorite tools and platforms to automate workflows and enhance your payment experience.

## Overview

Dodo Payments offers native integrations with popular platforms and tools to help you streamline your payment operations and automate your workflows. Whether you need to send notifications to your team, sync customer data to your CRM, trigger email campaigns, or connect with your favorite development tools, we have an integration that fits your needs.

Our integrations are designed to be easy to set up and require minimal configuration. Most integrations can be connected directly from your Dodo Payments dashboard with just a few clicks, allowing you to start automating your payment workflows immediately.

<Info>
  Browse the available integrations below or use the search to quickly find the integration you're looking for. Each integration includes step-by-step setup instructions to get you started.
</Info>

## Benefits of Integrations

<CardGroup cols={2}>
  <Card title="Real-time Notifications" icon="bell">
    Stay informed about important payment events as they happen, ensuring you never miss critical updates about your business.
  </Card>

  <Card title="Automated Workflows" icon="bolt">
    Reduce manual tasks by automatically triggering actions based on payment events, saving time and reducing errors.
  </Card>

  <Card title="Enhanced Visibility" icon="chart-bar">
    Get better insights into your payment operations with centralized notifications and reporting across your favorite tools.
  </Card>

  <Card title="Improved Customer Experience" icon="face-smile">
    Provide seamless payment experiences by integrating with your existing tools and workflows.
  </Card>
</CardGroup>

<Tip>
  Each integration includes detailed setup instructions and example configurations to help you get started quickly.
</Tip>

## Available Integrations

Connect Dodo Payments with the following platforms and tools:

<CardGroup cols={2}>
  <Card title="Zapier" icon="diagram-project" href="/integrations/zapier">
    Connect Dodo Payments to 5000+ apps through Zapier for unlimited automation possibilities.
  </Card>

  <Card title="Slack" icon="slack" href="/integrations/slack">
    Receive real-time notifications about your payments directly in your Slack workspace.
  </Card>

  <Card title="HubSpot" icon="hubspot" href="/integrations/hubspot">
    Automatically create and update contacts, companies, and deals in HubSpot from Dodo Payments events.
  </Card>

  <Card title="WooCommerce Plugin" icon="wordpress" href="/integrations/woocommerce-plugin">
    Integrate Dodo Payments seamlessly with your WooCommerce store to accept global payments.
  </Card>

  <Card title="Discord" icon="discord" href="/integrations/discord">
    Send real-time Dodo Payments notifications to your Discord channels.
  </Card>

  <Card title="Microsoft Teams" icon="microsoft" href="/integrations/microsoft-teams">
    Send Dodo Payments notifications to Microsoft Teams channels with rich Adaptive Cards.
  </Card>

  <Card title="Resend" icon="envelope" href="/integrations/resend">
    Send transactional emails through Resend based on Dodo Payments events with high deliverability.
  </Card>

  <Card title="SendGrid" icon="inbox" href="/integrations/sendgrid">
    Send transactional emails based on Dodo Payments events using SendGrid's Mail Send API.
  </Card>

  <Card title="Customer.io" icon="chart-area" href="/integrations/customer-io">
    Send Dodo Payments events to Customer.io to trigger email automations and customer journeys.
  </Card>

  <Card title="Loops" icon="infinity" href="/integrations/loops">
    Send transactional emails and manage customer communication through Loops based on Dodo Payments events.
  </Card>

  <Card title="Segment" icon="chart-line" href="/integrations/segment">
    Send Dodo Payments events to Segment for analytics and customer data platform integration.
  </Card>

  <Card title="Inngest" icon="cloud" href="/integrations/inngest">
    Trigger serverless functions and background jobs in Inngest based on Dodo Payments events.
  </Card>

  <Card title="Windmill" icon="wind" href="/integrations/windmill">
    Trigger Windmill workflows and scripts based on Dodo Payments events for custom automation.
  </Card>

  <Card title="Close CRM" icon="handshake" href="/integrations/close-crm">
    Sync Dodo Payments data with Close CRM to track leads and manage sales pipeline.
  </Card>

  <Card title="Figma Plugin" icon="figma" href="/integrations/figma-plugin">
    Build Figma plugins with Dodo Payments license key validation and activation.
  </Card>

  <Card title="Framer Plugin" icon="puzzle-piece" href="/integrations/framer-plugin">
    Integrate Dodo Payments checkout functionality into your Framer projects with customizable checkout experiences.
  </Card>

  <Card title="Raycast Extension" icon="puzzle-piece" href="/integrations/raycast-extension">
    Install the Raycast extension to browse and manage Dodo Payments resources from your keyboard.
  </Card>
</CardGroup>

## Integration Categories

Our integrations are organized into several categories to help you find what you need:

* **Communication & Collaboration**: Keep your team informed with real-time notifications in Slack, Discord, and Microsoft Teams
* **Email Services**: Automate transactional emails and customer communication with Resend, SendGrid, Customer.io, and Loops
* **CRM & Sales**: Sync payment data and customer information with HubSpot and Close CRM
* **Automation Platforms**: Connect with Zapier, Inngest, and Windmill to build custom workflows
* **Analytics**: Track and analyze payment events with Segment
* **E-commerce**: Seamlessly integrate payments into your WooCommerce store
* **Design Tools**: Build plugins and extensions for Figma and Framer
* **Developer Tools**: Access Dodo Payments functionality from Raycast

## Need a Different Integration?

Don't see the platform you're looking for? We're constantly adding new integrations based on user feedback.

* **Request a new integration** by contacting the Dodo Payments team at [support@dodopayments.com](mailto:support@dodopayments.com). Let us know which platform you want to connect, and our team will review your request.
* **Build a custom integration** using our webhook system if you need a solution right away. Our webhook documentation provides all the details you need to get started.

<Card title="Webhook Documentation" icon="webhook" href="/developer-resources/webhooks">
  Learn how to build custom integrations using our webhook system.
</Card>


# Loops
Source: https://docs.dodopayments.com/integrations/loops

Send transactional emails and manage customer communication through Loops based on Dodo Payments events.

## Introduction

Send transactional emails and manage customer communication automatically when payment events occur. Deliver payment confirmations, subscription updates, and important notifications with Loops' email infrastructure.

<Info>
  This integration requires your Loops API Key for authentication.
</Info>

## Getting Started

<Steps>
  <Step title="Open the Webhook Section">
    In your Dodo Payments dashboard, navigate to <b>Webhooks → + Add Endpoint</b> and expand the integrations dropdown.

    <Frame>
      <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/loops.png?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=2d66cf4c1f562427613d7b2704dcc8a3" alt="Add Endpoint and integrations dropdown" data-og-width="1656" width="1656" data-og-height="940" height="940" data-path="images/integrations/loops.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/loops.png?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=48d0bb597b959cc4dc39e8e90af8ae74 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/loops.png?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=5edeb91103f623164444dbc676c757ee 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/loops.png?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=6343e7e78a5defd8635260475bd77439 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/loops.png?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=1e2070506461708d9c4701c25034aff5 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/loops.png?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=0ef3d500b3a2e0976174cdc36c4d4006 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/loops.png?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=c05b6be370ef4551095ab495c49c6b92 2500w" />
    </Frame>
  </Step>

  <Step title="Select Loops">
    Choose the <b>Loops</b> integration card.
  </Step>

  <Step title="Enter API Key">
    Provide your Loops API Key in the configuration.
  </Step>

  <Step title="Configure Transformation">
    Edit the transformation code to format emails for Loops' API.
  </Step>

  <Step title="Test & Create">
    Test with sample payloads and click <b>Create</b> to activate the email sending.
  </Step>

  <Step title="Done!">
    🎉 Payment events will now automatically trigger transactional emails via Loops.
  </Step>
</Steps>

## Transformation Code Examples

### Payment Confirmation Email

```javascript payment_confirmation.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType === "payment.succeeded") {
    const p = webhook.payload.data;
    webhook.url = "https://api.loops.so/v1/events/send";
    webhook.payload = {
      eventName: "payment_confirmation",
      email: p.customer.email,
      properties: {
        customer_name: p.customer.name,
        payment_id: p.payment_id,
        amount: (p.total_amount / 100).toFixed(2),
        currency: p.currency || "USD",
        payment_method: p.payment_method || "unknown",
        payment_date: new Date(webhook.payload.timestamp).toLocaleDateString()
      }
    };
  }
  return webhook;
}
```

### Subscription Welcome Email

```javascript subscription_welcome.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType === "subscription.active") {
    const s = webhook.payload.data;
    webhook.url = "https://api.loops.so/v1/events/send";
    webhook.payload = {
      eventName: "subscription_welcome",
      email: s.customer.email,
      properties: {
        customer_name: s.customer.name,
        subscription_id: s.subscription_id,
        product_id: s.product_id,
        amount: (s.recurring_pre_tax_amount / 100).toFixed(2),
        frequency: s.payment_frequency_interval,
        next_billing: s.next_billing_date
      }
    };
  }
  return webhook;
}
```

### Payment Failure Notification

```javascript payment_failure.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType === "payment.failed") {
    const p = webhook.payload.data;
    webhook.url = "https://api.loops.so/v1/events/send";
    webhook.payload = {
      eventName: "payment_failed",
      email: p.customer.email,
      properties: {
        customer_name: p.customer.name,
        payment_id: p.payment_id,
        amount: (p.total_amount / 100).toFixed(2),
        error_message: p.error_message || "Payment processing failed",
        retry_link: `https://yourdomain.com/retry-payment/${p.payment_id}`
      }
    };
  }
  return webhook;
}
```

## Tips

* Use descriptive event names for better email template organization
* Include relevant customer properties for personalization
* Set up email templates in Loops dashboard for each event
* Use consistent property naming across events
* Test email delivery before going live

## Troubleshooting

<AccordionGroup>
  <Accordion title="Emails not being sent">
    * Verify API Key is correct and active
    * Check that event names match your Loops templates
    * Ensure recipient email addresses are valid
    * Review Loops sending limits and quotas
  </Accordion>

  <Accordion title="Transformation errors">
    * Validate JSON structure matches Loops API format
    * Check that all required fields are present
    * Ensure event names are properly formatted
    * Verify API key permissions
  </Accordion>
</AccordionGroup>


# Microsoft Teams
Source: https://docs.dodopayments.com/integrations/microsoft-teams

Send Dodo Payments notifications to Microsoft Teams channels with rich Adaptive Cards.

## Introduction

Keep your business team in the loop with real-time payment notifications in Microsoft Teams. The integration delivers payment events as rich Adaptive Cards—perfect for enterprise environments where Teams is the primary collaboration tool.

<Info>
  This guide assumes you have admin access to create webhooks in your Microsoft Teams workspace.
</Info>

## Getting Started

<Steps>
  <Step title="Open the Webhook Section">
    In your Dodo Payments dashboard, navigate to <b>Webhooks → + Add Endpoint</b> and expand the integrations dropdown.

    <Frame>
      <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/teams.png?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=240820e1a3d3162b2faee6fa052535c6" alt="Add Endpoint and integrations dropdown" data-og-width="1694" width="1694" data-og-height="936" height="936" data-path="images/integrations/teams.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/teams.png?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=aeec40f25b32cc4af4d4a0ea3065bef6 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/teams.png?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=ab8d962f08e01d3da8cd7d3ba468d446 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/teams.png?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=e62540924e8382f2af5d06814a9118c0 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/teams.png?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=618c493e55c756eed3ec571318a0125f 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/teams.png?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=c40c97ce88ea56fc83837dd2ae56dab6 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/teams.png?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=9267b40c8c7cb11ba80240c074576a5c 2500w" />
    </Frame>
  </Step>

  <Step title="Select Microsoft Teams">
    Choose the <b>Microsoft Teams</b> integration card.
  </Step>

  <Step title="Create Teams Webhook">
    In Teams, go to your channel → ⋯ → Connectors → Incoming Webhook → Configure. Copy the webhook URL.
  </Step>

  <Step title="Paste Webhook URL">
    Paste the Teams webhook URL into the endpoint configuration.
  </Step>

  <Step title="Customize Transformation">
    Edit the transformation code to format messages as Adaptive Cards for Teams.
  </Step>

  <Step title="Test & Create">
    Test with sample payloads and click <b>Create</b> to activate.
  </Step>

  <Step title="Done!">
    🎉 Your Teams channel will now receive Dodo Payments updates as Adaptive Cards.
  </Step>
</Steps>

## Transformation Code Examples

### Basic Payment Card

```javascript payment_card.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType === "payment.succeeded") {
    const p = webhook.payload.data;
    webhook.payload = {
      type: "message",
      attachments: [{
        contentType: "application/vnd.microsoft.card.adaptive",
        content: {
          type: "AdaptiveCard",
          body: [
            {
              type: "TextBlock",
              text: "✅ Payment Successful",
              weight: "Bolder",
              size: "Medium"
            },
            {
              type: "FactSet",
              facts: [
                { title: "Amount", value: `$${(p.total_amount / 100).toFixed(2)}` },
                { title: "Customer", value: p.customer.email },
                { title: "Payment ID", value: p.payment_id }
              ]
            }
          ]
        }
      }]
    };
  }
  return webhook;
}
```

### Subscription Management

```javascript subscription_card.js icon="js" expandable theme={null}
function handler(webhook) {
  const s = webhook.payload.data;
  switch (webhook.eventType) {
    case "subscription.active":
      webhook.payload = {
        type: "message",
        attachments: [{
          contentType: "application/vnd.microsoft.card.adaptive",
          content: {
            type: "AdaptiveCard",
            body: [
              {
                type: "TextBlock",
                text: "📄 Subscription Activated",
                weight: "Bolder",
                color: "Good"
              },
              {
                type: "FactSet",
                facts: [
                  { title: "Customer", value: s.customer.email },
                  { title: "Product", value: s.product_id },
                  { title: "Amount", value: `$${(s.recurring_pre_tax_amount / 100).toFixed(2)}/${s.payment_frequency_interval}` },
                  { title: "Next Billing", value: new Date(s.next_billing_date).toLocaleDateString() }
                ]
              }
            ]
          }
        }]
      };
      break;
    case "subscription.cancelled":
      webhook.payload = {
        type: "message",
        attachments: [{
          contentType: "application/vnd.microsoft.card.adaptive",
          content: {
            type: "AdaptiveCard",
            body: [
              {
                type: "TextBlock",
                text: "⚠️ Subscription Cancelled",
                weight: "Bolder",
                color: "Warning"
              },
              {
                type: "FactSet",
                facts: [
                  { title: "Customer", value: s.customer.email },
                  { title: "Product", value: s.product_id },
                  { title: "Cancelled At", value: new Date(s.cancelled_at).toLocaleDateString() }
                ]
              }
            ]
          }
        }]
      };
      break;
  }
  return webhook;
}
```

### Dispute Alerts

```javascript dispute_card.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType.startsWith("dispute.")) {
    const d = webhook.payload.data;
    const color = d.dispute_status === "won" ? "Good" : d.dispute_status === "lost" ? "Attention" : "Warning";
    const title = d.dispute_status === "won" ? "🏆 Dispute Won" : d.dispute_status === "lost" ? "❌ Dispute Lost" : "🚨 Dispute Update";
    
    webhook.payload = {
      type: "message",
      attachments: [{
        contentType: "application/vnd.microsoft.card.adaptive",
        content: {
          type: "AdaptiveCard",
          body: [
            {
              type: "TextBlock",
              text: title,
              weight: "Bolder",
              color: color
            },
            {
              type: "FactSet",
              facts: [
                { title: "Payment ID", value: d.payment_id },
                { title: "Amount", value: `$${(d.amount / 100).toFixed(2)}` },
                { title: "Status", value: d.dispute_status },
                { title: "Stage", value: d.dispute_stage }
              ]
            }
          ]
        }
      }]
    };
  }
  return webhook;
}
```

## Tips

* Use Adaptive Cards for rich, interactive formatting
* Choose appropriate colors: Good (green), Warning (yellow), Attention (red)
* Keep fact sets concise and readable
* Test with Teams webhook tester before deploying

## Troubleshooting

<AccordionGroup>
  <Accordion title="No messages in Teams">
    * Verify the webhook URL is correct and active
    * Check that the transformation returns valid Adaptive Card JSON
    * Ensure the webhook has permission to post in the channel
  </Accordion>

  <Accordion title="Card formatting issues">
    * Validate Adaptive Card schema in Teams webhook tester
    * Check that all required fields are present
    * Ensure color values are valid (Good, Warning, Attention, Default)
  </Accordion>
</AccordionGroup>


# Raycast Extension
Source: https://docs.dodopayments.com/integrations/raycast-extension

Install the Raycast extension to browse and manage Dodo Payments resources from your keyboard.

<Frame>
  <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/dodo-payments-commands.png?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=4bf25ee9eaa63ae8f4eadbcd3c61ce48" alt="Raycast extension home showing Dodo Payments commands" data-og-width="2000" width="2000" data-og-height="1250" height="1250" data-path="images/integrations/raycast/dodo-payments-commands.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/dodo-payments-commands.png?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=779e3352fb683239d060bbf7a2117e0e 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/dodo-payments-commands.png?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=4fdec7df862a84073750ba8517fcf981 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/dodo-payments-commands.png?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=1a0afae278e63bfe16cc1153aebc1974 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/dodo-payments-commands.png?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=b9c1692ddb4214dfcddf163499283910 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/dodo-payments-commands.png?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=204f2bb3ff867599fd263feee7a1d50b 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/dodo-payments-commands.png?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=55bb122ada7e149a96e0777cc8403717 2500w" />
</Frame>

Your Dodo Payments dashboard, a few keystrokes away. Use Raycast to quickly view payments, subscriptions, customers, products, discount codes, license keys, and refunds without opening the dashboard.

## Install

<Card title="Install from Raycast Store →" icon="puzzle-piece" href="https://www.raycast.com/dodopayments/dodo-payments">
  Open the Dodo Payments extension page in the Raycast Store.
</Card>

<Info>
  Requires Raycast on macOS and a Dodo Payments API key.
</Info>

## Setup

<Steps>
  <Step title="Get your API Key">
    1. Log in to your Dodo Payments dashboard.
    2. Go to Settings › API Keys.
    3. Copy your API key.
  </Step>

  <Step title="Configure the Extension">
    1. Open Raycast.
    2. Search for "Dodo Payments" and select any command.
    3. When prompted, enter your API key in the API Key field.
    4. Choose the API mode:
       * Test: use for development and testing.
       * Live: use for production data.
    5. Save the settings.
  </Step>
</Steps>

<Tip>
  Start in Test mode to validate your setup, then switch to Live.
</Tip>

<Warning>
  Treat your API key like a password. Do not share it or store it in plaintext.
</Warning>

## Use the extension

* **Search**: open Raycast, type "Dodo Payments", and pick a command.
* **Filter**: narrow results by typing parts of IDs, emails, names, or statuses.
* **Open details**: press Enter on a list item to view more information.

## Commands and views

### Payments

Browse recent payments and jump into detailed views in seconds.

<Frame>
  <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-payments.png?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=b3f7a7f1b52dd7cc12092c0b97fffcc8" alt="Payments list view in the Raycast extension" data-og-width="2000" width="2000" data-og-height="1250" height="1250" data-path="images/integrations/raycast/view-payments.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-payments.png?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=763ff477b782fc1933e265b1058c2d5e 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-payments.png?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=9830275df7aa3ef4059e680d7fc9547f 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-payments.png?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=29c36e415c576374d653b2691fd46ef5 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-payments.png?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=b094f2ab5e188f9ebf4a01d037c9c6a3 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-payments.png?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=d3ce9e3adc26d4d025d5bc009ad6f3b4 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-payments.png?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=c55c400ab6453ae4f8de58e93ad503f7 2500w" />
</Frame>

### Subscriptions

Quickly scan active, trialing, and canceled subscriptions.

<Frame>
  <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-subscriptions.png?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=efdcb47236aa8717d7d5256b1ba271d2" alt="Subscriptions list view in the Raycast extension" data-og-width="2000" width="2000" data-og-height="1250" height="1250" data-path="images/integrations/raycast/view-subscriptions.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-subscriptions.png?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=6a85c69bd1421dfed3c49966a48f8c0c 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-subscriptions.png?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=fd58af46bdc5923f078c546cc34cdfa0 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-subscriptions.png?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=72b3a552389e74b2420ceffb5c29916d 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-subscriptions.png?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=d62d2d24bac6473639f03f86e9080f45 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-subscriptions.png?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=d649cdf590574f5f569a1d499bef07c9 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-subscriptions.png?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=1ce9ce072a8c867150847e6f5a55d947 2500w" />
</Frame>

### Customers

Find customers fast and open full profiles.

<Frame>
  <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-customers.png?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=c2e7b2cdf47e128f4b4a200ccbb06c9c" alt="Customers list view in the Raycast extension" data-og-width="2000" width="2000" data-og-height="1250" height="1250" data-path="images/integrations/raycast/view-customers.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-customers.png?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=df871a9ca10c6f58544572ae4245b155 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-customers.png?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=887cbf1a4d2ed0ee2a5475440a8f09c8 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-customers.png?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=9a3b69fe1763dc39b26d4b6045310d63 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-customers.png?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=ce26fb9d309d2e63cdc07aafd8acac55 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-customers.png?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=2cddd3267b87d1ddda9ea323e0327396 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-customers.png?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=0f3d16f5b4d3a43736bb393df9dc7cd1 2500w" />
</Frame>

### Products

Review and manage your product catalog at a glance.

<Frame>
  <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-products.png?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=973cf1ac1bd6cd4b97bf28bcaa93e09e" alt="Products list view in the Raycast extension" data-og-width="2000" width="2000" data-og-height="1250" height="1250" data-path="images/integrations/raycast/view-products.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-products.png?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=7c602521a4ac50d998e2436d7aa291a8 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-products.png?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=6445f9a089f292f6d0d35dee908f07b1 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-products.png?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=e955b4fc552040680ec4da2284a7f1fb 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-products.png?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=6a8ba8122d0e4ae7672555161f34351d 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-products.png?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=705e26b07f55539f3bfedf8baf0cf9e4 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-products.png?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=bfe8e5609b98426565d185772f3e079e 2500w" />
</Frame>

### Discount Codes

Search and reference active discount codes quickly.

<Frame>
  <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-discount-codes.png?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=51c0d034428ad81397b5df52ddf1d224" alt="Discount codes list view in the Raycast extension" data-og-width="2000" width="2000" data-og-height="1250" height="1250" data-path="images/integrations/raycast/view-discount-codes.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-discount-codes.png?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=2a8565c8178d30e6001a73ccf4104d4e 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-discount-codes.png?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=60c191691fd96054e465af92fb0ada0b 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-discount-codes.png?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=f08a74b27db21f701c81b6334c16b9a7 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-discount-codes.png?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=ce8cc84686ad1750d9095a487a8dcdc3 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-discount-codes.png?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=4bcb886da12c0d8c8c8f33f1053c8da8 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-discount-codes.png?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=666fac4559bc99394ce1222ff862abbb 2500w" />
</Frame>

### License Keys

Look up and manage license keys without leaving Raycast.

<Frame>
  <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-license-keys.png?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=11a4eff6666ea52a12e80c66201d0120" alt="License keys list view in the Raycast extension" data-og-width="2000" width="2000" data-og-height="1250" height="1250" data-path="images/integrations/raycast/view-license-keys.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-license-keys.png?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=d53e03ab8083bf25eb6681be1d4580ff 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-license-keys.png?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=27a5fddee71aaee2635d068a1006ab80 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-license-keys.png?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=b5a40d24cc51477300e08d8dae3fa22b 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-license-keys.png?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=d6f42b9cfe52d01fb291229542e3a24a 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-license-keys.png?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=f9f86e178e70dc9f3a0aafc0bca014b2 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-license-keys.png?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=e5c23b5dde68348fab08c621516a1fb4 2500w" />
</Frame>

### Refunds

See recent refunds and drill into their details.

<Frame>
  <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-refunds.png?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=a1600d565ff683d738ec27a675e23c30" alt="Refunds list view in the Raycast extension" data-og-width="2000" width="2000" data-og-height="1250" height="1250" data-path="images/integrations/raycast/view-refunds.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-refunds.png?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=aba3ea32bef656d0851f58731677b5a7 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-refunds.png?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=6fefe4cebe9873724f13f5fea0fa398e 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-refunds.png?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=29b5ab0d4b4cf659ce6cf38cede7f6aa 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-refunds.png?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=8230cbfb05596be36b92079f54e6f6c3 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-refunds.png?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=5c710d5341ac7e8ae89f6b26a9178928 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/raycast/view-refunds.png?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=17aa5143e77f2ac310fffba5b073c5e6 2500w" />
</Frame>

<Info>
  Additional live-only views: disputes and payouts.
</Info>

## Troubleshooting

<AccordionGroup>
  <Accordion title="Authentication failed or 401/403 errors">
    Confirm the API key and mode (Test vs Live) match your dashboard data. Reopen the command and re-enter the key if needed.
  </Accordion>

  <Accordion title="No results appear">
    Ensure your selected mode has data. Try switching between Test and Live.
  </Accordion>

  <Accordion title="Rate limits or timeouts">
    Wait a moment and try again. If the issue persists, check your network connectivity.
  </Accordion>
</AccordionGroup>

<Card title="Need help? Contact support →" icon="life-ring" href="/miscellaneous/help-support">
  Get assistance from the Dodo Payments team.
</Card>


# Resend
Source: https://docs.dodopayments.com/integrations/resend

Send transactional emails through Resend based on Dodo Payments events with high deliverability.

## Introduction

Send professional transactional emails automatically when payment events occur. Deliver payment confirmations, subscription updates, and important notifications with Resend's reliable email infrastructure and excellent deliverability rates.

<Info>
  This integration requires your Resend API Key for authentication.
</Info>

## Getting Started

<Steps>
  <Step title="Open the Webhook Section">
    In your Dodo Payments dashboard, navigate to <b>Webhooks → + Add Endpoint</b> and expand the integrations dropdown.

    <Frame>
      <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/resend.png?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=80191f648ad4a4f4b5e8186668da0791" alt="Add Endpoint and integrations dropdown" data-og-width="1668" width="1668" data-og-height="946" height="946" data-path="images/integrations/resend.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/resend.png?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=2dda0717d61a070938efd129abf25305 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/resend.png?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=490ad04ecf8e27e166d08b6289c32a15 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/resend.png?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=eb6464098afb7684710bdc272f753f3a 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/resend.png?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=f88091de0be2ec74a219fc7d037d5419 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/resend.png?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=7a600f687799aae2e39e8c47d98d98c0 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/resend.png?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=6fba6a2a5da2f3a550075e98955676da 2500w" />
    </Frame>
  </Step>

  <Step title="Select Resend">
    Choose the <b>Resend</b> integration card.
  </Step>

  <Step title="Enter API Key">
    Provide your Resend API Key in the configuration.
  </Step>

  <Step title="Configure Transformation">
    Edit the transformation code to format emails for Resend's API.
  </Step>

  <Step title="Test & Create">
    Test with sample payloads and click <b>Create</b> to activate the email sending.
  </Step>

  <Step title="Done!">
    🎉 Payment events will now automatically trigger transactional emails via Resend.
  </Step>
</Steps>

## Transformation Code Examples

### Payment Confirmation Email

```javascript payment_confirmation.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType === "payment.succeeded") {
    const p = webhook.payload.data;
    webhook.url = "https://api.resend.com/emails";
    webhook.payload = {
      from: "payments@yourdomain.com",
      to: [p.customer.email],
      subject: "Payment Confirmation - $" + (p.total_amount / 100).toFixed(2),
      html: `
        <h2>Payment Successful!</h2>
        <p>Hi ${p.customer.name},</p>
        <p>Your payment of $${(p.total_amount / 100).toFixed(2)} has been processed successfully.</p>
        <ul>
          <li><strong>Payment ID:</strong> ${p.payment_id}</li>
          <li><strong>Amount:</strong> $${(p.total_amount / 100).toFixed(2)}</li>
          <li><strong>Date:</strong> ${new Date(webhook.payload.timestamp).toLocaleDateString()}</li>
          <li><strong>Method:</strong> ${p.payment_method || "Unknown"}</li>
        </ul>
        <p>Thank you for your business!</p>
      `,
      text: `Payment Successful! Your payment of $${(p.total_amount / 100).toFixed(2)} has been processed. Payment ID: ${p.payment_id}`
    };
  }
  return webhook;
}
```

### Subscription Welcome Email

```javascript subscription_welcome.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType === "subscription.active") {
    const s = webhook.payload.data;
    webhook.url = "https://api.resend.com/emails";
    webhook.payload = {
      from: "welcome@yourdomain.com",
      to: [s.customer.email],
      subject: "Welcome to Your Subscription!",
      html: `
        <h2>Welcome to Your Subscription!</h2>
        <p>Hi ${s.customer.name},</p>
        <p>Your subscription has been activated successfully.</p>
        <ul>
          <li><strong>Subscription ID:</strong> ${s.subscription_id}</li>
          <li><strong>Product:</strong> ${s.product_id}</li>
          <li><strong>Amount:</strong> $${(s.recurring_pre_tax_amount / 100).toFixed(2)}/${s.payment_frequency_interval}</li>
          <li><strong>Next Billing:</strong> ${new Date(s.next_billing_date).toLocaleDateString()}</li>
        </ul>
        <p>You can manage your subscription anytime from your account dashboard.</p>
      `,
      text: `Welcome! Your subscription is now active. Amount: $${(s.recurring_pre_tax_amount / 100).toFixed(2)}/${s.payment_frequency_interval}`
    };
  }
  return webhook;
}
```

### Payment Failure Notification

```javascript payment_failure.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType === "payment.failed") {
    const p = webhook.payload.data;
    webhook.url = "https://api.resend.com/emails";
    webhook.payload = {
      from: "support@yourdomain.com",
      to: [p.customer.email],
      subject: "Payment Failed - Action Required",
      html: `
        <h2>Payment Failed</h2>
        <p>Hi ${p.customer.name},</p>
        <p>We were unable to process your payment of $${(p.total_amount / 100).toFixed(2)}.</p>
        <ul>
          <li><strong>Payment ID:</strong> ${p.payment_id}</li>
          <li><strong>Amount:</strong> $${(p.total_amount / 100).toFixed(2)}</li>
          <li><strong>Error:</strong> ${p.error_message || "Payment processing failed"}</li>
        </ul>
        <p>Please update your payment method or contact support for assistance.</p>
        <a href="https://yourdomain.com/update-payment">Update Payment Method</a>
      `,
      text: `Payment Failed: We couldn't process your $${(p.total_amount / 100).toFixed(2)} payment. Please update your payment method.`
    };
  }
  return webhook;
}
```

## Tips

* Use verified sender domains for better deliverability
* Include both HTML and text versions of emails
* Personalize content with customer data
* Use clear, action-oriented subject lines
* Include unsubscribe links for compliance
* Test email templates before going live

## Troubleshooting

<AccordionGroup>
  <Accordion title="Emails not being sent">
    * Verify API Key is correct and active
    * Check that sender domain is verified in Resend
    * Ensure recipient email addresses are valid
    * Review Resend sending limits and quotas
  </Accordion>

  <Accordion title="Transformation errors">
    * Validate JSON structure matches Resend API format
    * Check that all required fields are present
    * Ensure HTML content is properly formatted
    * Verify from email address is verified
  </Accordion>
</AccordionGroup>


# Segment
Source: https://docs.dodopayments.com/integrations/segment

Send Dodo Payments events to Segment for analytics and customer data platform integration.

## Introduction

Track payment events in Segment to power your analytics, marketing automation, and customer data platform. Send payment, subscription, and customer lifecycle events to 300+ downstream tools automatically.

<Info>
  This integration requires a Segment Write Key from your Segment workspace.
</Info>

## Getting Started

<Steps>
  <Step title="Open the Webhook Section">
    In your Dodo Payments dashboard, navigate to <b>Webhooks → + Add Endpoint</b> and expand the integrations dropdown.

    <Frame>
      <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/segment.png?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=024e80f2cafa4245742eac33f445ebe5" alt="Add Endpoint and integrations dropdown" data-og-width="1644" width="1644" data-og-height="948" height="948" data-path="images/integrations/segment.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/segment.png?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=62dc4f1b77a02d9861a22a19cf347fb3 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/segment.png?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=0e5dfeaa9aaaaeb8114f5a6090af8ad1 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/segment.png?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=0d0434fc2ec184c27a33ebd33571d0be 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/segment.png?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=83e101d3c3fdcfceffeb8c5349880d49 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/segment.png?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=78c2711f7666fbeeaad94344f77be7b7 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/segment.png?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=967a409ee19de9fd2bdd2bfa5ceab816 2500w" />
    </Frame>
  </Step>

  <Step title="Select Segment">
    Choose the <b>Segment</b> integration card.
  </Step>

  <Step title="Enter Write Key">
    Provide your Segment Write Key in the configuration.
  </Step>

  <Step title="Configure Transformation">
    Edit the transformation code to format events for Segment's Track API.
  </Step>

  <Step title="Test & Create">
    Test with sample payloads and click <b>Create</b> to activate the sync.
  </Step>

  <Step title="Done!">
    🎉 Payment events will now be tracked in Segment and sent to your connected tools.
  </Step>
</Steps>

## Transformation Code Examples

### Track Payment Events

```javascript track_payments.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType === "payment.succeeded") {
    const p = webhook.payload.data;
    webhook.url = "https://api.segment.io/v1/track";
    webhook.payload = {
      userId: p.customer.customer_id,
      event: "Payment Completed",
      properties: {
        amount: (p.total_amount / 100).toFixed(2),
        currency: p.currency || "USD",
        payment_method: p.payment_method || "unknown",
        payment_id: p.payment_id,
        customer_email: p.customer.email,
        customer_name: p.customer.name
      },
      timestamp: webhook.payload.timestamp
    };
  }
  return webhook;
}
```

### Track Subscription Lifecycle

```javascript track_subscriptions.js icon="js" expandable theme={null}
function handler(webhook) {
  const s = webhook.payload.data;
  switch (webhook.eventType) {
    case "subscription.active":
      webhook.url = "https://api.segment.io/v1/track";
      webhook.payload = {
        userId: s.customer.customer_id,
        event: "Subscription Started",
        properties: {
          subscription_id: s.subscription_id,
          product_id: s.product_id,
          amount: (s.recurring_pre_tax_amount / 100).toFixed(2),
          frequency: s.payment_frequency_interval,
          next_billing: s.next_billing_date,
          customer_email: s.customer.email
        },
        timestamp: webhook.payload.timestamp
      };
      break;
    case "subscription.cancelled":
      webhook.url = "https://api.segment.io/v1/track";
      webhook.payload = {
        userId: s.customer.customer_id,
        event: "Subscription Cancelled",
        properties: {
          subscription_id: s.subscription_id,
          product_id: s.product_id,
          cancelled_at: s.cancelled_at,
          cancel_at_next_billing: s.cancel_at_next_billing_date,
          customer_email: s.customer.email
        },
        timestamp: webhook.payload.timestamp
      };
      break;
  }
  return webhook;
}
```

### Identify Customer Properties

```javascript identify_customer.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType === "payment.succeeded") {
    const p = webhook.payload.data;
    webhook.url = "https://api.segment.io/v1/identify";
    webhook.payload = {
      userId: p.customer.customer_id,
      traits: {
        email: p.customer.email,
        name: p.customer.name,
        total_spent: (p.total_amount / 100).toFixed(2),
        payment_method: p.payment_method || "unknown",
        last_payment_date: webhook.payload.timestamp,
        customer_since: webhook.payload.timestamp
      }
    };
  }
  return webhook;
}
```

## Tips

* Use consistent event names across your integration
* Include relevant properties for analytics and segmentation
* Set proper timestamps for accurate event tracking
* Use customer IDs as userId for proper user identification

## Troubleshooting

<AccordionGroup>
  <Accordion title="Events not appearing in Segment">
    * Verify Write Key is correct and active
    * Check that event names follow Segment naming conventions
    * Ensure userId is properly set for user identification
    * Review Segment API rate limits
  </Accordion>

  <Accordion title="Transformation errors">
    * Validate JSON structure matches Segment API format
    * Check that all required fields are present
    * Ensure event names are strings, not objects
  </Accordion>
</AccordionGroup>


# SendGrid
Source: https://docs.dodopayments.com/integrations/sendgrid

Send transactional emails based on Dodo Payments events using SendGrid's Mail Send API.

## Introduction

Automatically send transactional emails for payment confirmations, subscription updates, and important notifications using SendGrid. Trigger personalized emails based on payment events with dynamic content and professional templates.

<Info>
  This integration requires a SendGrid API Key with Mail Send permissions.
</Info>

## Getting Started

<Steps>
  <Step title="Open the Webhook Section">
    In your Dodo Payments dashboard, navigate to <b>Webhooks → + Add Endpoint</b> and expand the integrations dropdown.

    <Frame>
      <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/sendgrid.png?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=bb13e15660cf9765d6501190d738525d" alt="Add Endpoint and integrations dropdown" data-og-width="1682" width="1682" data-og-height="944" height="944" data-path="images/integrations/sendgrid.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/sendgrid.png?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=edc48c53a71e07df7782b32fa088b75f 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/sendgrid.png?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=b923f0b33c12df6037f130e3a9f2af81 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/sendgrid.png?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=988cb8728aed6fcb6c920918b0c2c7da 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/sendgrid.png?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=3b46ab6aee7741ee5e9ecf2b8e5a5e55 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/sendgrid.png?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=78c6e0362b2bec8da30d76cc72f7b0f7 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/sendgrid.png?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=6d6139492078cc67cefc32cd33bd6ebc 2500w" />
    </Frame>
  </Step>

  <Step title="Select SendGrid">
    Choose the <b>SendGrid</b> integration card.
  </Step>

  <Step title="Enter API Key">
    Provide your SendGrid API Key in the configuration.
  </Step>

  <Step title="Configure Transformation">
    Edit the transformation code to format emails for SendGrid's Mail Send API.
  </Step>

  <Step title="Test & Create">
    Test with sample payloads and click <b>Create</b> to activate the email sending.
  </Step>

  <Step title="Done!">
    🎉 Payment events will now automatically trigger transactional emails via SendGrid.
  </Step>
</Steps>

## Transformation Code Examples

### Payment Confirmation Email

```javascript payment_confirmation.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType === "payment.succeeded") {
    const p = webhook.payload.data;
    webhook.url = "https://api.sendgrid.com/v3/mail/send";
    webhook.payload = {
      personalizations: [
        {
          to: [{ email: p.customer.email }],
          dynamic_template_data: {
            customer_name: p.customer.name,
            payment_amount: (p.total_amount / 100).toFixed(2),
            payment_id: p.payment_id,
            payment_date: new Date(webhook.payload.timestamp).toLocaleDateString(),
            currency: p.currency || "USD"
          }
        }
      ],
      from: {
        email: "payments@yourdomain.com",
        name: "Your Company"
      },
      template_id: "d-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
    };
  }
  return webhook;
}
```

### Subscription Welcome Email

```javascript subscription_welcome.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType === "subscription.active") {
    const s = webhook.payload.data;
    webhook.url = "https://api.sendgrid.com/v3/mail/send";
    webhook.payload = {
      personalizations: [
        {
          to: [{ email: s.customer.email }],
          dynamic_template_data: {
            customer_name: s.customer.name,
            subscription_id: s.subscription_id,
            product_name: s.product_id,
            amount: (s.recurring_pre_tax_amount / 100).toFixed(2),
            frequency: s.payment_frequency_interval,
            next_billing: new Date(s.next_billing_date).toLocaleDateString()
          }
        }
      ],
      from: {
        email: "welcome@yourdomain.com",
        name: "Your Company"
      },
      template_id: "d-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
    };
  }
  return webhook;
}
```

### Payment Failure Notification

```javascript payment_failure.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType === "payment.failed") {
    const p = webhook.payload.data;
    webhook.url = "https://api.sendgrid.com/v3/mail/send";
    webhook.payload = {
      personalizations: [
        {
          to: [{ email: p.customer.email }],
          dynamic_template_data: {
            customer_name: p.customer.name,
            payment_amount: (p.total_amount / 100).toFixed(2),
            error_message: p.error_message || "Payment processing failed",
            payment_id: p.payment_id,
            retry_link: `https://yourdomain.com/retry-payment/${p.payment_id}`
          }
        }
      ],
      from: {
        email: "support@yourdomain.com",
        name: "Your Company Support"
      },
      template_id: "d-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
    };
  }
  return webhook;
}
```

## Tips

* Use SendGrid dynamic templates for personalized content
* Include relevant payment data in template variables
* Set proper from addresses and sender names
* Use template IDs for consistent email formatting
* Include unsubscribe links for compliance

## Troubleshooting

<AccordionGroup>
  <Accordion title="Emails not being sent">
    * Verify API Key has Mail Send permissions
    * Check that template IDs are valid and active
    * Ensure recipient email addresses are valid
    * Review SendGrid sending limits and quotas
  </Accordion>

  <Accordion title="Transformation errors">
    * Validate JSON structure matches SendGrid API format
    * Check that all required fields are present
    * Ensure template data variables are properly formatted
    * Verify from email addresses are verified in SendGrid
  </Accordion>
</AccordionGroup>


# Slack
Source: https://docs.dodopayments.com/integrations/slack

Integrate Dodo Payments with Slack to receive real-time notifications about your payments.

## Introduction

The Dodo Payments Slack integration allows you to receive real-time notifications about your payments directly in your Slack workspace. This integration enables you to stay updated on the status of your payments, track transactions, and manage your payments more efficiently.

<Info>
  This integration uses our webhook management portal to automatically transform Dodo Payments webhook events into Slack-compatible messages. No additional coding is required - just configure the connector and start receiving notifications.
</Info>

## Getting Started

<Steps>
  <Step title="Open the Webhook Section">
    Go to the <b>Webhook</b> section in your Dodo Payments dashboard. Click the <b>+ Add Endpoint</b> button, then open the webhook dropdown to reveal other integrations.

    <Frame>
      <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/1.png?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=46218103ebf0646011873758c76b9bb6" alt="Dodo Payments dashboard showing Add Endpoint button and integrations dropdown" data-og-width="1782" width="1782" data-og-height="1016" height="1016" data-path="images/integrations/slack/1.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/1.png?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=6c869d497d9cae808d2acc13088b23f4 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/1.png?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=ab867f9731fb294087555ec47a7dfeca 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/1.png?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=6882f602dd6c2470165e51d1f926e988 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/1.png?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=dca574ad6b765a69df2bec0301a8dfa7 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/1.png?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=2e51c56a2f8a8d58f1c53c180baaae58 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/1.png?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=76111aa5935ec6da30570a4c2e671a12 2500w" />
    </Frame>
  </Step>

  <Step title="Select Slack Integration">
    Select the <b>Slack</b> integration and click <b>Connect your Slack workspace</b>.

    <Frame>
      <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/2.png?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=4bd696f82dbbab1bc099c6ccae5b9212" alt="Slack integration card and connect button" data-og-width="1670" width="1670" data-og-height="226" height="226" data-path="images/integrations/slack/2.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/2.png?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=c6a85e2047e54e2380c57a9a8d2eb3d8 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/2.png?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=381aba1f406e0ceb2fa6225b871e07d0 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/2.png?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=df853fab89cd4b62e0dc368a92d12338 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/2.png?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=b93d47546cc4bd1f958cc9a24afe11ba 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/2.png?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=696697f3321f5676cb5d287615f20ace 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/2.png?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=b2f8c9f214367cd92b1a9ffd169dbaae 2500w" />
    </Frame>
  </Step>

  <Step title="Grant Slack Permissions">
    Grant the necessary permissions to the Incoming Webhooks Slack App so it can post messages in your chosen channel.

    <Frame>
      <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/3.png?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=00f04516a2720e377a29551ae42ad812" alt="Slack OAuth permissions screen for Incoming Webhooks app" data-og-width="1198" width="1198" data-og-height="1536" height="1536" data-path="images/integrations/slack/3.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/3.png?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=c739f89ff7295be230e2b42f980e5dd1 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/3.png?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=e78e0864fccd8f5c043077d49e6d7fc1 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/3.png?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=90b76d5e3869da6af1829dd429563b87 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/3.png?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=ec329050ec388d0b21b212e0b0b76c9d 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/3.png?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=05ade51f358401eb182950e602a2fe50 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/3.png?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=db30dc7157a46e140070ea8980c79079 2500w" />
    </Frame>
  </Step>

  <Step title="Customize Transformation Code">
    Add or edit the transformation code to customize your Slack notifications for your use case. You can use the pre-made templates or write your own logic.

    <Frame>
      <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/4.png?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=f3c7f2b7a9bb6d6ba1d1d6922ad42bc4" alt="Transformation code editor for Slack integration" data-og-width="1686" width="1686" data-og-height="1118" height="1118" data-path="images/integrations/slack/4.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/4.png?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=0821df53582c4a22f385098f8f2ea232 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/4.png?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=c047831def526b73b7c4f9c432852c09 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/4.png?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=617c3b709296370e780a38c0a061221d 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/4.png?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=45b0e8f5739eabbc46546a7b8a58441b 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/4.png?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=93b6106d7cb59761a73614ed366a8a2f 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/4.png?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=66fdeb038c2f14265a639b5ef7310331 2500w" />
    </Frame>
  </Step>

  <Step title="Test and Create">
    Test your transformation code with custom or pre-made event payloads. Once you're satisfied, click <b>Create</b> to activate the integration.

    <Frame>
      <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/5.png?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=7d22a91488a2038a177324fa627b7497" alt="Test transformation and create button" data-og-width="1852" width="1852" data-og-height="490" height="490" data-path="images/integrations/slack/5.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/5.png?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=fc9d04e898e78fec52e82e1aee9c0090 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/5.png?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=da048a80c057f552ed56465ddd29e0c7 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/5.png?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=f8d18b959ff1094b1e091cfe6c35a344 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/5.png?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=5fecc6886f09da8ccd11728c01dc67d4 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/5.png?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=72b8f058da8aa460e106828524e89a73 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/slack/5.png?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=bdb6039adc6936fc8a223cacb8460316 2500w" />
    </Frame>
  </Step>

  <Step title="Integration Complete!">
    🎉 You have successfully created the Slack integration! Your Dodo Payments events will now be delivered to your selected Slack channel in real time.
  </Step>
</Steps>

## Transformation Code Examples

### Basic Payment Notifications

This transformation sends simple text messages for payment events:

```javascript payment_notifs.js icon="js" expandable theme={null}
function handler(webhook) {
  switch (webhook.eventType) {
    case "payment.succeeded":
      webhook.payload = {
        text: `✅ Payment Successful\nAmount: $${(webhook.payload.data.total_amount / 100).toFixed(2)}\nCustomer: ${webhook.payload.data.customer.email}\nPayment ID: ${webhook.payload.data.payment_id}`
      };
      break;
      
    case "payment.failed":
      webhook.payload = {
        text: `❌ Payment Failed\nAmount: $${(webhook.payload.data.total_amount / 100).toFixed(2)}\nCustomer: ${webhook.payload.data.customer.email}\nReason: ${webhook.payload.data.error_message || 'Unknown'}`
      };
      break;
      
    case "payment.processing":
      webhook.payload = {
        text: `⏳ Payment Processing\nAmount: $${(webhook.payload.data.total_amount / 100).toFixed(2)}\nCustomer: ${webhook.payload.data.customer.email}`
      };
      break;
  }

  return webhook;
}
```

### Rich Subscription Notifications

This transformation creates rich Slack messages with attachments for subscription events:

```javascript subscription_notifs.js icon="js" expandable theme={null}
function handler(webhook) {
  switch (webhook.eventType) {
    case "subscription.active":
      webhook.payload = {
        attachments: [{
          color: "good",
          title: "🎉 Subscription Activated",
          fields: [
            {
              title: "Customer",
              value: webhook.payload.data.customer.email,
              short: true
            },
            {
              title: "Product ID",
              value: webhook.payload.data.product_id,
              short: true
            },
            {
              title: "Amount",
              value: `$${(webhook.payload.data.recurring_pre_tax_amount / 100).toFixed(2)}/${webhook.payload.data.payment_frequency_interval}`,
              short: true
            },
            {
              title: "Next Billing",
              value: new Date(webhook.payload.data.next_billing_date).toLocaleDateString(),
              short: true
            }
          ],
          footer: "Dodo Payments",
          ts: Math.floor(new Date(webhook.payload.timestamp).getTime() / 1000)
        }]
      };
      break;
      
    case "subscription.cancelled":
      webhook.payload = {
        attachments: [{
          color: "warning",
          title: "⚠️ Subscription Cancelled",
          fields: [
            {
              title: "Customer",
              value: webhook.payload.data.customer.email,
              short: true
            },
            {
              title: "Product ID",
              value: webhook.payload.data.product_id,
              short: true
            },
            {
              title: "Cancellation Date",
              value: new Date(webhook.payload.data.cancelled_at).toLocaleDateString(),
              short: true
            },
            {
              title: "Cancel at Next Billing",
              value: webhook.payload.data.cancel_at_next_billing_date ? "Yes" : "No",
              short: true
            }
          ],
          footer: "Dodo Payments",
          ts: Math.floor(new Date(webhook.payload.timestamp).getTime() / 1000)
        }]
      };
      break;
      
    case "subscription.renewed":
      webhook.payload = {
        attachments: [{
          color: "good",
          title: "🔄 Subscription Renewed",
          fields: [
            {
              title: "Customer",
              value: webhook.payload.data.customer.email,
              short: true
            },
            {
              title: "Product ID",
              value: webhook.payload.data.product_id,
              short: true
            },
            {
              title: "Amount",
              value: `$${(webhook.payload.data.recurring_pre_tax_amount / 100).toFixed(2)}`,
              short: true
            },
            {
              title: "Next Billing",
              value: new Date(webhook.payload.data.next_billing_date).toLocaleDateString(),
              short: true
            }
          ],
          footer: "Dodo Payments",
          ts: Math.floor(new Date(webhook.payload.timestamp).getTime() / 1000)
        }]
      };
      break;
  }

  return webhook;
}
```

### Dispute Management Notifications

This transformation handles dispute events with appropriate colors and urgency:

```javascript dispute_notifs.js icon="js" expandable theme={null}
function handler(webhook) {
  switch (webhook.eventType) {
    case "dispute.opened":
      webhook.payload = {
        attachments: [{
          color: "danger",
          title: "🚨 New Dispute Opened",
          fields: [
            {
              title: "Payment ID",
              value: webhook.payload.data.payment_id,
              short: true
            },
            {
              title: "Amount",
              value: `$${(webhook.payload.data.amount / 100).toFixed(2)}`,
              short: true
            },
            {
              title: "Status",
              value: webhook.payload.data.dispute_status,
              short: true
            },
            {
              title: "Stage",
              value: webhook.payload.data.dispute_stage,
              short: true
            },
            {
              title: "Remarks",
              value: webhook.payload.data.remarks || "No remarks",
              short: false
            }
          ],
          footer: "Dodo Payments - Action Required",
          ts: Math.floor(new Date(webhook.payload.timestamp).getTime() / 1000)
        }]
      };
      break;
      
    case "dispute.won":
      webhook.payload = {
        attachments: [{
          color: "good",
          title: "✅ Dispute Won",
          fields: [
            {
              title: "Payment ID",
              value: webhook.payload.data.payment_id,
              short: true
            },
            {
              title: "Amount",
              value: `$${(webhook.payload.data.amount / 100).toFixed(2)}`,
              short: true
            },
            {
              title: "Status",
              value: webhook.payload.data.dispute_status,
              short: true
            },
            {
              title: "Resolution",
              value: "Dispute resolved in your favor",
              short: false
            }
          ],
          footer: "Dodo Payments",
          ts: Math.floor(new Date(webhook.payload.timestamp).getTime() / 1000)
        }]
      };
      break;
      
    case "dispute.lost":
      webhook.payload = {
        attachments: [{
          color: "danger",
          title: "❌ Dispute Lost",
          fields: [
            {
              title: "Payment ID",
              value: webhook.payload.data.payment_id,
              short: true
            },
            {
              title: "Amount",
              value: `$${(webhook.payload.data.amount / 100).toFixed(2)}`,
              short: true
            },
            {
              title: "Status",
              value: webhook.payload.data.dispute_status,
              short: true
            },
            {
              title: "Impact",
              value: "Funds will be debited from your account",
              short: false
            }
          ],
          footer: "Dodo Payments - Review Required",
          ts: Math.floor(new Date(webhook.payload.timestamp).getTime() / 1000)
        }]
      };
      break;
  }

  return webhook;
}
```

### Comprehensive All-Events Handler

This transformation handles all event types with consistent formatting:

```javascript all_events_notifs.js icon="js" expandable  theme={null}
function handler(webhook) {
  const event = webhook.payload.data;
  const timestamp = new Date(webhook.payload.timestamp).toLocaleString();
  
  let color, emoji, title, fields = [];
  
  switch (webhook.eventType) {
    case "payment.succeeded":
      color = "good";
      emoji = "✅";
      title = "Payment Successful";
      fields = [
        { title: "Amount", value: `$${(event.total_amount / 100).toFixed(2)}`, short: true },
        { title: "Customer", value: event.customer.email, short: true },
        { title: "Payment ID", value: event.payment_id, short: true },
        { title: "Method", value: event.payment_method || "Unknown", short: true }
      ];
      break;
      
    case "payment.failed":
      color = "danger";
      emoji = "❌";
      title = "Payment Failed";
      fields = [
        { title: "Amount", value: `$${(event.total_amount / 100).toFixed(2)}`, short: true },
        { title: "Customer", value: event.customer.email, short: true },
        { title: "Reason", value: event.error_message || "Unknown", short: false }
      ];
      break;
      
    case "subscription.active":
      color = "good";
      emoji = "🎉";
      title = "Subscription Activated";
      fields = [
        { title: "Customer", value: event.customer.email, short: true },
        { title: "Product ID", value: event.product_id, short: true },
        { title: "Amount", value: `$${(event.recurring_pre_tax_amount / 100).toFixed(2)}/${event.payment_frequency_interval}`, short: true },
        { title: "Next Billing", value: new Date(event.next_billing_date).toLocaleDateString(), short: true }
      ];
      break;
      
    case "subscription.cancelled":
      color = "warning";
      emoji = "⚠️";
      title = "Subscription Cancelled";
      fields = [
        { title: "Customer", value: event.customer.email, short: true },
        { title: "Product ID", value: event.product_id, short: true },
        { title: "Cancellation Date", value: new Date(event.cancelled_at).toLocaleDateString(), short: true },
        { title: "Cancel at Next Billing", value: event.cancel_at_next_billing_date ? "Yes" : "No", short: true }
      ];
      break;
      
    case "refund.succeeded":
      color = "good";
      emoji = "💰";
      title = "Refund Processed";
      fields = [
        { title: "Amount", value: `$${(event.amount / 100).toFixed(2)}`, short: true },
        { title: "Refund ID", value: event.refund_id, short: true },
        { title: "Payment ID", value: event.payment_id, short: true },
        { title: "Reason", value: event.reason || "Not specified", short: true }
      ];
      break;
      
    case "dispute.opened":
      color = "danger";
      emoji = "🚨";
      title = "New Dispute Opened";
      fields = [
        { title: "Payment ID", value: event.payment_id, short: true },
        { title: "Amount", value: `$${(event.amount / 100).toFixed(2)}`, short: true },
        { title: "Status", value: event.dispute_status, short: true },
        { title: "Stage", value: event.dispute_stage, short: true },
        { title: "Remarks", value: event.remarks || "No remarks", short: false }
      ];
      break;
      
    case "license_key.created":
      color = "good";
      emoji = "🔑";
      title = "License Key Created";
      fields = [
        { title: "License ID", value: event.id, short: true },
        { title: "Product ID", value: event.product_id, short: true },
        { title: "License Key", value: event.key.substring(0, 8) + "...", short: true },
        { title: "Expires", value: event.expires_at ? new Date(event.expires_at).toLocaleDateString() : "Never", short: true }
      ];
      break;
      
    default:
      // Handle any other events with a generic format
      color = "warning";
      emoji = "ℹ️";
      title = webhook.eventType.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
      fields = [
        { title: "Event Type", value: webhook.eventType, short: true },
        { title: "Timestamp", value: timestamp, short: true }
      ];
  }
  
  webhook.payload = {
    attachments: [{
      color: color,
      title: `${emoji} ${title}`,
      fields: fields,
      footer: "Dodo Payments",
      ts: Math.floor(new Date(webhook.payload.timestamp).getTime() / 1000)
    }]
  };

  return webhook;
}
```

## Best Practices

To make your Slack notifications effective:

* Use rich message attachments with colors, fields, and formatting for clarity and actionability.
* Always include key data such as amounts, customer emails, and IDs for quick identification.
* Choose colors that match the event type: green (`good`) for success, red (`danger`) for disputes or failures, yellow (`warning`) for cancellations, and blue (`#36a64f`) for informational events.
* Add timestamps to help track when each event occurred.

<Warning>
  **Handle Sensitive Data**: Be careful not to include sensitive information like full license keys or personal data in Slack messages. Consider truncating or masking sensitive values.
</Warning>

## Troubleshooting

<AccordionGroup>
  <Accordion title="Notifications not appearing in Slack">
    * Verify that the Slack webhook URL is correct and active
    * Check that the transformation code is valid JavaScript
    * Ensure the selected event types are being triggered
    * Verify that your Slack app has the necessary permissions
  </Accordion>

  <Accordion title="Transformation errors">
    * Check the webhook management portal for transformation error logs
    * Verify that the webhook payload structure matches your transformation code
    * Test your transformation code with sample data
    * Ensure all required fields are present in the webhook payload
  </Accordion>

  <Accordion title="Missing event types">
    * Confirm that the events you want to receive are enabled in your Dodo Payments webhook configuration
    * Check that the event types are selected in your Slack connector configuration
    * Verify that your endpoint is properly configured to receive the events
  </Accordion>
</AccordionGroup>


# Windmill
Source: https://docs.dodopayments.com/integrations/windmill

Trigger Windmill workflows and scripts based on Dodo Payments events for custom automation.

## Introduction

Execute custom workflows and scripts in Windmill when payment events occur. Run database operations, send notifications, process data, and automate complex business logic with Windmill's powerful workflow engine.

<Info>
  This integration requires your Windmill webhook URL from your workflow configuration.
</Info>

## Getting Started

<Steps>
  <Step title="Open the Webhook Section">
    In your Dodo Payments dashboard, navigate to <b>Webhooks → + Add Endpoint</b> and expand the integrations dropdown.

    <Frame>
      <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/windmill.png?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=695fe639c086c3d899efae177d646591" alt="Add Endpoint and integrations dropdown" data-og-width="1678" width="1678" data-og-height="954" height="954" data-path="images/integrations/windmill.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/windmill.png?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=cfc51519d26601fac5ed52204975f36a 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/windmill.png?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=e973a46f593e1acdde3b4750a2eed544 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/windmill.png?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=5f2f7cf3594b0bfaaa7c45700d11a759 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/windmill.png?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=ac1d50cd229f897369e45f03db0bfd2e 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/windmill.png?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=5ab61518df1fb92d64ea39169b5fca60 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/windmill.png?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=21dda1274812fc68c5e755d2c2f1f42c 2500w" />
    </Frame>
  </Step>

  <Step title="Select Windmill">
    Choose the <b>Windmill</b> integration card.
  </Step>

  <Step title="Create Windmill Workflow">
    In Windmill, create a new workflow and copy the webhook URL from the trigger configuration.
  </Step>

  <Step title="Paste Webhook URL">
    Paste the Windmill webhook URL into the endpoint configuration.
  </Step>

  <Step title="Configure Transformation">
    Edit the transformation code to format events for your Windmill workflow.
  </Step>

  <Step title="Test & Create">
    Test with sample payloads and click <b>Create</b> to activate the integration.
  </Step>

  <Step title="Done!">
    🎉 Payment events will now trigger your Windmill workflows automatically.
  </Step>
</Steps>

## Transformation Code Examples

### Basic Workflow Payload

```javascript basic_workflow.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType === "payment.succeeded") {
    const p = webhook.payload.data;
    webhook.payload = {
      event_type: webhook.eventType,
      payment_id: p.payment_id,
      amount: (p.total_amount / 100).toFixed(2),
      currency: p.currency || "USD",
      customer_email: p.customer.email,
      customer_name: p.customer.name,
      payment_method: p.payment_method || "unknown",
      timestamp: webhook.payload.timestamp,
      metadata: {
        business_id: p.business_id,
        product_id: p.product_id
      }
    };
  }
  return webhook;
}
```

### Subscription Workflow Handler

```javascript subscription_workflow.js icon="js" expandable theme={null}
function handler(webhook) {
  const s = webhook.payload.data;
  switch (webhook.eventType) {
    case "subscription.active":
      webhook.payload = {
        event_type: "subscription_started",
        subscription_id: s.subscription_id,
        customer_email: s.customer.email,
        customer_name: s.customer.name,
        product_id: s.product_id,
        amount: (s.recurring_pre_tax_amount / 100).toFixed(2),
        frequency: s.payment_frequency_interval,
        next_billing: s.next_billing_date,
        customer_id: s.customer.customer_id,
        timestamp: webhook.payload.timestamp
      };
      break;
    case "subscription.cancelled":
      webhook.payload = {
        event_type: "subscription_cancelled",
        subscription_id: s.subscription_id,
        customer_email: s.customer.email,
        cancelled_at: s.cancelled_at,
        cancel_at_next_billing: s.cancel_at_next_billing_date,
        customer_id: s.customer.customer_id,
        timestamp: webhook.payload.timestamp
      };
      break;
  }
  return webhook;
}
```

### Dispute Workflow Handler

```javascript dispute_workflow.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType.startsWith("dispute.")) {
    const d = webhook.payload.data;
    webhook.payload = {
      event_type: webhook.eventType,
      dispute_id: d.dispute_id,
      payment_id: d.payment_id,
      amount: (d.amount / 100).toFixed(2),
      status: d.dispute_status,
      stage: d.dispute_stage,
      remarks: d.remarks || "",
      urgent: webhook.eventType === "dispute.opened",
      business_id: d.business_id,
      timestamp: webhook.payload.timestamp
    };
  }
  return webhook;
}
```

## Common Windmill Use Cases

<AccordionGroup>
  <Accordion title="Database Operations">
    * Update customer records in PostgreSQL/MySQL
    * Log payment events to data warehouses
    * Sync data to external systems
    * Update inventory levels
    * Track analytics metrics
  </Accordion>

  <Accordion title="Business Logic">
    * Calculate revenue metrics
    * Process refunds and adjustments
    * Handle subscription lifecycle
    * Generate reports and exports
    * Validate payment data
  </Accordion>

  <Accordion title="External Integrations">
    * Send data to analytics platforms
    * Update CRM systems
    * Trigger email campaigns
    * Create calendar events
    * Send SMS notifications
  </Accordion>
</AccordionGroup>

## Tips

* Structure payload data for easy workflow processing
* Include all relevant metadata for business logic
* Use consistent field naming across events
* Include timestamps for workflow timing
* Leverage Windmill's built-in error handling

## Troubleshooting

<AccordionGroup>
  <Accordion title="Workflows not triggering">
    * Verify webhook URL is correct and active
    * Check that Windmill workflow is published and active
    * Ensure payload structure matches workflow expectations
    * Review Windmill execution logs for errors
  </Accordion>

  <Accordion title="Data processing issues">
    * Check workflow input parameter mapping
    * Verify data types match expected formats
    * Test workflow with sample data
    * Review Windmill script execution logs
  </Accordion>
</AccordionGroup>


# WooCommerce Plugin
Source: https://docs.dodopayments.com/integrations/woocommerce-plugin

Integrate Dodo Payments seamlessly with your WooCommerce store to accept global payments through UPI, cards, and more.

## Introduction

The Dodo Payments WooCommerce plugin provides a seamless integration with your store, enabling you to accept payments through multiple methods including UPI, cards, net banking, and digital wallets. This comprehensive guide will walk you through the installation and configuration process.

## Step-by-Step Installation Guide

1. Download the latest zip of the WooCommerce payment plugin.

   <Card title="Download Plugin" icon="download" href="https://github.com/dodopayments/dodo-woocommerce/releases">
     Get the latest version of our WooCommerce plugin
   </Card>

   Alternatively, you can install directly from the WordPress plugin directory:

   <Card title="WordPress Plugin Directory" icon="wordpress" href="https://wordpress.org/plugins/dodo-payments-for-woocommerce/">
     Install Dodo Payments for WooCommerce from WordPress.org
   </Card>

2. Log in to your WordPress website as an administrator (we assume you already have WooCommerce set up)

3. Navigate to **Plugins → Add New Plugin**

   <Frame>
     <img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/1.webp?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=f26041db02cf678f4785a8d72631d0e2" alt="Dodo Payments for WooCommerce Plugin" data-og-width="447" width="447" data-og-height="136" height="136" data-path="images/woocommerce/1.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/1.webp?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=8adfdb4a35056ef6032e0dc5383024b5 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/1.webp?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=8bc1ffffb0c4c02ed6344f38f29a8231 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/1.webp?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=5ee6a2cdfe7d52f741b397a974fc8d8e 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/1.webp?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=0eab4511c6b29761bfc4462c34e627d6 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/1.webp?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=1b4fdde52e8204bf56ec10033b98ce4b 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/1.webp?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=b814c7945e48ab57d16afd117e7d8d09 2500w" />
   </Frame>

4. Click on the **Upload Plugin** button and a file selection dialog will appear

   <Frame>
     <img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/2.webp?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=9f20388bab236d046cbff312646dcd98" alt="Dodo Payments for WooCommerce Plugin" data-og-width="433" width="433" data-og-height="75" height="75" data-path="images/woocommerce/2.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/2.webp?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=1fbf6bcf4cf9c933b7435c7ad795a4be 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/2.webp?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=97e88e7bc01c915565f99f36c7fe6523 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/2.webp?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=522d84b1997fcd2ff3de2d3dc0eb2b70 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/2.webp?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=47edfca4b705d03c933b453444aea93c 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/2.webp?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=6b64ac9647f469aa89b057e200d07b74 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/2.webp?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=80cca27c8e3888efa02582968c6e76bd 2500w" />
   </Frame>

   <Frame>
     <img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/3.webp?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=c9cdccfe01ceda93932c9feea5ee5e65" alt="Dodo Payments for WooCommerce Plugin" data-og-width="1313" width="1313" data-og-height="356" height="356" data-path="images/woocommerce/3.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/3.webp?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=2c1ac69dd79aea961b2e9b2f52dc66f3 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/3.webp?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=55eeccc7cbcad261a7c74a62b27a357b 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/3.webp?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=8dc8e5ffb8542764c5e1cfe8efcaaa24 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/3.webp?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=336759ce62c59549b8c7a3e4a1eb5369 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/3.webp?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=53cd9723476bbee3bf8a1205ed6d2121 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/3.webp?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=dc5e690311aae1e73103aac184c7030a 2500w" />
   </Frame>

5. Click **Browse…** and select the zip file you downloaded

6. Click the **Install Now** button to begin the installation process

   <Frame>
     <img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/4.webp?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=3a785b07a5c0f47318893a73059875b5" alt="Dodo Payments for WooCommerce Plugin" data-og-width="1024" width="1024" data-og-height="307" height="307" data-path="images/woocommerce/4.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/4.webp?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=b26f4750d8acbeb29b63ac81203757bc 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/4.webp?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=7aff7b72f9ce792aaac8018500bc574a 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/4.webp?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=6fac0df9f864e8456c1edac82b808e5b 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/4.webp?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=18f4b779549348153576550ef703cc3c 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/4.webp?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=46c986349db6b4508892da4b7eeb5a4b 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/4.webp?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=ba41370aa3a9235f70e4b1b2e5aabd49 2500w" />
   </Frame>

7. After installation completes, click **Activate Plugin** or activate it from the **Installed Plugins** section

   <Frame>
     <img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/5.webp?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=d7a144b16abd059e81a694585f3d6923" alt="Dodo Payments for WooCommerce Plugin" data-og-width="897" width="897" data-og-height="289" height="289" data-path="images/woocommerce/5.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/5.webp?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=8e9822b9516cd2fde4dbbb6dd7c50cc4 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/5.webp?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=d8251bb257a1010b77d71583f127d6f1 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/5.webp?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=32dbe8c8f89580510df55a54857b775c 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/5.webp?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=9cfdbaaa1b19b6e6c3f9f01880861cb7 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/5.webp?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=8a53d5b1ed75f904d4d76d47b0116ded 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/5.webp?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=4adee7347dcb9b5cdf7aeb9266f593a8 2500w" />
   </Frame>

8. The plugin is now installed, but configuration is still required. Continue to the setup guide below.

## Configuration Guide

### Setting Up API Keys and Webhooks

1. Navigate to **WooCommerce → Settings → Payments** or click the **Payments** button in the left sidebar below the WooCommerce menu item

   <Frame>
     <img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/6.webp?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=292552cc453ac05b4a0a368cd0d2adb8" alt="Dodo Payments for WooCommerce Plugin" data-og-width="1887" width="1887" data-og-height="958" height="958" data-path="images/woocommerce/6.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/6.webp?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=3abc19f156c6586395b1745a1217d230 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/6.webp?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=5e34f138c0f5cf0f4f2339731f77b01d 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/6.webp?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=499ec7d052d64247098df0728a0e1b92 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/6.webp?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=c3c6516fc16d2238107a5cb3cf355189 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/6.webp?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=6d521d97c0f05ab7261516f350048ce5 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/6.webp?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=e566aa707553985bb3b7d7a3308963b2 2500w" />
   </Frame>

   <Frame>
     <img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/7.webp?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=e289459e7a2c95082504229293c0863e" alt="Dodo Payments for WooCommerce Plugin" data-og-width="234" width="234" data-og-height="242" height="242" data-path="images/woocommerce/7.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/7.webp?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=73c7a21be7496e99a46d29774220128a 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/7.webp?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=f3f516c2a3598f04b1a067ed0585c4b6 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/7.webp?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=32248eca8ee07b4ad65cb944a5a7ab8b 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/7.webp?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=3e690c0861069a8f79010146b455af66 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/7.webp?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=f8b19fcb179ddd1f09c1f8b535c0d0ec 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/7.webp?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=bb905eea80da078328530115955a64af 2500w" />
   </Frame>

2. Enable the **Dodo Payments** payment provider if not already enabled, then click **Manage** to configure the plugin

3. You'll see various configuration options, each with helpful explanatory text. Begin by setting up your Live API Key

   <Frame>
     <img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/8.webp?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=0cad2f1d5bbba36d54e1d54e8ffb8961" alt="Dodo Payments for WooCommerce Plugin" data-og-width="1658" width="1658" data-og-height="867" height="867" data-path="images/woocommerce/8.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/8.webp?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=9221d08882f36e824b7589efa58ea789 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/8.webp?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=642cba12360d36e2e143717a32b2d1aa 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/8.webp?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=e8863ce7db76ba7d6aab96e8412d743c 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/8.webp?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=a7039a5c1a100425a74c4ee824c286e4 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/8.webp?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=5dd451e4bc06256b5f68c16505938d18 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/8.webp?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=ce2571a9c96e6facd518ad37b1c8fdcd 2500w" />
   </Frame>

4. Log in to your Dodo Payments dashboard in **Live Mode**, then navigate to **Dodo Payments (Live Mode) > Developer > API Keys** or visit [this direct link](https://app.dodopayments.com/developer/api-keys) and click **Add API Key**

   <Frame>
     <img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/9.webp?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=baa03ad325826db734456fd30e30363c" alt="Dodo Payments for WooCommerce Plugin" data-og-width="1876" width="1876" data-og-height="991" height="991" data-path="images/woocommerce/9.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/9.webp?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=2318856e2db60d66eebc8fb9a0497170 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/9.webp?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=e7b4e293cf00ab37ff4cb1816cd951c4 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/9.webp?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=1a1a339598aa443897ff55a03ab13d79 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/9.webp?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=04a539c2af9c935ed254079141abe9b4 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/9.webp?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=baa11b47ace6df48551151835730b6c1 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/9.webp?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=a7e2817fbbd66dd3ddb1c9180c4f602d 2500w" />
   </Frame>

5. Give your API Key a descriptive name and click **Create**

   <Frame>
     <img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/10.webp?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=af89376b00b5265c1d375dcc6fa218f3" alt="Dodo Payments for WooCommerce Plugin" data-og-width="549" width="549" data-og-height="365" height="365" data-path="images/woocommerce/10.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/10.webp?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=f89cf37914c281eb784df50f651574eb 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/10.webp?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=3be4e0b58189970dba8878ed71c9ff91 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/10.webp?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=f1e82428c9e1815d25af8d28db3d8814 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/10.webp?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=80d2a6338adea11f8f17063b0e860acd 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/10.webp?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=9ce3bfb5076fb31442eb0ed8d6e68e0e 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/10.webp?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=44daf875b0ac452cf7a688d12b56b0f3 2500w" />
   </Frame>

6. Copy the generated API Key and paste it into the **Live API Key** field in your WooCommerce plugin settings

   <Frame>
     <img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/11.webp?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=bd998ae7bb40791d2193b807813521cb" alt="Dodo Payments for WooCommerce Plugin" data-og-width="570" width="570" data-og-height="491" height="491" data-path="images/woocommerce/11.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/11.webp?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=68607695b0ba28dd89aac90639d905cb 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/11.webp?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=c4c09fcbab3ed34cd443d3b60f5bc99b 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/11.webp?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=78df3001cd33815e08b3540401cbf37e 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/11.webp?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=569c4f23e891654f5261a6f49f833fb4 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/11.webp?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=84fdb293880e40ca6f4787c91e32b59f 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/11.webp?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=d16e30440d1cb5ef550c34aa04a34e01 2500w" />
   </Frame>

   <Frame>
     <img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/12.webp?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=dd3f751317c6be0401c50bde584705e2" alt="Dodo Payments for WooCommerce Plugin" data-og-width="1395" width="1395" data-og-height="115" height="115" data-path="images/woocommerce/12.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/12.webp?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=96db10c4f94ac529286a0afa5f48daf7 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/12.webp?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=c9fd20843a0f7c17463d093f599fb46b 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/12.webp?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=63200b3a6b53734e94ca75304f1d6406 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/12.webp?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=aed7c107cf7479f29dce6c404d1aebe6 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/12.webp?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=5aaf978787112e7440ac9d492d2b1be3 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/12.webp?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=0808328af63af714f0f634116616d36f 2500w" />
   </Frame>

7. Next, set up the Webhook Signing Key to enable payment status synchronization between Dodo Payments and WooCommerce

8. Scroll to the bottom of the plugin settings page and copy the webhook URL displayed there

   <Frame>
     <img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/13.webp?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=becfefe5c5e04aeecefb8b8d126ff571" alt="Dodo Payments for WooCommerce Plugin" data-og-width="1062" width="1062" data-og-height="239" height="239" data-path="images/woocommerce/13.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/13.webp?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=0e057b41793fa38955dce6e766f1d4b4 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/13.webp?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=530fa0b1afa9dcd8fef5c99246e92d85 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/13.webp?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=7e1b346590100a5797e6e7d422789e71 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/13.webp?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=4ec328a2647ba20ad01203cbb952bc78 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/13.webp?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=476e6ca991335de3bdcff58ad3a44d2e 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/13.webp?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=c25000df8aca32a101a87021cdf26d82 2500w" />
   </Frame>

9. Return to your Dodo Payments dashboard and navigate to **Dodo Payments (Live Mode) > Developer > Webhooks** and click **Add Webhook**

   <Frame>
     <img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/14.webp?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=fda4e9a992317218190c439b9addb6d3" alt="Dodo Payments for WooCommerce Plugin" data-og-width="1884" width="1884" data-og-height="994" height="994" data-path="images/woocommerce/14.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/14.webp?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=9f8a11532db0ef2cdede6d219c666c01 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/14.webp?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=6b22a6aaf659dead69b106577ff05466 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/14.webp?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=ab862a7efc80c6c372c2e04a1f327c31 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/14.webp?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=05f669c809db2894eb36f670aedd022e 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/14.webp?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=d3b6711442f8698e61d44e52e828e48c 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/14.webp?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=672238e54bb5a2a5f8b577b78c2163e1 2500w" />
   </Frame>

10. Paste the URL you copied in step 8 into the dialog and click **Add Webhook**

    <Frame>
      <img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/15.webp?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=da9541f69ffaa9e37f4135c6163329c0" alt="Dodo Payments for WooCommerce Plugin" data-og-width="542" width="542" data-og-height="417" height="417" data-path="images/woocommerce/15.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/15.webp?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=0bf8c0460d7557db7c711976e4ae9161 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/15.webp?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=0f33bd4bddaeaaa9aff0ec518074a480 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/15.webp?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=24225c9843c803f2214acac0479642d6 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/15.webp?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=f01badbf8baa0b7770fd6e51d03e8045 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/15.webp?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=87b89e2108a0f46f57ebdd4e97cfb3ac 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/15.webp?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=d6c1fb19f712fbb340bca686969e8048 2500w" />
    </Frame>

11. After creating the webhook, click the eye icon next to the redacted **Signing Key** to reveal and copy it

    <Frame>
      <img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/16.webp?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=9f342ef95be984773dd065c0fd46f1a4" alt="Dodo Payments for WooCommerce Plugin" data-og-width="1527" width="1527" data-og-height="356" height="356" data-path="images/woocommerce/16.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/16.webp?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=3407319293064105d31efa4032e45dd7 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/16.webp?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=3a1a0ad20144ae99e4dff2a3c33538be 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/16.webp?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=fb2e1b25dc49f4c0d59d322c16d86388 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/16.webp?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=23f07c1794323d4c3c25770f518da6d4 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/16.webp?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=87c6b74ba1f89b0e72233c1139c0fc09 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/16.webp?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=6d06043734c649be1f27cb09453a3f3a 2500w" />
    </Frame>

12. Paste the Signing Key into the **Live Webhook Signing Key** field in your plugin settings and save the changes

    <Frame>
      <img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/17.webp?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=2cfee72402218b0170d63c2b136d9de9" alt="Dodo Payments for WooCommerce Plugin" data-og-width="1608" width="1608" data-og-height="155" height="155" data-path="images/woocommerce/17.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/17.webp?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=6398d813108fd0605431e0e64c603f74 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/17.webp?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=8640929633c1b9ab8c495662a450d4e5 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/17.webp?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=75110e10e3f5fbf386275ea2630e460c 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/17.webp?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=6568d37b7580255f12ec3085ec0b99fc 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/17.webp?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=88725926847bad143e6805a6b0922f79 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/17.webp?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=321bd9564a79a4727af2c5eaa9f14c0c 2500w" />
    </Frame>

13. Review the remaining settings such as **Global Tax Category** and **All Prices are Tax Inclusive**, as these options determine how products sync from WooCommerce to Dodo Payments. Note that **Test API Key** and **Test Webhook Signing Key** are only needed if you plan to use Test Mode

    <Frame>
      <img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/18.webp?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=746184a19efe5bfb14febfc6955c4c8e" alt="Dodo Payments for WooCommerce Plugin" data-og-width="1612" width="1612" data-og-height="677" height="677" data-path="images/woocommerce/18.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/18.webp?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=0f23a28766d91b883cb9334dc12cd7c5 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/18.webp?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=3e1864f6a2142f3091a8c79b9d2f73b0 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/18.webp?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=6c7d24ddfe7483a18109706a9d4ad19c 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/18.webp?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=b39a6c8d35cd1e0845cb0075210a0117 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/18.webp?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=c979e5b5b0501f5ed39b2a39fd6d8ba2 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/18.webp?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=d54e8b77215565e4549eb45ee2982379 2500w" />
    </Frame>

## You're All Set!

Your WooCommerce store is now integrated with Dodo Payments! Customers can select Dodo Payments at checkout to access all supported payment methods.

<Frame>
  <img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/19.webp?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=958daded5beb84eb4e54e02c267d7ecc" alt="Dodo Payments checkout option in WooCommerce" data-og-width="1864" width="1864" data-og-height="913" height="913" data-path="images/woocommerce/19.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/19.webp?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=b5dd381890bf2f7ead2fce04e97fd1f5 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/19.webp?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=986fc2c0fb159e38ce98ddbec2ae1ff5 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/19.webp?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=1571d5a8bcfffd65e89ba903630185f3 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/19.webp?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=e9f8a6e02a8ccf9c9fe6e1ea69e51915 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/19.webp?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=9466a32161cda223e86b1e5f527286a7 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/19.webp?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=baab933597b69daf0b8e907a7b202f3f 2500w" />
</Frame>

When customers choose Dodo Payments, they'll be seamlessly redirected to the Dodo Payments checkout page to complete their transaction.

<Frame>
  <img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/20.webp?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=a78bd2b289d9cc8df8d36da9db540c14" alt="Dodo Payments checkout page" data-og-width="1887" width="1887" data-og-height="1006" height="1006" data-path="images/woocommerce/20.webp" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/20.webp?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=ee10c1bd33ff3472ca83954832e1b2b0 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/20.webp?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=f7deabe25d4de77a2bc9b2107b1242e8 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/20.webp?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=877939c3e1cee93cf5f1e2cbf2563359 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/20.webp?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=7883ef38e2af9371149ac45041f75462 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/20.webp?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=051d146e4e41ca280d5ae23da3b45909 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/woocommerce/20.webp?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=9becee8cd9e067951d6ffc6018a1450a 2500w" />
</Frame>

## Key Features

* **Seamless Checkout Experience**: Redirect customers to a secure, optimized checkout page
* **Multiple Payment Methods**: Support for various local and international payment options
* **Real-time Status Updates**: Instant order status synchronization via webhooks
* **Detailed Transaction Records**: Comprehensive payment history in your WooCommerce dashboard
* **Multi-currency Support**: Accept payments in multiple currencies

## Troubleshooting

### Common Issues

1. **Payment Processing Failures**
   * Verify API keys are correctly configured
   * Ensure webhook URL is properly set up
   * Check that your SSL certificate is valid

2. **Webhook Synchronization Problems**
   * Confirm webhook signing key matches
   * Review server logs for potential errors
   * Verify your server can receive incoming webhook requests

### Support Resources

For additional assistance:

* Contact us at [support@dodopayments.com](mailto:support@dodopayments.com)
* Refer to our [comprehensive documentation](https://docs.dodopayments.com)

## Maintenance Best Practices

1. Regularly update the plugin for security patches and new features
2. Test all payment flows in sandbox mode before processing live transactions
3. Keep WordPress and WooCommerce updated to the latest versions
4. Implement regular site backups
5. Monitor transaction logs for any unusual activity
6. Store API keys securely and never share them publicly


# Zapier
Source: https://docs.dodopayments.com/integrations/zapier

Connect Dodo Payments to 5000+ apps through Zapier webhooks for unlimited automation possibilities.

## Introduction

Connect Dodo Payments to thousands of apps and services through Zapier. Automate workflows by triggering Zaps when payment events occur, from sending emails to updating spreadsheets, creating tasks, and much more.

<Info>
  This integration requires a Zapier webhook URL from your Zap configuration.
</Info>

## Getting Started

<Steps>
  <Step title="Open the Webhook Section">
    In your Dodo Payments dashboard, navigate to <b>Webhooks → + Add Endpoint</b> and expand the integrations dropdown.

    <Frame>
      <img src="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/zapier.png?fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=4f04fe274ed3c2135baaa23e7f3cf566" alt="Add Endpoint and integrations dropdown" data-og-width="1636" width="1636" data-og-height="944" height="944" data-path="images/integrations/zapier.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/zapier.png?w=280&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=5b9dbe8b963b85ef7b59c1a3fd58bbf4 280w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/zapier.png?w=560&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=61a14a0fe0850e99d1c0d5d91dd7726c 560w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/zapier.png?w=840&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=c5eec4281e15eececf621f99a8c2ad56 840w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/zapier.png?w=1100&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=dfed97e8adf23e8d8295379d20ac30f0 1100w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/zapier.png?w=1650&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=9b4b78a71ca2cf4bfb1975201c5de867 1650w, https://mintcdn.com/dodopayments/slbAEdrLLwKHfaRf/images/integrations/zapier.png?w=2500&fit=max&auto=format&n=slbAEdrLLwKHfaRf&q=85&s=d4761c27e35cccf1926461f608370339 2500w" />
    </Frame>
  </Step>

  <Step title="Select Zapier">
    Choose the <b>Zapier</b> integration card.
  </Step>

  <Step title="Create Zap in Zapier">
    In Zapier, create a new Zap with "Webhooks by Zapier" as the trigger. Copy the webhook URL.
  </Step>

  <Step title="Paste Webhook URL">
    Paste the Zapier webhook URL into the endpoint configuration.
  </Step>

  <Step title="Configure Transformation">
    Edit the transformation code to format data for your Zapier workflow.
  </Step>

  <Step title="Test & Create">
    Test with sample payloads and click <b>Create</b> to activate the integration.
  </Step>

  <Step title="Done!">
    🎉 Payment events will now trigger your Zapier workflows automatically.
  </Step>
</Steps>

## Transformation Code Examples

### Basic Webhook Payload

```javascript basic_webhook.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType === "payment.succeeded") {
    const p = webhook.payload.data;
    webhook.payload = {
      event_type: webhook.eventType,
      payment_id: p.payment_id,
      amount: (p.total_amount / 100).toFixed(2),
      currency: p.currency || "USD",
      customer_email: p.customer.email,
      customer_name: p.customer.name,
      payment_method: p.payment_method || "unknown",
      timestamp: webhook.payload.timestamp
    };
  }
  return webhook;
}
```

### Subscription Event Handler

```javascript subscription_webhook.js icon="js" expandable theme={null}
function handler(webhook) {
  const s = webhook.payload.data;
  switch (webhook.eventType) {
    case "subscription.active":
      webhook.payload = {
        event_type: "subscription_started",
        subscription_id: s.subscription_id,
        customer_email: s.customer.email,
        customer_name: s.customer.name,
        product_id: s.product_id,
        amount: (s.recurring_pre_tax_amount / 100).toFixed(2),
        frequency: s.payment_frequency_interval,
        next_billing: s.next_billing_date,
        timestamp: webhook.payload.timestamp
      };
      break;
    case "subscription.cancelled":
      webhook.payload = {
        event_type: "subscription_cancelled",
        subscription_id: s.subscription_id,
        customer_email: s.customer.email,
        cancelled_at: s.cancelled_at,
        cancel_at_next_billing: s.cancel_at_next_billing_date,
        timestamp: webhook.payload.timestamp
      };
      break;
  }
  return webhook;
}
```

### Dispute Alert Handler

```javascript dispute_webhook.js icon="js" expandable theme={null}
function handler(webhook) {
  if (webhook.eventType.startsWith("dispute.")) {
    const d = webhook.payload.data;
    webhook.payload = {
      event_type: webhook.eventType,
      dispute_id: d.dispute_id,
      payment_id: d.payment_id,
      amount: (d.amount / 100).toFixed(2),
      status: d.dispute_status,
      stage: d.dispute_stage,
      remarks: d.remarks || "",
      urgent: webhook.eventType === "dispute.opened",
      timestamp: webhook.payload.timestamp
    };
  }
  return webhook;
}
```

## Popular Zapier Use Cases

<AccordionGroup>
  <Accordion title="Email Notifications">
    * Send Gmail/Outlook emails for payment confirmations
    * Create email sequences in Mailchimp/ConvertKit
    * Send Slack/Discord notifications
    * Create Google Sheets records
  </Accordion>

  <Accordion title="CRM Updates">
    * Add contacts to HubSpot/Salesforce
    * Create deals in Pipedrive/Close
    * Update customer records in Airtable
    * Log activities in Monday.com
  </Accordion>

  <Accordion title="Task Management">
    * Create tasks in Asana/Trello
    * Add to-do items in Notion
    * Create calendar events
    * Send SMS notifications via Twilio
  </Accordion>
</AccordionGroup>

## Tips

* Keep payload structure simple for easy Zapier parsing
* Use consistent field names across all events
* Include timestamps for workflow timing
* Test your Zap with sample data before going live
* Use Zapier's built-in filters for conditional logic

## Troubleshooting

<AccordionGroup>
  <Accordion title="Zap not triggering">
    * Verify webhook URL is correct and active
    * Check that Zap is turned on in Zapier
    * Ensure payload structure matches Zapier expectations
    * Test webhook delivery in Zapier dashboard
  </Accordion>

  <Accordion title="Data not mapping correctly">
    * Check field names in Zapier action steps
    * Verify data types match expected formats
    * Use Zapier's test feature to debug mapping
    * Ensure transformation code returns valid JSON
  </Accordion>
</AccordionGroup>


# Welcome to Dodo Payments
Source: https://docs.dodopayments.com/introduction

The complete payments & billing platform for SaaS, AI, and digital products. Accept payments globally, set up flexible billing models, and monetize your product in minutes - all without building your own infrastructure.

<Frame>
  <img src="https://mintcdn.com/dodopayments/uPUxf15iPIZdcBn4/images/intro_cover.png?fit=max&auto=format&n=uPUxf15iPIZdcBn4&q=85&s=33cbb77568c45c08d919ae9018bb20b3" alt="Dodo Payments - Complete payments and billing platform for modern digital products" data-og-width="1723" width="1723" data-og-height="900" height="900" data-path="images/intro_cover.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/uPUxf15iPIZdcBn4/images/intro_cover.png?w=280&fit=max&auto=format&n=uPUxf15iPIZdcBn4&q=85&s=5ea7b3d304597fa7cba5e6bddab60243 280w, https://mintcdn.com/dodopayments/uPUxf15iPIZdcBn4/images/intro_cover.png?w=560&fit=max&auto=format&n=uPUxf15iPIZdcBn4&q=85&s=e45bc2a96b51a6274bace112e6933574 560w, https://mintcdn.com/dodopayments/uPUxf15iPIZdcBn4/images/intro_cover.png?w=840&fit=max&auto=format&n=uPUxf15iPIZdcBn4&q=85&s=ebcb8bb3cb2dca2b7a5831f0a425185c 840w, https://mintcdn.com/dodopayments/uPUxf15iPIZdcBn4/images/intro_cover.png?w=1100&fit=max&auto=format&n=uPUxf15iPIZdcBn4&q=85&s=4a610a732fb7af29913d01c821e56b37 1100w, https://mintcdn.com/dodopayments/uPUxf15iPIZdcBn4/images/intro_cover.png?w=1650&fit=max&auto=format&n=uPUxf15iPIZdcBn4&q=85&s=5324741dc71c03cc4ef6c8287b51a71a 1650w, https://mintcdn.com/dodopayments/uPUxf15iPIZdcBn4/images/intro_cover.png?w=2500&fit=max&auto=format&n=uPUxf15iPIZdcBn4&q=85&s=e0deb9c4427cbe5b1b54fd0e53c77e2c 2500w" />
</Frame>

## What is Dodo Payments?

Dodo Payments is the **all-in-one engine** to launch, scale, and monetize worldwide. Designed for the new generation of digital SaaS and AI products, we handle everything from **payments to billing to distribution** - all without extra engineering.

<Info>
  **Built for SaaS and AI Products**: Handle one-time payments, subscriptions, credits, seats, tokens, or any usage metric with our optimized billing infrastructure.
</Info>

<Tip>
  <strong>Let Sentra write your integration code for you.</strong><br />
  Use our AI assistant in VS Code, Cursor, or Windsurf to generate SDK/API code, webhooks, and more - just by describing what you want.

  <a href="https://dodopayments.com/sentra" target="_blank" rel="noopener noreferrer">
    Try Sentra: AI-Powered Integration →
  </a>
</Tip>

### Why Choose Dodo Payments?

<CardGroup cols={2}>
  <Card title="All-in-One Platform" icon="box">
    One solution for payments, billing, and distribution—no more piecing tools together
  </Card>

  <Card title="Global Merchant of Record" icon="globe">
    Go global without complexity: built-in coverage in 150+ countries, 80+ currencies, and 30+ payment methods
  </Card>

  <Card title="Developer-First & No-Code" icon="code">
    Seamless APIs and SDKs for fast integration, plus <a href="https://sentra.dev" target="_blank" rel="noopener">Sentra</a> for no-code/low-code workflows
  </Card>

  <Card title="Faster Monetization" icon="bolt">
    Start collecting revenue in minutes, not weeks
  </Card>

  <Card title="Flexible Billing Models" icon="repeat">
    Usage-based, subscriptions with addons, or one-time payments are built in
  </Card>

  <Card title="Optimized for AI Products" icon="brain">
    Handle credits, seats, tokens, or any usage metric
  </Card>
</CardGroup>

## Quick Start Guide

Get up and running with Dodo Payments in just a few steps:

<Steps>
  <Step title="Create Your Account">
    Sign up at [app.dodopayments.com](https://app.dodopayments.com/signup) using your email.

    <Check>
      You'll receive a confirmation email to verify your account.
    </Check>
  </Step>

  <Step title="Add Your First Product">
    Choose your billing model and add your product to start accepting payments.

    <CardGroup cols={3}>
      <Card title="One-Time Payment" icon="box" href="/features/one-time-payment-products">
        Perfect for digital downloads, courses, or single purchases
      </Card>

      <Card title="Subscription Product" icon="repeat" href="/features/subscription">
        Ideal for SaaS, memberships, or recurring services
      </Card>

      <Card title="Usage-Based Billing" icon="chart-bar" href="/features/usage-based-billing">
        Bill customers for API calls, credits, tokens, or any usage metric—ideal for AI and SaaS
      </Card>
    </CardGroup>
  </Step>

  <Step title="Choose Your Integration Method">
    Select the integration approach that best fits your needs and technical requirements.

    <Tabs>
      <Tab title="No-Code (Fastest)">
        **Perfect for getting started quickly:**

        * Create **Payment Links** from your dashboard
        * Share via email, social media, or embed in websites
        * Start accepting payments immediately

        <Frame>
          <iframe className="w-full aspect-video rounded-md" src="https://www.youtube.com/embed/OwMjszInCLc" title="Setup Your Account | Dodo Payments" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen />
        </Frame>
      </Tab>

      <Tab title="Overlay Checkout">
        **Best for seamless, on-brand payments:**

        * Launch checkout as an overlay on your site or app
        * Keep users on your page for a frictionless experience
        * Customize appearance to match your brand

        <Card title="Overlay Integration" icon="layer-group" href="/developer-resources/overlay-checkout">
          Add our overlay checkout with a single line of code
        </Card>
      </Tab>

      <Tab title="Full SDK Integration">
        **Best for advanced, fully customized solutions:**

        * Use our TypeScript/Python/Go/Java/Kotlin/C#/Ruby SDK for seamless integration
        * Programmatic access to all payment, subscription, and customer portal APIs
        * Deep integration with your backend, workflows, and data models
        * Full support for webhooks, advanced features, and automation

        <Tip>
          <strong>Let Sentra write your integration code for you.</strong><br />
          Use our AI assistant in VS Code, Cursor, or Windsurf to generate SDK/API code, webhooks, and more - just by describing what you want.

          <a href="https://dodopayments.com/sentra" target="_blank" rel="noopener noreferrer">
            Try Sentra: AI-Powered Integration →
          </a>
        </Tip>

        <Card title="SDK Quickstart" icon="code" href="/developer-resources/integration-guide">
          Learn how to install and use our official SDK
        </Card>

        <Card title="API Reference" icon="server" href="/api-reference/introduction">
          Explore the full API and SDK documentation
        </Card>
      </Tab>
    </Tabs>
  </Step>
</Steps>

## Developer Integration

<Tip>
  <strong>Let Sentra write your integration code for you.</strong><br />
  Use our AI assistant in VS Code, Cursor, or Windsurf to generate SDK/API code, webhooks, and more - just by describing what you want.

  <a href="https://dodopayments.com/sentra" target="_blank" rel="noopener noreferrer">
    Try Sentra: AI-Powered Integration →
  </a>
</Tip>

### Framework Adapters

Integrate in under 10 lines of code with our framework adapters. Choose from our recommended frameworks or explore all supported options.

#### Recommended Frameworks

<CardGroup cols={2}>
  <Card title="Next.js" icon="atom" href="/developer-resources/nextjs-adaptor">
    React-based full-stack framework with App Router support
  </Card>

  <Card title="Better Auth" icon="shield" href="/developer-resources/better-auth-adaptor">
    Authentication framework with built-in integrations
  </Card>

  <Card title="Supabase" icon="database" href="developer-resources/supabase-boilerplate">
    Open source Firebase alternative with Postgres and Auth
  </Card>

  <Card title="Convex" icon="database" href="/developer-resources/convex-component">
    Backend-as-a-Service with real-time capabilities
  </Card>
</CardGroup>

<AccordionGroup>
  <Accordion title="Show other 8+ supported frameworks">
    <CardGroup cols={4}>
      <Card title="SvelteKit" icon="js" href="/developer-resources/sveltekit-adaptor" />

      <Card title="Nuxt" icon="vuejs" href="/developer-resources/nuxt-adaptor" />

      <Card title="Remix" icon="react" href="/developer-resources/remix-adaptor" />

      <Card title="Express" icon="js" href="/developer-resources/express-adaptor" />

      <Card title="Fastify" icon="bolt" href="/developer-resources/fastify-adaptor" />

      <Card title="Hono" icon="cloud" href="/developer-resources/hono-adaptor" />

      <Card title="Astro" icon="star" href="/developer-resources/astro-adaptor" />

      <Card title="TanStack" icon="chart-line" href="/developer-resources/tanstack-adaptor" />
    </CardGroup>
  </Accordion>
</AccordionGroup>

### Powerful SDKs

Speed up development with our official SDKs. Choose from our recommended languages or explore all supported options.

<CardGroup cols={4}>
  <Card title="TypeScript" icon="code-simple" href="/developer-resources/dodo-payments-sdks#typescript" />

  <Card title="Python" icon="python" href="/developer-resources/dodo-payments-sdks#python" />

  <Card title="Go" icon="golang" href="/developer-resources/dodo-payments-sdks#go" />

  <Card title="PHP" icon="php" href="/developer-resources/dodo-payments-sdks#php" />

  <Card title="Java" icon="java" href="/developer-resources/dodo-payments-sdks#java" />

  <Card title="Kotlin" icon="android" href="/developer-resources/dodo-payments-sdks#kotlin" />

  <Card title="C#" icon="hashtag" href="/developer-resources/dodo-payments-sdks#c%23" />

  <Card title="Ruby" icon="gem" href="/developer-resources/dodo-payments-sdks#ruby" />
</CardGroup>

### Billing SDK

Stop reinventing the wheel. Use production-ready, accessible billing components, from pricing cards to subscription dashboards, built for React and ShadCN.

<Card title="Billing Components" icon="credit-card" href="https://billingsdk.com" target="_blank">
  Beautiful, customizable billing components, pricing tables, subscription management, and usage meters - save development time with production-ready UI for billing and payments.
</Card>

<Info>
  **Open Source & Free**: BillingSDK is completely free to use and modify for personal and commercial projects. Built by the Dodo Payments team for developers.
</Info>

### In-App Purchases for Android and iOS

Build rich in-app payment experiences with our lightweight payment links and secure React Native SDKs optimized for iOS and Android.

<CardGroup cols={2}>
  <Card title="Mobile Integration Guide" icon="book" href="/developer-resources/mobile-integration">
    Complete guide for integrating payments in mobile applications
  </Card>

  <Card title="React Native SDK" icon="mobile" href="/developer-resources/react-native-integration">
    Native mobile SDK for iOS and Android with seamless payment flows
  </Card>
</CardGroup>

## External Integrations

Connect Dodo Payments with your favorite tools and platforms to automate workflows, send notifications, and enhance your payment operations.

<Info>
  **Automate Everything**: Set up real-time notifications, trigger workflows, sync customer data, and more with our growing library of integrations.
</Info>

### Popular Integrations

Quickly connect Dodo Payments to the most used design and productivity tools to streamline your workflow and automate payment operations.

<CardGroup cols={4}>
  <Card title="Framer Plugin" icon="frame" href="/integrations/framer-plugin">
    Add payments to Framer websites
  </Card>

  <Card title="WooCommerce" icon="wordpress" href="/integrations/woocommerce-plugin">
    Accept payments on WooCommerce stores
  </Card>

  <Card title="Raycast Extension" icon="rocket" href="/integrations/raycast-extension">
    Manage payments from Raycast
  </Card>

  <Card title="Figma Plugin" icon="figma" href="/integrations/figma-plugin">
    Access Dodo Payments in Figma
  </Card>
</CardGroup>

<AccordionGroup>
  <Accordion title="Communication & Notifications">
    Stay informed about payment events with real-time notifications in your team communication tools.

    <CardGroup cols={3}>
      <Card title="Slack" icon="slack" href="/integrations/slack">
        Send payment notifications and alerts to Slack channels
      </Card>

      <Card title="Discord" icon="discord" href="/integrations/discord">
        Get instant payment updates in your Discord server
      </Card>

      <Card title="Microsoft Teams" icon="microsoft" href="/integrations/microsoft-teams">
        Receive payment notifications directly in Teams channels
      </Card>
    </CardGroup>
  </Accordion>

  <Accordion title="Email Marketing & Customer Communication">
    Sync customer data and trigger email campaigns based on payment events.

    <CardGroup cols={4}>
      <Card title="Resend" icon="envelope" href="/integrations/resend">
        Send transactional emails with Resend
      </Card>

      <Card title="SendGrid" icon="paper-plane" href="/integrations/sendgrid">
        Automate email campaigns with SendGrid
      </Card>

      <Card title="Loops" icon="repeat" href="/integrations/loops">
        Trigger email sequences with Loops
      </Card>

      <Card title="Customer.io" icon="users" href="/integrations/customer-io">
        Sync customer data to Customer.io
      </Card>
    </CardGroup>
  </Accordion>

  <Accordion title="CRM & Sales">
    Connect your payment data with CRM platforms to streamline sales and customer management.

    <CardGroup cols={2}>
      <Card title="HubSpot" icon="hubspot" href="/integrations/hubspot">
        Sync customers and deals with HubSpot CRM
      </Card>

      <Card title="Close CRM" icon="briefcase" href="/integrations/close-crm">
        Automate sales workflows with Close CRM
      </Card>
    </CardGroup>
  </Accordion>

  <Accordion title="Automation & Workflows">
    Build powerful automations and data pipelines with workflow automation platforms.

    <CardGroup cols={4}>
      <Card title="Zapier" icon="bolt" href="/integrations/zapier">
        Connect to 5,000+ apps with Zapier
      </Card>

      <Card title="Windmill" icon="wind" href="/integrations/windmill">
        Build custom workflows with Windmill
      </Card>

      <Card title="Inngest" icon="code" href="/integrations/inngest">
        Create event-driven workflows with Inngest
      </Card>

      <Card title="Segment" icon="chart-network" href="/integrations/segment">
        Stream payment data to Segment CDP
      </Card>
    </CardGroup>
  </Accordion>
</AccordionGroup>

<Card title="View All Integrations" icon="puzzle-piece" href="/integrations/introduction">
  Explore our complete library of integrations with detailed setup guides
</Card>

## Need Help?

<CardGroup cols={2}>
  <Card title="Developer Documentation" icon="book" href="/developer-resources/introduction">
    Explore comprehensive guides and API references
  </Card>

  <Card title="API Reference" icon="terminal" href="/api-reference/introduction">
    Full OpenAPI reference, endpoints, parameters, and example requests for all Dodo Payments APIs
  </Card>

  <Card title="Community Support" icon="users" href="https://discord.gg/bYqAp4ayYh">
    Join our Discord community for help and discussions
  </Card>

  <Card title="Contact Support" icon="headphones" href="mailto:support@dodopayments.com">
    Get direct help from our support team
  </Card>
</CardGroup>


# Migrate to Dodo Payments
Source: https://docs.dodopayments.com/migrate-to-dodo

Easily migrate your data from other payment providers to Dodo Payments using our CLI tool

**Switching from another payment provider to Dodo Payments?** Our migration tool makes it easy to move your **products, customers, and discount codes without losing any data.** The process is safe, guided, and can be done in just a few minutes.

We currently support migrations from **Lemon Squeezy, Stripe, Polar.sh, and Paddle**.

### Supported Migrations

<CardGroup cols={3}>
  <Card title="Products & Pricing" icon="box">
    Migrate all your products and pricing details.
  </Card>

  <Card title="Customer Data" icon="users">
    Transfer your complete customer database, including contact details.
  </Card>

  <Card title="Discount Codes & Promotions" icon="tag">
    Move all discount codes and promotional offers seamlessly.
  </Card>
</CardGroup>

## Get Started

First, install the migration tool:

```bash  theme={null}
npm install -g dodo-migrate
```

<Note>
  You'll need Node.js ≥ 18 installed on your computer.
</Note>

## Migrate Your Data

### If you're coming from Lemon Squeezy:

```bash  theme={null}
dodo-migrate lemonsqueezy
```

### If you're coming from Stripe:

```bash  theme={null}
dodo-migrate stripe
```

### If you're coming from Polar.sh:

```bash  theme={null}
dodo-migrate polar
```

### If you're coming from Paddle:

```bash  theme={null}
dodo-migrate paddle
```

The tool will walk you through everything step by step. You'll need:

* Your provider's API key (Lemon Squeezy, Stripe, Polar.sh, Paddle, etc.)
* Your Dodo Payments API key
* Whether you want to test first (recommended) or go live
* Which Dodo Payments brand to migrate to

## Why Use Our Migration Tool?

* **No data loss** - Everything transfers safely
* **Test first** - Try it in test mode before going live
* **Guided process** - We walk you through each step
* **Resume if needed** - If something goes wrong, you can pick up where you left off

## Advanced Usage

If you prefer to run the migration without prompts, you can provide all the details upfront:

### Lemon Squeezy migration:

```bash  theme={null}
dodo-migrate lemonsqueezy \
  --provider-api-key=lsq_XXXXXXXXXXXXXXXX \
  --dodo-api-key=dp_XXXXXXXXXXXXXXXX \
  --mode=test_mode \
  --dodo-brand-id=brand_XXXXXX
```

### Stripe migration:

```bash  theme={null}
dodo-migrate stripe \
  --provider-api-key=sk_test_XXXXXXXXXXXXXXXX \
  --dodo-api-key=dp_XXXXXXXXXXXXXXXX \
  --mode=test_mode \
  --dodo-brand-id=brand_XXXXXX \
  --migrate-types=products,coupons
```

### Polar.sh migration:

```bash  theme={null}
dodo-migrate polar \
  --provider-api-key=polar_org_XXXXXXXXXXXXXXXX \
  --dodo-api-key=dp_XXXXXXXXXXXXXXXX \
  --mode=test_mode \
  --dodo-brand-id=brand_XXXXXX \
  --migrate-types=products,discounts,customers
```

### Paddle migration:

```bash  theme={null}
dodo-migrate paddle \
  --provider-api-key=paddle_XXXXXXXXXXXXXXXX \
  --dodo-api-key=dp_XXXXXXXXXXXXXXXX \
  --mode=test_mode \
  --dodo-brand-id=brand_XXXXXX
```

## Need Help?

* **Tool help**: `dodo-migrate --help`
* **Lemon Squeezy help**: `dodo-migrate lemonsqueezy --help`
* **Stripe help**: `dodo-migrate stripe --help`
* **Polar.sh help**: `dodo-migrate polar --help`
* **Paddle help**: `dodo-migrate paddle --help`
* **Community support**: [Discord](https://discord.gg/bYqAp4ayYh)
* **Report issues**: [GitHub](https://github.com/dodopayments/dodo-migrate)

## Update the Tool

```bash  theme={null}
# Update to latest version
npm update -g dodo-migrate

# Remove the tool
npm uninstall -g dodo-migrate
```


# My Accounts
Source: https://docs.dodopayments.com/miscellaneous/accounts

Merchant can access and manage their personal account information such as Contact Name, Profile Image and phone number for a more personalised experience through the my account section.

## **Business Profile**

<Steps>
  <Step title="Access your Business Profile">
    Go to <strong>Business → Business Profile</strong>.
  </Step>

  <Step title="Edit and save business details">
    Update the business details, such as the business logo and Brand display name (used on invoices), then click <strong>Save Changes</strong>.
  </Step>
</Steps>

## **User Account**

<Steps>
  <Step title="Access your User Profile">
    Click the icon in the top right, then select <strong>Profile</strong>.
  </Step>

  <Step title="Edit and save personal details">
    Update your personal information (Contact Name, Profile Image, phone number) for a personalized experience, then click <strong>Save Changes</strong>.
  </Step>
</Steps>

## Managing Multiple Businesses

Merchants with more than one business can easily add and verify additional businesses through their Dodo Payments account.

* **How to Add Multiple Businesses**:

  1. Navigate to the **Business Settings** section of the dashboard.

  2. Click **Add Another Business** and provide the required details.

  3. Submit the business registration documents for manual review.

  4. After approval, merchants can switch between verified businesses to manage their products, payments, and reports.


# FAQs
Source: https://docs.dodopayments.com/miscellaneous/faq

Comprehensive answers to common questions about Dodo Payments, covering onboarding, payments, subscriptions, compliance, and technical integration to help you navigate and make the most of our platform.

## Getting Started & Account Setup

<Accordion title="Q1: How do I login to Dodo Payments Dashboard?">
  A: Visit our dashboard and enter the Login email and password shared with you in your welcome email. In case you face any issues please reach out to our support team.
</Accordion>

<Accordion title="Q2: What documents do I need to complete the verification process?">
  A: The documents required for verification include a valid government-issued ID (for identity verification) and business registration documents (for business verification). For details check the [verification process page](/miscellaneous/verification-process).
</Accordion>

<Accordion title="Q3: What happens if my verification is rejected?">
  A: If your verification is rejected, you will receive an email with the reason for rejection. You can contact our support team to resolve any issues, correct documentation, and reapply. The resubmit option will be enabled by our verification team if necessary.
</Accordion>

<Accordion title="Q4: How long does the verification process take?">
  A: The verification process typically takes **24-72 working hours**. However, if additional documents are required, the process may take longer.
</Accordion>

<Accordion title="Q5: I currently do not have a website for my business. Can I submit my company's linkedin page instead?">
  A: We need your website to understand the kind of products you are selling and verify your business for live access. If you do not have a website or are in the process of building one please reach out to us at [support@dodopayments.com](mailto:support@dodopayments.com)
</Accordion>

<Accordion title="Q6: I am an individual and I do not have a registered business. Can I still use dodo payments?">
  A: Yes, we support unregistered businesses as well. You do not need a registered business to use Dodo Payments. You can onboard as an individual and start receiving international payments without any hassle. You will still need to submit Identity Verification forms and Business Verification forms as an unregistered business for us to onboard you.
</Accordion>

<Accordion title="Q7: I want to integrate my other business with Dodo payments. Should I create a new account?">
  A: No, you can manage multiple businesses through a single account. To add a new business, click the + icon in the bottom left corner of the dashboard and select the Add Business option.
  You can refer to /miscellaneous/accounts#managing-multiple-businesses for more details
</Accordion>

<Accordion title="Q8: Should I wait for verification to complete before integrating dodo payments in my system?">
  A: No, there is no need for you to wait. You can start integrating using the Test mode and once your verification is successful you can start making Live payments in production. Learn more about Test and Live modes here,
  /miscellaneous/test-mode-vs-live-mode
</Accordion>

<Accordion title="Q9: How to get live mode access?">
  A: Make sure you have submitted the identity and business verification documents in the settings tab. If you have already submitted them and it has been more than 72 hours, check for the reason it is on hold on the same page and contact the support team.
</Accordion>

<Accordion title="Q10: Does Dodo Payments have an affiliate program?">
  A: Yes, we do offer an affiliate program!

  <Card title="Learn more about our affiliate program" icon="users" href="/features/affiliates">
    Discover how to join our affiliate program, commission rates, and how to start earning.
  </Card>
</Accordion>

<Accordion title="Q11: How can I delete the products/customers that I have created?">
  A: Currently you cannot delete products or customers as these are need to maintain records for future compliance. We are currently working on an archive product feature which will allow you to remove the product from your active products section.
</Accordion>

<Accordion title="Q12: How can I have a custom UI for the payments page?">
  A: You can add your business logo and your business name to the payment page. To upload them, visit the business profile page on your dashboard.
</Accordion>

<Accordion title="Q13: Can I update the branding on the checkout page?">
  A: Yes. You can:

  * Go to Dashboard → Settings → Business Setting
  * Update your logo, brand name, and support email.
  * Changes will reflect on both static and dynamic links
</Accordion>

<Accordion title="Q14: Can I embed Dodo Checkout in an iframe?">
  A: No. The hosted checkout flow does not support embedding in an iframe.

  Instead:

  * Redirect users to the Dodo checkout URL
  * Or use our Overlay Checkout Feature. [Overlay Checkout Docs](/developer-resources/overlay-checkout)
</Accordion>

## Verification, Tax & Compliance

<Accordion title="Q15: Why is my verification taking so long?">
  A: Dodo Payments typically takes 24–72 working hours to process verifications. However, delays can occur due to:

  * High volume of applications
  * Weekends and public holidays
  * Incomplete or incorrect submissions
  * Manual reviews for risk or compliance

  <Note>
    If it's been more than 72 hours, please check your email or Dodo Payments dashboard for any required action. You can also DM your registered email to the team on Discord for a follow-up.
  </Note>
</Accordion>

<Accordion title="Q16: I submitted my W-8BEN form, but the signature section doesn't work properly. What do I do?">
  A: Use a proper PDF editor like:

  * Adobe Acrobat
  * Mac Preview (works for most)
  * Smallpdf or PDFescape (online editors)

  If there's a cross mark on the signature, make sure:

  * You're saving the file after applying the signature.
  * The tool is flattening the signature layer (some editors don't).

  <Tip>
    Avoid signing in browser previewers—they don't always embed digital signatures properly.
  </Tip>
</Accordion>

<Accordion title="Q17: I chose the wrong registration type (business vs individual). How can I fix it?">
  A: If you selected the wrong entity type (e.g., chose “Organization” but you’re an individual or a Sole Prop with GST), your verification might be On-hold, requiring you to change or update the documentation.

  Steps to fix:
  Step 1: Inform support via Intercom or Discord who will help you enable resubmission for the Payout Compliance form.
  Step 2: Choose the right registration type, and resubmit the required documents.
</Accordion>

<Accordion title="Q18: My verification was declined due to entity mismatch. What should I do?">
  A: If you selected the wrong entity type (e.g., chose “Organization” but you’re an individual or a Sole Prop with GST), your verification might be On-hold, requiring you to change or update the documentation.

  Steps to fix:
  Step 1: Inform support via Intercom or Discord who will help you enable resubmission for the Payout Compliance form.
  Step 2: Choose the right registration type, and resubmit the required documents.
</Accordion>

<Accordion title="Q19: I reached $100 in earnings. Will my account get verified faster?">
  A: Yes. Once your earnings cross the payout threshold (\$100), Dodo Payments prioritizes your verification.

  <Note>
    This does not guarantee instant approval — ensure your business model and documents are compliant.
  </Note>

  If you've crossed \$100 and still see delays, reach out to our support.
</Accordion>

<Accordion title="Q20: Can I use a different name (like my parent's) to sign up and get verified?">
  A: No. The person signing up must match the legal owner of the business and all submitted documents.

  If your parent is the actual business owner:

  * They should sign up using their email and mobile number.
  * All documents should be in their name.

  <Note>
    Using someone else's name for verification while you manage the business may lead to compliance rejection.
  </Note>
</Accordion>

<Accordion title="Q21: How do I check the reason for verification rejection?">
  A: You can find the reason in:

  * The Dodo Payments dashboard, under the verification section.
  * Email notifications (if enabled)

  <Tip>
    If it's not visible, contact [compliance@dodopayments.com](mailto:compliance@dodopayments.com) or DM your registered email ID to a team member.
  </Tip>
</Accordion>

<Accordion title="Q22: Can I create a new business account if my previous one was declined?">
  A: Yes — but only if:

  * You've fixed the issues that led to rejection.
  * You're not attempting to bypass risk decisions (e.g., deboarding for fraud concerns).

  <Note>
    Creating multiple accounts without resolving the underlying issue will likely result in the new account being rejected as well.
  </Note>
</Accordion>

<Accordion title="Q23: I've been told my account was previously deboarded. What does this mean?">
  A: If you see a message stating your account was previously deboarded by the risk team:

  * It means Dodo Payments found significant compliance or risk issues with your activity or business.
  * Attempting to create new accounts using the same identity or business details will likely be rejected again.

  <Note>
    If you believe this is a mistake, email [compliance@dodopayments.com](mailto:compliance@dodopayments.com) and request a review — include clear evidence to support your case.
  </Note>
</Accordion>

<Accordion title="Q24: How do I get my payout verification cleared faster?">
  A: To avoid delays:

  * Submit clear, properly formatted documents
  * Avoid repeated messages/tags in Discord — this slows the queue
  * Mention if you've crossed the payout threshold or have urgent timelines
  * DM your registered email ID if asked

  <Tip>
    Most payout reviews are completed within 72 working hours, unless there's an issue with your submission.
  </Tip>
</Accordion>

<Accordion title="Q25: What if I chose the wrong form (W-8BEN vs W-8BEN-E)?">
  A: These forms are tied to your entity type:

  * W-8BEN is for Individuals
  * W-8BEN-E is for Organizations

  If you submitted the wrong one:

  * Contact support to reset your form.
  * Fill and upload the correct form type.
  * Ensure the PAN is in the correct field (Line 6a for individuals).

  <Tip>
    Refer to IRS official form guides if confused.
  </Tip>
</Accordion>

<Accordion title="Q26: I have a GST with a trade name. Is that considered an organization?">
  A: No. If you're registered with a GST as an individual (sole proprietor), you're still considered an Individual.

  ✅ Use W-8BEN
  ✅ Select "Individual" in the registration
  ❌ Do not fill W-8BEN-E or select "Organization" unless you're a registered legal entity
</Accordion>

<Accordion title="Q27: My account was deboarded. Can I just create a new one?">
  A: Creating a new account to bypass a previous deboarding is not allowed. If you attempt this:

  * The new account may also be flagged or rejected
  * Risk decisions carry over across signups if the underlying business or person is the same

  <Tip>
    If you believe you were wrongly deboarded, email [compliance@dodopayments.com](mailto:compliance@dodopayments.com) with your case.
  </Tip>
</Accordion>

<Accordion title="Q28: How does Dodo Payments handle GST for Indian SaaS merchants?">
  A: Dodo Payments automatically calculates and applies **GST** for Indian merchants based on your customer's location.
</Accordion>

<Accordion title="Q29: Does Dodo Payments handle international sales?">
  A: Yes, Dodo Payments supports international sales and manages all associated compliances.
</Accordion>

<Accordion title="Q30: Are address data such as city, state, zipcode fields mandatory? Can I exclude requesting those values from my customer?">
  A: Yes they are mandatory as we are the Merchant of Record and generate invoices, file taxes and ensure all purchases are compliant we require the Merchant's billing address. You can implement our API based checkout flow where you can pre-fill the customer's details if you have already collected them to ensure a smoother experience for your customers but we will need these details for every purchase.
</Accordion>

<Accordion title="Q31: Do I need to file taxes in the US if I sell there?">
  A: Not directly. Dodo Payments acts as the Merchant of Record, handles customer-side tax, and remits where applicable. You still need to:

  * File income tax in your home country (e.g., India)
  * Submit W-8BEN(-E) to avoid default 30% US withholding
</Accordion>

<Accordion title="Q32: I don't know whether to fill W-8BEN or W-8BEN-E — help?">
  A: Use the following logic:

  | You are...                   | Form to Submit | Merchant Type |
  | ---------------------------- | -------------- | ------------- |
  | Sole Proprietor, Freelancer  | W-8BEN         | Individual    |
  | Pvt Ltd, LLP, Registered Org | W-8BEN-E       | Organization  |

  Still unsure?

  * If your bank account is under your name, you're likely an individual.
  * If it's under a company, you're an organization.
</Accordion>

<Accordion title="Q33: I am a US Citizen or Organisation registered in the United States. Which tax form am I supposed to fill?">
  A: All US Citizens, and entity holders in the US must fill the W-9 Tax Form in the name of the registered entity or the Individual.
</Accordion>

<Accordion title="Q34: Do I need a PAN or GST to receive payments?">
  A: For Individuals, PAN is a mandatory requirement (for KYC and tax purposes). For registered businesses, either Business PAN or GSTIN can be submitted. GST is optional unless you exceed the registration threshold or want input credit
</Accordion>

<Accordion title="Q35: Should I submit W-8BEN or W-8BEN-E?">
  A: Use the form based on your merchant type:

  * **Individual/Sole Proprietor**: W-8BEN
  * **Private Limited or LLP**: W-8BEN-E

  If you have a Udyam/MSME certificate but operate with a personal bank account, you're still considered an Individual.
</Accordion>

<Accordion title="Q36: If Dodo handles taxes, why do I need to file W-8BEN(-E)?">
  A: Dodo handles sales tax for your customers. W-8BEN(-E) is needed for withholding tax on payouts to you.

  <Note>
    Filing W-8BEN correctly can help you avoid double taxation under India–US tax treaties.
  </Note>
</Accordion>

## Payments & Transactions

<Accordion title="Q37: What types of payments can I accept with Dodo Payments?">
  A: Dodo Payments supports a variety of payment methods, including **credit cards**, **debit cards**, and **digital wallets**. We also support one-time payments and recurring subscription payments for digital products.
</Accordion>

<Accordion title="Q38: How can I track payment statuses?">
  A: You can track the status of payments from the **Payments** section of your dashboard. Each transaction is listed with a status indicator: **In Progress**, **Failed**, or **Successful**.
</Accordion>

<Accordion title="Q39: What should I do if a payment fails?">
  A: If a payment fails, check the **Payment Details Page** for more information. Common reasons include incorrect payment details, insufficient funds, or network issues. You can resend the payment link to your customer to retry the payment.
</Accordion>

<Accordion title="Q40: Does the chargeback apply for business even if my business has a no refund policy?">
  Yes. Even if you state No refunds in your terms or website, chargebacks are largely governed by the cardholder's bank and card network rules (e.g., Visa, Mastercard). A No refund policy does not override the card network's dispute resolution process. If a customer files a dispute, your business is still subject to a chargeback investigation. This means you must respond with evidence (proof of delivery, usage logs, terms acceptance, etc.) to fight or manage the dispute. If the customer's bank decides in favor of the cardholder, the chargeback fee and transaction reversal will apply regardless of your stated policy. We recommend having clear communications, tracking customer usage, and providing compelling evidence when chargebacks arise.
</Accordion>

<Accordion title="Q41: Why is payment.status sometimes null?">
  A: payment.status can be null for a short time:

  * Right after creation but before processing completes
  * During subscription billing failures or retries

  Eventually, it becomes one of: succeeded, failed, or cancelled.

  <Note>
    Use webhook events like payment.succeeded or payment.failed for more reliable status tracking.
  </Note>
</Accordion>

<Accordion title="Q42: Why is product_cart null even though it's a checkout?">
  A:

  * For subscription payments, product\_cart is empty because there's no one-time item being bought
  * product\_cart is only populated for one-time payments
</Accordion>

<Accordion title="Q43: Why was my real card blocked during testing?">
  A: You likely tested in Live Mode instead of Test Mode.

  Live payments:

  * Use real money
  * Go through real banks
  * May be flagged as suspicious if volume is low or inconsistent

  ✅ Always test using:

  * Test Mode in the dashboard
  * Test card numbers provided in the documentation
</Accordion>

<Accordion title="Q44: My customer completed payment but I didn't receive webhook?">
  A: Checklist:

  * Confirm webhook is configured in Dashboard > Developers -> Webhooks
  * Check if webhook is failing silently due to non-2xx response
  * Check logs: was a 429 or timeout returned?
</Accordion>

<Accordion title="Q45: Why is my dashboard showing success, but my app didn't update?">
  A: It's likely you're relying solely on redirect\_url query params and not handling:

  * Webhooks
  * API confirmation call

  ✅ Fix:

  * Always listen for payment.succeeded webhook
  * Or query the API to confirm transaction after redirect
</Accordion>

<Accordion title="Q46: I'm not seeing UPI as a payment option — why?">
  A: This can happen for several reasons:

  * The billing country wasn't set to IN
  * UPI was not enabled for your business

  If you're a Non Indian Merchant, UPI won't appear for your customers.
</Accordion>

<Accordion title="Q47: Does Dodo support UPI for subscriptions?">
  A: Not currently. UPI is supported for one-time payments, but subscriptions rely on card mandates — UPI mandates are still in progress.
</Accordion>

<Accordion title="Q48: How do I collect billing details without passing them in API?">
  A: If you want users to enter billing info themselves:

  * Use static links, which automatically collect billing
  * For dynamic flows, you must collect info manually and pass it in the API

  There's no built-in UI yet for collecting billing during dynamic link creation.
</Accordion>

<Accordion title="Q49: What's the difference between static and dynamic payment links?">
  A: **Static payment links** are no-code options meant for quick use. They:

  * Are configured from the dashboard
  * Automatically collect billing info
  * Cannot be customized per customer/session

  **Dynamic payment links** are created via API. They:

  * Require you to pass billing info explicitly
  * Can be customized in real-time (price, user ID, redirect URL, etc.)

  <Tip>
    If you don't want to write code, go with static links. If you need flexibility or want to build custom workflows, use dynamic links.
  </Tip>
</Accordion>

<Accordion title="Q50: Will I get two webhook events when someone starts a subscription?">
  A: On the first successful subscription payment, you will typically receive these three webhook if no trial period is involved:

  * `subscription.created` webhook
  * `payment.succeeded` webhook
  * `subscription.renewal` webhook
</Accordion>

<Accordion title="Q51: What does subscription.cancelled_at mean? Is it a scheduled cancellation?">
  A: Dodo supports both immediate and scheduled cancellations.

  When a cancellation request is made:

  * **Immediate cancellation**: The subscription.cancelled\_at timestamp is set immediately and the subscription ends at that moment
  * **Scheduled cancellation**: Use the `cancel_at_next_billing_date` parameter in the subscription patch API to cancel at the end of the current billing period
</Accordion>

<Accordion title="Q52: When does a subscription get charged?">
  A: Dodo Payments charges the customer immediately upon subscription creation if the product does not have a trial period.

  <Note>
    For Indian cards and if there is a free trial is configured for the product, the payment will take 24 hours to process after the trial ends. This is due to RBI regulation.
  </Note>
</Accordion>

## Payouts & Bank Integration

<Accordion title="Q53: How do payouts work with Dodo Payments?">
  A: Payouts are the transfer of your collected sales revenue to your linked bank account. Payouts are processed by the 15th of every month for previous month's billing cycle barring any special circumstances like bank holidays or emergencies
</Accordion>

<Accordion title="Q54: What is the minimum threshold amount after fees & taxes to process payouts?">
  A: Minimum Payout Threshold is \$100 after platform fees & taxes deduction. You can see the exact wallet amount in your dashboard in the [payouts section](https://app.dodopayments.com/business/payouts).
</Accordion>

<Accordion title="Q55: How do I link my bank account to receive payouts?">
  A: To link your bank account, navigate to the **Payout Settings** section of your dashboard and click **Add Bank Account**. You'll need to enter your bank details and verify the account.
</Accordion>

<Accordion title="Q56: Can I track the status of my payouts?">
  A: Yes, you can track your payout status from the **Payouts** section of the dashboard.&#x20;
</Accordion>

<Accordion title="Q57: What are payout fees and how much are they?">
  A: Payout fees refer to the transaction costs for transferring the money we've collected from your customers to your bank account. We constantly make improvements to reduce the payout fee by partnering with local partners in your country. Please refer to the [pricing and fee structure](/miscellaneous/pricing-and-fee-structure#2-payout-fees) for detailed information.
</Accordion>

<Accordion title="Q58: I received a &#x22;payout processed&#x22; email — when will the funds arrive?">
  A: Payouts usually take 1–2 business days to reflect in your bank account.

  <Note>
    Transfers don't settle on weekends or bank holidays. If your payout was processed on Friday, expect it by Monday or Tuesday.
  </Note>
</Accordion>

<Accordion title="Q59: How do I add Payoneer as a payout account?">
  A: Just enter your Payoneer bank details in the Bank Info Form under your dashboard. There's no separate Payoneer integration yet.
</Accordion>

<Accordion title="Q60: Can I receive payouts to a Payoneer account?">
  A: Yes. You can receive payouts via Payoneer by:

  * Entering your Payoneer account details in the Bank Info Form on the Dodo dashboard
  * Ensure your account is approved and supports USD or the currency you're withdrawing

  There is no dedicated Payoneer integration — it is treated as a regular bank account.
</Accordion>

<Accordion title="Q61: My bank info and compliance form are still in review — what should I do?">
  A: Just wait. Our compliance team typically reviews forms within 1–2 working days. If it's urgent:

  * mail to [support@dodopayments.com](mailto:support@dodopayments.com)
</Accordion>

<Accordion title="Q62: What happens if my payout day falls on a Friday or weekend?">
  A: If your payout day is on a Friday, it is usually processed on the same day. However:

  * If there's a bank holiday or weekend, it may be delayed to the next working day (usually Monday).
  * The exact timing may depend on your bank's processing rules.

  <Note>
    If in doubt, check your dashboard or ask support with your registered email.
  </Note>
</Accordion>

<Accordion title="Q63: How can I expedite payout compliance if I have an urgent launch or ad campaign planned?">
  A: If you've submitted everything and are awaiting payout compliance:

  * Mention your urgency clearly in support chats (e.g., live launch, paid campaigns).
  * Include your business ID and email.
  * Avoid spamming or tagging multiple team members — this may slow down the queue.
</Accordion>

<Accordion title="Q64: I submitted the wrong bank account details. How do I update them?">
  A: If you've entered incorrect bank details:

  * Contact support via Intercom or Discord or Mail.
  * DM your email ID and request a manual reset of the bank verification section if you reach through Discord.
  * Wait for the compliance team to reopen the section for you to re-submit.

  <Note>
    Editing bank details directly in the dashboard may not be allowed post-submission.
  </Note>
</Accordion>

<Accordion title="Q65: Can I use my personal bank account if I have a registered company?">
  A: No. If you're registered as a company or legal entity, you must use the entity's bank account.
</Accordion>

<Accordion title="Q66: My country doesn't use SWIFT codes. How will that affect my verification?">
  A: If your country does not issue SWIFT codes, Dodo Payments may accept alternative documentation or generic SWIFT formats.

  What to do:

  * Contact support and explain the situation.
  * Submit any official bank document confirming your account details and the absence of a SWIFT code.
</Accordion>

<Accordion title="Q67: My country doesn't use SWIFT codes. Will this block my verification?">
  A: No, but you must:

  * Explain your situation to support
  * Provide bank documents that confirm your account number, holder name, and that no SWIFT is issued
  * Sometimes a generic placeholder SWIFT may be used (based on country)

  <Note>
    This case will go through manual compliance review. DM your email ID or write to [compliance@dodopayments.com](mailto:compliance@dodopayments.com) for escalation.
  </Note>
</Accordion>

## Invoicing & Reports

<Accordion title="Q68: Does Dodo Payments generate invoices automatically?">
  A: Yes, Dodo Payments automatically generates **invoices** for every successful transaction. These invoices include all necessary details such as tax breakdowns, customer information, and product details.
</Accordion>

<Accordion title="Q69: Can I customize the invoices?">
  A: Yes, you can customize the look of your invoices by adding your **company logo and brand name.** You can manage these settings in the Business Profile section of your dashboard.
</Accordion>

<Accordion title="Q70: How do I access or download an invoice?">
  A: You can view or download invoices from the **Invoices** section of the dashboard. Each payment will have an associated invoice that can be downloaded as a **PDF**.
</Accordion>

<Accordion title="Q71: How do I view reports on my transactions and payouts?">
  A: You can generate detailed reports from the **Reports** section of your dashboard. These reports include data on transactions, refunds, and payouts, which you can filter by date and export in CSV format.
</Accordion>

<Accordion title="Q72: Can I integrate Dodo Payments with my existing website or platform?">
  A: Yes, Dodo Payments offers **API integration** for seamless integration with your website or platform. You can find API documentation and guides in the **Developer Section** of your dashboard.
</Accordion>

## Refunds & Disputes

<Accordion title="Q73: How do I issue a refund?">
  A: To issue a refund, go to the **Payment Details Page** of the transaction you want to refund and click the **Initiate Refund** button. You can issue a **full** or **partial** refund, provided the payment meets the refund eligibility rules.
</Accordion>

<Accordion title="Q74: How long does it take for a customer to receive their refund?">
  A: Once a refund is initiated, the customer will typically receive the refunded amount within **3-5 business days**, depending on the payment method and their bank.
</Accordion>

<Accordion title="Q75: I'm facing a dispute or chargeback. What can I do?">
  A: If a chargeback is filed against you:

  * You may lose both the transaction amount and a dispute fee
  * You can submit evidence of product delivery, usage logs, or customer communication
  * However, the final decision lies with the customer's issuing bank

  <Note>
    Email [support@dodopayments.com](mailto:support@dodopayments.com) with:

    * Dispute ID
    * Payment ID
    * Relevant proof
  </Note>
</Accordion>

<Accordion title="Q76: The customer disputed the charge after using the service. Can I appeal this?">
  A: Yes — you can:

  * Share documentation (chat logs, usage records, delivery confirmation)
  * Explain that the service was fulfilled
  * Request a waiver of the dispute fee if it's a first-time issue or if fraud is provable

  <Tip>
    There's no guarantee the fee will be waived, but ou team reviews each case on merit.
  </Tip>
</Accordion>

## Webhooks & Integration

<Accordion title="Q77: My webhook isn't receiving a POST request, only a GET. Why?">
  A: You're likely confusing the redirect URL with the webhook URL. A redirect URL is where the user is sent after a payment, and it may contain `?subscription_id=...&status=active` in a GET request. This is not your webhook.

  To receive structured POST payloads from Dodo Payments:

  * Set up a webhook under Dashboard → Developers → Webhooks
  * Ensure the URL accepts POST requests and verifies the signature

  <Note>
    You can have both a webhook and a redirect URL — they serve different purposes.
  </Note>
</Accordion>

<Accordion title="Q78: I get a 401 Unauthorized error using the Python SDK. Why?">
  A: You likely forgot to pass the correct environment when initializing the DodoPayments client.

  <Check>
    **Fix:**

    ```python  theme={null}
    client = DodoPayments(
        bearer_token="your_api_key",
        environment="live_mode"  # or "test_mode"
    )
    ```
  </Check>
</Accordion>

<Accordion title="Q79: Is there a way to manually trigger a webhook event for testing?">
  A: You can do it through the webhook dashboard. Go to Dashboard -> Developers -> Webhooks
</Accordion>

<Accordion title="Q80: What's the difference between webhook and redirect URL?">
  A:

  * **Webhook URL**: Configured in dashboard. Receives POST payloads about events.
  * **Redirect URL**: Sent in the payment API request. Sends user back to your app with query params (`?status=success`).

  <Tip>
    Use webhooks to automate things like DB updates, and redirects to show thank-you screens.
  </Tip>
</Accordion>

<Accordion title="Q81: Why didn't I receive the product id in the payment.succeeded webhook for a subscription product?">
  A: The payment.succeeded webhook event for subscription products does not include a product\_id. Instead, it provides the `subscription_id` associated with the subscription, along with other relevant details.
</Accordion>

<Accordion title="Q82: How do I verify the webhooks I receive are actually from dodo payments and not from any malicious actors?">
  A: To verify that the webhooks you receive are genuinely from Dodo Payments and not from malicious actors, follow these steps:

  1. **Check the Signature**: Each webhook sent by Dodo Payments includes a unique signature in the **`webhook-signature`** header. This signature is generated using your webhook's secret key and the payload of the event.
  2. **Retrieve the Secret Key**: Ensure you have the secret key for your webhook, which can be found in your Dodo Payments dashboard under the Webhooks settings.
  3. **Recompute the Signature**: Use the same signing algorithm (HMAC-SHA256) as Dodo Payments to compute the signature on your server. Use the payload of the webhook and your webhook secret key.
  4. **Compare Signatures**: Compare the recomputed signature with the one provided in the **`webhook-signature`** header. If they match, the webhook is authentic; if not, it should be rejected.
  5. **Use HTTPS**: Ensure your webhook endpoint uses HTTPS to secure communication and prevent tampering during data transmission.
     By implementing these steps, you can confidently verify the authenticity of webhooks sent by Dodo Payments.

  <Tip>We recommend using packages provided by StandardWebhooks to verify signature and not construct it by yourself.</Tip>
</Accordion>

<Accordion title="Q83: Why am I receiving a subscription.renew webhook even for the first month payment?">
  A: For subscriptions, `subscription.renew` will be triggered whenever the subscription amount is deducted. So yes, this is expected behavior.
</Accordion>

<Accordion title="Q84: How can I test webhooks locally?">
  A: To test webhooks locally, you can follow these steps:

  1. **Use a Tunneling Tool**: Tools like [ngrok](https://ngrok.com/), [LocalTunnel](https://localtunnel.github.io/www/), or [Cloudflare Tunnel](https://developers.cloudflare.com/cloudflare-one/connections/connect-apps/) can expose your local server to the internet. This provides a public URL that Dodo Payments can use to send webhook events to your local environment.
  2. **Set Up the Webhook Endpoint**: Create a webhook endpoint in your local application to handle incoming webhook events. Ensure it listens for HTTP POST requests.
  3. **Configure the Webhook in Dodo Payments**: Go to your Dodo Payments dashboard, navigate to the Webhooks settings, and update the webhook URL to the public URL generated by the tunneling tool.
</Accordion>

<Accordion title="Q85: Why is my webhook not being called after payment?">
  A: Check the following:

  * You did not confuse the webhook URL with redirect URL
  * The webhook is configured under Developers > Webhooks
  * Your URL accepts POST requests and responds with 2xx
  * Signature validation (if enabled) is implemented correctly

  If you only see GETs with ?status=success, you are debugging the redirect URL, not the webhook.
</Accordion>

<Accordion title="Q86: Is it safe to rely on status=success in URL query params?">
  A: No. While it's a quick win, URL query params can be tampered with.

  If you're using redirect\_url?status=success:

  * Double-validate the transaction with an API call
  * Or wait for payment.succeeded webhook

  <Tip>
    Treat redirects as user-facing confirmations, not proof of payment.
  </Tip>
</Accordion>

## Testing & Local Development

<Accordion title="Q87: Can I test subscriptions in Test Mode?">
  A: Yes — subscriptions can be tested fully in Test Mode.

  Just don't use real card numbers.
</Accordion>

<Accordion title="Q88: How do I switch between Test and Live Mode?">
  A:

  * On your Dodo dashboard, look for a Test Mode toggle.
  * Switch it ON to use test API keys and simulate payments.

  You'll see "Test Mode" labels on all screens. Make sure to use the corresponding API key or environment when switching.
</Accordion>

<Accordion title="Q89: Can I use real customer data in Test Mode?">
  A: Yes, but keep in mind:

  * No real money will be transferred
  * You can simulate webhooks and flows
  * Card details should still be test cards

  This helps debug flows end-to-end without any financial impact.
</Accordion>

<Accordion title="Q90: I'm getting: &#x22;You must provide a mandate for off-session card payments&#x22;">
  A: It means:

  * An Indian Card is used to make the payment but the billing country is not set as IN.
  * You likely passed an incorrect billing country.
</Accordion>

## Support & Communication

<Accordion title="Q91: How do I contact support?">
  A: You can contact our support team by sending an email to [**support@dodopayments.com**](mailto:support@dodopayments.com). We are here to assist you with any issues or questions you may have.
</Accordion>

<Accordion title="Q92: My support messages are getting no response. What should I do?">
  A: If you've messaged in:

  * Intercom with no response
  * Discord without acknowledgement

  Then:

  * Escalate via [compliance@dodopayments.com](mailto:compliance@dodopayments.com) or [support@dodopayments.com](mailto:support@dodopayments.com) with subject line Urgent: No Response – \[Your Email]
</Accordion>

## Security & Fraud Prevention

<Accordion title="Q93: How does Dodo Payments protect my business from fraud?">
  A: Dodo Payments uses **real-time fraud detection** to monitor suspicious transactions. We also comply with **PCI-DSS standards** to ensure that all payment information is encrypted and secure.
</Accordion>

<Accordion title="Q94: Is my customer data secure with Dodo Payments?">
  A: Yes, Dodo Payments uses **data encryption** and **tokenization** to protect sensitive information. We ensure that customer payment data is never stored directly and remains secure during transactions.
</Accordion>


# Feature Prioritization Tools
Source: https://docs.dodopayments.com/miscellaneous/gtm-tools/feature-prioritization-tool

The **Feature Prioritization Tool** helps SaaS product teams prioritize feature development using the **RICE (Reach, Impact, Confidence, Effort) framework**. By assigning a RICE score to each feature, this tool ensures that high-impact, low-effort features are prioritized, maximizing development efficiency and business value.

## **Start Prioritizing Features for Maximum Impact**

Use the **Feature Prioritization Tool** to optimize product development and ensure your SaaS team focuses on features that drive engagement, user satisfaction, and revenue growth.

Link: [https://dodopayments.com/tools/product-prioritization-tool](https://dodopayments.com/tools/product-prioritization-tool)

## **Why Feature Prioritization is Essential for SaaS Businesses**

Prioritizing product features ensures that development teams focus on features with the highest user impact while efficiently managing resources. A structured prioritization process helps:

1. Improve customer satisfaction by delivering high-value features first
2. Maximize ROI on development efforts
3. Reduce time-to-market for essential features
4. Align product development with business objectives

By leveraging data-driven prioritization, SaaS companies can build products that drive engagement, retention, and revenue growth.

## **Key Input Metrics**

### **1. Reach Score (1-10)**

Represents the estimated number of users who will benefit from the feature within a specific period. High-reach features impact a large portion of the user base.

### **2. Impact Score (1-10)**

Measures the feature’s value to affected users. Higher impact scores indicate features that significantly enhance the user experience or solve a critical problem.

### **3. Confidence Level (%)**

Reflects the certainty of reach and impact estimates. A higher confidence percentage ensures that decisions are based on reliable data and user insights.

### **4. Effort Score (1-10)**

Represents the estimated resources required to implement the feature, including development time, personnel, and budget. Features requiring lower effort with high impact should be prioritized.

## **How the Feature Prioritization Tool Works**

Using the **RICE framework**, the tool ranks product features based on their potential value vs. effort. It provides:

1. A structured scoring system to evaluate feature importance
2. Automated ranking to ensure optimal resource allocation
3. Data-driven prioritization for faster decision-making

The tool generates a prioritized feature list, ensuring that the highest-impact features with the lowest resource investment are developed first.

## **Key Output Metrics**

### **1. Prioritized Feature List**

A feature ranking list is generated based on the RICE score, displayed in descending order. This list helps SaaS product teams focus on the most impactful features first, ensuring efficient roadmap planning.

## **Frequently Asked Questions (FAQs)**

### **FAQs:**

1. **What is the RICE framework?**
   * The RICE framework is a prioritization method used to rank product features based on four factors: Reach (how many users it will affect), Impact (how much value it provides), Confidence (how sure you are of the estimates), and Effort (how much work it requires).
2. **How do I calculate Reach for a feature?**
   * Reach is the estimated number of users who will benefit from the feature. For example, if a feature impacts 1,000 users per month, your reach score would reflect this number.
3. **Why is Confidence important in the RICE framework?**
   * Confidence helps ensure that you’re making decisions based on reliable estimates. If you’re unsure about the impact or reach of a feature, a lower confidence score will prevent you from over-prioritizing a feature that may not deliver the expected value.
4. **How do I decide which features to prioritize?**
   * Features with the highest RICE scores should be prioritized first because they offer the most value relative to the effort required. This ensures your team focuses on tasks that deliver maximum results quickly.
5. **What should I do if two features have the same RICE score?**
   * If two features have the same RICE score, consider qualitative factors such as strategic importance, user feedback, or alignment with long-term business goals. You can also reassess confidence levels or adjust the impact estimate to break the tie.


# Freemium Model
Source: https://docs.dodopayments.com/miscellaneous/gtm-tools/freemium-model

The Freemium Model ROI Analysis Tool helps SaaS businesses evaluate the effectiveness and financial viability of a freemium strategy. It provides insights into the costs associated with supporting free users and the revenue generated from conversions to paid plans. This tool enables businesses to assess whether their freemium model is sustainable and profitable.

## **Start Optimizing Your Freemium Strategy Today**

Evaluate your freemium model’s profitability with the Freemium Model ROI Calculator.

Link: [https://dodopayments.com/tools/freemium-model-calculator](https://dodopayments.com/tools/freemium-model-calculator)

Make data-driven decisions to maximize conversions and revenue!

## Importance of ROI Analysis for Freemium Models

Freemium models attract a large user base by offering free access to basic features, with the expectation that a percentage of users will convert to paid plans. However, if conversion rates are too low or operational costs are too high, the free tier can become unsustainable. Understanding the ROI of a freemium strategy is critical for:

* Evaluating the financial impact of supporting free users.
* Optimizing conversion strategies to increase paid users.
* Identifying cost inefficiencies and areas for improvement.
* Enhancing pricing models to maximize revenue potential.

## **Key Metrics Analyzed**

This tool provides insights into the following key factors affecting freemium profitability:

### **1. Free User Base**

Understanding the size of the free user base is essential, as these users form the primary pool for potential paid conversions.

### **2. Operational Costs**

The costs associated with supporting free users, including server infrastructure, customer support, and product maintenance, directly impact the financial sustainability of a freemium model.

### **3. Free-to-Paid Conversion Rate**

The percentage of free users upgrading to paid plans is a critical indicator of monetization success. A low conversion rate may suggest issues with feature differentiation, pricing, or user engagement.

### **4. Paid User Revenue & Costs**

Revenue generated from paid subscribers must offset both acquisition costs and the cost of maintaining free users. Understanding the balance between these factors ensures long-term profitability.

## **How This Tool Helps SaaS Businesses**

By analyzing these metrics, the Freemium Model ROI Analysis Tool enables businesses to:

1. Assess the financial impact of free users and determine if the model is sustainable.
2. Optimize the free-to-paid conversion funnel to improve monetization.
3. Identify opportunities to reduce costs while maintaining product quality.
4. Fine-tune pricing and feature differentiation to increase revenue.

## **Strategic Considerations**

* **ROI (Return on Investment)**: The tool provides an ROI percentage, showing the profitability of your freemium model. A positive ROI indicates that your free users are converting into paying customers at a rate that covers your costs and generates profit.

If the analysis indicates a negative ROI, businesses may need to:

* Refine pricing models by adjusting free and premium feature allocations.
* Enhance product value to improve user retention and encourage upgrades.
* Reduce operational costs associated with maintaining free users.
* Optimize conversion tactics, such as targeted promotions and in-app nudges.

### **FAQs:**

1. **What is a good conversion rate for freemium models?**
   * A typical conversion rate for freemium models is between 2% and 5%, but it can vary depending on your product and market. Higher conversion rates indicate that your free users are finding enough value to upgrade to a paid plan.
2. **How do I reduce the costs of supporting free users?**
   * You can reduce costs by optimizing server resources, automating customer support for free users, and limiting the features available in the free tier to reduce usage costs.
3. **What are the risks of a freemium model?**
   * The biggest risk is that too many users stay on the free plan without converting to paid plans. This can lead to high costs without generating sufficient revenue. Balancing the value of the free tier and making the upgrade path attractive is key.
4. **How can I improve my freemium conversion rate?**
   * You can improve conversion by offering clear value in the paid tiers, such as premium features, better support, or advanced analytics. Offering timely nudges to ask the user to upgrade may push the conversion
5. **What should I do if my freemium ROI is negative?**
   * If your freemium ROI is negative, it’s important to reevaluate the value you’re offering in the free tier. Consider reducing the free features or increasing the incentives to upgrade to a paid plan to make your strategy more profitable.


# SaaS KPI Measurement
Source: https://docs.dodopayments.com/miscellaneous/gtm-tools/saas-kpi-measurement

The SaaS KPI Measurement Tool enables SaaS businesses to monitor their key performance indicators (KPIs) such as Annual Recurring Revenue (ARR), Churn Rate, and Customer Lifetime Value (CLTV). By consolidating critical financial metrics in a single dashboard, businesses can gain insights into growth trends, customer retention, and long-term profitability.

## **Start Tracking Your SaaS KPIs Today**

Gain valuable business insights with the **SaaS KPI Measurement Tool**.

Link: [https://dodopayments.com/tools/saas-kpi-measurement](https://dodopayments.com/tools/saas-kpi-measurement)

**Optimize revenue, monitor churn, and scale with confidence!**

## **Why KPI Measurement is Essential for SaaS Businesses**

Accurate KPI tracking helps SaaS companies:

1. Understand monthly and annual revenue trends
2. Identify customer retention challenges and reduce churn
3. Forecast long-term financial performance
4. Optimize pricing and revenue models
5. Improve customer lifetime value (CLTV) and ROI

Tracking these KPIs consistently ensures better decision-making and business sustainability.

## **Key Input Metrics**

To generate accurate SaaS KPIs, the tool requires the following inputs:

### 1. Monthly Recurring Revenue (MRR)

The total recurring revenue generated per month from customer subscriptions. This metric is the foundation for calculating ARR and CLTV.

### 2. New Customers Added This Month

The number of new customers acquired during the current month. This input is essential for tracking growth and understanding customer acquisition effectiveness.

### 3. Customers Last Month

The total customer base at the start of the month. This metric is used to assess churn rate and retention trends.

### 4. Current Customer Base This Month

The number of active customers at the end of the month. This figure helps determine if the company is retaining or losing customers.

### 5. Average Customer Retention Period

The average length of time a customer remains subscribed (in months or years). This is crucial for calculating CLTV and evaluating long-term revenue potential.

## **How the SaaS KPI Measurement Tool Works**

The tool performs real-time calculations based on the provided inputs and generates key SaaS metrics:

1. **ARR Calculation** – Estimates Annual Recurring Revenue using MRR.
2. **Churn Rate Calculation** – Determines customer retention trends over time.
3. **CLTV Calculation** – Evaluates customer lifetime value to measure revenue potential per customer.

By consolidating these KPIs, the tool provides a comprehensive performance overview, allowing businesses to identify opportunities for growth and improvement.

## **Frequently Asked Questions (FAQs)**

1. **What is a good churn rate for a SaaS business?**
   * A good churn rate for SaaS businesses varies depending on the industry but it typically falls below 10%. Lower churn means better customer retention, which directly impacts revenue stability. If your churn rate is higher, it may indicate issues with product fit or customer satisfaction.
2. **Why is tracking MRR important for SaaS companies?**
   * MRR provides a clear, predictable revenue stream that you can count on month over month. It helps with financial forecasting, budgeting, and measuring the success of marketing and sales strategies.
3. **How can I increase my CLTV?**
   * You can increase CLTV by improving customer retention, upselling customers to higher pricing tiers, and providing exceptional customer service. Happy customers are likely to stick around longer and spend more.
4. **What’s the difference between MRR and ARR?**
   * MRR represents your monthly recurring revenue, while ARR is the annualized version of MRR. ARR provides a longer-term perspective on your recurring revenue, making it easier to assess yearly performance.
5. **Why should I monitor churn rate closely?**
   * Churn rate directly affects your bottom line. High churn means that you’re losing customers faster than you’re acquiring new ones, which can lead to negative revenue growth. Monitoring churn helps you identify areas for improvement, like product enhancements or better customer support.


# SaaS Pricing calculator
Source: https://docs.dodopayments.com/miscellaneous/gtm-tools/saas-pricing-calculator

The SaaS Pricing Calculator is designed to help SaaS businesses determine the ideal pricing strategy for their software products. Setting the right price is critical for remaining competitive, covering operational costs, and maximizing profitability. This tool enables businesses to explore different pricing models, including competitor-based, cost-based, and value-based pricing, to develop a pricing structure that aligns with market trends and customer expectations.

## **Optimize Your SaaS Pricing Strategy Today**

Use the **SaaS Pricing Calculator** to develop a pricing model that maximises profitability, competitiveness, and customer acquisition.

Link: [https://dodopayments.com/tools/saas-pricing-calculator](https://dodopayments.com/tools/saas-pricing-calculator)

**Find the perfect balance between cost, value, and market positioning!**

## **Why Pricing Strategy is Crucial for SaaS Businesses**

Pricing directly impacts customer acquisition, revenue growth, and profitability. A well-defined pricing strategy ensures:

1. **Competitive positioning** – Aligns your product pricing with market expectations
2. **Sustainable profitability** – Covers costs while maintaining profit margins
3. **Value-based pricing** – Ensures customers pay according to the benefits they receive

Choosing the right pricing strategy allows SaaS businesses to balance affordability, perceived value, and business growth.

## **Key Input Metrics**

### **1. Competitor Pricing**

Understanding the price points of similar SaaS solutions in the market helps in positioning your product effectively. Competitor pricing acts as a reference, enabling businesses to decide whether to price above, below, or at market rates.

### **2. Product Value Addition (%)**

Represents the relative value your product provides compared to competitors. If your software offers 30% more features or efficiency, pricing can be adjusted accordingly.

### **3. Cost per User**

Includes operational costs such as cloud hosting, development, maintenance, and support services. This metric helps in setting a profitable baseline price to ensure sustainability.

### **4. Estimated User Base**

Defines the projected number of users subscribing to the SaaS product over a set period. This estimation helps determine revenue potential and optimal pricing.

### **5. Target Revenue**

Businesses must set annual or monthly revenue goals to ensure pricing strategies align with profitability objectives. This metric helps determine minimum pricing thresholds.

### **6. Estimated Value for the Customer**

Assesses the financial impact or time savings the product delivers to users. For example, if the software saves businesses \$10,000 annually, pricing should reflect this value-based approach.

## **How the SaaS Pricing Calculator Works**

This tool enables businesses to compare multiple pricing models and identify the most suitable one based on financial goals, competitive landscape, and customer expectations. It supports:

1. **Competitor-Based Pricing** – Align pricing with industry benchmarks
2. **Cost-Based Pricing** – Ensure pricing covers operational costs and profit margins
3. **Value-Based Pricing** – Charge based on customer-perceived value

By leveraging data-driven pricing strategies, SaaS companies can optimize revenue, enhance customer acquisition, and drive business growth.

## **Key Output Metrics**

### **1. Recommended Price Range**

The tool provides a flexible pricing range, allowing businesses to adjust prices based on market trends and customer feedback. Pricing recommendations typically range between 0.8x and 1.2x the suggested price, ensuring adaptability.

### **2. Tiered Pricing Structure**

A well-defined tiered pricing model maximizes revenue potential by catering to different customer segments. The tool recommends three tiers:

**Basic Tier** – Lower-priced plan for budget-conscious users with essential features.

**Pro Tier** – Standard pricing plan offering a balanced set of features.

**Enterprise Tier** – Premium pricing model with advanced functionalities and personalized support.

## **Frequently Asked Questions (FAQs)**

1. **What is the best pricing strategy for SaaS companies?**
   * There is no one-size-fits-all pricing strategy for SaaS companies. The best approach depends on your product, market, and business goals. Competitor-based pricing helps you align with market rates, cost-based pricing ensures you cover your expenses, and value-based pricing lets you charge based on the perceived value your product delivers to customers.
2. **How do I decide whether to use competitor-based, cost-based, or value-based pricing?**
   * If your market is saturated with similar products, competitor-based pricing can keep you competitive. If you want to ensure profitability, cost-based pricing guarantees your costs are covered. If your product offers significant value to users, value-based pricing allows you to charge based on the results your product delivers, which can lead to higher pricing.
3. **How can I make my SaaS pricing more competitive?**
   * To stay competitive, evaluate your competitors regularly, ensure your pricing reflects the value you provide, and consider offering tiered pricing or freemium models. Adjust your pricing based on user feedback and market trends to ensure you remain competitive.
4. **Why should I offer tiered pricing for my SaaS product?**
   * Tiered pricing allows you to cater to different customer segments, offering basic features at lower prices and premium features at higher prices. This flexibility maximizes your revenue by appealing to both budget-conscious users and those willing to pay for advanced features.
5. **How often should I reevaluate my SaaS pricing?**
   * It’s a good practice to review your pricing strategy at least once a year, or when significant changes occur in your product offerings, market conditions, or customer needs. This ensures your pricing remains competitive and aligned with your business goals.


# SaaS Revenue & Profit Growth
Source: https://docs.dodopayments.com/miscellaneous/gtm-tools/saas-revenue-and-profit-growth

The **SaaS Revenue & Profit Growth Tool** is designed to help SaaS businesses accurately forecast their **financial performance** by analyzing revenue, costs, and growth rates. This tool enables businesses to make data-driven decisions about scaling, hiring, and long-term sustainability. By predicting future revenue and profit trends, SaaS companies can optimize growth strategies and maximize profitability.

Start Forecasting Your Business Growth with **SaaS Revenue and Profit Growth Tool**

**Link:** [https://dodopayments.com/tools/saas-revenue-profit-growth-tool](https://dodopayments.com/tools/saas-revenue-profit-growth-tool)

**Optimize revenue, increase profitability, and scale smarter!**

## **Why Revenue & Profit Growth Projections Matter for SaaS Businesses**

Accurate revenue and profit projections are crucial for SaaS companies to:

1. Plan long-term growth strategies

2. Set realistic revenue and expansion goals

3. Make informed decisions about scaling, hiring, and product development

4. Identify potential financial risks and opportunities

5. Ensure sustainable profitability in an evolving market

By leveraging financial forecasting, SaaS businesses can gain a competitive advantage and minimize unexpected financial hurdles.

## **Key Input Metrics**

To generate precise revenue and profit projections, the tool requires the following key metrics:

### **1. Estimated Annual Revenue**

This is the total revenue generated annually from customer subscriptions. Entering an accurate figure allows the tool to forecast revenue growth trends over multiple years.

### **2. Estimated Annual Costs**

All operational expenses, including software development, hosting, salaries, marketing, and customer support, should be included. Tracking these costs ensures an accurate profitability forecast.

### **3. Revenue Growth Rate**

This is the annual percentage increase in revenue based on customer acquisition, expansion, and pricing adjustments. For example, if you expect a 10% revenue increase yearly, enter this value to project long-term growth.

### **4. Cost Growth Rate**

Expenses grow as the business scales. The cost growth rate estimates how annual costs increase over time, accounting for infrastructure, hiring, and marketing investments.

### **5. Forecast Duration (Number of Years)**

Select the time frame for your financial projections (e.g., 3, 5, or 10 years). Longer projections provide a bigger picture of financial health but should be regularly reviewed for accuracy.

## **How the SaaS Revenue & Profit Growth Calculator Works**

This tool uses real-time calculations based on your revenue, costs, and growth rates to generate financial projections. It provides:

1. **Revenue Growth Forecasts** – Year-over-year revenue increase based on your expected growth rate.
2. **Profitability Analysis** – Calculates net profit by subtracting projected costs from revenue.
3. **Break-even Insights** – Identifies when your business becomes sustainably profitable.
4. **Data-driven Decision Support** – Helps refine pricing, reduce churn, and optimize cost management.

## **Key Output Metrics**

After entering your data, the tool provides detailed insights into your SaaS business’s financial future:

### **1. Revenue Projection**

A year-over-year revenue forecast, estimating how your business will grow based on your revenue growth rate. This projection helps track expansion progress and scalability.

### **2. Profit Projection**

A detailed profit analysis displaying how much revenue remains after accounting for growing operational costs. Monitoring profit growth ensures long-term business sustainability.

## **Frequently Asked Questions (FAQs)**

### **1. Why are revenue and profit projections important for SaaS businesses?**

Revenue and profit forecasts allow SaaS businesses to make informed financial decisions, set realistic goals, and plan growth strategies. Predicting financial trends helps **optimize operations, scale efficiently, and mitigate risks**.

### **2. How accurate are long-term SaaS revenue projections?**

Projections are based on current data and estimated growth rates, but factors like customer churn, market shifts, and operational costs can impact actual outcomes. Regularly updating forecasts ensures greater accuracy.

### **3. What is the difference between revenue growth and profit growth?**

* **Revenue Growth**: Measures total income increase from SaaS subscriptions and customer expansion.
* **Profit Growth**: Accounts for both revenue and costs, reflecting the actual net earnings after expenses. A company may experience revenue growth but lower profits if costs rise significantly.

### **4. How can I increase my SaaS revenue growth rate?**

Boost revenue by:

1. Enhancing customer acquisition strategies
2. Reducing churn with better retention efforts
3. Optimizing pricing models and offering upsells
4. Expanding into new markets or launching new features

### **5. How does cost growth affect SaaS profitability?**

As businesses scale, operational costs (e.g., support, hosting, infrastructure, and marketing) also increase. If costs outpace revenue growth, profitability declines. Monitoring expenses ensures financial stability.


# Help and Support
Source: https://docs.dodopayments.com/miscellaneous/help-support

We understand that navigating a new platform or resolving issues can sometimes require additional support. To ensure a seamless experience, we offer multiple support channels to address all your concerns.

## **Dodo Payments Centralized Support System**

The Dodo Payments Centralized Support System provides a unified support experience, offering multiple channels to assist merchants.

Merchants can access the support system through the "Get Support" icon on the Dodo Payments Dashboard, leading to a dedicated support landing page with four key options:

## 1. AI-Powered Chat Assistance

The Chat with AI feature provides instant, automated support using an AI-powered chatbot. It is designed to assist users by:

* Answering technical and business queries
* Providing guidance on API integration and setup
* Offering navigation support for product documentation

This feature ensures quick resolution of common queries, reducing the need for direct human support.

📌 Best for: Instant self-serve assistance and general troubleshooting.

## 2. Community Support via Discord

The Dodo Payments Discord Community enables merchants to engage with other users and the Dodo Payments team. Through this platform, users can:

* Discuss best practices and share experiences
* Seek peer-to-peer assistance from other merchants
* Engage with the Dodo Payments support team in an interactive environment

This feature fosters a collaborative community-driven support experience.

📌 Best for: Peer support, longer queries and networking with other merchants.

## 3. Dedicated Chat Support

The Chat Support feature provides a direct line to the Dodo Payments support team for more complex or account-specific inquiries. Key aspects include:

* Support is managed via Intercom, where merchants can submit detailed queries.
* Response time is within 24-48 business hours.
* Unresolved tickets will automatically close if there is no user response for 72 hours.

This feature ensures that merchants receive personalized assistance for critical issues requiring human intervention.

📌 Best for: Account-related concerns, technical escalations, and personalized troubleshooting.

## **4. Self-Service Documentation**

The Dodo Payments Documentation Portal serves as a comprehensive resource for merchants looking for detailed product and integration information. The portal includes:

* Detailed feature explanations
* Step-by-step implementation guides
* API documentation and integration manuals
* Frequently Asked Questions (FAQs)

This feature provides structured, self-paced learning for merchants to independently navigate the platform.

📌 Best for: In-depth learning, implementation guidance, and technical documentation.

## **Support Options Overview**

| **Support Channel**   | **Purpose**                                 | **Response Time** |
| --------------------- | ------------------------------------------- | ----------------- |
| **AI-Powered Chat**   | Automated responses, documentation guidance | Instant           |
| **Discord Community** | Peer support, community discussions         | Community-driven  |
| **Chat Support**      | Personalized assistance for complex issues  | 24-48 hours       |
| **Self-Service Docs** | Product guides, API reference, tutorials    | Self-paced        |

Merchants can choose the most suitable support channel based on the complexity of their query and the required response time. For further assistance, visit the Dodo Payments Support Center via the dashboard.


# Countries Eligible for Payment Acceptance
Source: https://docs.dodopayments.com/miscellaneous/list-of-countries-we-accept-payments-from

The list below includes the countries from which we accept payments for our SaaS and digital products.

| #   | ISO Code | Country Name                                 |
| --- | -------- | -------------------------------------------- |
| 1   | AD       | Andorra                                      |
| 2   | AE       | United Arab Emirates                         |
| 3   | AG       | Antigua and Barbuda                          |
| 4   | AI       | Anguilla                                     |
| 5   | AL       | Albania                                      |
| 6   | AM       | Armenia                                      |
| 7   | AO       | Angola                                       |
| 8   | AR       | Argentina                                    |
| 9   | AS       | American Samoa                               |
| 10  | AT       | Austria                                      |
| 11  | AU       | Australia                                    |
| 12  | AW       | Aruba                                        |
| 13  | AX       | Åland Islands                                |
| 14  | AZ       | Azerbaijan                                   |
| 15  | BA       | Bosnia and Herzegovina                       |
| 16  | BB       | Barbados                                     |
| 17  | BD       | Bangladesh                                   |
| 18  | BE       | Belgium                                      |
| 19  | BF       | Burkina Faso                                 |
| 20  | BG       | Bulgaria                                     |
| 21  | BH       | Bahrain                                      |
| 22  | BI       | Burundi                                      |
| 23  | BJ       | Benin                                        |
| 24  | BL       | Saint Barthélemy                             |
| 25  | BM       | Bermuda                                      |
| 26  | BN       | Brunei Darussalam                            |
| 27  | BO       | Bolivia                                      |
| 28  | BQ       | Caribbean Netherlands                        |
| 29  | BR       | Brazil                                       |
| 30  | BS       | Bahamas                                      |
| 31  | BT       | Bhutan                                       |
| 32  | BV       | Bouvet Island                                |
| 33  | BW       | Botswana                                     |
| 34  | BZ       | Belize                                       |
| 35  | CA       | Canada                                       |
| 36  | CC       | Cocos (Keeling) Islands                      |
| 37  | CG       | Republic of the Congo                        |
| 38  | CH       | Switzerland                                  |
| 39  | CI       | Côte d'Ivoire                                |
| 40  | CK       | Cook Islands                                 |
| 41  | CL       | Chile                                        |
| 42  | CM       | Cameroon                                     |
| 43  | CN       | China                                        |
| 44  | CO       | Colombia                                     |
| 45  | CR       | Costa Rica                                   |
| 46  | CV       | Cape Verde                                   |
| 47  | CW       | Curaçao                                      |
| 48  | CX       | Christmas Island                             |
| 49  | CY       | Cyprus                                       |
| 50  | CZ       | Czech Republic                               |
| 51  | DE       | Germany                                      |
| 52  | DJ       | Djibouti                                     |
| 53  | DK       | Denmark                                      |
| 54  | DM       | Dominica                                     |
| 55  | DO       | Dominican Republic                           |
| 56  | DZ       | Algeria                                      |
| 57  | EC       | Ecuador                                      |
| 58  | EE       | Estonia                                      |
| 59  | EG       | Egypt                                        |
| 60  | EH       | Western Sahara                               |
| 61  | ER       | Eritrea                                      |
| 62  | ES       | Spain                                        |
| 63  | ET       | Ethiopia                                     |
| 64  | FI       | Finland                                      |
| 65  | FJ       | Fiji                                         |
| 66  | FK       | Falkland Islands                             |
| 67  | FM       | Micronesia                                   |
| 68  | FO       | Faroe Islands                                |
| 69  | FR       | France                                       |
| 70  | GA       | Gabon                                        |
| 71  | GB       | United Kingdom                               |
| 72  | GD       | Grenada                                      |
| 73  | GE       | Georgia                                      |
| 74  | GF       | French Guiana                                |
| 75  | GG       | Guernsey                                     |
| 76  | GH       | Ghana                                        |
| 77  | GI       | Gibraltar                                    |
| 78  | GL       | Greenland                                    |
| 79  | GM       | Gambia                                       |
| 80  | GN       | Guinea                                       |
| 81  | GP       | Guadeloupe                                   |
| 82  | GQ       | Equatorial Guinea                            |
| 83  | GR       | Greece                                       |
| 84  | GS       | South Georgia and the South Sandwich Islands |
| 85  | GT       | Guatemala                                    |
| 86  | GU       | Guam                                         |
| 87  | GW       | Guinea-Bissau                                |
| 88  | GY       | Guyana                                       |
| 89  | HK       | Hong Kong                                    |
| 90  | HM       | Heard Island and McDonald Islands            |
| 91  | HN       | Honduras                                     |
| 92  | HR       | Croatia                                      |
| 93  | HU       | Hungary                                      |
| 94  | ID       | Indonesia                                    |
| 95  | IE       | Ireland                                      |
| 96  | IL       | Israel                                       |
| 97  | IM       | Isle of Man                                  |
| 98  | IN       | India                                        |
| 99  | IO       | British Indian Ocean Territory               |
| 100 | IQ       | Iraq                                         |
| 101 | IS       | Iceland                                      |
| 102 | IT       | Italy                                        |
| 103 | JE       | Jersey                                       |
| 104 | JM       | Jamaica                                      |
| 105 | JO       | Jordan                                       |
| 106 | JP       | Japan                                        |
| 107 | KE       | Kenya                                        |
| 108 | KG       | Kyrgyzstan                                   |
| 109 | KH       | Cambodia                                     |
| 110 | KI       | Kiribati                                     |
| 111 | KM       | Comoros                                      |
| 112 | KN       | Saint Kitts and Nevis                        |
| 113 | KR       | South Korea                                  |
| 114 | KW       | Kuwait                                       |
| 115 | KY       | Cayman Islands                               |
| 116 | KZ       | Kazakhstan                                   |
| 117 | LA       | Laos                                         |
| 118 | LB       | Lebanon                                      |
| 119 | LC       | Saint Lucia                                  |
| 120 | LI       | Liechtenstein                                |
| 121 | LK       | Sri Lanka                                    |
| 122 | LR       | Liberia                                      |
| 123 | LS       | Lesotho                                      |
| 124 | LT       | Lithuania                                    |
| 125 | LU       | Luxembourg                                   |
| 126 | LV       | Latvia                                       |
| 127 | MA       | Morocco                                      |
| 128 | MC       | Monaco                                       |
| 129 | ME       | Montenegro                                   |
| 130 | MF       | Saint Martin                                 |
| 131 | MG       | Madagascar                                   |
| 132 | MH       | Marshall Islands                             |
| 133 | MK       | North Macedonia                              |
| 134 | MP       | Northern Mariana Islands                     |
| 135 | MQ       | Martinique                                   |
| 136 | MR       | Mauritania                                   |
| 137 | MS       | Montserrat                                   |
| 138 | MT       | Malta                                        |
| 139 | MU       | Mauritius                                    |
| 140 | MV       | Maldives                                     |
| 141 | MW       | Malawi                                       |
| 142 | MX       | Mexico                                       |
| 143 | MY       | Malaysia                                     |
| 144 | MZ       | Mozambique                                   |
| 145 | MN       | Mongolia                                     |
| 146 | MO       | Macau                                        |
| 147 | NA       | Namibia                                      |
| 148 | NC       | New Caledonia                                |
| 149 | NE       | Niger                                        |
| 150 | NF       | Norfolk Island                               |
| 151 | NG       | Nigeria                                      |
| 152 | NI       | Nicaragua                                    |
| 153 | NL       | Netherlands                                  |
| 154 | NO       | Norway                                       |
| 155 | NP       | Nepal                                        |
| 156 | NR       | Nauru                                        |
| 157 | NU       | Niue                                         |
| 158 | NZ       | New Zealand                                  |
| 159 | OM       | Oman                                         |
| 160 | PA       | Panama                                       |
| 161 | PE       | Peru                                         |
| 162 | PF       | French Polynesia                             |
| 163 | PG       | Papua New Guinea                             |
| 164 | PH       | Philippines                                  |
| 165 | PK       | Pakistan                                     |
| 166 | PL       | Poland                                       |
| 167 | PM       | Saint Pierre and Miquelon                    |
| 168 | PN       | Pitcairn Islands                             |
| 169 | PR       | Puerto Rico                                  |
| 170 | PT       | Portugal                                     |
| 171 | PW       | Palau                                        |
| 172 | PY       | Paraguay                                     |
| 173 | QA       | Qatar                                        |
| 174 | RE       | Réunion                                      |
| 175 | RO       | Romania                                      |
| 176 | RS       | Serbia                                       |
| 177 | RW       | Rwanda                                       |
| 178 | SA       | Saudi Arabia                                 |
| 179 | SB       | Solomon Islands                              |
| 180 | SC       | Seychelles                                   |
| 181 | SE       | Sweden                                       |
| 182 | SG       | Singapore                                    |
| 183 | SH       | Saint Helena                                 |
| 184 | SI       | Slovenia                                     |
| 185 | SJ       | Svalbard and Jan Mayen                       |
| 186 | SK       | Slovakia                                     |
| 187 | SL       | Sierra Leone                                 |
| 188 | SM       | San Marino                                   |
| 189 | SN       | Senegal                                      |
| 190 | SR       | Suriname                                     |
| 191 | ST       | São Tomé and Príncipe                        |
| 192 | SV       | El Salvador                                  |
| 193 | SX       | Sint Maarten                                 |
| 194 | SZ       | Eswatini                                     |
| 195 | TC       | Turks and Caicos Islands                     |
| 196 | TD       | Chad                                         |
| 197 | TF       | French Southern Territories                  |
| 198 | TG       | Togo                                         |
| 199 | TH       | Thailand                                     |
| 200 | TJ       | Tajikistan                                   |
| 201 | TK       | Tokelau                                      |
| 202 | TL       | Timor-Leste                                  |
| 203 | TM       | Turkmenistan                                 |
| 204 | TN       | Tunisia                                      |
| 205 | TO       | Tonga                                        |
| 206 | TR       | Turkey                                       |
| 207 | TT       | Trinidad and Tobago                          |
| 208 | TV       | Tuvalu                                       |
| 209 | TW       | Taiwan                                       |
| 210 | TZ       | Tanzania                                     |
| 211 | UG       | Uganda                                       |
| 212 | UM       | United States Minor Outlying Islands         |
| 213 | US       | United States                                |
| 214 | UY       | Uruguay                                      |
| 215 | UZ       | Uzbekistan                                   |
| 216 | VA       | Vatican City                                 |
| 217 | VC       | Saint Vincent and the Grenadines             |
| 218 | VG       | British Virgin Islands                       |
| 219 | VI       | U.S. Virgin Islands                          |
| 220 | VN       | Vietnam                                      |
| 221 | VU       | Vanuatu                                      |
| 222 | WF       | Wallis and Futuna                            |
| 223 | WS       | Samoa                                        |
| 224 | YT       | Mayotte                                      |
| 225 | ZA       | South Africa                                 |
| 226 | ZM       | Zambia                                       |

<Tip>
  You can only accept payments from the 226 countries listed above. We regularly update this list as we expand support to more countries.
</Tip>


# Merchant Acceptance Policy
Source: https://docs.dodopayments.com/miscellaneous/merchant-acceptance

This policy will help you understand the types of businesses we support, the types we restrict or prohibit, and how we enforce our standards.

## **Introduction**

Dodo Payments operates as a Merchant of Record (MoR), providing an all-in-one platform for digital businesses for merchants by acting as their official reseller. As MoR, Dodo Payments assumes responsibility for payment processing, tax compliance, and chargeback handling. To protect the integrity of our platform and our global partnerships, we maintain strict standards for the products we resell on our platform.

This policy outlines the kinds of businesses we support, the types we restrict or prohibit, and how we enforce our standards. It is intended to help builders understand how to align with our platform requirements from the start.

## **Businesses We Love**

We’re excited to support legit builders creating digital-first products that are valuable, trustworthy, and easy to deliver. In general, we welcome:

* **SaaS & AI products** – SaaS products, productivity software, AI tools and more.
* **Digital goods** – eBooks, PDFs, design assets, audio, stock media, etc.
* **Templates, Plugins & Apps** – Templates such Notion,Framer, Plugins such as Chrome Store, Wordpress, Apps such as Slack, Discord etc (that do not violate our policies).
* **Courses & learning material** – Digital education courses, self-paced courses, or content delivered via links, embeds, or gated access.
* **Indie creators** – Building cool, niche products that offer real value, and would make you proud to post on your LinkedIn/Twitter.

###

### **What We Look For**

If your product is digital, delivered easily, and meets these qualities, we'd love to work with you:

* **Legally Compliant:** Your product complies with relevant laws (like consumer protection and data privacy) in the regions you operate.
* **Honest and Helpful:** We appreciate products that provide real value to users - things that are helpful, not deceptive or exploitative.
* **Community-friendly:** Products should adhere to our policies and ensure a smooth experience for everyone.

## **Businesses We Can’t Support**

*This is not an exhaustive list. Dodo Payments reserves the right to update or enforce this policy at any time. We may place your account under review or suspend it immediately if we determine your business model is deceptive, harmful, high-risk, generates excessive refunds or chargebacks, or has been flagged by our payment partners.*

As your MoR, we’re legally and reputationally responsible for what’s being sold through our platform. That means we must stay clear of anything that’s:

1. **Human services packaged digitally** – Selling design, development, coaching, or marketing services as "digital" isn’t allowed unless it’s largely productized and automated.
2. **Physical goods or in-person services** – We only support digital delivery. No T-shirts, mugs, books, supplements, coaching calls, or “done-for-you” consulting. This includes merchandise packaged with digital bundles.
3. **Illegal or age-restricted** – Including but not limited to drugs, alcohol, tobacco, vapes, or content that violates local laws in any region you're targeting.
4. **Low-quality or exploitative digital products** – For example, AI-generated PDFs with little value, thin templates marked up heavily, or clearly unfinished websites sold at premium prices which may lead to customer dissatisfaction.
5. **Restricted by payment and compliance partners** – Some business types may be subject to restrictions under the policies of our payment and compliance partners. If your business falls within these categories, we may be unable to support processing due to external requirements or network guidelines.
6. **Adult content or services** – This includes explicit or suggestive content whether real or AI-generated (e.g., OnlyFans-style platforms, NSFW chatbots, webcam streams, erotic games, sex toys).
7. **Intimacy services** – Especially those with sexually charged positioning, escort-style features, or AI-generated relationship companions.
8. **Financial products & advice** – We can’t support unlicensed financial tools, investment strategies, wealth-building courses, tax calculators, or anything involving stored value, lending, or managing funds.
9. **Legal, accounting, and professional services** – We only support licensed professionals operating with valid credentials and authorization in their jurisdiction.
10. **Crypto-related offerings** – Wallets, NFTs, DeFi, crypto exchanges, or token launches aren’t permitted.
11. **“Miracle” or Misleading Claims** – No products making exaggerated or unverifiable claims – e.g., “cures cancer,” “reverses aging,” “burns fat while you sleep,” “make money while you sleep.”
12. **Tax Evasion, Shell Entities, or Regulatory Arbitrage** – We can’t support products, services, or setups designed to evade taxes, mask ownership, or bypass financial or legal regulations—this includes using fake business entities, misleading jurisdictions, or “gray market” setups.
13. **Gambling & games of chance** – Including casinos, lotteries, sports betting, sweepstakes, fantasy sports for cash prizes.
14. **Medical, wellness, and pharmaceutical products** – Including diagnostics, weight-loss programs, supplements, or biohacking kits without the required licenses.
15. **Cheating & manipulation tools** – That means hacks, mods, bots, engagement manipulation, fake reviews, or tools for bypassing gameplay or API limits.
16. **Piracy or IP violations** – Selling things you didn’t create or license (e.g., pirated books, software keys, copy-paste code packs, unauthorized media downloads).
17. **Mass outreach or scraping tools** – No lead scraping, cold email automation, or tools that spam the internet. Also applies to mass-generated AI content marketed as personalized.
18. **Proxy, cloaking, or anti-terms tools** – Anything that helps users bypass API rate limits, platform rules, or geolocation restrictions.
19. **IPTV and streaming access services** – This includes IPTV subscriptions, reseller panels, or tools that provide access to third-party streaming content.
20. **Donations without clear value** – If you’re collecting money without delivering something in return (unless as a pre-approved as a sponsorship), we likely can’t process it.
21. **Marketplaces or resale models** – If you're selling on behalf of others, operating a multi-vendor platform, or taking funds and forwarding them elsewhere, that’s not supported under our MoR structure.
22. **Travel services** – This includes commercial airlines, cruises, charter or private flights, and timeshare offerings.
23. **Political, social, or cause-based fundraising** – We don’t support campaign donations, activism platforms, or politically sensitive products.
24. **Software resale or license flipping** – Including selling software licenses at a discount, or reselling AI APIs, datasets, or tools without clear rights.
25. **Privacy Violations & Surveillance Tech** – We don’t allow products that violate user privacy or enable unauthorized surveillance – this includes stalkerware, keyloggers, location tracking without consent, facial recognition tech, or tools that scrape or collect personal data without a clear legal basis.
26. **Weapons, Self-Defense & Violence-Oriented Content** – We don’t allow content promoting weapons, combat training, DIY explosives, self-defense tools, or any content that glorifies violence or incites harm—digital or not.

<Tip>
  Even if your business isn’t listed above, we may still decline to work with you if we believe it poses legal, financial, or reputational risk. This includes high refunds / chargebacks, low-effort, or exploitative offerings. We assess merchants holistically and reserve the right to refuse or revoke access at our discretion.
</Tip>

### **When in Doubt…**

If your product is pushing boundaries or you’re unsure whether it qualifies, we strongly recommend reaching out to us. We’d love to explore ways to help you stay compliant without compromising on your vision.

And remember: just because something is technically digital doesn’t mean it’s automatically okay. If it feels shady, scammy, exploitative, or like something you wouldn’t explain confidently to your mother— we probably can’t support it.

*Some business types may fall into a restricted zone — not outright prohibited, but not immediately approved either. These cases will require enhanced due diligence, and we’ll take a closer look before making a final decision. This is done on a case to case basis.*

## **Businesses We Might Support**

To meet our compliance obligations, some business types require additional review. If your business falls into one of the categories below, we may ask for extra details—such as licenses or information about how you operate.

While we aim to support a wide range of businesses, approval isn’t guaranteed. If approved, access may be limited or adjusted over time in line with the Terms & Conditions. Some types of businesses are not outright prohibited but do raise higher compliance or reputational risks. If you operate in one of these spaces, we may ask for extra details (like disclaimers, demo access, or policy links) before approving your account.

**Categories That Often Require Review:**

1. **AI tools (text, image, video, voice)** – No impersonation, scraping, or deepfakes
2. **VPNs / infrastructure tools** – Must prohibit illegal use and have takedown flows
3. **Marketing / scraping / outreach tools** – No spam, scraping, or fake engagement
4. **Resume, hiring, or exam tools** – No impersonation or cheating functionality
5. **Browser plugins / automation** – Must comply with our policy
6. **Sub-SaaS or white-label tools** – All downstream users must be known and vetted
7. **Spiritual & Astrology services** – Entertainment only; no claims or predictions
8. **Intimacy platforms or chat tools** – Must be safe-for-work and clearly moderated
9. **Audio / music / chatbot generators** – No voice cloning, NSFW, or fake claims
10. **Fake storefront / funnel templates** – Must be transparent and brand-safe
11. **PDF / AI content generators** – Must be original and clearly valuable
12. **Tipping / creator monetization** – Platforms or tools that facilitate tipping or monetization for creators.

**Unsure if your business qualifies?**\
*If your product operates near the edge of these categories, we encourage you to reach out before applying. We may still be able to support you — especially if you’re transparent about your model, actively mitigate risks, and are willing to work within platform guidelines. You can reach out to [compliance@dodopayments.com](mailto:compliance@dodopayments.com) to check if you qualify.*

## Accepted Payout Countries

Below is a list of merchant countries eligible for payout from Dodo Payments:

<AccordionGroup>
  <Accordion title="Accepted payout countries">
    | #   | ISO | Country                          |
    | --- | --- | -------------------------------- |
    | 1   | AL  | Albania                          |
    | 2   | DZ  | Algeria                          |
    | 3   | AD  | Andorra                          |
    | 4   | AO  | Angola                           |
    | 5   | AI  | Anguilla                         |
    | 6   | AG  | Antigua and Barbuda              |
    | 7   | AR  | Argentina                        |
    | 8   | AW  | Aruba                            |
    | 9   | AU  | Australia                        |
    | 10  | AT  | Austria                          |
    | 11  | BS  | Bahamas                          |
    | 12  | BH  | Bahrain                          |
    | 13  | BD  | Bangladesh                       |
    | 14  | BB  | Barbados                         |
    | 15  | BE  | Belgium                          |
    | 16  | BZ  | Belize                           |
    | 17  | BJ  | Benin                            |
    | 18  | BO  | Bolivia                          |
    | 19  | BQ  | Bonaire                          |
    | 20  | BA  | Bosnia and Herzegovina           |
    | 21  | BW  | Botswana                         |
    | 22  | BR  | Brazil                           |
    | 23  | VG  | British Virgin Islands           |
    | 24  | BN  | Brunei                           |
    | 25  | BG  | Bulgaria                         |
    | 26  | BF  | Burkina Faso                     |
    | 27  | BI  | Burundi                          |
    | 28  | KH  | Cambodia                         |
    | 29  | CM  | Cameroon                         |
    | 30  | CA  | Canada                           |
    | 31  | CV  | Cape Verde                       |
    | 32  | KY  | Cayman Islands                   |
    | 33  | CF  | Central African Republic         |
    | 34  | TD  | Chad                             |
    | 35  | CL  | Chile                            |
    | 36  | CN  | China                            |
    | 37  | CO  | Colombia                         |
    | 38  | KM  | Comoros                          |
    | 39  | CK  | Cook Islands                     |
    | 40  | CR  | Costa Rica                       |
    | 41  | HR  | Croatia                          |
    | 42  | CW  | Curaçao                          |
    | 43  | CY  | Cyprus                           |
    | 44  | CZ  | Czech Republic                   |
    | 45  | DK  | Denmark                          |
    | 46  | DJ  | Djibouti                         |
    | 47  | DM  | Dominica                         |
    | 48  | DO  | Dominican Republic               |
    | 49  | EC  | Ecuador                          |
    | 50  | EG  | Egypt                            |
    | 51  | SV  | El Salvador                      |
    | 52  | GQ  | Equatorial Guinea                |
    | 53  | ER  | Eritrea                          |
    | 54  | EE  | Estonia                          |
    | 55  | SZ  | Eswatini                         |
    | 56  | FJ  | Fiji                             |
    | 57  | FI  | Finland                          |
    | 58  | FR  | France                           |
    | 59  | GA  | Gabon                            |
    | 60  | GM  | Gambia                           |
    | 61  | DE  | Germany                          |
    | 62  | GH  | Ghana                            |
    | 63  | GR  | Greece                           |
    | 64  | GD  | Grenada                          |
    | 65  | GP  | Guadeloupe                       |
    | 66  | GT  | Guatemala                        |
    | 67  | GN  | Guinea                           |
    | 68  | GW  | Guinea-Bissau                    |
    | 69  | GY  | Guyana                           |
    | 70  | VA  | Holy See (Vatican City)          |
    | 71  | HN  | Honduras                         |
    | 72  | HK  | Hong Kong SAR                    |
    | 73  | HU  | Hungary                          |
    | 74  | IS  | Iceland                          |
    | 75  | IN  | India                            |
    | 76  | ID  | Indonesia                        |
    | 77  | IE  | Ireland                          |
    | 78  | IL  | Israel                           |
    | 79  | IT  | Italy                            |
    | 80  | CI  | Ivory Coast (Côte d'Ivoire)      |
    | 81  | JM  | Jamaica                          |
    | 82  | JP  | Japan                            |
    | 83  | JO  | Jordan                           |
    | 84  | KE  | Kenya                            |
    | 85  | KI  | Kiribati                         |
    | 86  | XK  | Kosovo                           |
    | 87  | KW  | Kuwait                           |
    | 88  | LA  | Laos                             |
    | 89  | LV  | Latvia                           |
    | 90  | LB  | Lebanon                          |
    | 91  | LS  | Lesotho                          |
    | 92  | LR  | Liberia                          |
    | 93  | LI  | Liechtenstein                    |
    | 94  | LT  | Lithuania                        |
    | 95  | LU  | Luxembourg                       |
    | 96  | MG  | Madagascar                       |
    | 97  | MW  | Malawi                           |
    | 98  | MY  | Malaysia                         |
    | 99  | ML  | Mali                             |
    | 100 | MT  | Malta                            |
    | 101 | MH  | Marshall Islands                 |
    | 102 | MQ  | Martinique                       |
    | 103 | MR  | Mauritania                       |
    | 104 | MU  | Mauritius                        |
    | 105 | MX  | Mexico                           |
    | 106 | FM  | Micronesia                       |
    | 107 | MD  | Moldova                          |
    | 108 | MC  | Monaco                           |
    | 109 | MN  | Mongolia                         |
    | 110 | ME  | Montenegro                       |
    | 111 | MS  | Montserrat                       |
    | 112 | MA  | Morocco                          |
    | 113 | MZ  | Mozambique                       |
    | 114 | MM  | Myanmar                          |
    | 115 | NA  | Namibia                          |
    | 116 | NR  | Nauru                            |
    | 117 | NP  | Nepal                            |
    | 118 | NL  | Netherlands                      |
    | 119 | NZ  | New Zealand                      |
    | 120 | NE  | Niger                            |
    | 121 | NG  | Nigeria                          |
    | 122 | NU  | Niue                             |
    | 123 | MK  | North Macedonia                  |
    | 124 | NO  | Norway                           |
    | 125 | OM  | Oman                             |
    | 126 | PW  | Palau                            |
    | 127 | PA  | Panama                           |
    | 128 | PG  | Papua New Guinea                 |
    | 129 | PY  | Paraguay                         |
    | 130 | PE  | Peru                             |
    | 131 | PH  | Philippines                      |
    | 132 | PL  | Poland                           |
    | 133 | PT  | Portugal                         |
    | 134 | QA  | Qatar                            |
    | 135 | CG  | Republic of the Congo            |
    | 136 | RO  | Romania                          |
    | 137 | RW  | Rwanda                           |
    | 138 | BL  | Saint Barthélemy                 |
    | 139 | KN  | Saint Kitts and Nevis            |
    | 140 | LC  | Saint Lucia                      |
    | 141 | MF  | Saint Martin                     |
    | 142 | PM  | Saint Pierre and Miquelon        |
    | 143 | VC  | Saint Vincent and the Grenadines |
    | 144 | WS  | Samoa                            |
    | 145 | SM  | San Marino                       |
    | 146 | ST  | São Tomé and Príncipe            |
    | 147 | SA  | Saudi Arabia                     |
    | 148 | SN  | Senegal                          |
    | 149 | RS  | Serbia                           |
    | 150 | SC  | Seychelles                       |
    | 151 | SL  | Sierra Leone                     |
    | 152 | SG  | Singapore                        |
    | 153 | SX  | Sint Maarten                     |
    | 154 | SK  | Slovakia                         |
    | 155 | SI  | Slovenia                         |
    | 156 | SB  | Solomon Islands                  |
    | 157 | ZA  | South Africa                     |
    | 158 | KR  | South Korea                      |
    | 159 | ES  | Spain                            |
    | 160 | LK  | Sri Lanka                        |
    | 161 | SR  | Suriname                         |
    | 162 | SE  | Sweden                           |
    | 163 | CH  | Switzerland                      |
    | 164 | TW  | Taiwan                           |
    | 165 | TZ  | Tanzania                         |
    | 166 | TH  | Thailand                         |
    | 167 | TL  | Timor-Leste                      |
    | 168 | TG  | Togo                             |
    | 169 | TO  | Tonga                            |
    | 170 | TT  | Trinidad and Tobago              |
    | 171 | TR  | Turkey                           |
    | 172 | TC  | Turks and Caicos Islands         |
    | 173 | TV  | Tuvalu                           |
    | 174 | UG  | Uganda                           |
    | 175 | UA  | Ukraine                          |
    | 176 | AE  | United Arab Emirates             |
    | 177 | GB  | United Kingdom                   |
    | 178 | US  | United States                    |
    | 179 | UY  | Uruguay                          |
    | 180 | VI  | US Virgin Islands                |
    | 181 | VU  | Vanuatu                          |
    | 182 | VN  | Vietnam                          |
    | 183 | ZM  | Zambia                           |
    | 184 | ZW  | Zimbabwe                         |
  </Accordion>
</AccordionGroup>

## **Prohibited Countries**

Dodo Payments only supports merchants selling digital goods and services that align with our MoR responsibilities and card network requirements.We only work with merchants from jurisdictions not subject to active sanctions or high-risk flags issued by FATF, OFAC, EU, or  UN bodies, etc.

We currently do not support merchants from the following geographies:

1. Belarus
2. Cuba
3. Haiti
4. Iran
5. Iraq
6. North Cyprus
7. North Korea
8. Pakistan
9. Russia
10. South Sudan
11. Sudan
12. Syria
13. Venezuela
14. Yemen

*Note: This list is regularly updated to reflect FATF, OFAC, UN, and EU AML/CFT directives. Our prohibited countries list applies to both the **location of the merchant** (where the business is registered or operates from) and the **jurisdictions involved in the transaction** (such as where the merchant, seller, beneficial owner, or platform users are based). All merchants are responsible for ensuring ongoing compliance.*

## **Enforcement**

We take violations of our merchant policy seriously. If we determine that a merchant has onboarded in breach of this policy or our terms — including by misrepresenting their business, attempting to bypass restrictions, or engaging in prohibited activities — Dodo Payments may take appropriate action, including:

### **Enforcement Actions May Include:**

* Permanent account suspension
* Immediate halt of transactions and platform access
* Withholding of payouts or reversal of settled funds
* Fines or penalties in proportion to losses, reputational harm, or downstream risk (up to USD 425,000)
* Reporting to card networks, financial partners, or regulators where required

These measures may be taken without prior notice in cases of material breach or imminent platform risk.

**Examples of Policy Breach**

The following may trigger investigation or enforcement:

* Misclassifying your business or products to bypass category restrictions
* Using proxy merchants or sub-accounts to avoid enforcement
* Selling or promoting products that are deceptive, harmful, or violate our prohibited content rules
* Failing to disclose essential onboarding information (e.g., website mismatch, incorrect entity type)

### **Appeals & Resolution**

If you believe enforcement was applied in error, you may submit a request for review. In some cases, we may allow corrective action or resubmission for review. Voluntary disclosure of potential issues may be considered favorably. You can reach out to **[compliance@dodopayments.com](mailto:compliance@dodopayments.com)** to initiate the review process.


# Review & Monitoring Policy
Source: https://docs.dodopayments.com/miscellaneous/review-monitoring-policy

How Dodo Payments monitors merchant activity to protect customers, partners, and the payment ecosystem.

## Introduction

At Dodo Payments, we act as a Merchant of Record (MoR), managing payment processing, invoicing, taxes, refunds, and disputes on behalf of the businesses that use our platform. To safeguard customers, businesses, and partners, we operate a structured monitoring program. This program ensures that accounts on our platform remain compliant with card network rules, applicable laws, and our \[Merchant Acceptance Policy].

## Purpose

Our monitoring framework is designed to protect both businesses and customers. By identifying and addressing potential risks early, we help ensure a trusted and reliable payment environment.

## Monitoring Approach

We combine automated checks with human review to maintain oversight of business activity. Reviews focus on:

1. Compliance with our [Merchant Acceptance Policy](/miscellaneous/merchant-acceptance)
2. Consistency between what is disclosed at onboarding and what is offered live
3. Compliance with card network rules, sanctions, and applicable laws
4. Customer experience signals such as refunds and disputes
5. Use of approved brands, domains, and product lines

## When Reviews Occur

Reviews take place at key points in the lifecycle:

1. **Activation & First Transaction** – to confirm that products and checkout experiences match what was disclosed.
2. **Before First Payout** – to complete compliance checks and validate fulfillment.
3. **Ongoing Triggers** – when significant changes occur, such as new domains, product shifts, unusual transaction patterns, or rising disputes / refunds.
4. **Periodic Reviews** – regular monitoring to help ensure continued compliance.

## Outcomes of Reviews

Following a review, possible outcomes include:

1. **Continued support** – your account remains active on the platform.
2. **Remediation** – we may ask you to correct issues or provide clarifications.
3. **Deboarding** – in cases of prohibited activity, policy violations, or non-response, the account may be closed and payouts withheld in line with our enforcement process.

## Customer Protection

We take customer complaints, fraud alerts, and refund requests seriously. In such cases, we may contact both the customer and your business. If we don’t receive a response within reasonable timelines, refunds may be processed automatically and your account may be restricted or closed.

## Transparency & Communication

If clarifications are required, we contact you at your registered email address. You’ll have the opportunity to respond and provide context. Where no response is received, accounts may be closed and funds held in line with card network and regulatory requirements.

## Enforcement

Violations of our policies, card network rules, or applicable laws may result in:

1. Suspension of payments
2. Account closure
3. Notifications to card networks, partners, or regulators as required

## Commitment to Fairness

Our monitoring standards are applied consistently across all businesses. We aim to work collaboratively to resolve issues where possible, while maintaining strong protections for customers and the payment ecosystem.


# Security Reporting Policy
Source: https://docs.dodopayments.com/miscellaneous/security-policy

Guidelines for responsible disclosure of security vulnerabilities at Dodo Payments.

## Introduction

At Dodo Payments, we take security seriously and appreciate responsible disclosure of vulnerabilities that help us improve our platform. If you discover a security vulnerability, we encourage you to report it to us following the guidelines below.

## Reporting Security Vulnerabilities

If you identify a security vulnerability in our platform, please contact us at **[pt-team@dodopayments.com](mailto:pt-team@dodopayments.com)** with the following details:

* **Description**: A clear and concise explanation of the vulnerability.
* **Steps to Reproduce**: Detailed steps to replicate the issue.
* **Impact**: The potential risk or harm that could arise from the vulnerability.
* **Suggested Mitigations**: (If available) Any recommendations on how to fix the issue.

## How We Handle Reports

1. **Acknowledgment**: Our team will confirm receipt of your report within a reasonable timeframe.
2. **Assessment**: We will review the report and prioritize it based on severity and impact.
3. **Resolution Timeline**: If the issue is already known and logged internally, we will provide an update on its expected resolution.
4. **Follow-up**: We may reach out for additional information or clarification as needed.

## No Monetary Rewards (Bug Bounty Program)

Currently, **Dodo Payments does not have an official bug bounty program**. While we deeply appreciate security researchers' efforts, we **do not offer monetary rewards** for vulnerability disclosures. This ensures fairness for all individuals who have reported similar issues in the past.

## Recognition & Appreciation

We highly value the contributions of ethical security researchers. While we do not offer financial compensation, we would be happy to send **Dodo Payments goodies/merch** as a token of appreciation for valid security reports. If you are interested, please let us know after your report has been reviewed.

## Responsible Disclosure

To ensure a responsible and ethical reporting process, please adhere to the following:

* **Do not publicly disclose** vulnerabilities until our team has had a reasonable time to address them.
* **Do not exploit** the vulnerability beyond what is necessary to demonstrate the issue.
* **Do not access, modify, or delete** data that does not belong to you.
* **Do not perform** any activity that could disrupt our services.

## Contact Us

If you have any security concerns or need further assistance, please reach out to us at **[pt-team@dodopayments.com](mailto:pt-team@dodopayments.com)**.


# Test Mode vs Live Mode
Source: https://docs.dodopayments.com/miscellaneous/test-mode-vs-live-mode

Learn the difference between Test Mode and Live Mode and how to switch between them.

Find the detailed breakdown of the features which will be available in test mode vs live mode

## Feature Comparison

| **Feature**                                 | **Test Mode** | **Live Mode** | **Is Environment Dependent?** |
| ------------------------------------------- | ------------- | ------------- | ----------------------------- |
| **Create Products (One-Time/Subscription)** | ✓             | ✓             | YES                           |
| **Generate Payment Links**                  | ✓             | ✓             | YES                           |
| **Simulate Payments (Card, Wallet, etc.)**  | ✓             | x             | YES                           |
| **Process Real Payments**                   | x             | ✓             | YES                           |
| **Issue Refunds**                           | ✓ (Simulated) | ✓ (Real)      | YES                           |
| **Access Transaction History**              | ✓ (Simulated) | ✓ (Real)      | YES                           |
| **Download Invoices**                       | ✓ (Simulated) | ✓ (Real)      | YES                           |
| **Link Bank Account**                       | ✓             | ✓             | Environment Independent       |
| **Payouts to Bank Account**                 | x             | ✓             | YES                           |
| **Simulate Failed Transactions**            | ✓             | x             | YES                           |
| **Analytics Section**                       | ✓ (Simulated) | ✓ (Real)      | YES                           |
| **View Detailed Reports**                   | ✓ (Simulated) | ✓ (Real)      | YES                           |
| **Customize Invoice Templates**             | ✓             | ✓             | Environment Independent       |
| **API Keys generation**                     | ✓             | ✓             | YES                           |
| **Real-time Fraud Detection**               | x             | ✓             | YES                           |
| **Access Live Customer Support**            | ✓             | ✓             | Environment Independent       |
| **Webhook Creation**                        | ✓             | ✓             | YES                           |
| **Business Profile section**                | ✓             | ✓             | Environment Independent       |
| **My Account section**                      | ✓             | ✓             | Environment Independent       |
| **Create multiple businesses**              | ✓             | ✓             | Environment Independent       |
| **Payout Compliance**                       | ✓             | ✓             | Environment Independent       |
| **Transaction Emails**                      | x             | ✓             | YES                           |

### Environment Dependency

**Environment Dependent:** All Environment Dependent features will have independent data in Test Mode and Live Mode. Any changes made in one environment will not affect the other. Eg. API Keys generated in Test Mode will be independent of API keys generated in Live Mode and vice versa

**Environment Independent:** All Environment Independent features will have the same data in both live mode and test mode. Eg. My Account section will have the same data in test mode and live mode. Changes made in one environment will affect the other environment

Live Mode will be available only post successful completion of Identity verification and Business Verification. You can accept real payments only in \`live mode\`.

API Hostnames for Test Mode and Live Mode are below:

* Test Mode: [`https://test.dodopayments.com`](https://test.dodopayments.com/)
* Live Mode: [`https://live.dodopayments.com`](https://live.dodopayments.com/)

## Key Highlights

1. All products created in test mode or live mode will only be available in the respective environment. There is an option of copy to live mode in the test mode environment. This will copy the product with all relevant details and create the same in live mode

2. API keys and Webhooks created in test mode will only be limited to test mode environment and will not affect live mode deployment and vice versa

3. All documents submitted for verification and Bank account details submitted will be the same in test mode and live mode. A change in this information in any environment will also change it in the other environment

## Test Cards and UPI IDs

For detailed information about test cards, UPI IDs, and other testing methods, please refer to our comprehensive [Testing Process](/miscellaneous/testing-process) guide.

This guide includes:

* Test card numbers for different scenarios
* Test UPI IDs for simulating payments
* Instructions for testing various payment outcomes
* Best practices for testing your integration

<Note>
  Test payment methods are only valid in test mode. Never use them for real payments.
</Note>

## Transaction in Test Mode - Tutorial

Please watch this video on how you can perform a transation in Test Mode.

<Frame>
  <iframe className="w-full aspect-video rounded-md" src="https://www.youtube.com/embed/5CcUSE4L_cg" title="Test Transaction | Dodo Payments" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen />
</Frame>


# Testing Process
Source: https://docs.dodopayments.com/miscellaneous/testing-process

Learn how to test your Dodo Payments integration

<Frame>
  <iframe className="w-full aspect-video rounded-md" src="https://www.youtube.com/embed/5CcUSE4L_cg" title="Test Transaction | Dodo Payments" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen />
</Frame>

## Test Card Details

Dodo Payments provides a set of Test Card numbers that you can use to simulate various payment scenarios. You can use these test card numbers to create simulated payments in test mode without processing actual payments or charges.

Test card numbers are only valid in test mode. Don't use them for real payments.

### Successful Payments (US)

| **Card Number**  | **Expiry Date (MM/YY)** | **CVV/CVC** |
| ---------------- | ----------------------- | ----------- |
| 4242424242424242 | 06/32                   | 123         |

### Successful Payments (India)

| **Card Number**  | **Expiry Date (MM/YY)** | **CVV/CVC** |
| ---------------- | ----------------------- | ----------- |
| 6074825972083818 | 06/32                   | 123         |

### Declined Payment (US)

| **Card Number**  | **Expiry Date (MM/YY)** | **CVV/CVC** |
| ---------------- | ----------------------- | ----------- |
| 4000000000000002 | 06/32                   | 123         |

### Declined Payment (India)

| **Card Number**  | **Expiry Date (MM/YY)** | **CVV/CVC** |
| ---------------- | ----------------------- | ----------- |
| 4000000000000127 | 06/32                   | 123         |

For complete information on various test cards for different scenarios visit the link below:

[https://docs.stripe.com/testing#cards](https://docs.stripe.com/testing#cards)

## Test UPI Details

[Know what UPI is here.](/features/upi)

| **Status** | **UPI ID**   |
| ---------- | ------------ |
| SUCCESS    | success\@upi |
| FAILURE    | failure\@upi |

## Test Klarna Details

| **Status** | **Date of Birth** | **First Name** | **Last Name** | **Email**                                                   | **Street**    | **House Number** | **City** | **State** | **Postal Code** | **Phone**    |
| ---------- | ----------------- | -------------- | ------------- | ----------------------------------------------------------- | ------------- | ---------------- | -------- | --------- | --------------- | ------------ |
| APPROVED   | 07-10-1970        | Test           | Person-us     | [customer@email.us](mailto:customer@email.us)               | Amsterdam Ave | 509              | New York | New York  | 10024-3941      | +13106683312 |
| DENIED     | 07-10-1970        | Test           | Person-us     | [customer+denied@email.us](mailto:customer+denied@email.us) | Amsterdam Ave | 509              | New York | New York  | 10024-3941      | +13106354386 |

**Note**: The minimum amount required for Klarna transactions is \$50.

## Test Afterpay Details

When testing your Checkout integration, select Afterpay as the payment method and click the Pay button.

### Successful Payment

* Use any valid email address and shipping address for successful payments.

### Failed Authentication

* To test the case where the user fails to authenticate, use your test API keys and view the redirect page. On the redirect page, close the Afterpay modal window and verify that payment failed. The PaymentIntent transitions from `requires_action` to `requires_payment_method`.

**Note**: The minimum amount required for Afterpay transactions is \$50.

For manual capture PaymentIntents in test mode, the uncaptured PaymentIntent auto-expires 10 minutes after successful authorization.

## Other Payment Methods

To test other payment methods like Amazon Pay and Cash App, follow the usual testing procedures. Please note that Apple Pay and Google Pay won't work in test mode.


# Verification Process
Source: https://docs.dodopayments.com/miscellaneous/verification-process

Learn how to successfully complete the onboarding verification process, including identity, business, and bank verification steps, to ensure compliance and facilitate quick approval.

At Dodo Payments, we require all businesses to complete a thorough verification process to ensure compliance with regulatory standards and platform policies. This process covers **Identity Verification**, **Business Verification**, and strict checks on **Anti-Money Laundering** and **Product Category** compliance.

<Info>
  For the most up-to-date and comprehensive details on supported and prohibited product categories, as well as restricted and accepted business locations, please refer to our [Merchant Acceptance Policy](/miscellaneous/merchant-acceptance).
</Info>

## Verification Forms

The exact forms depend on your account type:

| Account Type            | Required Forms        |
| ----------------------- | --------------------- |
| **Individual**          | KYC + Bank Form       |
| **Registered Business** | KYC + KYB + Bank Form |

<Info>
  If you are a **UK registered business**, you must also submit a [Tax Form W-8BEN-E](#4-additional-compliance) as part of the verification process.
</Info>

### 1. Identity Verification

We use **Persona**, a leading global verification provider following industry standard security measure and following global data privacy guidelines.

KYC ensures the authenticity of individual businesses through:

* **Government-issued ID verification** (passport, national ID, driver's license etc)
* **Selfie check** to confirm liveness and match with ID

Persona's AI-driven process completes verification within minutes while maintaining bank-grade security standards.

<Tip>
  For more information about Persona's security measures, visit [withpersona.com/security](https://withpersona.com/security).
</Tip>

### 2. Bank Form

The Bank Form collects your **bank account details** and **contact information**.

**⚠️ Important:**

* Bank account details **must match** the verified identity or registered business name.
* For individuals, the account holder’s name should match the Identity Verification document.
* For registered businesses, it should match the company’s legal name as per Business Verification.
* Dodo Payments cannot process payouts to mismatched or third-party accounts.

### 3. Business Verification

<Info>
  Business Verification is <strong>required only for registered businesses</strong>. If you have an individual account, you can skip this section.
</Info>

For registered businesses, verification ensures the legitimacy of the company and its authorised representatives.

#### Required Details

<AccordionGroup>
  <Accordion title="Company Registration Number">
    Provide your **Company Registration Number** and supporting document (Certificate of Incorporation or similar as per your jurisdiction).
  </Accordion>

  <Accordion title="Tax ID (Optional)">
    If you want your tax number reflected on payout invoices for claiming tax benefits, please provide a valid Tax ID and documents.

    Examples of tax identifiers across regions: EIN, CRN, VAT ID, GSTIN
  </Accordion>

  <Accordion title="Director / UBO Information">
    Provide details about all Director's or UBO's of the company in the verification form.

    **Beneficial Owner(s)**

    The beneficial owner is any natural person who, whether acting alone or together, or through other companies, LLPs, or legal persons, owns or is entitled to 10% or more of the shares or capital or profits of the connected user, or who exercises control over the connected user through other means, including enjoying the right to appoint the majority of its directors or to control its management or policy decisions through shareholding or management rights or through shareholders agreements or voting agreements. If the connected user has more than 1 beneficial owner, please provide us with the requisite documents for all.

    **Business Director(s)**

    Individuals appointed and currently serving as directors on the board of directors for the connected user in accordance with your local laws. Please provide us with the government issued ID's of all Directors.
  </Accordion>
</AccordionGroup>

### 4. Additional Compliance

<Info>
  <strong>W-8BEN-E:</strong> Only required for <strong>UK registered businesses</strong>. Ensure you fill out this form if your company is based in the United Kingdom.
</Info>

Registered businesses from the United Kingdom need to fill a **W-8BEN-E** form to comply with international tax reporting regulations. This ensures smooth payout processing and tax documentation accuracy.

<CardGroup cols={1}>
  <Card title="Download W-8BEN-E Form" icon="download" href="https://www.irs.gov/pub/irs-pdf/fw8bene.pdf">
    Download the official IRS W-8BEN-E form (PDF) required for UK registered businesses.<br />

    <small>
      <strong>Tip:</strong> Complete the form digitally before printing and signing for best results.
    </small>
  </Card>
</CardGroup>

#### What is Form W-8 BEN-E?

W-8 BEN-E forms are Internal Revenue Service (IRS) forms that foreign businesses must file to verify their country of residence for tax purposes, certifying that they qualify for a lower rate of tax withholding.

#### How to Fill Out Form W-8 BEN-E

<AccordionGroup>
  <Accordion title="Part I – Identification of Beneficial Owner">
    **1. Name of Organization That is the Beneficial Owner**

    This is your entity name.

    **2. Country of Incorporation or Organization**

    This is the country of residence (where the business is registered). For a corporation, it is the country of incorporation. If you are another type of entity, enter the country under whose laws you are created, organized, or governed.

    **3. Chapter 3 Status**

    In this section, the most commonly checked box is "Corporation". The majority of foreign entities that are doing business fall under "Corporation" or "Partnership" status. Other options include:

    * Foreign government – Controlled Entity
    * Foreign government – Integral Part
    * Estate
    * Simple trust (grantor and complex, too)
    * Central Bank of Issue
    * Tax-exempt organization
    * Private foundation
    * International organization
    * Disregarded entity

    For Private Limited company - check the Corporation box
    For Limited Liability Partnership - check the Partnership box

    **4. Chapter 4 Status (FATCA Status)**

    For SaaS/Digital Products, the most common choice here is Active NFFE. This means the business is an Active Non-Financial Foreign Entity. If none of the other categories fit, Active NFFE is the best option.

    **5. Permanent Residence Address**

    This is your business's permanent resident address. Your permanent residence address is the address in the country where you claim to be a resident for purposes of that country's income tax.

    **8-10. Tax Identification Information**

    You may provide the FTIN issued to you by your jurisdiction of tax residence on line 9b for purposes of claiming treaty benefits.
  </Accordion>

  <Accordion title="Part XXV – Active NFFE">
    In this part of the form, you simply need to check box 39 to certify that:

    * The entity in Part I is a foreign entity that is not a bank or financial institution.
    * Less than 50% of the gross income for the preceding calendar year is passive income.
    * Less than 50% of assets held are assets that produce or are held for the production of passive income (calculated as a weighted average of the % of quarterly passive assets).
  </Accordion>

  <Accordion title="Part XXX – Certification">
    The most important part of the document is the certification and signature. Here, in writing, there needs to be a first name, last name, and date (on which the form was signed). The person signing the W-8BEN-E form must be authorized to sign for the beneficial owner.
  </Accordion>
</AccordionGroup>

#### View Sample W-8 BEN-E Forms

<AccordionGroup>
  <Accordion title="Private Limited Company">
    <Note>
      **Sample Profile:**

      * Company: ABC Technologies PVT LTD
      * Type: SaaS / Digital Products
      * Country: India (example)
      * TIN: PAN or equivalent tax ID in your country
    </Note>

    **Page 1**

    <Frame>
      <img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%201.png?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=3b8f15697fccb105a904679359743e65" alt="W-8 BEN-E Private Limited Sample Page 1" data-og-width="1824" width="1824" data-og-height="1440" height="1440" data-path="images/tax-forms/W8 - BEN - PLC - SAMPLE - 1.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%201.png?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=2cc85ea951434b1cd8626a8599eff30a 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%201.png?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=7b20325ed2fad8e9d63c866dfdd6f1aa 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%201.png?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=02bfcebaeb7774fee072aa31cdb3aa29 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%201.png?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=950b91584f827d827d02f8209c1fd408 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%201.png?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=f30a44d990c416a5f399072819691b58 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%201.png?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=29e71ba0a54ab54e51ea5e5faaa02f05 2500w" />
    </Frame>

    **Page 2**

    <Frame>
      <img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%202.png?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=40e3cbf009f507a405d3aac78e825c82" alt="W-8 BEN-E Private Limited Sample Page 2" data-og-width="1824" width="1824" data-og-height="1440" height="1440" data-path="images/tax-forms/W8 - BEN - PLC - SAMPLE - 2.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%202.png?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=653141e93fdfce2d77c458452e18d5d1 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%202.png?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=e2153a3fef355512890660db2c82e3ea 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%202.png?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=2a7f836b10ed20f870c9ab5f9eac6122 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%202.png?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=c731b19d721d2e1da1e67bb4b48745b1 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%202.png?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=ef71654e980967bb03cc1c4d434c1d07 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%202.png?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=3358b3ac6867b0b2a6e3f4568799d417 2500w" />
    </Frame>

    **Page 8**

    <Frame>
      <img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%208.png?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=d896f1b5e2558ba0c794665efe917e0d" alt="W-8 BEN-E Private Limited Sample Page 8" data-og-width="1824" width="1824" data-og-height="1440" height="1440" data-path="images/tax-forms/W8 - BEN - PLC - SAMPLE - 8.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%208.png?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=6194284d2b6b955880c661475b39cb93 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%208.png?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=bc178d5a68a8f3ff8f8beb93e6700df5 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%208.png?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=ec7e20558d20b7665053b10096701ab1 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%208.png?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=d4990e55a865bc3064c6efd44b706eae 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%208.png?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=383e5581376171334489aab52389cd4b 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%208.png?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=c3749eed5cdc5e42369d627c312312cc 2500w" />
    </Frame>
  </Accordion>

  <Accordion title="Limited Liability Partnership (LLP)">
    <Note>
      **Sample Profile:**

      * Company: ABC Technologies LLP
      * Type: SaaS / Digital Products
      * Country: India (example)
      * TIN: PAN or equivalent tax ID in your country
    </Note>

    **Page 1**

    <Frame>
      <img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20LLP%20SAMPLE%20-%201.png?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=968848a298d455d070102e7600b774d6" alt="W-8 BEN-E LLP Sample Page 1" data-og-width="1824" width="1824" data-og-height="1440" height="1440" data-path="images/tax-forms/W8 - BEN - LLP SAMPLE - 1.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20LLP%20SAMPLE%20-%201.png?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=ba772250b8cd38709397a4e717d188c6 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20LLP%20SAMPLE%20-%201.png?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=2ee869897548db82fffaaa6dfe91b1a3 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20LLP%20SAMPLE%20-%201.png?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=168e4e9dc88d49e1eb901afa47a2425e 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20LLP%20SAMPLE%20-%201.png?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=77b09ee621a3377f9353bd9195b32319 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20LLP%20SAMPLE%20-%201.png?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=3f36e523c989c78564381d47528fbf17 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20LLP%20SAMPLE%20-%201.png?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=1e85676e8cd4c260efe0bb1c340eff0a 2500w" />
    </Frame>

    **Page 2**

    <Frame>
      <img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20LLP%20SAMPLE%20-%202.png?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=366eca5999f016cfad7a9b65f9eda637" alt="W-8 BEN-E LLP Sample Page 2" data-og-width="1824" width="1824" data-og-height="1440" height="1440" data-path="images/tax-forms/W8 - BEN - LLP SAMPLE - 2.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20LLP%20SAMPLE%20-%202.png?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=ae7e9526b617773b3f103ee3fbc2e207 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20LLP%20SAMPLE%20-%202.png?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=19b1fcca8fbd9142ab6fe819059be0f3 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20LLP%20SAMPLE%20-%202.png?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=b7b6cdb87a6651e6dfe8f0119bcb5f19 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20LLP%20SAMPLE%20-%202.png?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=5f4ec2c707578f035758b24c2603b342 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20LLP%20SAMPLE%20-%202.png?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=d9516fd043483dd15a2528703f60f24c 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20LLP%20SAMPLE%20-%202.png?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=b2bbd7d7bb51c6637df0c0b03ce36963 2500w" />
    </Frame>

    **Page 8**

    <Frame>
      <img src="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%208.png?fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=d896f1b5e2558ba0c794665efe917e0d" alt="W-8 BEN-E LLP Sample Page 8" data-og-width="1824" width="1824" data-og-height="1440" height="1440" data-path="images/tax-forms/W8 - BEN - PLC - SAMPLE - 8.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%208.png?w=280&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=6194284d2b6b955880c661475b39cb93 280w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%208.png?w=560&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=bc178d5a68a8f3ff8f8beb93e6700df5 560w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%208.png?w=840&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=ec7e20558d20b7665053b10096701ab1 840w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%208.png?w=1100&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=d4990e55a865bc3064c6efd44b706eae 1100w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%208.png?w=1650&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=383e5581376171334489aab52389cd4b 1650w, https://mintcdn.com/dodopayments/rsanoiHs7RZfcFW7/images/tax-forms/W8%20-%20BEN%20-%20PLC%20-%20SAMPLE%20-%208.png?w=2500&fit=max&auto=format&n=rsanoiHs7RZfcFW7&q=85&s=c3749eed5cdc5e42369d627c312312cc 2500w" />
    </Frame>
  </Accordion>
</AccordionGroup>

## Additional Information Requests

As part of our **ongoing monitoring**, our compliance team may request additional information from time to time.

These requests can be completed directly from the dashboard and **do not block payments or payouts**, but failure to submit them may trigger pauses in payouts/payments processing, further compliance reviews or account restrictions.

<Tip>
  For more details, refer to our [Review Monitoring Policy](/miscellaneous/review-monitoring-policy).
</Tip>

## Timeline & Support

* Typical verification time: **1–3 business days (excludes weekends and public holidays)**
* If additional review is needed, you will be notified via email and dashboard.
* For help, reach out to [support@dodopayments.com](mailto:support@dodopayments.com)

## Resubmission of Documents

If there are issues with the documents submitted during the onboarding process, the Dodo Payments Verification Team may request that you resubmit specific documents.

You can resubmit documents using the **resubmit** option in your dashboard.

### When Can You Resubmit Documents?

* **Missing or Incomplete Information**: If essential details such as identification numbers, business name, or other key data are missing.
* **Document Mismatch**: When the documents submitted do not match the business or personal information provided.
* **Unreadable or Expired Documents**: If the uploaded documents are unclear, illegible, or have expired.
* **Additional Clarification Needed**: If the verification team requires further documentation to clarify your identity or business information.

### How to Resubmit Documents

<Steps>
  <Step title="Check your dashboard">
    Check your Dodo Payments Dashboard for a resubmission request (you will also receive an email notification if resubmission is required).
  </Step>

  <Step title="Access the resubmit option">
    The verification team will enable the **Resubmit** option, allowing you to upload new documents.
  </Step>

  <Step title="Upload correct documents">
    Navigate to the **Verification Section** in the dashboard and upload the correct documents.
  </Step>

  <Step title="Submit for review">
    Submit the documents for review by clicking **Submit for Review**.
  </Step>
</Steps>

<CardGroup cols={2}>
  <Card title="Merchant Acceptance Policy" icon="shield-check" href="/miscellaneous/merchant-acceptance">
    Review our comprehensive acceptance standards, including supported and prohibited products, and ensure your business is eligible for onboarding.
  </Card>

  <Card title="Review Monitoring Policy" icon="magnifying-glass" href="/miscellaneous/review-monitoring-policy">
    Understand how ongoing compliance is monitored, learn about triggers for document review, and stay proactive with your account status.
  </Card>
</CardGroup>


